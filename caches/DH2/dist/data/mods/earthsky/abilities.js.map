{
  "version": 3,
  "sources": ["../../../../data/mods/earthsky/abilities.ts"],
  "sourcesContent": ["export const Abilities: {[abilityid: string]: ModdedAbilityData} = {\r\n\t//New Abilities\r\n\tagainstcurrent: {\r\n\t\tonBeforeTurn(pokemon){\r\n\t\t\tpokemon.addVolatile('nointerrupt');\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\t// this doesn't actually do anything because ModifyMove happens after the tracksTarget check\r\n\t\t\t// the actual implementation is in Battle#getTarget\r\n\t\t\tmove.tracksTarget = true;\r\n\t\t},\r\n\t\tname: \"Against Current\",\r\n\t\tdesc: \"This Pokemon's attacks cannot be interrupted once selected. The Pokemon will ignore sleep, freeze, flinch, Disable, Encore, Imprison, and PP drain to 0 inflicted earlier in the same turn, and bypass the checks for full paralysis, confusion, and attraction if inflicted earlier in the same turn. If given a Choice item earlier in the turn, the move locking will be ignored. Gravity and Heal Block will still prevent moves from executing. Additionally, this Pokemon's moves cannot be redirected to a different target by any effect.\",\r\n\t\tshortDesc: \"This Pokemon's attacks cannot be interrupted or redirected after selection.\",\r\n        flags: {},\r\n\t\trating: 1,\r\n\t\tnum: 1020,\r\n\t},\r\n\tbludgeon: {\r\n\t\tonBasePowerPriority: 23,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['bludg']) {\r\n\t\t\t\tthis.debug('Bludgeon boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Bludgeon\",\r\n\t\tdesc: \"This Pokemon's tail and hammer attacks have their power multiplied by 1.5.\",\r\n\t\tshortDesc: \"This Pokemon's tail and hammer attacks have 1.5x power.\",\r\n        flags: {},\r\n\t\trating: 2.5,\r\n\t\tnum: 1001,\r\n\t},\r\n\tcacophony: {\r\n\t\tonBasePowerPriority: 23,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['sound']) {\r\n\t\t\t\tthis.debug('Cacophony boost');\r\n\t\t\t\treturn this.chainModify([0x1333, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Cacophony\",\r\n\t\tdesc: \"This Pokemon's sound-based attacks have their power multiplied by 1.2.\",\r\n\t\tshortDesc: \"This Pokemon's sound-based attacks have 1.2x power.\",\r\n        flags: {},\r\n\t\trating: 3,\r\n\t\tnum: 1002,\r\n\t},\r\n\tcleanhouse: {\r\n\t\tonStart(source) {\r\n\t\t\tlet success = false;\r\n\t\t\tfor (const active of this.getAllActive()) {\r\n\t\t\t\tif (active.removeVolatile('substitute')) success = true;\r\n\t\t\t}\r\n\t\t\tconst removeAll = ['spikes', 'toxicspikes', 'stealthrock', 'stickyweb'];\r\n\t\t\tconst sides = [source.side, ...source.side.foeSidesWithConditions()];\r\n\t\t\tfor (const side of sides) {\r\n\t\t\t\tfor (const sideCondition of removeAll) {\r\n\t\t\t\t\tif (side.removeSideCondition(sideCondition)) {\r\n\t\t\t\t\t\tthis.add('-sideend', side, this.dex.conditions.get(sideCondition).name);\r\n\t\t\t\t\t\tsuccess = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (success){\r\n\t\t\t\tthis.add('-activate', source, 'ability: Clean House');\r\n\t\t\t\tthis.add('-activate', source, 'move: Tidy Up');\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Clean House\",\r\n\t\tshortDesc: \"On switch-in, removes hazards and substitutes.\",\r\n        flags: {},\r\n\t\trating: 3,\r\n\t\tnum: 1022,\r\n\t},\r\n\tdeepterror: {\r\n\t\tonFoeEmergencyExitPriority: 2,\r\n\t\tonFoeEmergencyExit(target, source) {\r\n\t\t\tif (!(source === this.effectState.target) || !this.canSwitch(target.side) || target.forceSwitchFlag || target.switchFlag) return;\r\n\t\t\tfor (const side of this.sides) {\r\n\t\t\t\tfor (const active of side.active) {\r\n\t\t\t\t\tactive.forceSwitchFlag = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttarget.forceSwitchFlag = true;\r\n\t\t\tthis.add('-activate', source, 'ability: Deep Terror');\r\n\t\t\tthis.add('-switchOut', target, 'ability: Deep Terror', '[of] ' + source);\r\n\t\t},\r\n\t\tname: \"Deep Terror\",\r\n\t\tdesc: \"When a Pokemon has more than 1/2 its maximum HP and damage from this Pokemon's attack brings it to 1/2 or less of its maximum HP, it is forced to switch out and be replaced with a random unfainted ally, assuming such an ally exists. This effect applies after all hits from a multi-hit move; This effect applies to both direct and indirect damage, except Curse and Substitute on use, Belly Drum, Pain Split, and confusion damage.\",\r\n\t\tshortDesc: \"If this Pokemon brings a foe under 50% HP, it scares them out.\",\r\n        flags: {},\r\n\t\trating: 2,\r\n\t\tnum: 1003,\r\n\t\tswitchOut: \"  [POKEMON] was scared off of the battlefield!\",\r\n\t},\r\n\tdisturbance: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tlet activated = false;\r\n\t\t\tfor (const target of pokemon.adjacentFoes()) {\r\n\t\t\t\tif (!activated) {\r\n\t\t\t\t\tthis.add('-ability', pokemon, 'Disturbance', 'boost');\r\n\t\t\t\t\tactivated = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.volatiles['substitute']) {\r\n\t\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.boost({spa: -1}, target, pokemon, null, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Disturbance\",\r\n\t\tdesc: \"On switch-in, this Pokemon lowers the Special Attack of opposing Pokemon by 1 stage. Pokemon with the Inner Focus, Oblivious, Own Tempo, or Scrappy Abilities and Pokemon behind a substitute are immune. This Ability triggers the Rattled Ability and a held Adrenaline Orb.\",\r\n\t\tshortDesc: \"On switch-in, this Pokemon lowers the Sp. Atk of opponents by 1 stage.\",\r\n        flags: {},\r\n\t\trating: 3.5,\r\n\t\tnum: 1026,\r\n\t},\r\n\theatsink: {\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (move.target !== \"self\" && (move.type === 'Fire' || (move.twoType && move.twoType === 'Fire'))) {\r\n\t\t\t\tif (!this.boost({spa: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Heat Sink');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFoeRedirectTarget(target, source, source2, move) {\r\n\t\t\tif (move.type !== 'Fire' || move.flags['pledgecombo']) return;\r\n\t\t\tconst redirectTarget = ['randomNormal', 'adjacentFoe'].includes(move.target) ? 'normal' : move.target;\r\n\t\t\tif (this.validTarget(this.effectState.target, source, redirectTarget)) {\r\n\t\t\t\tif (move.smartTarget) move.smartTarget = false;\r\n\t\t\t\tif (this.effectState.target !== target) {\r\n\t\t\t\t\tthis.add('-activate', this.effectState.target, 'ability: Heat Sink');\r\n\t\t\t\t}\r\n\t\t\t\treturn this.effectState.target;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Heat Sink\",\r\n\t\tdesc: \"This Pokemon is immune to Fire-type moves and raises its Special Attack by 1 stage when hit by a Fire-type move. If this Pokemon is not the target of a single-target Fire-type move used by another Pokemon, this Pokemon redirects that move to itself if it is within the range of that move. If multiple Pokemon could redirect with this Ability, it goes to the one with the highest Speed, or in the case of a tie to the one that has had this Ability active longer.\",\r\n\t\tshortDesc: \"This Pokemon draws Fire moves to itself to raise Sp. Atk by 1; Fire immunity.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 3,\r\n\t\tnum: 1024,\r\n\t},\r\n\ticebreaker: {\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (this.field.isWeather('snow')) {\r\n\t\t\t\tthis.debug('Ice Breaker boost');\r\n\t\t\t\treturn this.chainModify([0x14CD, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'snow') return false;\r\n\t\t},\r\n\t\tname: \"Ice Breaker\",\r\n\t\tdesc: \"If Snow is active, this Pokemon's attacks have their power multiplied by 1.3. This Pokemon takes no damage from Snow.\",\r\n\t\tshortDesc: \"This Pokemon's attacks have 1.3x power in snow; immunity to it.\",\r\n        flags: {},\r\n\t\trating: 2.5,\r\n\t\tnum: 1004,\r\n\t},\r\n\tirresistable: {\r\n\t\t// Implemented in moves.ts as edit to the attract condition\r\n\t\tname: \"Irresistable\",\r\n\t\tdesc: \"This Pokemon can cause other Pokemon to become attracted to it even if they are the same gender as it or are genderless. Pokemon with the Ability Oblivious are still immune to attraction.\",\r\n\t\tshortDesc: \"Attraction works regardless of gender. Oblivious is unaffected.\",\r\n        flags: {},\r\n\t\trating: 1.5,\r\n\t\tnum: 1005,\r\n\t},\r\n\tmistyshroud: {\r\n\t\tonStart(pokemon){\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (pokemon.volatiles['odorsleuth'] || pokemon.volatiles['evade'] || pokemon.volatiles['minimize'] || pokemon.volatiles['doubleteam'] || pokemon.volatiles['tangledfeet']){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(this.field.isTerrain(\"Misty Terrain\")){\r\n\t\t\t\tpokemon.addVolatile('evade', pokemon, 'mistyterrain');\r\n\t\t\t\tpokemon.addVolatile('evadestall');\r\n\t\t\t\tthis.add('-singleturn', pokemon, 'ability: Misty Shroud');\r\n\t\t\t} else if (this.effectState.source === 'mistyterrain'){\r\n\t\t\t\tpokemon.removeVolatile('evade');\r\n\t\t\t\tthis.add('-end', pokemon, 'ability: Misty Shroud');\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Misty Shroud\",\r\n\t\tdesc: \"If this Pokemon is sent out during Misty Terrain, or if Misty Terrain is set while it is on the field, it becomes Evasive for the rest of the turn. While Evasive, all moves used on this Pokemon will fail accuracy checks, unless they ignore the condition.\",\r\n\t\tshortDesc: \"This Pokemon becomes Evasive on the turn it encounters Misty Terrain.\",\r\n        flags: {},\r\n\t\trating: 1.5,\r\n\t\tnum: 1006,\r\n\t\tstart: \"  [POKEMON] disappeared into the mist!\",\r\n\t\tend: \"  [POKEMON] became visible again.\",\r\n\t},\r\n\tnightwalker: {\r\n\t\tonModifySpe(spe, pokemon) {\r\n\t\t\tif ('midnight' in this.field.pseudoWeather) {\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Night Walker\",\r\n\t\tshortDesc: \"If Midnight is active, this Pokemon's Speed is doubled.\",\r\n        flags: {},\r\n\t\trating: 2.5,\r\n\t\tnum: 1007,\r\n\t},\r\n\tpotency: {\r\n\t\tonModifyMove(move, source, target) {\r\n\t\t\tif (move.status === 'psn'){\r\n\t\t\t\tthis.debug(\"Potency upgrading poison to bad poison\");\r\n\t\t\t\tmove.status = 'tox';\r\n\t\t\t} else if(move.secondaries){\r\n\t\t\t\tfor (const secondary of move.secondaries){\r\n\t\t\t\t\tif(secondary.status === 'psn'){\r\n\t\t\t\t\t\tthis.debug(\"Potency upgrading poison to bad poison\");\r\n\t\t\t\t\t\tsecondary.status = 'tox';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Toxic Spikes upgrade implemented in Toxic Spikes\r\n\t\tname: \"Potency\",\r\n\t\tdesc: \"When this Pokemon poisons another, the poison is automatically upgraded to bad poison. If this Pokemon uses Toxic Spikes, it will set two layers so as to badly poison Pokemon affected.\",\r\n\t\tshortDesc: \"All poison inflicted by this Pokemon is turned into bad poison.\",\r\n        flags: {},\r\n\t\trating: 1,\r\n\t\tnum: 1008,\r\n\t},\r\n\tragemode: {\r\n\t\tonResidualOrder: 27,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif (!['Darmanitan-Galar', 'Darmanitan-Rage'].includes(pokemon.species.name) || pokemon.transformed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (pokemon.hp <= pokemon.maxhp / 2 && !['Rage'].includes(pokemon.species.forme)) {\r\n\t\t\t\tpokemon.addVolatile('ragemode');\r\n\t\t\t} else if (pokemon.hp > pokemon.maxhp / 2 && ['Rage'].includes(pokemon.species.forme)) {\r\n\t\t\t\tpokemon.addVolatile('ragemode'); // in case of base Darmanitan-Rage\r\n\t\t\t\tpokemon.removeVolatile('ragemode');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tif (!pokemon.volatiles['ragemode'] || !pokemon.hp) return;\r\n\t\t\tpokemon.transformed = false;\r\n\t\t\tdelete pokemon.volatiles['ragemode'];\r\n\t\t\tif (pokemon.species.baseSpecies === 'Darmanitan-Galar' && pokemon.species.battleOnly) {\r\n\t\t\t\tpokemon.formeChange(pokemon.species.battleOnly as string, this.effect, false, '[silent]');\r\n\t\t\t}\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tonStart(pokemon) {\r\n\t\t\t\tif (pokemon.species.id !== 'darmanitanrage') pokemon.formeChange('Darmanitan-Rage');\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tif (['Rage'].includes(pokemon.species.forme)) {\r\n\t\t\t\t\tpokemon.formeChange(pokemon.species.battleOnly as string);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\tname: \"Rage Mode\",\r\n\t\tdesc: \"If this Pokemon is a Darmanitan-Galar, it changes to Rage Mode if it has 1/2 or less of its maximum HP at the end of a turn. If Darmanitan's HP is above 1/2 of its maximum HP at the end of a turn, it changes back to Standard Mode. This Ability cannot be removed or suppressed.\",\r\n\t\tshortDesc: \"If Darmanitan-Galar, at end of turn changes Mode to Standard if > 1/2 max HP, else Rage.\",\r\n        flags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1},\r\n\t\trating: 0,\r\n\t\tnum: 1009,\r\n\t},\r\n\trelentless: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.effectState.lastMove = '';\r\n\t\t\tthis.effectState.numConsecutive = 0;\r\n\t\t},\r\n\t\tonTryMovePriority: -2,\r\n\t\tonTryMove(pokemon, target, move) {\r\n\t\t\tif (this.effectState.lastMove === move.id && pokemon.moveLastTurnResult) {\r\n\t\t\t\tthis.effectState.numConsecutive++;\r\n\t\t\t} else if (pokemon.volatiles['twoturnmove']) {\r\n\t\t\t\tif (this.effectState.lastMove !== move.id) {\r\n\t\t\t\t\tthis.effectState.numConsecutive = 1;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.effectState.numConsecutive++;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.effectState.numConsecutive = 0;\r\n\t\t\t}\r\n\t\t\tthis.effectState.lastMove = move.id;\r\n\t\t},\r\n\t\tonModifyDamage(damage, source, target, move) {\r\n\t\t\tconst dmgMod = [4096, 4915, 5734, 6553, 7372, 8192];\r\n\t\t\tconst numConsecutive = this.effectState.numConsecutive > 5 ? 5 : this.effectState.numConsecutive;\r\n\t\t\tthis.debug(`Current Relentless boost: ${dmgMod[numConsecutive]}/4096`);\r\n\t\t\treturn this.chainModify([dmgMod[numConsecutive], 4096]);\r\n\t\t},\r\n\t\tname: \"Relentless\",\r\n\t\tdesc: \"Damage of moves used on consecutive turns is increased. Max 2x after 5 turns.\",\r\n        flags: {},\r\n\t\tnum: 1025,\r\n\t\trating: 2,\r\n\t},\r\n\tslumberveil: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (move.flags['contact']) {\r\n\t\t\t\tif (this.randomChance(3, 10)) {\r\n\t\t\t\t\tsource.trySetStatus('slp', target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Slumber Veil\",\r\n\t\tshortDesc: \"30% chance a Pokemon making contact with this Pokemon will fall asleep.\",\r\n        flags: {},\r\n\t\trating: 2.5,\r\n\t\tnum: 1010,\r\n\t},\r\n\tstoneskin: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (!['Druddigon-Mega', 'Druddigon-Mega-Statue'].includes(pokemon.species.name)) return;\r\n\t\t\tif (pokemon.species.name !== 'Druddigon-Mega-Statue') pokemon.formeChange('Druddigon-Mega-Statue');\r\n\t\t},\r\n\t\tonBeforeMovePriority: 0.5,\r\n\t\tonBeforeMove(attacker, defender, move) {\r\n\t\t\tif (!['Druddigon-Mega', 'Druddigon-Mega-Statue'].includes(attacker.species.name)) return;\r\n\t\t\tconst targetForme = (move.category === 'Status' ? 'Druddigon-Mega-Statue' : 'Druddigon-Mega');\r\n\t\t\tif (attacker.species.name !== targetForme) attacker.formeChange(targetForme);\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif (!effect || !source || target.species.name !== 'Druddigon-Mega-Statue') return;\r\n\t\t\tif (effect.id === 'yawn') return;\r\n\t\t\tif (target !== source) {\r\n\t\t\t\tthis.debug('interrupting setStatus');\r\n\t\t\t\tif (effect.id === 'synchronize' || (effect.effectType === 'Move' && !effect.secondaries)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Stoneskin');\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryAddVolatile(status, target, source, effect) {\r\n\t\t\tif (!effect || !source || target.species.name !== 'Druddigon-Mega-Statue') return;\r\n\t\t\tif (['confusion', 'curse', 'leechseed', 'nightmare', 'saltcure', 'yawn'].includes(status.id) && target !== source) {\r\n\t\t\t\tif (effect.effectType === 'Move' && !effect.secondaries) this.add('-immune', target, '[from] ability: Stoneskin');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamage(damage, target, source, effect){\r\n\t\t\tif (target.species.name !== 'Druddigon-Mega-Statue') return;\r\n\t\t\tif(effect && ['spikes','stealthrock', 'firepledge'].includes(effect.id)) return false;\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (pokemon.species.name !== 'Druddigon-Mega-Statue') return;\r\n\t\t\tif (['sandstorm', 'snow'].includes(type)) return false;\r\n\t\t},\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (target.species.name !== 'Druddigon-Mega-Statue' || (source && target === source)) return;\r\n\t\t\tlet showMsg = false;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tdelete boost[i];\r\n\t\t\t\t\tshowMsg = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (showMsg && !(effect as ActiveMove).secondaries) {\r\n\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"[from] ability: Stoneskin\", \"[of] \" + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Stoneskin\",\r\n\t\tdesc: \"On switch-in and before using a non-attacking move, enters Statue Form. When in Statue Form, the Pokemon cannot be inflicted with statuses or have its stats dropped, and it will not take damage from field effects. Exits Statue Form when using an attacking move. This Ability has no effect if used by a Pokemon other than Mega Druddigon.\",\r\n\t\tshortDesc: \"Status move = Statue, attack = regular. When Statue, no status/stat drop/residual dmg.\",\r\n\t\tflags: {breakable: 1, cantsuppress: 1, failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\trating: 4,\r\n\t\tnum: 1023,\r\n\t},\r\n\tsouldrain: {\r\n\t\tonAfterMoveSecondarySelfPriority: -1,\r\n\t\tonAfterMoveSecondarySelf(source, target, move) {\r\n\t\t\tif (move.category !== 'Status' && !source.forceSwitchFlag) {\r\n\t\t\t\tthis.heal(move.totalDamage / 5, source);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Soul Drain\",\r\n\t\tdesc: \"The user recovers 1/5 of the damage, rounded half up, dealt by each of its attacks. The healing occurs even if an attack hits a substitute.\",\r\n\t\tshortDesc: \"After an attack, holder gains 1/5 of the damage in HP dealt to other Pokemon.\",\r\n\t\theal: \"  [POKEMON] restored a little HP with Soul Drain!\",\r\n        flags: {},\r\n\t\trating: 2,\r\n\t\tnum: 1011,\r\n\t},\r\n\tsupermassive: {\r\n\t\tonStart(source) {\r\n\t\t\tthis.add('-activate', source, 'ability: Supermassive');\r\n\t\t\tthis.field.addPseudoWeather('gravity');\r\n\t\t},\r\n\t\tname: \"Supermassive\",\r\n\t\tshortDesc: \"On switch-in, this Pokemon summons Gravity.\",\r\n        flags: {},\r\n\t\trating: 3.5,\r\n\t\tnum: 1012,\r\n\t},\r\n\ttactician: {\r\n\t\tonStart(pokemon){\r\n\t\t\tfor(const ally of pokemon.side.active){\r\n\t\t\t\tally.tacticianBoosted = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Actual effects implemented in scripts.ts as edits to pokemon.getMoves(), actions.runMove(), the various battle.targetting functions, and battle.modifyDamage()\r\n\t\tonAllySwitchIn(pokemon){\r\n\t\t\tpokemon.tacticianBoosted = true;\r\n\t\t},\r\n\t\tonAllySwitchOut(pokemon){\r\n\t\t\tdelete pokemon.tacticianBoosted;\r\n\t\t},\r\n\t\tonEnd(pokemon){\r\n\t\t\tfor(const ally of pokemon.side.active){\r\n\t\t\t\tdelete ally.tacticianBoosted;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Tactician\",\r\n\t\tdesc: \"All single-target moves used by this Pokemon and its allies can target non-adjacent Pokemon. When this Pokemon or its ally uses a move that hits multiple targets, the move does not have the 25% damage reduction.\",\r\n\t\tshortDesc: \"This Pokemon and its allies ignore spread damage drops and can target anyone.\",\r\n        flags: {},\r\n\t\trating: 2,\r\n\t\tnum: 1013,\r\n\t},\r\n\ttireless: {\r\n\t\tonChargeMove(pokemon, target, move) {\r\n\t\t\tthis.debug('tireless - remove charge turn for ' + move.id);\r\n\t\t\tthis.add('-activate', pokemon, 'ability: Tireless');\r\n\t\t\tthis.attrLastMove('[still]');\r\n\t\t\tthis.addMove('-anim', pokemon, move.name, target);\r\n\t\t\treturn false; // skip charge turn\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.volatiles['mustrecharge']) {\r\n\t\t\t\tpokemon.removeVolatile('mustrecharge');\r\n\t\t\t\tthis.debug('tireless - remove recharge');\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Tireless');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBeforeMovePriority: 11,\r\n\t\tonBeforeMove(pokemon) {\r\n\t\t\tif (pokemon.volatiles['mustrecharge']) {\r\n\t\t\t\tpokemon.removeVolatile('mustrecharge');\r\n\t\t\t\tthis.debug('tireless - failsafe remove recharge');\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Tireless\",\r\n\t\tdesc: \"When this Pokemon uses a move that must spend a turn charging, it executes on the first turn, after any effects are applied from the charge. When it uses a move that must spend a turn recharging, it does not need to recharge.\",\r\n\t\tshortDesc: \"This Pokemon's attacks skip charging and recharging turns.\",\r\n\t\tactivate: \"  [POKEMON] became energized immediately!\",\r\n        flags: {},\r\n\t\trating: 2,\r\n\t\tnum: 1014,\r\n\t},\r\n\ttradewinds: {\r\n\t\tonStart(source) {\r\n\t\t\tthis.add('-ability', source, 'Trade Winds');\r\n\t\t\tsource.side.addSideCondition('tailwind');\r\n\t\t},\r\n\t\tname: \"Trade Winds\",\r\n\t\tshortDesc: \"On switch-in, this Pokemon summons Tailwind.\",\r\n        flags: {},\r\n\t\trating: 4,\r\n\t\tnum: 1015,\r\n\t},\r\n\twarmonger: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tlet activated = false;\r\n\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\tif (!target || !pokemon.isAdjacent(target)) continue;\r\n\t\t\t\tif (!activated) {\r\n\t\t\t\t\tthis.add('-ability', pokemon, 'ability: Warmonger');\r\n\t\t\t\t\tactivated = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.volatiles['substitute']) {\r\n\t\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\ttarget.addVolatile('taunt');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Warmonger\",\r\n\t\tshortDesc: \"On switch-in, this Pokemon Taunts adjacent foes.\",\r\n        flags: {},\r\n\t\trating: 3.5,\r\n\t\tnum: 1016,\r\n\t\tactivate: \"  [POKEMON] is belligerent!\",\r\n\t},\r\n\tglyphicspell: {\r\n\t\tonSwitchIn(pokemon) {\r\n\t\t\tif(pokemon.species.baseSpecies === 'Unown' && pokemon.abilityState.unownType === 'C') pokemon.abilityState.switchingIn = true;\r\n\t\t},\r\n\t\tonPreStart(pokemon) {\r\n\t\t\tif(pokemon.species.baseSpecies === 'Unown'){\r\n\t\t\t\tif(!pokemon.abilityState.formeDecided){//Determines forme if it hasn't already.\r\n\t\t\t\t\tpokemon.abilityState.unownType = pokemon.species.forme;\r\n\t\t\t\t\twhile(pokemon.abilityState.unownType === 'Question'){ //?????: Randomly picks another form each time.\r\n\t\t\t\t\t\tpokemon.abilityState.unownType = this.dex.species.get(this.sample(pokemon.species.formeOrder)).forme;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pokemon.abilityState.unownType === pokemon.species.forme){ //Non-? formes only need to determine once.\r\n\t\t\t\t\t\tpokemon.abilityState.formeDecided = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(pokemon.abilityState.unownType === '') pokemon.abilityState.unownType = 'A'; //A is the default, this is purely for code legibility\r\n\t\t\t\t}\r\n\t\t\t\tif(pokemon.abilityState.unownType === 'F'){ //Fear: Unnerve\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Glyphic Spell');\r\n\t\t\t\t\tthis.add('-start', pokemon, 'Unnerve', pokemon.side.foe);\r\n\t\t\t\t\tpokemon.getAbility().onFoeTryEatItem = false;\r\n\t\t\t\t}\r\n\t\t\t\tif(pokemon.abilityState.unownType === 'N'){ //Negate: Neutralizing Gas\r\n\t\t\t\t\t//Main implementation is in scripts.ts as an edit to ignoringAbility()\r\n\t\t\t\t\tthis.add('-n', pokemon, 'ability: Glyphic Spell');\r\n\t\t\t\t\tpokemon.abilityState.ending = false;\r\n\t\t\t\t\tconst strongWeathers = ['desolateland', 'primordialsea', 'deltastream'];\r\n\t\t\t\t\tfor (const target of this.getAllActive()) {\r\n\t\t\t\t\t\tif (target.hasItem('Ability Shield')) {\r\n\t\t\t\t\t\t\tthis.add('-block', target, 'item: Ability Shield');\r\n\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.singleEvent('End', target.getAbility(), target.abilityState, target, pokemon, 'neutralizinggas');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonStart(pokemon){\r\n\t\t\tif(pokemon.species.baseSpecies === 'Unown'){\r\n\t\t\t\t//These variables are not needed for most of them, but the code considers one being defined in one case to apply to all cases, might as well put them here\r\n\t\t\t\tconst oppositeFoe = pokemon.oppositeFoe();\r\n\t\t\t\tlet activated = false;\r\n\t\t\t\tswitch(pokemon.abilityState.unownType){\r\n\t\t\t\t\tcase 'B': //Block: Ally protection\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tfor (const ally of pokemon.allies()) {\r\n\t\t\t\t\t\t\tally.addVolatile('protect');\r\n\t\t\t\t\t\t\tally.addVolatile('stall');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'C': //Copy: Imposter\r\n\t\t\t\t\t\tif (!pokemon.abilityState.switchingIn) return;\r\n\t\t\t\t\t\tif (oppositeFoe) {\r\n\t\t\t\t\t\t\tif(oppositeFoe.hasAbility('owntempo')){\r\n\t\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\t\t\tthis.add('-immune', oppositeFoe, '[from] ability: Own Tempo');\r\n\t\t\t\t\t\t\t\tthis.hint('Own Tempo blocks effects that steal or copy its attributes');\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tpokemon.transformInto(oppositeFoe, this.dex.abilities.get('glyphicspell'));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'D': //Darkness: Sets Midnight\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tthis.field.addPseudoWeather('midnight');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'F': //Fear: Attack/Sp. Attack/Speed -2 on foes\r\n\t\t\t\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\t\t\t\tif (!target) continue;\r\n\t\t\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (target.volatiles['substitute']) {\r\n\t\t\t\t\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.boost({atk: -2, spa: -2, spe: -2}, target, pokemon, null, true);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'G': //Grow: All stats +1\r\n\t\t\t\t\t\tthis.boost({atk: 1, def: 1, spa: 1, spd: 1, spe: 1}, pokemon);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'H': //Heal: Full Restore\r\n\t\t\t\t\t\tthis.add('-h', pokemon, 'ability: Glyphic Spell');\r\n\t\t\t\t\t\tthis.heal(pokemon.baseMaxhp, pokemon);\r\n\t\t\t\t\t\tpokemon.cureStatus();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'I': //Invert: Topsy-Turvy\r\n\t\t\t\t\t\tactivated = false;\r\n\t\t\t\t\t\tfor (const foe of pokemon.side.foe.active) {\r\n\t\t\t\t\t\t\tlet success = false;\r\n\t\t\t\t\t\t\tlet i: BoostName;\r\n\t\t\t\t\t\t\tfor (i in foe.boosts) {\r\n\t\t\t\t\t\t\t\tif (foe.boosts[i] === 0) continue;\r\n\t\t\t\t\t\t\t\tfoe.boosts[i] = -foe.boosts[i];\r\n\t\t\t\t\t\t\t\tsuccess = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(success){\r\n\t\t\t\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthis.add('-invertboost', foe, '[from] move: Topsy-Turvy');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'J': //Join: Pain Split, split all stats\r\n\t\t\t\t\t\tconst targetHP = oppositeFoe.getUndynamaxedHP();\r\n\t\t\t\t\t\tconst averagehp = Math.floor((targetHP + pokemon.hp) / 2) || 1;\r\n\t\t\t\t\t\tconst targetChange = targetHP - averagehp;\r\n\t\t\t\t\t\toppositeFoe.sethp(oppositeFoe.hp - targetChange);\r\n\t\t\t\t\t\tthis.add('-sethp', oppositeFoe, oppositeFoe.getHealth, '[from] move: Pain Split', '[silent]');\r\n\t\t\t\t\t\tpokemon.sethp(averagehp);\r\n\t\t\t\t\t\tthis.add('-sethp', pokemon, pokemon.getHealth, '[from] move: Pain Split', '[silent]');\r\n\t\t\t\t\t\tconst newatk = Math.floor((oppositeFoe.storedStats.atk + pokemon.storedStats.atk) / 2);\r\n\t\t\t\t\t\toppositeFoe.storedStats.atk = newatk;\r\n\t\t\t\t\t\tpokemon.storedStats.atk = newatk;\r\n\t\t\t\t\t\tconst newdef = Math.floor((oppositeFoe.storedStats.def + pokemon.storedStats.def) / 2);\r\n\t\t\t\t\t\toppositeFoe.storedStats.def = newdef;\r\n\t\t\t\t\t\tpokemon.storedStats.def = newdef;\r\n\t\t\t\t\t\tconst newspa = Math.floor((oppositeFoe.storedStats.spa + pokemon.storedStats.spa) / 2);\r\n\t\t\t\t\t\toppositeFoe.storedStats.spa = newspa;\r\n\t\t\t\t\t\tpokemon.storedStats.spa = newspa;\r\n\t\t\t\t\t\tconst newspd = Math.floor((oppositeFoe.storedStats.spd + pokemon.storedStats.spd) / 2);\r\n\t\t\t\t\t\toppositeFoe.storedStats.spd = newspd;\r\n\t\t\t\t\t\tpokemon.storedStats.spd = newspd;\r\n\t\t\t\t\t\tconst newspe = Math.floor((oppositeFoe.storedStats.spe + pokemon.storedStats.spe) / 2);\r\n\t\t\t\t\t\toppositeFoe.storedStats.spe = newspe;\r\n\t\t\t\t\t\tpokemon.storedStats.spe = newspe;\r\n\t\t\t\t\t\tthis.add('-j', pokemon, 'ability: Glyphic Spell', oppositeFoe);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'K': //Klepto: Steal direct foe's item, confiscate the rest\r\n\t\t\t\t\t\tif (!pokemon.item) {\r\n\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t\t\tconst yourItem = oppositeFoe.takeItem(pokemon);\r\n\t\t\t\t\t\t\tif (yourItem && this.singleEvent('TakeItem', yourItem, oppositeFoe.itemData, pokemon, oppositeFoe, pokemon.getAbility(), yourItem) && pokemon.setItem(yourItem)) {\r\n\t\t\t\t\t\t\t\tthis.add('-enditem', oppositeFoe, yourItem, '[silent]', '[from] move: Thief', '[of] ' + pokemon);\r\n\t\t\t\t\t\t\t\tthis.add('-item', pokemon, yourItem, '[from] move: Thief', '[of] ' + oppositeFoe);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\toppositeFoe.item = yourItem.id; // bypass setItem so we don't break choicelock or anything\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (const foe of pokemon.side.foe.active) {\r\n\t\t\t\t\t\t\tif (!foe) continue;\r\n\t\t\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tconst item = foe.takeItem(pokemon);\r\n\t\t\t\t\t\t\tif (item) {\r\n\t\t\t\t\t\t\t\tthis.add('-enditem', foe, item.name, '[from] move: Embargo', '[of] ' + pokemon);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'L': //Loop: Encores foes\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\t\t\t\tif (!target) continue;\r\n\t\t\t\t\t\t\ttarget.addVolatile('encore');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'M': //Mirror: Wonder Room\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tthis.field.addPseudoWeather('wonderroom');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'O': //Observe: Frisk, Forewarn, Miracle Eye\r\n\t\t\t\t\t\tpokemon.addVolatile('forewarn', pokemon, \"Glyphic Spell\");\r\n\t\t\t\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\t\t\t\tif (!target || target.fainted) continue;\r\n\t\t\t\t\t\t\tif (target.item) {\r\n\t\t\t\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Glyphic Spell');\r\n\t\t\t\t\t\t\t\tthis.add('-item', target, target.getItem().name, '[from] Frisk', '[of] ' + pokemon, '[identify]');\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpokemon.addVolatile('miracleeye');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'P': //Power: Sp. Attack to +6\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tthis.boost({spa: 12}, pokemon);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Q': //Quicken: Speed to +6\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tthis.boost({spe: 12}, pokemon);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'R': //Reverse: Trick Room\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tthis.field.addPseudoWeather('trickroom');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'S': //Seal: Apply Stasis, Heal Block, and Imprison\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\t\t\t\tif (!target || target.fainted) continue;\r\n\t\t\t\t\t\t\ttarget.addVolatile('stasis');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tpokemon.side.foe.addSideCondition('healblock');\r\n\t\t\t\t\t\tpokemon.addVolatile('imprison');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'T': //Turnabout: Rebound\r\n\t\t\t\t\t\tthis.add('-t', pokemon, 'ability: Glyphic Spell');\r\n\t\t\t\t\t\tpokemon.addVolatile('rebound');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'U': //Undo: Clears hazards, screens, weather, and terrain\r\n\t\t\t\t\t\tconst removeEffects = [\r\n\t\t\t\t\t\t\t'reflect', 'lightscreen', 'auroraveil', 'safeguard', 'mist', 'healblock', 'luckychant', 'spikes', 'toxicspikes', 'stealthrock', 'stickyweb',\r\n\t\t\t\t\t\t];\r\n\t\t\t\t\t\tfor (const condition of removeEffects) {\r\n\t\t\t\t\t\t\tif (pokemon.side.removeSideCondition(condition)) {\r\n\t\t\t\t\t\t\t\tthis.add('-sideend', pokemon.side, this.dex.conditions.get(condition).name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (pokemon.side.foe.removeSideCondition(condition)) {\r\n\t\t\t\t\t\t\t\tthis.add('-sideend', pokemon.side.foe, this.dex.conditions.get(condition).name);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.field.clearWeather();\r\n\t\t\t\t\t\tthis.field.clearTerrain();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'V': //Vanish: Forces out opposite foe\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\toppositeFoe.forceSwitchFlag = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'W': //Weird: Psychic Surge\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tthis.field.setTerrain('psychicterrain');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Y': //Yield: Quashes foes\r\n\t\t\t\t\t\tif (pokemon.side.active.length < 2) return; // fails in singles\r\n\t\t\t\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\t\t\t\tconst action = this.queue.willMove(target);\r\n\t\t\t\t\t\t\tif (!action) continue;\r\n\t\t\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\taction.order = 201;\r\n\t\t\t\t\t\t\tthis.add('-activate', target, 'Quash');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'Z': //Zero-G: Floating status on everyone\r\n\t\t\t\t\t\tif('gravity' in this.field.pseudoWeather){\r\n\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t\t\tthis.field.removePseudoWeather('gravity');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (const target of pokemon.side.active) {\r\n\t\t\t\t\t\t\tif (!target || target.fainted || !target.canFloat()) continue;\r\n\t\t\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttarget.addVolatile('magnetrise');\r\n\t\t\t\t\t\t\t//this.add('-start', target, 'Telekinesis');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\t\t\t\tif (!target || target.fainted || !target.canFloat()) continue;\r\n\t\t\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif(target.addVolatile('telekinesis')){\r\n\t\t\t\t\t\t\t\ttarget.volatiles['telekinesis'].duration = 5;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase '!': //!!!!! Primes itself for Explosion\r\n\t\t\t\t\t\tthis.add('-ex', pokemon, 'ability: Glyphic Spell');\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBeforeTurn(pokemon){\r\n\t\t\tif(pokemon.species.baseSpecies === 'Unown' && pokemon.abilityState.unownType === 'Y'){ //Yield: Quashes foes\r\n\t\t\t\tif(this.turn !== 1) return; //This only needs to be called if Unown is in on the first turn, because it will activate on switch-in otherwise.\r\n\t\t\t\tlet activated = false;\r\n\t\t\t\t//does NOT fail in Singles - Unown can move on the first turn\r\n\t\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\t\tconst action = this.queue.willMove(target);\r\n\t\t\t\t\tif (!action) continue;\r\n\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\taction.order = 201;\r\n\t\t\t\t\tthis.add('-activate', target, 'Quash');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFoeSwitchIn(target) {\r\n\t\t\tconst pokemon = this.effectState.target;\r\n\t\t\tif(pokemon.species.baseSpecies === 'Unown' && pokemon.abilityState.unownType === 'O'){ //Observe: Forewarn\r\n\t\t\t\tpokemon.addVolatile('forewarn', pokemon, \"Glyphic Spell\");\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyTypePriority: 99,\r\n\t\tonModifyType(move, source, target) {\r\n\t\t\tif(source.species.baseSpecies === 'Unown' && source.abilityState.unownType === 'A'){ //Adapt: Change source and HP type\r\n\t\t\t\tif (move.hasBounced) return;\r\n\t\t\t\tconst type = this.getBestEffectiveness(source, target);\r\n\t\t\t\tif (type && type !== '???' && source.getTypes().join() !== type) {\r\n\t\t\t\t\tthis.add('-ability', source, 'Glyphic Spell');\r\n\t\t\t\t\tsource.setType(type);\r\n\t\t\t\t\tsource.hpType = type;\r\n\t\t\t\t\tif(move.id === 'hiddenpower'){\r\n\t\t\t\t\t\tmove.onModifyType(move, source);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.add('-start', source, 'typechange', type);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif(target.species.baseSpecies === 'Unown' && target.abilityState.unownType === 'M'){ //Mirror: Magic Bounce\r\n\t\t\t\tif (target === source || move.hasBounced || !move.flags['reflectable']) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst newMove = this.dex.getActiveMove(move.id);\r\n\t\t\t\tnewMove.hasBounced = true;\r\n\t\t\t\tnewMove.pranksterBoosted = false;\r\n\t\t\t\tthis.actions.useMove(newMove, target, source);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryHitSide(target, source, move) {\r\n\t\t\tif(target.species.baseSpecies === 'Unown' && target.abilityState.unownType === 'M'){ //Mirror: Magic Bounce\r\n\t\t\t\tif (target.side === source.side || move.hasBounced || !move.flags['reflectable']) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst newMove = this.dex.getActiveMove(move.id);\r\n\t\t\t\tnewMove.hasBounced = true;\r\n\t\t\t\tnewMove.pranksterBoosted = false;\r\n\t\t\t\tthis.actions.useMove(newMove, target, source);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyPriority(priority, source, target, move) {\r\n\t\t\tif(source.species.baseSpecies === 'Unown' && source.abilityState.unownType === 'E'){ //Engage: +4 priority to first move\r\n\t\t\t\tif(source.activeMoveActions === 0 && priority < 4){\r\n\t\t\t\t\treturn 4;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMove(move, source, target) {\r\n\t\t\tif(source.species.baseSpecies === 'Unown'){\r\n\t\t\t\tif(source.abilityState.unownType === 'A'){ //Adapt: Adaptability\r\n\t\t\t\t\tmove.stab = 2;\r\n\t\t\t\t}\r\n\t\t\t\tif(source.abilityState.unownType === 'E'){ //Engage: Lots of boosts to first move\r\n\t\t\t\t\tif(source.activeMoveActions === 1){\r\n\t\t\t\t\t\tthis.debug('Glyphic Spell: Engage boosts');\r\n\t\t\t\t\t\tmove.accuracy = true;\r\n\t\t\t\t\t\tmove.willCrit = true;\r\n\t\t\t\t\t\tmove.infiltrates = true;\r\n\t\t\t\t\t\tmove.breaksProtect = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnyModifyBoost(boosts, pokemon) {\r\n\t\t\t//Negate: Unaware\r\n\t\t\tconst unawareUser = this.effectState.target;\r\n\t\t\tif(unawareUser.species.baseSpecies === 'Unown' && unawareUser.abilityState.unownType === 'N'){ \r\n\t\t\t\tif (unawareUser === pokemon) return;\r\n\t\t\t\tif (unawareUser === this.activePokemon && pokemon === this.activeTarget) {\r\n\t\t\t\t\tboosts['def'] = 0;\r\n\t\t\t\t\tboosts['spd'] = 0;\r\n\t\t\t\t\tboosts['evasion'] = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (pokemon === this.activePokemon && unawareUser === this.activeTarget) {\r\n\t\t\t\t\tboosts['atk'] = 0;\r\n\t\t\t\t\tboosts['def'] = 0;\r\n\t\t\t\t\tboosts['spa'] = 0;\r\n\t\t\t\t\tboosts['accuracy'] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, pokemon, source, move) {\r\n\t\t\tif(pokemon.species.baseSpecies === 'Unown'){\r\n\t\t\t\tif(pokemon.abilityState.unownType === 'X'){ //X-Out: Disable the move\r\n\t\t\t\tif(!pokemon.HP) return; //don't bother since the attacker is about to be Destiny Bonded lol\r\n\t\t\t\t\tif (!move.flags['futuremove'] && move.id !== 'struggle') {\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Glyphic Spell');\r\n\t\t\t\t\t\tif(source.volatiles['disable']) source.removeVolatile('disable');\r\n\t\t\t\t\t\tsource.addVolatile('disable', this.effectState.target);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(pokemon.abilityState.unownType === 'Exclamation'){//!!!!!: Blows up if it gets hit\r\n\t\t\t\t\tconst kaboom = this.dex.getMove('explosion');\r\n\t\t\t\t\tkaboom.willCrit = true;\r\n\t\t\t\t\tkaboom.ignoreImmunity = {'Normal': true,};\r\n\t\t\t\t\tthis.actions.useMove(kaboom, pokemon);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEntryHazard(pokemon) {\r\n\t\t\tif(pokemon.species.baseSpecies === 'Unown' && ['U','Z'].includes(pokemon.abilityState.unownType)){ //Undo and Zero-G: Ignores hazards because removing/floating\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif(target.species.baseSpecies === 'Unown' && target.abilityState.unownType === 'I'){ //Invert: Contrary\r\n\t\t\t\tlet i: BoostName;\r\n\t\t\t\tfor (i in boost) {\r\n\t\t\t\t\tboost[i]! *= -1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFaint(target, source, effect) {\r\n\t\t\tif(target.species.baseSpecies === 'Unown' && target.abilityState.unownType === 'X'){ //X-Out: Attacker faints too\r\n\t\t\t\tif (!source || !effect || target.isAlly(source)) return;\r\n\t\t\t\tif (effect.effectType === 'Move' && !effect.flags['futuremove']) {\r\n\t\t\t\t\tthis.add('-ability', target, 'Glyphic Spell');\r\n\t\t\t\t\tthis.add('-activate', target, 'move: Destiny Bond');\r\n\t\t\t\t\tsource.faint();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceAfterFaint(length, target, source, effect) {\r\n\t\t\tif(source.species.baseSpecies === 'Unown' && source.abilityState.unownType === 'G') //Grow: Stats up on KO\r\n\t\t\tif (effect && effect.effectType === 'Move') {\r\n\t\t\t\tthis.boost({atk: length, def: length, spa: length, spd: length, spe: length}, source);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidual(pokemon){\r\n\t\t\tif(pokemon.species.baseSpecies === 'Unown' && pokemon.abilityState.unownType === 'Exclamation'){ //!!!!!: Blows up at the end of the turn\r\n\t\t\t\tconst kaboom = this.dex.moves.get('explosion');\r\n\t\t\t\tkaboom.willCrit = true;\r\n\t\t\t\tkaboom.ignoreImmunity = {};\r\n\t\t\t\tkaboom.ignoreImmunity['Normal'] = true;\r\n\t\t\t\tthis.actions.useMove(kaboom, pokemon);\r\n\t\t\t}\r\n\t\t\tpokemon.abilityState.warnMoves = [];\r\n\t\t},\r\n\t\tname: \"Glyphic Spell\",\r\n\t\tdesc: `This Ability functions differently based on Unown's forme. Each letter is given a designated word (similar to the TCG) starting with that letter that grants effects while Unown is on the field. They are as follows:\r\n\t\tA - Adapt:\t\tWhen attacking a foe, Unown's type changes to the one with the greatest advantage over it. Its Hidden Power also changes to this type, and its STAB bonus is boosted to 2x.\r\n\t\tB - Block:\t\tProtects itself and allies from attacks this turn. Doesn't check the counter of consecutively-used protective moves to have a chance to fail, but it does increment it.\r\n\t\tC - Copy:\t\tImmediately transforms into its direct opponent.\r\n\t\tD - Darkness:\tSummons supernatural darkness for five turns.\r\n\t\tE - Engage:\t\tUnown's first attack gains +4 priority, skips its accuracy check, always scores a critical hit, breaks protective effects, and ignores enemy screens and substitutes.\r\n\t\tF - Fear:\t\tLowers the Attack, Sp. Attack, and Speed of all foes by two stages. The opposing team wil also be unable to eat Berries while Unown is in battle.\r\n\t\tG - Grow:\t\tUnown's Attack, Defense, Sp. Attack, Sp. Defense, and Speed are raised one stage. Every time Unown scores a KO, all of them raise again.\r\n\t\tH - Heal:\t\tFully restores Unown's HP and cures its status conditions.\r\n\t\tI - Invert:\t\tAll foes' stat changes are inverted, and stat changes made to Unown will have the opposite effect.\r\n\t\tJ - Join:\t\tThe HPs and non-HP stats of Unown and its direct opponent are added up and then split evenly between them.\r\n\t\tK - Klepto:\t\tSteals the item of its direct opponent, then removes all remaining foes' items.\r\n\t\tL - Loop:\t\tAll foes are inflicted with an Encore.\r\n\t\tM - Mirror:\t\tSummons Wonder Room for five turns. Grants Unown the effects of Magic Bounce.\r\n\t\tN - Negate:\t\tGrants Unown the effects of Neutralizing Gas and Unaware.\r\n\t\tO - Observe:\tReveals all foes' held items and each of their strongest moves. If the Pokemon uses its identified move on Unown, Unown will become Evasive to it. Grants Unown the effects of Miracle Eye.\r\n\t\tP - Power:\t\tRaises Unown's Sp. Attack to +6.\r\n\t\tQ - Quicken:\tRaises Unown's Speed to +6.\r\n\t\tR - Reverse:\tSummons Trick Room for five turns.\r\n\t\tS - Seal:\t\tPuts all foes into Stasis and applies Imprison and Heal Block to the enemy team.\r\n\t\tT - Turnabout:\tThe first attack to hit Unown this turn has its damage Rebound, using the same calculation as the move.\r\n\t\tU - Undo:\t\tClears all weather effects, terrains, entry hazards, side conditions, and screens.\r\n\t\tV - Vanish:\t\tForces Unown's direct opponent to switch out, ignoring substitutes.\r\n\t\tW - Weird:\t\tSummons Psychic Terrain for five turns.\r\n\t\tX - X-Out:\t\tIf Unown faints from an attack, the attacker also faints. If not, the move becomes disabled, releasing any previously disabled move.\r\n\t\tY - Yield:\t\tAll opponents are forced to move after Unown and its allies this turn.\r\n\t\tZ - Zero-G:\t\tApplies floating status to all Pok\u00E9mon for five turns, and lifted opponents will be unable to dodge moves. Removes Gravity.\r\n\t\t? - ?????:\t\tRandomly uses one of the other letters' effects each time.\r\n\t\t! - !!!!!:\t\tUnown primes itself. If it takes damage, or at the end of the turn if it doesn't, it uses Explosion, ignoring immunities to the move and always scoring critical hits.\r\n\t\tGlyphic Spell cannot be copied, swapped, suppressed, or overridden, and will not have any effect if acquired through Transform/Imposter or if hacked onto another Pokemon.`,\r\n\t\tshortDesc: \"Has a special effect depending on Unown's letter.\",\r\n        flags: {cantsuppress: 1, failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\trating: 3,\r\n\t\tnum: 1019,\r\n\t\tfitem: \"  [POKEMON] observed [TARGET]'s [ITEM]!\",\r\n\t\tfmove: \"  [TARGET]'s [MOVE] was observed!\",\r\n\t\th: \"  [POKEMON] was healed!\",\r\n\t\tn: \"  [POKEMON] is suppressing abilities!\",\r\n\t\tj: \"  [POKEMON] and [TARGET] had their stats shared!\",\r\n\t\tt: \"  [POKEMON] is preparing a counterattack!\",\r\n\t\tex: \"  [POKEMON] radiates a lot of power...\",\r\n\t},\r\n\t//Changed Abilities\r\n\tairlock: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'ability: Air Lock');\r\n\t\t\tconst strongWeathers = ['desolateland', 'primordialsea', 'deltastream'];\r\n\t\t\tif (!strongWeathers.includes(this.field.weather)){\r\n\t\t\t\tthis.field.clearWeather();\r\n\t\t\t}\r\n\t\t\tthis.effectState.switchingIn = false;\r\n\t\t},\r\n\t\tonAnySetWeather(target, source, weather) {\r\n\t\t\tconst strongWeathers = ['desolateland', 'primordialsea', 'deltastream'];\r\n\t\t\tif (!strongWeathers.includes(weather.id)){\r\n\t\t\t\tthis.add('-activate', this.effectState.target, 'ability: Air Lock');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsuppressWeather: true,\r\n\t\tname: \"Air Lock\",\r\n\t\tshortDesc: \"When this Pokemon is active, weather disappears and cannot be set.\",\r\n\t\tdesc: \"When this Pokemon is sent in, active weather is cleared. Using a weather-changing move will fail, and weather-changing Abilities will not work, except for Primordial Sea, Desolate Land, and Delta Stream.\",\r\n        flags: {},\r\n\t\trating: 2,\r\n\t\tnum: 76,\r\n\t\tstart: \"  The skies cleared above the battlefield.\",\r\n\t\tactivate: \"  The air remained calm!\",\r\n\t},\r\n\talchemy: {\r\n\t\tonSwitchIn(pokemon){\r\n\t\t\tthis.effectState.switchingIn = true;\r\n\t\t},\r\n\t\tonStart(pokemon){\r\n\t\t\tconst replaced = pokemon.side.faintedThisTurn;\r\n\t\t\tif (!this.effectState.switchingIn || !replaced) return;\r\n\t\t\tconst ability = replaced.getAbility();\r\n\t\t\tif (ability.flags['noreceiver'] || ability.id === 'noability') return;\r\n\t\t\tthis.add('-ability', this.effectState.target, ability, '[from] ability: Alchemy', '[of] ' + replaced);\r\n\t\t\tthis.effectState.target.setAbility(ability);\r\n\t\t\tthis.effectState.switchingIn = false;\r\n\t\t\t\r\n\t\t},\r\n\t\tname: \"Alchemy\",\r\n\t\tdesc: \"This Pokemon copies the Ability of an ally that fainted this turn. Abilities that cannot be copied are \\\"No Ability\\\", Alchemy, Comatose, Commander, Disguise, Flower Gift, Forecast, Glyphic Spell, Gulp Missile, Hunger Switch, Ice Face, Illusion, Imposter, Multitype, Neutralizing Gas, Power Construct, Rage Mode, Receiver, RKS System, Schooling, Shields Down, Stance Change, Trace, Wonder Guard, Zen Mode, and Zero to Hero.\",\r\n\t\tshortDesc: \"This Pokemon copies the Ability of an ally that fainted.\",\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1},\r\n\t\trating: 1,\r\n\t\tnum: 223,\r\n\t},\r\n\tanalytic: {\r\n\t\tinherit: true,\r\n\t\tonBasePower(basePower, pokemon, singleTarget, move) {\r\n\t\t\tif(['allAdjacent','allAdjacentFoes'].includes(move.target)){ //If multi-target move, first check all targets to determine if the boost happens.\r\n\t\t\t\tif(this.effectState.boosted === undefined){ //Only needs to check this once in the Pokemon's turn, since it applies either to everyone or no one.\r\n\t\t\t\t\tfor (const target of pokemon.getMoveTargets(move).targets) {\r\n\t\t\t\t\t\tif (target.newlySwitched || this.queue.willMove(target)) {\r\n\t\t\t\t\t\t\tthis.effectState.boosted = false;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.effectState.boosted = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (this.effectState.boosted === true) {\r\n\t\t\t\t\tthis.debug('Analytic boost');\r\n\t\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (!(singleTarget.newlySwitched || this.queue.willMove(singleTarget))) {\r\n\t\t\t\t\tthis.debug('Analytic boost');\r\n\t\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidualOrder: 1,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif(this.effectState.boosted !== undefined){\r\n\t\t\t\tthis.debug('Resetting Analytic tracker')\r\n\t\t\t\tthis.effectState.boosted = undefined;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"The power of this Pokemon's move is multiplied by 1.5 if it moves after all of the move's target. Does not affect Doom Desire and Future Sight.\",\r\n\t\tshortDesc: \"This Pokemon's attacks have 1.5x power if it moves after its targets.\",\r\n\t},\r\n\tanticipation: {\r\n\t\tinherit: true,\r\n\t\tonStart(pokemon) {\r\n\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\tif (!target || target.fainted) continue;\r\n\t\t\t\tfor (const moveSlot of target.moveSlots) {\r\n\t\t\t\t\tconst move = this.dex.moves.get(moveSlot.move);\r\n\t\t\t\t\tif (move.category === 'Status') continue;\r\n\t\t\t\t\tif(move.onModifyType) this.battle.singleEvent('ModifyType', move, null, pokemon, target);\r\n\t\t\t\t\tif (move.twoType){\r\n\t\t\t\t\t\tif (this.dex.getImmunity(move, pokemon) && this.dex.getEffectiveness(move, pokemon) >= 2) {\r\n\t\t\t\t\t\t\tthis.add('-ability', pokemon, 'ability: Anticipation');\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst moveType = move.type;\r\n\t\t\t\t\tif (this.dex.getImmunity(moveType, pokemon) && this.dex.getEffectiveness(moveType, pokemon) >= 2) {\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'ability: Anticipation');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFoeSwitchIn(target) {\r\n\t\t\tif(!this.turn) return; //only true on initial sending out at battle start\r\n\t\t\tconst pokemon = this.effectState.target;\r\n\t\t\tfor (const moveSlot of target.moveSlots) {\r\n\t\t\t\tconst move = this.dex.moves.get(moveSlot.move);\r\n\t\t\t\tif (move.category === 'Status') continue;\r\n\t\t\t\tif(move.onModifyType) this.battle.singleEvent('ModifyType', move, null, pokemon, target);\r\n\t\t\t\tif (move.twoType){\r\n\t\t\t\t\tif (this.dex.getImmunity(move, pokemon) && this.dex.getEffectiveness(move, pokemon) >= 2) {\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'ability: Anticipation');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconst moveType = move.type;\r\n\t\t\t\tif (this.dex.getImmunity(moveType, pokemon) && this.dex.getEffectiveness(moveType, pokemon) >= 2) {\r\n\t\t\t\t\tthis.add('-ability', pokemon, 'ability: Anticipation');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAccuracy(accuracy, target, source, move) {\r\n\t\t\tif (target !== this.effectState.target || typeof(accuracy) !== 'number' || move.ignoreEvasion) return;\r\n\t\t\tif(move.onModifyType) this.battle.singleEvent('ModifyType', move, null, pokemon, target);\r\n\t\t\tif (!move.twoType){\r\n\t\t\t\tif (this.dex.getImmunity(move, target) && this.dex.getEffectiveness(move, target) >= 2) {\r\n\t\t\t\t\tthis.add('-miss', source, target);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tconst moveType = move.type;\r\n\t\t\tif (this.dex.getImmunity(moveType, target) && this.dex.getEffectiveness(moveType, target) >= 2) {\r\n\t\t\t\tthis.add('-miss', source, target);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\trating: 3,\r\n\t\tdesc: \"On switch-in, this Pokemon is alerted if any opposing Pokemon has an attack that is doubly super effective on this Pokemon. If any such moves are used on this Pokemon, it will become Evasive to them. Counter, Metal Burst, and Mirror Coat count as attacking moves of their respective types. Bullfight, Hidden Power, Judgment, Multi-Attack, Natural Gift, Revelation Dance, Techno Blast, and Weather Ball use their determined types.\",\r\n\t\tshortDesc: \"Shudders to detect x4 effective moves and becomes Evasive to them.\",\r\n\t\tmiss: \"  [POKEMON] anticipated the attack and evaded!\",\r\n\t},\r\n\tarenatrap: {\r\n\t\tonStart(pokemon){\r\n\t\t\tthis.add('-activate', pokemon, 'ability: Arena Trap');\r\n\t\t\tthis.field.addPseudoWeather('arenatrapped');\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Arena Trap\",\r\n\t\trating: 4.5,\r\n\t\tnum: 71,\r\n\t\tdesc: \"Prevents all Pokemon from choosing to switch out next turn unless they are airborne, are holding a Shed Shell, have the Run Away or Arena Trap Abilities, or are a Ghost type.\",\r\n\t\tshortDesc: \"Prevents Pokemon from switching next turn unless they are airborne.\",\r\n\t},\r\n\tasoness: {\r\n\t\tnum: 266,\r\n\t\tname: \"As One S-S\",\r\n\t\tonPreStart(pokemon) {\r\n\t\t\tpokemon.abilityState.forme = (pokemon.species.forme === 'Ice' ? 'Ice' : 'Shadow');\r\n\t\t\tthis.add('-ability', pokemon, 'As One');\r\n\t\t\tthis.add('-ability', pokemon, 'Unnerve');\r\n\t\t\tthis.effectState.unnerved = true;\r\n\t\t},\r\n\t\tonWeather(target, source, effect) {\r\n\t\t\tif(target.abilityState.forme === 'Shadow') return;\r\n\t\t\tif (effect.id === 'snow') {\r\n\t\t\t\tthis.heal(target.baseMaxhp / 8);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif(pokemon.abilityState.forme === 'Shadow') return;\r\n\t\t\tif (type === 'snow') return false;\r\n\t\t},\r\n\t\tonDamagingHit(damage, pokemon, source, move) {\r\n\t\t\tif (pokemon.abilityState.forme === 'Ice' || source.volatiles['disable']) return;\r\n\t\t\tif (!move.flags['futuremove'] && move.id !== 'struggle') {\r\n\t\t\t\tif (this.randomChance(3, 10)) {\r\n\t\t\t\t\tsource.addVolatile('disable', this.effectState.target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd() {\r\n\t\t\tthis.effectState.unnerved = false;\r\n\t\t},\r\n\t\tonFoeTryEatItem() {\r\n\t\t\treturn !this.effectState.unnerved;\r\n\t\t},\r\n\t\tdesc: \"As One that combines the two standard Abilities of Calyrex (Unnerve) and its mount (Glastrier's Ice Body or Spectrier's Cursed Body.)\",\r\n\t\tshortDesc: \"Combines Unnerve and either Ice Body or Cursed Body.\",\r\n        flags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1},\r\n\t},\r\n\tasonesh: {\r\n\t\tnum: 266,\r\n\t\tname: \"As One S-H\",\r\n\t\tonPreStart(pokemon) {\r\n\t\t\tpokemon.abilityState.forme = (pokemon.species.forme === 'Ice' ? 'Ice' : 'Shadow');\r\n\t\t\tthis.add('-ability', pokemon, 'As One');\r\n\t\t\tthis.add('-ability', pokemon, 'Unnerve');\r\n\t\t\tthis.effectState.unnerved = true;\r\n\t\t},\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(basePower, pokemon, defender, move) {\r\n\t\t\tif(pokemon.abilityState.forme === 'Shadow') return;\r\n\t\t\tif (this.field.isWeather('snow')) {\r\n\t\t\t\tthis.debug('Ice Breaker boost');\r\n\t\t\t\treturn this.chainModify([0x14CD, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAfterMoveSecondarySelfPriority: -1,\r\n\t\tonAfterMoveSecondarySelf(source, target, move) {\r\n\t\t\tif(source.abilityState.forme === 'Ice') return;\r\n\t\t\tif (move.category !== 'Status' && !source.forceSwitchFlag) {\r\n\t\t\t\tthis.heal(move.totalDamage / 5, source);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif(pokemon.abilityState.forme === 'Shadow') return;\r\n\t\t\tif (type === 'snow') return false;\r\n\t\t},\r\n\t\tonEnd() {\r\n\t\t\tthis.effectState.unnerved = false;\r\n\t\t},\r\n\t\tonFoeTryEatItem() {\r\n\t\t\treturn !this.effectState.unnerved;\r\n\t\t},\r\n\t\tdesc: \"As One that combines the standard Ability of Calyrex (Unnerve) and Hidden Ability of its mount (Glastrier's Ice Breaker or Spectrier's Soul Drain).\",\r\n\t\tshortDesc: \"Combines Unnerve and either Ice Breaker or Soul Drain.\",\r\n        flags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1},\r\n\t},\r\n\tasonehs: {\r\n\t\tnum: 267,\r\n\t\tname: \"As One H-S\",\r\n\t\tonPreStart(pokemon) {\r\n\t\t\tpokemon.abilityState.forme = (pokemon.species.forme === 'Ice' ? 'Ice' : 'Shadow');\r\n\t\t\tthis.add('-ability', pokemon, 'As One');\r\n\t\t},\r\n\t\tonFoeTryMove(source, target, move) {\r\n\t\t\tif (move.target === 'foeSide' || (move.target === 'all' &&  move.id !== 'perishsong')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst dazzlingHolder = this.effectState.target;\r\n\t\t\tif ((target.side === dazzlingHolder.side || move.target === 'all') && move.priority > 0.1) {\r\n\t\t\t\tthis.attrLastMove('[still]');\r\n\t\t\t\tthis.add('cant', dazzlingHolder, 'ability: Majesty', move, '[of] ' + source);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonWeather(target, source, effect) {\r\n\t\t\tif(target.abilityState.forme === 'Shadow') return;\r\n\t\t\tif (effect.id === 'snow') {\r\n\t\t\t\tthis.heal(target.baseMaxhp / 8);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif(pokemon.abilityState.forme === 'Shadow') return;\r\n\t\t\tif (type === 'snow') return false;\r\n\t\t},\r\n\t\tonDamagingHit(damage, pokemon, source, move) {\r\n\t\t\tif (pokemon.abilityState.forme === 'Ice' || source.volatiles['disable']) return;\r\n\t\t\tif (!move.flags['futuremove'] && move.id !== 'struggle') {\r\n\t\t\t\tif (this.randomChance(3, 10)) {\r\n\t\t\t\t\tsource.addVolatile('disable', this.effectState.target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"As One that combines the Hidden Ability of Calyrex (Majesty) and standard Ability of its mount (Glastrier's Ice Body or Spectrier's Cursed Body).\",\r\n\t\tshortDesc: \"Combines Majesty and either Ice Body or Cursed Body.\",\r\n        flags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1},\r\n\t},\r\n\tasonehh: {\r\n\t\tnum: 267,\r\n\t\tname: \"As One H-H\",\r\n\t\tonPreStart(pokemon) {\r\n\t\t\tpokemon.abilityState.forme = (pokemon.species.forme === 'Ice' ? 'Ice' : 'Shadow');\r\n\t\t\tthis.add('-ability', pokemon, 'As One');\r\n\t\t},\r\n\t\tonFoeTryMove(source, target, move) {\r\n\t\t\tif (move.target === 'foeSide' || (move.target === 'all' &&  move.id !== 'perishsong')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst dazzlingHolder = this.effectState.target;\r\n\t\t\tif ((target.side === dazzlingHolder.side || move.target === 'all') && move.priority > 0.1) {\r\n\t\t\t\tthis.attrLastMove('[still]');\r\n\t\t\t\tthis.add('cant', dazzlingHolder, 'ability: Majesty', move, '[of] ' + source);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(basePower, pokemon, defender, move) {\r\n\t\t\tif(pokemon.abilityState.forme === 'Shadow') return;\r\n\t\t\tif (this.field.isWeather('snow')) {\r\n\t\t\t\tthis.debug('Ice Breaker boost');\r\n\t\t\t\treturn this.chainModify([0x14CD, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAfterMoveSecondarySelfPriority: -1,\r\n\t\tonAfterMoveSecondarySelf(source, target, move) {\r\n\t\t\tif(source.abilityState.forme === 'Ice') return;\r\n\t\t\tif (move.category !== 'Status' && !source.forceSwitchFlag) {\r\n\t\t\t\tthis.heal(move.totalDamage / 5, source);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif(pokemon.abilityState.forme === 'Shadow') return;\r\n\t\t\tif (type === 'snow') return false;\r\n\t\t},\r\n\t\tdesc: \"As One that combines the two Hidden Abilities of Calyrex (Majesty) and its mount (Glastrier's Ice Breaker or Spectrier's Soul Drain).\",\r\n\t\tshortDesc: \"Combines Majesty and either Ice Breaker or Soul Drain.\",\r\n        flags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1},\r\n\t},\r\n\tberserk: {\r\n\t\tinherit: true,\r\n\t\tonAfterMoveSecondary(target, source, move) {\r\n\t\t\tif (!source || source === target || !target.hp || !move.totalDamage) return;\r\n\t\t\tconst lastAttackedBy = target.getLastAttackedBy();\r\n\t\t\tif (!lastAttackedBy) return;\r\n\t\t\tconst damage = move.multihit ? move.totalDamage : lastAttackedBy.damage;\r\n\t\t\tif (target.hp <= target.maxhp / 2 && target.hp + damage > target.maxhp / 2) {\r\n\t\t\t\tthis.boost({atk: 1, spa: 1, spe: 1});\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"When this Pokemon has more than 1/2 its maximum HP and takes damage from an attack bringing it to 1/2 or less of its maximum HP, its Attack, Special Attack, and Speed are raised by 1 stage. This effect applies after all hits from a multi-hit move.\",\r\n\t\tshortDesc: \"This Pokemon's Atk, Sp. Atk, Speed +1 at <1/2 max HP from an attack.\",\r\n\t},\r\n\tbigpecks: {\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target !== source && boost.def && boost.def < 0) {\r\n\t\t\t\tthis.boost({def: -boost.def}, target, target, null, false, true);\r\n\t\t\t\tdelete boost.def;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Big Pecks\",\r\n\t\tdesc: \"If another Pokemon tries to lower this Pokemon's Defense stat stage, it raises by that amount instead.\",\r\n\t\tshortDesc: \"If Defense is attempted to be lowered by others, raises by that amount instead.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 1.5,\r\n\t\tnum: 145,\r\n\t},\r\n\tclimatebreak: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'ability: Climate Break');\r\n\t\t\tthis.field.clearTerrain();\r\n\t\t\tthis.effectState.switchingIn = false;\r\n\t\t},\r\n\t\tonAnyTryPrimaryHit(target, source, move) {\r\n\t\t\tif (target === source || move.category === 'Status') return;\r\n\t\t\tmove.hasAuraBreak = true;\r\n\t\t},\r\n\t\tonAnySetTerrain(target, source, terrain) {\r\n\t\t\tthis.add('-ability', pokemon, 'ability: Climate Break');\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tsuppressTerrain: true,\r\n\t\tname: \"Climate Break\",\r\n\t\tdesc: \"This Pokemon clears terrain from the field on switch-in. While this Pokemon is active, terrain cannot be set, and the effects of the Dark Aura, Fairy Aura, and Power Aura Abilities are negated.\",\r\n\t\tshortDesc: \"While this Pokemon is active, terrain disappears and Aura Abilities are negated.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 188,\r\n\t\tstart: \"  [POKEMON] is regulating the climate of the battlefield!\",\r\n\t\tactivate: \"  The terrain remained the same!\",\r\n\t},\r\n\tcloudnine: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'ability: Cloud Nine');\r\n\t\t},\r\n\t\tonAnySetWeather(target, source, weather) {\r\n\t\t\tif(this.effectState.target.beingCalledBack) return; //Don't suppress weather being resumed as it's leaving\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tlet returningWeather = '';\r\n\t\t\tconst everyone = this.getAllActive();\r\n\t\t\tthis.speedSort(everyone, (a, b) => b.speed - a.speed);\r\n\t\t\tfor (const target of everyone) {\r\n\t\t\t\tif (target.hasAbility('desolateland')) {\r\n\t\t\t\t\treturningWeather = 'desolateland';\r\n\t\t\t\t} else if (target.hasAbility('primordialsea')) {\r\n\t\t\t\t\treturningWeather = 'primordialsea';\r\n\t\t\t\t} else if (target.hasAbility('deltastream')) {\r\n\t\t\t\t\treturningWeather = 'deltastream';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(returningWeather) this.field.setWeather(returningWeather);\r\n\t\t},\r\n\t\tsuppressWeather: true,\r\n\t\tname: \"Cloud Nine\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 13,\r\n\t},\r\n\tcolorchange: {\r\n\t\tinherit: true,\r\n\t\tonAfterMoveSecondary(target, source, move) {\r\n\t\t\tif (!target.hp || !target.isActive || move.effectType !== 'Move' || move.category === 'Status') return;\r\n\t\t\tconst type = this.getBestEffectiveness(target, (move.twoType ? [move.type, move.twoType] : move.type), true);\r\n\t\t\tif (target.getTypes().join() !== type) {\r\n\t\t\t\tif (type === '???' || !target.setType(type)) return false;\r\n\t\t\t\tthis.add('-start', target, 'typechange', type, '[from] ability: Color Change');\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"After being hit by a move, the user's typing changes to the type that has the best advantage over the move's type, after modifications. It will prioritize any type that is immune to the move, followed by types that are doubly resistant, then normally resistant, then neutral to the move. If multiple types are possible after any of these choices, it will prioritize types that are super effective against that type. If multiple types are still possible, it will prioritize types matching any of the user's damaging moves. Fails if the target has not made a move, if the user cannot change its type, or if this move would only be able to select the user's current type.\",\r\n\t\tshortDesc: \"This Pokemon's type changes to the type most advantageous against a move it's hit by.\",\r\n\t},\r\n\tcommander: {\r\n\t\tinherit: true,\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.baseSpecies.baseSpecies !== 'Tatsugiri') {\r\n\t\t\t\t// Handle any edge cases\r\n\t\t\t\tif (pokemon.getVolatile('commanding')) pokemon.removeVolatile('commanding');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfor(const ally of pokemon.adjacentAllies()){\r\n\t\t\t\tif(ally.baseSpecies.baseSpecies !== 'Dondozo') continue;\r\n\t\t\t\tif (!pokemon.getVolatile('commanding')) {\r\n\t\t\t\t\t// If Dondozo already was commanded this fails\r\n\t\t\t\t\tif (ally.getVolatile('commanded')) return;\r\n\t\t\t\t\t// Cancel all actions this turn for pokemon if applicable\r\n\t\t\t\t\tthis.queue.cancelAction(pokemon);\r\n\t\t\t\t\t// Add volatiles to both pokemon\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Commander');\r\n\t\t\t\t\tpokemon.addVolatile('commanding', ally);\r\n\t\t\t\t\tally.addVolatile('commanded', pokemon);\r\n\t\t\t\t\t// Continued in conditions.ts in the volatiles\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"If this Pokemon is a Tatsugiri and a Dondozo is an active ally, this Pokemon goes into the Dondozo's mouth. The Dondozo has its Attack, Special Attack, Speed, Defense, and Special Defense raised by 2 stages. During the effect, this Pokemon cannot select an action, and it is treated as an invalid target for other moves, causing them to redirect, fail, or miss. This Pokemon still takes indirect damage during the effect; if it faints, the effect ends, and Dondozo's stats will be reduced by 2 stages. If the Dondozo switches out or faints during the effect, this Pokemon regains the ability to select an action on its next turn.\",\r\n\t},\r\n\tcorrosion: {\r\n\t\tinherit: true,\r\n\t\tonModifyMovePriority: -5,\r\n\t\tonModifyMove(move) {\r\n\t\t\tif (!move.ignoreImmunity) move.ignoreImmunity = {};\r\n\t\t\tif (move.ignoreImmunity !== true) {\r\n\t\t\t\tmove.ignoreImmunity['Poison'] = true;\r\n\t\t\t\tmove.ignoreImmunity['psn'] = true;\r\n\t\t\t\tmove.ignoreImmunity['tox'] = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Self-poison prevention implemented in scripts.ts as an edit to setStatus in pokemon.ts.\r\n\t\trating: 3,\r\n\t\tdesc: \"This Pokemon can hit Steel types with Poison-type moves. It can also poison or badly poison other Pokemon regardless of their typing.\",\r\n\t\tshortDesc: \"Poison moves hit Steel and moves can poison Poison and Steel types.\",\r\n\t},\r\n\tcostar: {\r\n\t\tinherit: true,\r\n\t\tname: \"Co-Star\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tlet activated = false;\r\n\t\t\tfor(const ally of pokemon.adjacentAllies()){\r\n\t\t\t\tif (ally.fainted) return;\r\n\t\t\t\tif(ally.hasAbility('owntempo')){\r\n\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Co-Star');\r\n\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.add('-activate', ally, '[from] ability: Own Tempo');\r\n\t\t\t\t\tthis.hint('Own Tempo blocks effects that steal or copy its moves');\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet i: BoostID;\r\n\t\t\t\tfor (i in ally.boosts) {\r\n\t\t\t\t\tpokemon.boosts[i] = ally.boosts[i];\r\n\t\t\t\t}\r\n\t\t\t\tif(!activated){\r\n\t\t\t\t\tthis.add('activate', pokemon, 'ability: Co-Star');\r\n\t\t\t\t\tactivated = true;\r\n\t\t\t\t}\r\n\t\t\t\tthis.add('-copyboost', pokemon, ally);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshortDesc: \"On switch-in, this Pokemon copies all of its allies' stat stage changes.\",\r\n\t\tdesc: \"On switch-in, this Pokemon copies all of its adjacent allies' stat stage changes, unless that ally has Own Tempo.\",\r\n\t},\r\n\tdamp: {\r\n\t\tinherit: true,\r\n\t\tonAnyTryMove(target, source, effect) {\r\n\t\t\tif (['eggbomb', 'explosion', 'mindblown', 'napalm', 'searingshot', 'selfdestruct', 'shelltrap'].includes(effect.id)) {\r\n\t\t\t\tthis.attrLastMove('[still]');\r\n\t\t\t\tthis.add('cant', this.effectState.target, 'ability: Damp', effect, '[of] ' + target);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"While this Pokemon is active, Egg Bomb, Explosion, Mind Blown, Napalm, Searing Shot, Self-Destruct, Shell Trap, and the Aftermath Ability are prevented from having an effect.\",\r\n\t\tshortDesc: \"Prevents explosion-based moves and Abilities while this Pokemon is active.\",\r\n\t},\r\n\tdauntlessshield: {\r\n\t\tinherit: true, //woo, two lines of code since I override the onStart\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.hp > pokemon.maxhp / 2) return;\r\n\t\t\tif (this.boost({def: 1, spd: 1}, pokemon)) {\r\n\t\t\t\tthis.effectState.shieldBoost = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAfterMoveSecondary(pokemon, source, move) {\r\n\t\t\tif (this.effectState.shieldBoost || pokemon.hp > pokemon.maxhp / 2) return;\r\n\t\t\tif (this.boost({def: 1, spd: 1}, pokemon)) {\r\n\t\t\t\tthis.effectState.shieldBoost = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidualOrder: -99,\r\n\t\tonResidual(pokemon, source, move) {\r\n\t\t\tif (this.effectState.shieldBoost || pokemon.hp > pokemon.maxhp / 2) return;\r\n\t\t\tif (this.boost({def: 1, spd: 1}, pokemon)) {\r\n\t\t\t\tthis.effectState.shieldBoost = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete this.effectState.shieldBoost;\r\n\t\t},\r\n\t\tdesc: \"When this Pokemon switches in at or drops below 1/2 of its max HP, its Defense and Sp. Defense are raised one stage. This effect can only happen once per switch-in.\",\r\n\t\tshortDesc: \"When below half health, boosts Defense and Sp. Def by 1 stage. Once per switch-in.\",\r\n\t},\r\n\tdefeatist: {\r\n\t\tinherit: true,\r\n\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\tif (pokemon.hp <= pokemon.maxhp / 2) {\r\n\t\t\t\treturn this.chainModify([0x0AAB,0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpA(atk, pokemon) {\r\n\t\t\tif (pokemon.hp <= pokemon.maxhp / 2) {\r\n\t\t\t\treturn this.chainModify([0x0AAB,0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"While this Pokemon has 1/2 or less of its maximum HP, its Attack and Special Attack are reduced by 1/3.\",\r\n\t\tshortDesc: \"When this Pokemon has 1/2 or less of its max HP, Atk and Sp. Atk are reduced by 1/3.\",\r\n\t},\r\n\tdryskin: {\r\n\t\tinherit: true,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && (move.type === 'Water' || (move.twoType && move.twoType === 'Water'))) {\r\n\t\t\t\tif (!this.heal(target.baseMaxhp / 4)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Dry Skin');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFoeBasePowerPriority: 17,\r\n\t\tonFoeBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (this.effectState.target !== defender) return;\r\n\t\t\tif ((move.type === 'Fire' || (move.twoType && move.twoType === 'Fire'))) {\r\n\t\t\t\treturn this.chainModify(1.25);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonWeather(target, source, effect) {\r\n\t\t\tif (effect.id === 'raindance' || effect.id === 'primordialsea') {\r\n\t\t\t\tthis.heal(target.baseMaxhp / 16);\r\n\t\t\t} else if (effect.id === 'sunnyday' || effect.id === 'desolateland') {\r\n\t\t\t\tthis.damage(target.baseMaxhp / 16, target, target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"This Pokemon is immune to Water-type moves and restores 1/4 of its maximum HP, rounded down, when hit by a Water-type move. The power of Fire-type moves is multiplied by 1.25 when used on this Pokemon. At the end of each turn, this Pokemon restores 1/16 of its maximum HP, rounded down, if the weather is Rain Dance, and loses 1/16 of its maximum HP, rounded down, if the weather is Sunny Day. The weather effects are prevented if this Pokemon is holding a Utility Umbrella.\",\r\n\t\tshortDesc: \"This Pokemon is healed 1/4 by Water, 1/16 by Rain; is hurt 1.25x by Fire, 1/16 by Sun.\",\r\n\t},\r\n\tembodyaspect: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.hp > pokemon.maxhp / 2) return;\r\n\t\t\tif (this.boost({def: 1, spd: 1}, pokemon)) {\r\n\t\t\t\tthis.effectState.embodyBoost = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAfterMoveSecondary(pokemon, source, move) {\r\n\t\t\tif(pokemon.baseSpecies !== \"Ogerpon\" || this.effectState.embodyBoost || pokemon.hp > pokemon.maxhp / 2) return;\r\n\t\t\tswitch(pokemon.forme){\r\n\t\t\tcase \"Wellspring\":\r\n\t\t\t\tif (this.boost({spd: 1}, pokemon)) {\r\n\t\t\t\t\tthis.effectState.embodyBoost = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Hearthflame\":\r\n\t\t\t\tif (this.boost({atk: 1}, pokemon)) {\r\n\t\t\t\t\tthis.effectState.embodyBoost = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Cornerstone\":\r\n\t\t\t\tif (this.boost({def: 1}, pokemon)) {\r\n\t\t\t\t\tthis.effectState.embodyBoost = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tif (this.boost({spe: 1}, pokemon)) {\r\n\t\t\t\t\tthis.effectState.embodyBoost = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidualOrder: -99,\r\n\t\tonResidual(pokemon, source, move) {\r\n\t\t\tif(pokemon.baseSpecies !== \"Ogerpon\" || this.effectState.embodyBoost || pokemon.hp > pokemon.maxhp / 2) return;\r\n\t\t\tswitch(pokemon.forme){\r\n\t\t\tcase \"Wellspring\":\r\n\t\t\t\tif (this.boost({spd: 1}, pokemon)) {\r\n\t\t\t\t\tthis.effectState.embodyBoost = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Hearthflame\":\r\n\t\t\t\tif (this.boost({atk: 1}, pokemon)) {\r\n\t\t\t\t\tthis.effectState.embodyBoost = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Cornerstone\":\r\n\t\t\t\tif (this.boost({def: 1}, pokemon)) {\r\n\t\t\t\t\tthis.effectState.embodyBoost = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tif (this.boost({spe: 1}, pokemon)) {\r\n\t\t\t\t\tthis.effectState.embodyBoost = true;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete this.effectState.embodyBoost;\r\n\t\t},\r\n\t\tname: \"Embody Aspect\",\r\n\t\tdesc: \"If this Pokemon is Ogerpon and switches in at or drops below 1/2 of its max HP, raises a stat one stage based on its held Mask: Teal Mask raises Speed, Wellspring Mask raises Special Defense, Hearthstone Mask raises Attack, and Cornerstone Mask raises Defense. This effect can only happen once per switch-in.\",\r\n\t\tshortDesc: \"Ogerpon: Below half health, +1 to a stat based on Mask. Once per switch-in.\",\r\n        flags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\trating: 3.5,\r\n\t\tnum: 301,\r\n\t},\r\n\tflareboost: {\r\n\t\tname: \"Flare Boost\",\r\n\t\trating: 3,\r\n\t\tnum: 138,\r\n\t\tonModifySpA(atk, pokemon) {\r\n\t\t\tif (pokemon.hp <= pokemon.maxhp / 2) {\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"If this Pokemon is burned, its Special Attack is multiplied by 2.\",\r\n\t\tshortDesc: \"If this Pokemon is burned, its Sp. Atk is 2x.\",\r\n\t},\r\n\tflashfire: {\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (move.target !== \"self\" && (move.type === 'Fire' || (move.twoType && move.twoType === 'Fire'))) {\r\n\t\t\t\tmove.accuracy = true;\r\n\t\t\t\tif (!target.addVolatile('preheat')) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Flash Fire');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tpokemon.removeVolatile('preheat');\r\n\t\t},\r\n\t\tname: \"Flash Fire\",\r\n\t\tdesc: \"This Pokemon is immune to Fire-type moves and gains the Preheat effect when hit by a Fire-type move. If this Pokemon is frozen, it cannot be defrosted by Fire-type attacks.\",\r\n\t\tshortDesc: \"This Pokemon gains the Preheat effect if hit by one Fire move; Fire immunity.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 3.5,\r\n\t\tnum: 18,\r\n\t},\r\n\tflowerveil: {\r\n\t\tonAllySetStatus(status, target, source, effect) {\r\n\t\t\tif (this.field.effectiveTerrain(this.effectState.target) === 'grassyterrain' && source && target !== source && effect && effect.id !== 'yawn') {\r\n\t\t\t\tthis.debug('interrupting setStatus with Flower Veil');\r\n\t\t\t\tif (effect.id === 'synchronize' || (effect.effectType === 'Move' && !effect.secondaries)) {\r\n\t\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\t\tthis.add('-block', target, 'ability: Flower Veil', '[of] ' + effectHolder);\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryAddVolatile(status, target) {\r\n\t\t\tif (this.field.effectiveTerrain(this.effectState.target) === 'grassyterrain' && status.id === 'yawn') {\r\n\t\t\t\tthis.debug('Flower Veil blocking yawn');\r\n\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\tthis.add('-block', target, 'ability: Flower Veil', '[of] ' + effectHolder);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Flower Veil\",\r\n\t\tdesc: \"If Grassy Terrain is active and affecting this Pokemon, itself and its allies cannot gain a non-volatile status condition or the Yawn condition, and Rest will fail for any of them.\",\r\n\t\tshortDesc: \"If Grassy Terrain is active, this Pokemon and its allies cannot be statused.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 0.5,\r\n\t\tnum: 166,\r\n\t},\r\n\tforewarn: {\r\n\t\tinherit: true,\r\n\t\tonStart(pokemon){\r\n\t\t\tpokemon.addVolatile('forewarn', pokemon, \"Forewarn\");\r\n\t\t},\r\n\t\tcondition: { //This is a condition because Glyphic Spell can also add it. It should work as part of the ability otherwise.\r\n\t\t\tonStart(pokemon) {\r\n\t\t\t\t//let warnPokeMove: ([String, String][]) = undefined;\r\n\t\t\t\tlet warnPokeMove: [String] = undefined;\r\n\t\t\t\tthis.effectState.warnMoves = {};\r\n\t\t\t\tfor (let i = 0; i < pokemon.side.foe.active.length; i++) {\r\n\t\t\t\t\tconst target = pokemon.side.foe.active[i];\r\n\t\t\t\t\twarnPokeMove = target.getStrongestMove(pokemon);\r\n\t\t\t\t\tif(!warnPokeMove) continue;\r\n\t\t\t\t\tconst newWarning = this.sample(warnPokeMove);\r\n\t\t\t\t\tthis.effectState.warnMoves[newWarning[0]] = newWarning[1];\r\n\t\t\t\t\tthis.add('-activate', pokemon, `ability: $(this.effectState.source)`, newWarning[0].id, '[of] ' + newWarning[1]); //$ is used because Glyphic Spell also adds this volatile\r\n\t\t\t\t\t//console.log(\"Forewarn found \" + newWarning[0] + \"'s \" + newWarning[1]);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonFoeSwitchIn(target){\r\n\t\t\t\tlet warnPokeMove: ([String, String][]) = undefined;\r\n\t\t\t\tconst pokemon = this.effectState.target;\r\n\t\t\t\twarnPokeMove = target.getStrongestMove(pokemon);\r\n\t\t\t\tif(!warnPokeMove) return;\r\n\t\t\t\tconst newWarning = this.sample(warnPokeMove);\r\n\t\t\t\tthis.effectState.warnMoves[newWarning[0]] = newWarning[1];\r\n\t\t\t\tthis.add('-activate', pokemon, `ability: $(this.effectState.source)`, newWarning[0].id, '[of] ' + newWarning[1]); //$ is used because Glyphic Spell also adds this volatile\r\n\t\t\t\t//console.log(\"Forewarn found \" + newWarning[0] + \"'s \" + newWarning[1]);\r\n\t\t\t},\r\n\t\t\tonFoeSwitchOut(target){\r\n\t\t\t\tif(this.effectState.warnMoves[target.fullname]) delete this.effectState.warnMoves[target.fullname];\r\n\t\t\t},\r\n\t\t\tonAccuracy(accuracy, target, source, move) {\r\n\t\t\t\t//console.log(this.effectState.warnMoves);\r\n\t\t\t\tif (target === source || typeof(accuracy) !== 'number' || move.ignoreEvasion) return;\r\n\t\t\t\t//console.log(\"Attack by [\" + source.fullname + \", \" + move.id + \"]\");\r\n\t\t\t\t//console.log(move);\r\n\t\t\t\t//console.log(source);\r\n\t\t\t\tif (this.effectState.warnMoves[source.fullname] === move.id){\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t\trating: 2.5,\r\n\t\tdesc: \"On switch-in, this Pokemon is alerted to each opposing Pokemon's move with the highest power. When an opposing Pokemon uses its identified attack on this Pokemon, it will dodge it using the rules of Evasiveness.\",\r\n\t\tshortDesc: \"This Pokemon is alerted to each foe's strongest attack and becomes Evasive to them.\",\r\n\t\tmiss: \"  [POKEMON] foresaw the attack and evaded!\",\r\n\t},\r\n\tgalewings: {\r\n\t\tinherit: true,\r\n\t\tonModifyPriority(priority, pokemon, target, move) {\r\n\t\t\tif (move && (move.type === 'Flying' || (move.twoType && move.twoType === 'Flying')) && pokemon.hp > pokemon.maxhp / 2) return priority + 1;\r\n\t\t},\r\n\t\trating: 4,\r\n\t\tshortDesc: \"This Pokemon's Flying-type attacks have +1 Priority when above 1/2 of its max HP.\",\r\n\t},\r\n\tgrasspelt: {\r\n\t\tinherit: true,\r\n\t\tonModifyDef(pokemon) {\r\n\t\t\tif (this.field.isTerrain('grassyterrain')) return this.chainModify(2);\r\n\t\t},\r\n\t\tshortDesc: \"If Grassy Terrain is active, this Pokemon's Defense is multiplied by 2.\",\r\n\t},\r\n\tguarddog: {\r\n\t\tonDragOutPriority: 1,\r\n\t\tonDragOut(pokemon) {\r\n\t\t\tthis.add('-activate', pokemon, 'ability: Guard Dog');\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tif (boost.atk && boost.atk < 0) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tif (!(effect as ActiveMove).secondaries) {\r\n\t\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"Attack\", \"[from] ability: Guard Dog\", \"[of] \" + target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (boost.def && boost.def < 0) {\r\n\t\t\t\tdelete boost.def;\r\n\t\t\t\tif (!(effect as ActiveMove).secondaries) {\r\n\t\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"Defense\", \"[from] ability: Guard Dog\", \"[of] \" + target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Guard Dog\",\r\n\t\tdesc: \"Prevents other Pokemon from lowering this Pokemon's Attack or Defense stat stages. This Pokemon cannot be forced to switch out by another Pokemon's attack or item.\",\r\n\t\tshortDesc: \"Immune to Attack and Defense stat stage lowering. Cannot be forced to switch out.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 275,\r\n\t},\r\n\thadronengine: {\r\n\t\tinherit: true,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (this.field.effectiveTerrain() === 'electricterrain') {\r\n\t\t\t\tthis.debug('Hadron Engine boost');\r\n\t\t\t\treturn this.chainModify([0x119A, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\trating: 4,\r\n\t\tshortDesc: \"On switch-in, summons Electric Terrain. During Electric Terrain, Sp. Atk is 1.1x.\",\r\n\t},\r\n\t//Harvest change implemented in the item-removing effects.\r\n\thealer: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tfor (const ally of pokemon.adjacentAllies()) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Healer');\r\n\t\t\t\tally.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Healer\",\r\n\t\tshortDesc: \"On switch-in, this Pokemon cures adjacent allies' non-volatile status.\",\r\n\t\tflags: {},\r\n\t\trating: 0,\r\n\t\tnum: 131,\r\n\t},\r\n\theatproof: {\r\n\t\tinherit: true,\r\n\t\tonSourceBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' || (move.twoType && move.twoType === 'Fire')) {\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamage(damage, target, source, effect) {},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.status === 'brn') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Heatproof');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif (status.id !== 'brn') return;\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Heatproof');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tdesc: \"The power of Fire-type attacks against this Pokemon is halved, and it is immune to burns.\",\r\n\t\tshortDesc: \"The power of Fire-type attacks against this Pokemon is halved; burns are prevented.\",\r\n\t},\r\n\theavymetal: {\r\n\t\tinherit: true,\r\n\t\tonStart(pokemon){\r\n\t\t\tpokemon.removeVolatile('magnetrise');\r\n\t\t\tpokemon.removeVolatile('telekinesis');\r\n\t\t\tpokemon.removeVolatile('risingchorus');\r\n\t\t},\r\n\t\t//Rest of floating block implemented in scripts.ts as part of pokemon.canFloat()\r\n\t\tshortDesc: \"This Pokemon's weight is doubled. It is unable to float in the air.\",\r\n\t\tblock: \"  [POKEMON] is weighed down with heavy metal!\",\r\n\t},\r\n\thypercutter: {\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target !== source && boost.atk && boost.atk < 0) {\r\n\t\t\t\tthis.boost({atk: -boost.atk}, target, target, null, false, true);\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Hyper Cutter\",\r\n\t\tdesc: \"If another Pokemon tries to lower this Pokemon's Attack stat stage, it raises by that amount instead.\",\r\n\t\tshortDesc: \"If Attack is attempted to be lowered by others, raises by that amount instead.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 52,\r\n\t},\r\n\ticebody: {\r\n\t\tinherit: true,\r\n\t\tonWeather(target, source, effect) {\r\n\t\t\tif (effect.id === 'snow') {\r\n\t\t\t\tthis.heal(target.baseMaxhp / 8);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'snow') return false;\r\n\t\t},\r\n\t\tonDamage(damage, pokemon, soruce, effect) {\r\n\t\t\tif (effect.id === 'frz') return null;\r\n\t\t},\r\n\t\tdesc: \"If Snow is active, this Pokemon restores 1/8 of its maximum HP, rounded down, at the end of each turn. This Pokemon takes no cold damage resulting from Snow or Freeze.\",\r\n\t\tshortDesc: \"If Snow is active, this Pokemon heals 1/8 of its max HP each turn. No cold damage.\",\r\n\t},\r\n\tilluminate: {\r\n\t\tonStart(pokemon){\r\n\t\t\tif ('midnight' in this.field.pseudoWeather) {\r\n\t\t\t\tthis.field.removePseudoWeather('midnight');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnyTryMove(target, source, effect) {\r\n\t\t\tif (effect.id === 'midnight') {\r\n\t\t\t\tthis.attrLastMove('[still]');\r\n\t\t\t\tthis.add('cant', this.effectState.source, 'ability: Illuminate', effect, '[of] ' + this.effectState.target);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Illuminate\",\r\n\t\tdesc: \"Prevents other Pokemon from lowering this Pokemon's accuracy stat stage. This Pokemon ignores a target's Evasiveness. While this Pokemon is active, supernatural darkness is dispelled and cannot be set.\",\r\n\t\tshortDesc: \"Accuracy can't be lowered by others, ignores Evasiveness, and dispels Midnight.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 0.5,\r\n\t\tnum: 35,\r\n\t},\r\n\timmunity: {\r\n\t\tinherit: true,\r\n\t\tonTryHitPriority: 1,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (move.flags['powder'] && target !== source && this.dex.getImmunity('powder', target)) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Immunity');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tshortDesc: \"This Pokemon cannot be poisoned and is immune to powder moves.\",\r\n\t},\r\n\tinnerfocus: {\r\n\t\tinherit: true,\r\n\t\tonModifyMove(move) {\r\n\t\t\t// this doesn't actually do anything because ModifyMove happens after the tracksTarget check\r\n\t\t\t// the actual implementation is in Battle#getTarget\r\n\t\t\tmove.tracksTarget = true;\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (effect.name === 'Intimidate' && boost.atk) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Inner Focus', '[of] ' + target);\r\n\t\t\t}\r\n\t\t\tif (effect.name === 'Disturbance' && boost.spa) {\r\n\t\t\t\tdelete boost.spa;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Special Attack', '[from] ability: Inner Focus', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source){\r\n\t\t\tif(target.volatiles['focuspunch']?.lostFocus) delete target.volatiles['focuspunch'].lostFocus;\r\n\t\t},\r\n\t\tdesc: \"This Pokemon cannot be made to flinch, its moves cannot be redirected to a different target by any effect, and it will never lose focus when using Focus Punch. This Pokemon is immune to the effect of the Intimidate and Disturbance Abilities.\",\r\n\t\tshortDesc: \"This Pokemon cannot flinch, ignores redirection. Immune to Intimidate/Disturbance.\",\r\n\t},\r\n\tinsomnia: {\r\n\t\tinherit: true,\r\n\t\tonSourceModifyAccuracyPriority: 9,\r\n\t\tonSourceModifyAccuracy(accuracy) {\r\n\t\t\tif (typeof accuracy !== 'number' || !('midnight' in this.field.pseudoWeather)) return;\r\n\t\t\tthis.debug('insomnia - enhancing accuracy');\r\n\t\t\treturn accuracy * 1.3;\r\n\t\t},\r\n\t\tdesc: \"This Pokemon cannot fall asleep. Gaining this Ability while asleep cures it. During supernatural darkness, this Pokemon's moves have their accuracy multiplied by 1.3.\",\r\n\t\tshortDesc: \"Cannot fall asleep; gaining while asleep cures it. Accuracy 1.3x in Midnight.\",\r\n\t},\r\n\tintrepidsword: {\r\n\t\tinherit: true, //woo, two lines of code since I override the onStart\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.hp > pokemon.maxhp / 2) return;\r\n\t\t\tif (this.boost({atk: 1}, pokemon)) {\r\n\t\t\t\tthis.effectState.swordBoost = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAfterMoveSecondary(pokemon, source, move) {\r\n\t\t\tif (this.effectState.swordBoost || pokemon.hp > pokemon.maxhp / 2) return;\r\n\t\t\tif (this.boost({atk: 1}, pokemon)) {\r\n\t\t\t\tthis.effectState.swordBoost = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidualOrder: -99,\r\n\t\tonResidual(pokemon, source, move) {\r\n\t\t\tif (this.effectState.swordBoost || pokemon.hp > pokemon.maxhp / 2) return;\r\n\t\t\tif (this.boost({atk: 1}, pokemon)) {\r\n\t\t\t\tthis.effectState.swordBoost = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete this.effectState.shieldBoost;\r\n\t\t},\r\n\t\tdesc: \"When this Pokemon switches in at or drops below 1/2 of its max HP, its Attack is raised one stage. This effect can only happen once per switch-in.\",\r\n\t\tshortDesc: \"When below half health, boosts Attack by 1 stage. Once per switch-in.\",\r\n\t},\r\n\tironfist: {\r\n\t\tinherit: true,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['punch']) {\r\n\t\t\t\tthis.debug('Iron Fist boost');\r\n\t\t\t\treturn this.chainModify([0x14CD, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"This Pokemon's punch-based attacks have their power multiplied by 1.3.\",\r\n\t\tshortDesc: \"This Pokemon's punch-based attacks have 1.3x power.\",\r\n\t},\r\n\tklutz: {\r\n\t\tinherit: true,\r\n\t\t//Preventing Speed drops from training items implemented in items.ts on the items themselves.\r\n\t\tdesc: \"This Pokemon's held item has no effect. This Pokemon cannot use Fling successfully, and Swing will not have its power boosted if an appropriate item is held.\",\r\n\t\tshortDesc: \"This Pokemon's held item has no effect. Fling cannot be used.\",\r\n\t},\r\n\tleafguard: {\r\n\t\tinherit: true,\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (!['sunnyday', 'desolateland'].includes(target.effectiveWeather()) || (source && target === source)) return;\r\n\t\t\tlet showMsg = false;\r\n\t\t\tlet i: BoostName;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tdelete boost[i];\r\n\t\t\t\t\tshowMsg = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (showMsg && !(effect as ActiveMove).secondaries) {\r\n\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"[from] ability: Leaf Guard\", \"[of] \" + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"If Sunny Day is active, this Pokemon cannot gain a non-volatile status condition or have its stats lowered by an opponent.\",\r\n\t\tshortDesc: \"If Sunny Day is active, this Pokemon cannot be statused or have stats lowered.\",\r\n\t\trating: 1.5,\r\n\t},\r\n\tlightmetal: {\r\n\t\tinherit: true,\r\n\t\tonModifySpe(spe, pokemon) {\r\n\t\t\treturn this.chainModify(1.2);\r\n\t\t},\r\n\t\tshortDesc: \"This Pokemon's weight is halved and its Speed is boosted by 20%.\",\r\n\t},\r\n\tlimber: {\r\n\t\tinherit: true,\r\n\t\tonEntryHazard(pokemon) {\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tshortDesc: \"This Pokemon cannot be paralyzed. When switching in, it is unaffected by hazards.\",\r\n\t},\r\n\tliquidooze: {\r\n\t\tinherit: true,\r\n\t\tonSourceTryHeal(damage, target, source, effect) {\r\n\t\t\t//console.log(\"Heal is occurring: \" + target + \" <- \" + source + \" :: \" + effect.id);\r\n\t\t\tconst canOoze = ['drain', 'leechseed', 'strengthsap'];\r\n\t\t\tif (canOoze.includes(effect.id)) {\r\n\t\t\t\tconst boost = (!target.ignoringItem() && target.item === 'bigroot' && effect.id === 'leechseed');\r\n\t\t\t\tthis.damage(boost ? (damage * 1.5) : damage, target, source);\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tmagician: { //Can't inherit because otherwise onAfterMoveSecondarySelf DOESN'T OVERRIDE ITSELF\r\n\t\tonAfterMoveSecondarySelf(source, target, move) {\r\n\t\t\t//console.log(\"magicked? \" + this.effectState.magicked);\r\n\t\t\tif (!move || !target || target === source || move.category === 'Status' || this.effectState.magicked) return;\r\n\t\t\tconst yourItem = target.takeItem(source);\r\n\t\t\tconst myItem = source.takeItem();\r\n\t\t\tif (target.item || source.item || (!yourItem && !myItem)) {\r\n\t\t\t\tif (yourItem) target.item = yourItem.id;\r\n\t\t\t\tif (myItem) source.item = myItem.id;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.effectState.magicked = true;\r\n\t\t\tif (\r\n\t\t\t\t(myItem && !this.singleEvent('TakeItem', myItem, source.itemState, target, source, move, myItem)) ||\r\n\t\t\t\t(yourItem && !this.singleEvent('TakeItem', yourItem, target.itemState, source, target, move, yourItem))\r\n\t\t\t) {\r\n\t\t\t\tif (yourItem) target.item = yourItem.id;\r\n\t\t\t\tif (myItem) source.item = myItem.id;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.add('-ability', source, 'ability: Magician');\r\n\t\t\tthis.add('-activate', source, 'move: Trick', '[of] ' + source);\r\n\t\t\tif (myItem) {\r\n\t\t\t\ttarget.setItem(myItem);\r\n\t\t\t\tthis.add('-item', target, myItem, '[from] move: Trick');\r\n\t\t\t} else {\r\n\t\t\t\tthis.add('-enditem', target, yourItem, '[silent]', '[from] move: Trick');\r\n\t\t\t}\r\n\t\t\tif (yourItem) {\r\n\t\t\t\tsource.setItem(yourItem);\r\n\t\t\t\tthis.add('-item', source, yourItem, '[from] move: Trick');\r\n\t\t\t} else {\r\n\t\t\t\tthis.add('-enditem', source, myItem, '[silent]', '[from] move: Trick');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tdelete this.effectState.magicked;\r\n\t\t},\r\n\t\tname: \"Magician\",\r\n\t\tdesc: \"The user swaps its held item with the held item of a Pokemon it hits with an attack. This effect fails if neither the user or the target is holding an item or if the user is trying to give or take a Mega Stone or form-changing item to or from the species that can Mega Evolve or change forms with it. The target is immune to this effect if it has the Sticky Hold Ability. This effect can only trigger once per switch-in. Does not affect Doom Desire and Future Sight.\",\r\n\t\tshortDesc: \"Swaps items with a Pokemon it hits with an attack. Once per switch-in.\",\r\n        flags: {},\r\n\t\tnum: 170,\r\n\t\trating: 1.5,\r\n\t},\r\n\tmagicguard: {\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect.effectType !== 'Move' && effect.name !== 'Recoil' && \r\n\t\t\t\t![this.dex.items.get('lifeorb'), this.dex.conditions.get('High Jump Kick'), this.dex.conditions.get('Jump Kick'), this.dex.conditions.get('Steel Beam'), this.dex.conditions.get('Chloroblast'), this.dex.conditions.get('Mind Blown')].includes(effect)\r\n\t\t\t) {\r\n\t\t\t\tif (effect.effectType === 'Ability') this.add('-activate', source, 'ability: ' + effect.name);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Magic Guard\",\r\n\t\tdesc: \"This Pokemon can only be damaged by direct attacks. Curse and Substitute on use, Belly Drum, Pain Split, recoil, and confusion damage are considered direct damage.\",\r\n\t\tshortDesc: \"This Pokemon can only be damaged by direct attacks or recoil.\",\r\n        flags: {},\r\n\t\trating: 4,\r\n\t\tnum: 98,\r\n\t},\r\n\tmagmaarmor: {\r\n\t\tinherit: true,\r\n\t\tonSourceModifyAtkPriority: 5,\r\n\t\tonSourceModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ice') {\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifySpAPriority: 5,\r\n\t\tonSourceModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ice') {\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'snow') return false;\r\n\t\t},\r\n\t\tdesc: \"The power of Ice-type attacks against this Pokemon is halved, and it is immune to being frozen or taking cold damage from Snow.\",\r\n\t\tshortDesc: \"Halves power of Ice-type moves against this Pokemon; prevents freeze and cold damage.\",\r\n\t},\r\n\tmagnetpull: {\r\n\t\tonStart(pokemon){\r\n\t\t\tlet activated = false;\r\n\t\t\tfor(const target of pokemon.adjacentFoes()){\r\n\t\t\t\tif (target.hasType('Steel') && !target.volatiles['trapped']) {\r\n\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Magnet Pull');\r\n\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.addVolatile('trapped', pokemon, 'magnetpull', 'trapper');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFoeSwitchIn(target){\r\n\t\t\tif (target.hasType('Steel') && !target.volatiles['trapped']) {\r\n\t\t\t\ttarget.addVolatile('trapped', this.effectState.target, '[from] ability: Magnet Pull', 'trapper');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon){\r\n\t\t\tif(pokemon.volatiles['trapper']){\r\n\t\t\t\tfor(const trapped of pokemon.volatiles['trapper'].linkedPokemon){\r\n\t\t\t\t\ttrapped.removeVolatile('trapped');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Magnet Pull\",\r\n\t\trating: 4,\r\n\t\tnum: 42,\r\n\t\tdesc: \"Prevents opposing Steel-types from switching out for four turns (six turns if the user is holding Grip Claw), starting from when either the user or a valid foe switches in. The target can still switch out if it is holding Shed Shell, is behind a Substitute, has Run Away, or uses Baton Pass, Escape Tunnel, Parting Shot, Psy Bubble, Slip Away, Teleport, U-turn, or Volt Switch. The effect ends if the user leaves the field.\",\r\n\t\tshortDesc: \"Traps enemy Steel-types for 4 turns.\",\r\n\t},\r\n\tmegalauncher: {\r\n\t\tinherit: true,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['bullet']) {\r\n\t\t\t\treturn this.chainModify([0x14CD, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"This Pokemon's ball, bomb, cannon, and pulse moves have their power multiplied by 1.3. Heal Pulse restores 2/3 of a target's maximum HP, rounded half down.\",\r\n\t\tshortDesc: \"This Pokemon's ballistic moves have 1.3x power.\",\r\n\t},\r\n\tmimicry: {\r\n\t\tinherit: true,\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tlet newType;\r\n\t\t\tswitch (this.field.effectiveTerrain()) {\r\n\t\t\tcase 'electricterrain':\r\n\t\t\t\tnewType = \"Electric\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'grassyterrain':\r\n\t\t\t\tnewType = \"Grass\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'mistyterrain':\r\n\t\t\t\tnewType = \"Fairy\";\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'psychicterrain':\r\n\t\t\t\tnewType = \"Psychic\";\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tnewType = pokemon.species.types[0];\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tconst types = pokemon.getTypes();\r\n\t\t\tif (types[0] === newType || !pokemon.setType(types[1] ? [newType, types[1]] : newType)) return;\r\n\t\t\tthis.add('-start', pokemon, 'typechange', pokemon.getTypes().join('/'), '[from] ability: Mimicry');\r\n\t\t},\r\n\t\tdesc: \"This Pokemon's primary type changes to match the active Terrain when this Pokemon acquires this Ability, or whenever a Terrain begins. Electric type during Electric Terrain, Grass type during Grassy Terrain, Fairy type during Misty Terrain, and Psychic type during Psychic Terrain. If this Ability is acquired without an active Terrain, or a Terrain ends or is suppressed, this Pokemon's types become the original types for its species.\",\r\n\t\tshortDesc: \"This Pokemon's first type changes to match the Terrain. Type reverts when Terrain ends.\",\r\n\t\trating: 1,\r\n\t},\r\n\tmoody: {\r\n\t\tonSourceHit(target, source, move) {\r\n\t\t\tif(move.category === \"Physical\"){\r\n\t\t\t\tthis.effectState.boost = {spa: 2, atk: -1};\r\n\t\t\t}\r\n\t\t\tif(move.category === \"Special\"){\r\n\t\t\t\tthis.effectState.boost = {atk: 2, spa: -1};\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source, move){\r\n\t\t\tif(move.category === \"Physical\"){\r\n\t\t\t\tthis.effectState.boost = {def: 2, spd: -1};\r\n\t\t\t}\r\n\t\t\tif(move.category === \"Special\"){\r\n\t\t\t\tthis.effectState.boost = {spd: 2, def: -1};\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceAfterFaint(length, target, source, effect) {\r\n\t\t\tif (effect && effect.effectType === 'Move') {\r\n\t\t\t\tthis.effectState.boost = {def: 1, spd: 1, spe: -1};\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHeal(damage, target, source, effect) {\r\n\t\t\tif(damage >= this.effectState.target.maxhp / 5){\r\n\t\t\t\tthis.effectState.boost = {atk: 1, spa: 1, spe: 1, def: -1, spd: -1};\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidualOrder: 1,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif(this.effectState.boost !== null) this.boost(this.effectState.boost);\r\n\t\t\tthis.effectState.boost = null;\r\n\t\t},\r\n\t\tname: \"Moody\",\r\n\t\tdesc: `At the end of each turn, this Pokemon has stats raised and lowered based on what it has done during that turn:\r\n\t\t-Using an attacking move lowers the attacking stat used and sharply raises the other one.\r\n\t\t-Getting hit by an attack sharply raises the defensive stat used and lowers the other one.\r\n\t\t-Causing another Pokemon to faint raises both defenses but lowers Speed.\r\n\t\t-Receiving a healing effect of 20% or more of its max HP raises both attacking stats and Speed, but lowers both defenses.\r\n\t\tIf multiple conditions are met in one turn, only the latest-occuring one will determine the stat change.`,\r\n\t\tshortDesc: \"Raises and lowers stats each turn depending on what happens in battle.\",\r\n\t\tflags: {},\r\n\t\trating: 3,\r\n\t\tnum: 141,\r\n\t},\r\n\tmyceliummight: {\r\n\t\tinherit: true,\r\n\t\tonModifyMove(move) {\r\n\t\t\tif (move.category === 'Status') {\r\n\t\t\t\tmove.ignoreAbility = true;\r\n\t\t\t\tmove.ignoreImmunity = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"This Pokemon's Status moves ignore immunities of other Pokemon, and go last among Pokemon using the same or greater priority moves.\",\r\n\t\tshortDesc: \"This Pokemon's Status moves go last in their priority bracket and ignore immunities.\",\r\n\t},\r\n\tnoguard: {\r\n\t\tinherit: true,\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.ignoreEvasion = true;\r\n\t\t},\r\n\t\tonAnyAccuracy(accuracy, target, source, move) {\r\n\t\t\tif (move && (source === this.effectState.target || target === this.effectState.target)) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn accuracy;\r\n\t\t},\r\n\t},\r\n\tnormalize: {\r\n\t\tonModifyTypePriority: 1,\r\n\t\tonAnyModifyType(move, source, target) {\r\n\t\t\tconsole.log(\"Normalizer: \");\r\n\t\t\tconsole.log(this.effectState.target);\r\n\t\t\tconsole.log(source === this.effectState.target);\r\n\t\t\tconsole.log(target === this.effectState.target);\r\n\t\t\tif (move.id === 'struggle'|| !(source === this.effectState.target || target === this.effectState.target)) return;\r\n\t\t\tconst noModifyType = [\r\n\t\t\t\t'bullfight', 'hiddenpower', 'judgment', 'multiattack', 'naturalgift', 'revelationdance', 'secretpower', 'technoblast', 'terablast', 'weatherball',\r\n\t\t\t];\r\n\t\t\tif (!(source === this.effectState.target && noModifyType.includes(move.id))) {\r\n\t\t\t\tmove.type = 'Normal';\r\n\t\t\t\tif (move.twoType) delete move.twoType;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Normalize\",\r\n\t\trating: 1,\r\n\t\tnum: 96,\r\n\t\tdesc: \"This Pokemon's moves and moves used against this Pokemon are changed to be Normal type. This effect comes before other effects that change a move's type.\",\r\n\t\tshortDesc: \"Moves used by or on this Pokemon are changed to Normal type.\",\r\n\t},\r\n\torichalcumpulse: {\r\n\t\tinherit: true,\r\n\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\tif (['sunnyday', 'desolateland'].includes(this.field.effectiveWeather())) {\r\n\t\t\t\tthis.debug('Orichalcum boost');\r\n\t\t\t\treturn this.chainModify([0x119A, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\trating: 4,\r\n\t\tshortDesc: \"On switch-in, summons sun. During sun, Attack is 1.1x.\",\r\n\t},\r\n\tovercoat: {\r\n\t\tinherit: true,\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (['powder','sandstorm','snow'].includes(type)) return false;\r\n\t\t},\r\n\t\tdesc: \"This Pokemon is immune to powder effects and damage from Sandstorm and Snow.\",\r\n\t\tshortDesc: \"This Pokemon is immune to powder effects and damage from Sandstorm and Snow.\",\r\n\t},\r\n\towntempo: {\r\n\t\tinherit: true,\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.flags = {...move.flags, 'failcopycat': 1, 'failmefirst': 1, 'failmimic': 1,};\r\n\t\t\tdelete move.flags['mirror'];\r\n\t\t\tdelete move.flags['snatch'];\r\n\t\t\tmove.noSketch = true; //Currently does nothing\r\n\t\t\tmove.uncopyable = true;\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (effect.name === 'Intimidate' && boost.atk) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Own Tempo', '[of] ' + target);\r\n\t\t\t}\r\n\t\t\tif (effect.name === 'Disturbance' && boost.spa) {\r\n\t\t\t\tdelete boost.spa;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Special Attack', '[from] ability: Own Tempo', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//The rest of the immunity is implemented in the moves/abilities themselves.\r\n\t\tdesc: `This Pokemon cannot be confused or have its stats lowered by Intimidate or Disturbance. Its moves and attributes also cannot be copied or stolen:\r\n\t\t-Copycat, Mimic, Mirror Move, Sketch, and Dancer will fail to copy a move it used; Snatch will fail to steal such a move, and Me First will fail to use it.\r\n\t\t-Trace and Role Play will fail to copy its Ability. Trace will consider this an executed attempt and not wait to copy another Ability.\r\n\t\t-Reflect Type will fail to copy its type(s).\r\n\t\t-Psych Up, Co-Star, Opportunist, and a Mirror Herb will fail to copy its stat changes, and Spectral Thief will fail to steal them. A Mirror Herb will still be consumed.\r\n\t\t-Transform, Imposter, and Glyphic Spell Copy will fail to transform into it.`,\r\n\t\tshortDesc: \"This Pokemon cannot be confused. Attempts to copy or steal its moves and attributes fail.\",\r\n        flags: {failroleplay: 1, noreceiver: 1, noentrain: 1, failskillswap: 1},\r\n\t\tactivate: \"  [POKEMON]'s mannerisms couldn't be acquired!\",\r\n\t},\r\n\tparentalbond: {\r\n\t\tonPrepareHit(source, target, move) {\r\n\t\t\tif (move.category === 'Status' || move.selfdestruct || move.multihit) return;\r\n\t\t\tif (['endeavor', 'fling', 'rollout'].includes(move.id)) return;\r\n\t\t\tif (!move.flags['charge'] && !move.spreadHit && !move.damage) {\r\n\t\t\t\tmove.multihit = 2;\r\n\t\t\t\tmove.multihitType = 'parentalbond';\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 7,\r\n\t\tonBasePower(basePower, pokemon, target, move) {\r\n\t\t\tif (move.multihitType === 'parentalbond' && move.hit > 1){\r\n\t\t\t\tif(move.secondary) delete move.secondary;\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Parental Bond\",\r\n\t\tflags: {},\r\n\t\trating: 4.5,\r\n\t\tnum: 184,\r\n\t},\r\n\tpastelveil: {\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (['psn', 'tox'].includes(pokemon.status)) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Pastel Veil');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif (!['psn', 'tox'].includes(status.id)) return;\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Pastel Veil');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonAllySetStatus(status, target, source, effect) {\r\n\t\t\tif (!['psn', 'tox'].includes(status.id)) return;\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\tthis.add('-block', target, 'ability: Pastel Veil', '[of] ' + effectHolder);\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tname: \"Pastel Veil\",\r\n\t\tshortDesc: \"This Pokemon and its allies cannot be poisoned.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 257,\r\n\t},\r\n\tpickpocket: {\r\n\t\tinherit: true,\r\n\t\tonAfterMoveSecondary(target, source, move) {\r\n\t\t\tif (source && source !== target && move?.flags['contact']) {\r\n\t\t\t\tif (target.item || target.switchFlag || target.forceSwitchFlag || source.switchFlag === true) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst yourItem = source.takeItem(target);\r\n\t\t\t\tif (!yourItem) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.add('-enditem', source, yourItem, '[silent]', '[from] ability: Pickpocket', '[of] ' + source);\r\n\t\t\t\tthis.add('-item', target, yourItem, '[from] ability: Pickpocket', '[of] ' + source);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"If this Pokemon is hit by a contact move, it steals the attacker's item; if this Pokemon is already holding an item, it will discard the stolen item. This move cannot cause Pokemon with the Sticky Hold Ability to lose their held item or cause a Kyogre, a Groudon, a Giratina, an Arceus, a Genesect, a Silvally, a Zacian, or a Zamazenta to lose their Blue Orb, Red Orb, Griseous Orb, Plate, Drive, Memory, Rusted Sword, or Rusted Shield, respectively. This effect applies after all hits from a multi-hit move.\",\r\n\t\tshortDesc: \"If this Pokemon is hit by a contact move, it steals the attacker's item.\",\r\n\t},\r\n\tpoweraura: {\r\n\t\tonAllyBasePowerPriority: 22,\r\n\t\tonAllyBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (!move.hasAuraBreak && attacker !== this.effectState.target) {\r\n\t\t\t\tif (!move.auraBooster) move.auraBooster = this.effectState.target;\r\n\t\t\t\tif (move.auraBooster !== this.effectState.target) return;\r\n\t\t\t\treturn this.chainModify([0x14CD, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Power Aura\",\r\n\t\tshortDesc: \"This Pokemon's allies have the power of their moves multiplied by 1.3.\",\r\n\t\tflags: {},\r\n\t\trating: 1,\r\n\t\tnum: 249,\r\n\t\tstart: \"  [POKEMON] is radiating a power aura!\",\r\n\t},\r\n\tprismarmor: {\r\n\t\tonModifyMovePriority: -100,\r\n\t\tonAnyModifyMove(move, source, target){ //Fake unbreakableness by deleting ignoringAbility, except for Teravolt and Turboblaze.\r\n\t\t\tif(target !== this.effectState.source) return;\r\n\t\t\tif(move.ignoringAbility && !['teravolt','turboblaze'].includes(source.ability)){\r\n\t\t\t\tdelete move.ignoringAbility;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidual(pokemon) {\r\n\t\t\tthis.damage(pokemon.baseMaxhp / 10, pokemon, pokemon);\r\n\t\t},\r\n\t\tname: \"Prism Armor\",\r\n\t\tdesc: \"This Pokemon receives 3/4 damage from supereffective attacks. It also loses 10% of its max HP at the end of each turn. Lunar Ray, Solar Impact, Smite, and Mold Breaker cannot ignore this Ability.\",\r\n\t\tshortDesc: \"3/4 damage from supereffective attacks but loses 10% max HP each turn.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 1,\r\n\t\tnum: 232,\r\n\t},\r\n\tprotean: {\r\n\t\tonPrepareHit(source, target, move) {\r\n\t\t\tif (move.hasBounced) return;\r\n\t\t\tconst type = move.type;\r\n\t\t\tif (type && type !== '???' && source.getTypes().join() !== type) {\r\n\t\t\t\tif (!source.setType(type)) return;\r\n\t\t\t\tthis.add('-start', source, 'typechange', type, '[from] ability: Protean');\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Protean\",\r\n\t\tdesc: \"This Pokemon's type changes to match the type of the move it is about to use. This effect comes after all effects that change a move's type.\",\r\n\t\tshortDesc: \"This Pokemon's type changes to match the type of the move it is about to use.\",\r\n\t\tflags: {},\r\n\t\trating: 4.5,\r\n\t\tnum: 168,\r\n\t},\r\n\tprotosynthesis: {\r\n\t\tinherit: true,\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Protosynthesis', '[fromitem]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Protosynthesis');\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'protosynthesis' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Protosynthesis atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Protosynthesis def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Protosynthesis spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Protosynthesis spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Protosynthesis spe boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Protosynthesis');\r\n\t\t\t},\r\n\t\t},\r\n\t\tonEnd(pokemon){\r\n\t\t\tif(pokemon.volatiles['protosynthesis']) delete pokemon.volatiles['protosynthesis'];\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tdesc: \"If Sunny Day is active or this Pokemon uses a held Booster Energy, this Pokemon's highest stat is multiplied by 1.3. Stat stage changes are considered at the time this Ability activates. If multiple stats are tied, Attack, Defense, Special Attack, Special Defense, and Speed are prioritized in that order. If this effect was started by Sunny Day, a held Booster Energy will not activate and the effect ends when Sunny Day is no longer active. If this effect was started by a held Booster Energy, it ends when this Pokemon is no longer active.\",\r\n\t\tshortDesc: \"Sunny Day active or Booster Energy used: highest stat is 1.3x.\",\r\n\t},\r\n\tpurifyingsalt: {\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.status === 'frz') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Purifying Salt');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'snow' || type === 'frz') return false;\r\n\t\t},\r\n\t\tonSourceBasePowerPriority: 18,\r\n\t\tonSourceBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Ghost' || (move.twoType && move.twoType === 'Ghost'))) {\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Purifying Salt\",\r\n\t\tdesc: \"The power of Ghost-type attacks against this Pokemon is halved, and it is immune to freeze and cold damage from Snow.\",\r\n\t\tshortDesc: \"Halves power of Ghost-type attacks against this Pokemon; no freeze or cold damage.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 272,\r\n\t},\r\n\tquarkdrive: {\r\n\t\tinherit: true,\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Quark Drive', '[fromitem]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Quark Drive');\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'quarkdrive' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive spe boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Quark Drive');\r\n\t\t\t},\r\n\t\t},\r\n\t\tonEnd(pokemon){\r\n\t\t\tif(pokemon.volatiles['quarkdrive']) delete pokemon.volatiles['quarkdrive'];\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tdesc: \"If Electric Terrain is active or this Pokemon uses a held Booster Energy, this Pokemon's highest stat is multiplied by 1.3. Stat stage changes are considered at the time this Ability activates. If multiple stats are tied, Attack, Defense, Special Attack, Special Defense, and Speed are prioritized in that order. If this effect was started by Electric Terrain, a held Booster Energy will not activate and the effect ends when Electric Terrain is no longer active. If this effect was started by a held Booster Energy, it ends when this Pokemon is no longer active.\",\r\n\t\tshortDesc: \"Electric Terrain active or Booster Energy used: highest stat is 1.3x.\",\r\n\t},\r\n\traindish: {\r\n\t\tinherit: true,\r\n\t\tonWeather(target, source, effect) {\r\n\t\t\tif (effect.id === 'raindance' || effect.id === 'primordialsea') {\r\n\t\t\t\tthis.heal(target.baseMaxhp / 8);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"If Rain is active, this Pokemon restores 1/8 of its maximum HP, rounded down, at the end of each turn.\",\r\n\t\tshortDesc: \"If Rain is active, this Pokemon heals 1/8 of its max HP each turn.\",\r\n\t},\r\n\treceiver: {\r\n\t\tonSwitchIn(pokemon){\r\n\t\t\tthis.effectState.switchingIn = true;\r\n\t\t},\r\n\t\tonStart(pokemon){\r\n\t\t\tconst replaced = pokemon.side.faintedThisTurn;\r\n\t\t\tif (!this.effectState.switchingIn || !replaced) return;\r\n\t\t\tconst ability = replaced.getAbility();\r\n\t\t\tif (ability.flags['noreceiver'] || ability.id === 'noability') return;\r\n\t\t\tthis.add('-ability', this.effectState.target, ability, '[from] ability: Receiver', '[of] ' + replaced);\r\n\t\t\tthis.effectState.target.setAbility(ability);\r\n\t\t\tthis.effectState.switchingIn = false;\r\n\t\t},\r\n\t\tname: \"Receiver\",\r\n\t\tdesc: \"This Pokemon copies the Ability of an ally that fainted this turn. Abilities that cannot be copied are \\\"No Ability\\\", Alchemy, As One, Comatose, Disguise, Flower Gift, Forecast, Glyphic Spell, Gulp Missile, Hunger Switch, Ice Face, Illusion, Imposter, Multitype, Neutralizing Gas, Power Construct, Rage Mode, Receiver, RKS System, Schooling, Shields Down, Stance Change, Trace, Wonder Guard, Zen Mode, and Zero to Hero.\",\r\n\t\tshortDesc: \"This Pokemon copies the Ability of an ally that fainted.\",\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1},\r\n\t\trating: 1,\r\n\t\tnum: 223,\r\n\t},\r\n\trivalry: {\r\n\t\tinherit: true,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (attacker.gender && defender.gender) {\r\n\t\t\t\tif (attacker.gender === defender.gender) {\r\n\t\t\t\t\tthis.debug('Rivalry boost');\r\n\t\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.debug('Rivalry weaken');\r\n\t\t\t\t\treturn this.chainModify(0.75);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"This Pokemon's attacks have their power multiplied by 1.5 against targets of the same gender or multiplied by 0.75 against targets of the opposite gender. There is no modifier if either this Pokemon or the target is genderless.\",\r\n\t\tshortDesc: \"This Pokemon's attacks do 1.5x on same gender targets; 0.75x on opposite gender.\",\r\n\t},\r\n\trunaway: {\r\n\t\tonTrapPokemonPriority: -10,\r\n\t\tonTrapPokemon(pokemon) {\r\n\t\t\tif(!pokemon.volatiles['meanlooked']){\r\n\t\t\t\tpokemon.trapped = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Run Away\",\r\n\t\tdesc: \"This Pokemon may switch out even when trapped by another Pokemon.\",\r\n        flags: {},\r\n\t\trating: 1,\r\n\t\tnum: 50,\r\n\t},\r\n\tsandveil: {\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'sandstorm') return false;\r\n\t\t},\r\n\t\tonStart(pokemon){\r\n\t\t\tthis.singleEvent('WeatherChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonWeatherChange(pokemon) {\r\n\t\t\tif (this.field.isWeather('sandstorm')){\r\n\t\t\t\tif (pokemon.volatiles['odorsleuth'] || pokemon.volatiles['evade'] || pokemon.volatiles['minimize'] || pokemon.volatiles['doubleteam'] || pokemon.volatiles['tangledfeet']){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tpokemon.addVolatile('evade', pokemon, 'sandstorm');\r\n\t\t\t\tpokemon.addVolatile('evadestall');\r\n\t\t\t\tthis.add('-singleturn', pokemon, 'ability: Sand Veil');\r\n\t\t\t} else if (pokemon.volatiles['evade'] && pokemon.volatiles['evade'].source === 'sandstorm'){\r\n\t\t\t\tpokemon.removeVolatile('evade');\r\n\t\t\t\tthis.add('-end', pokemon, 'ability: Sand Veil');\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Sand Veil\",\r\n\t\tdesc: \"If this Pokemon is sent out during a Sandstorm, or if a Sandstorm activates while it is on the field, it becomes Evasive for the rest of the turn. While Evasive, all moves used on this Pokemon will fail accuracy checks, unless they ignore the condition. This Pokemon takes no damage from Sandstorm.\",\r\n\t\tshortDesc: \"This Pokemon becomes Evasive when it encounters a Sandstorm; immunity to it.\",\r\n\t\tflags: {},\r\n\t\trating: 1.5,\r\n\t\tnum: 8,\r\n\t\tstart: \"  [POKEMON] disappeared into the sandstorm!\",\r\n\t\tend: \"  [POKEMON] became visible again.\",\r\n\t},\r\n\tschooling: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (!['Wishiwashi', 'Tynamo'].includes(pokemon.baseSpecies.baseSpecies) || pokemon.level < 20 || pokemon.transformed) return;\r\n\t\t\tif (pokemon.hp > pokemon.maxhp / 4) {\r\n\t\t\t\tif (pokemon.species.id === 'wishiwashi') {\r\n\t\t\t\t\tpokemon.formeChange('Wishiwashi-School');\r\n\t\t\t\t} else if (pokemon.species.id === 'tynamo') {\r\n\t\t\t\t\tpokemon.formeChange('Tynamo-School');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (pokemon.species.id === 'wishiwashischool') {\r\n\t\t\t\t\tpokemon.formeChange('Wishiwashi');\r\n\t\t\t\t} else if (pokemon.species.id === 'tynamoschool') {\r\n\t\t\t\t\tpokemon.formeChange('Tynamo');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidualOrder: 27,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif (\r\n\t\t\t\t!['Wishiwashi', 'Tynamo'].includes(pokemon.baseSpecies.baseSpecies) || pokemon.level < 20 ||\r\n\t\t\t\tpokemon.transformed || !pokemon.hp\r\n\t\t\t) return;\r\n\t\t\tif (pokemon.hp > pokemon.maxhp / 4) {\r\n\t\t\t\tif (pokemon.species.id === 'wishiwashi') {\r\n\t\t\t\t\tpokemon.formeChange('Wishiwashi-School');\r\n\t\t\t\t} else if (pokemon.species.id === 'tynamo') {\r\n\t\t\t\t\tpokemon.formeChange('Tynamo-School');\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (pokemon.species.id === 'wishiwashischool') {\r\n\t\t\t\t\tpokemon.formeChange('Wishiwashi');\r\n\t\t\t\t} else if (pokemon.species.id === 'tynamoschool') {\r\n\t\t\t\t\tpokemon.formeChange('Tynamo');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Schooling\",\r\n\t\tdesc: \"On switch-in, if this Pokemon is a Wishiwashi or Tynamo that is level 20 or above and has more than 1/4 of its maximum HP left, it changes to School Form. If it is in School Form and its HP drops to 1/4 of its maximum HP or less, it changes to Solo Form at the end of the turn. If it is in Solo Form and its HP is greater than 1/4 its maximum HP at the end of the turn, it changes to School Form.\",\r\n\t\tshortDesc: \"If user is Wishiwashi/Tynamo, changes to School Form if it has > 1/4 max HP, else Solo Form.\",\r\n        flags: {cantsuppress: 1, failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\trating: 3,\r\n\t\tnum: 208,\r\n\t},\r\n\tshadowtag: {\r\n\t\tonStart(pokemon){\r\n\t\t\tlet activated = false;\r\n\t\t\tfor(const target of pokemon.adjacentFoes()){\r\n\t\t\t\tif (!target.hasAbility('shadowtag') && !target.volatiles['trapped']) {\r\n\t\t\t\t\tif(!activated){\r\n\t\t\t\t\t\tthis.add('-ability', pokemon, 'Shadow Tag');\r\n\t\t\t\t\t\tactivated = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttarget.addVolatile('trapped', pokemon, 'shadowtag', 'trapper');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFoeSwitchIn(target){\r\n\t\t\tif (!target.hasAbility('shadowtag') && !target.volatiles['trapped']) {\r\n\t\t\t\tthis.add('-ability', this.effectState.target, 'Shadow Tag');\r\n\t\t\t\ttarget.addVolatile('trapped', this.effectState.target, '[from] ability: Shadow Tag', 'trapper');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon){\r\n\t\t\tif(pokemon.volatiles['trapper']){\r\n\t\t\t\tfor(const trapped of pokemon.volatiles['trapper'].linkedPokemon){\r\n\t\t\t\t\ttrapped.removeVolatile('trapped');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Shadow Tag\",\r\n\t\trating: 4.5,\r\n\t\tnum: 23,\r\n\t\tdesc: \"Prevents opposing Pokemon from switching out for four turns (six turns if the user is holding Grip Claw), starting from when either the user or a valid foe switches in. The target can still switch out if it is holding Shed Shell, is behind a Substitute, has Shadow Tag or Run Away, or uses Baton Pass, Escape Tunnel, Parting Shot, Psy Bubble, Slip Away, Teleport, U-turn, or Volt Switch. The effect ends if the user leaves the field.\",\r\n\t\tshortDesc: \"Traps enemies without Shadow Tag for 4 turns.\",\r\n\t},\r\n\tsharpness: {\r\n\t\tinherit: true,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['slicing']) {\r\n\t\t\t\tthis.debug('Shapness boost');\r\n\t\t\t\treturn this.chainModify([0x14CD, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Sharpness\",\r\n\t\tshortDesc: \"This Pokemon's slicing moves have their power multiplied by 1.3.\",\r\n\t},\r\n\tsheerforce: {\r\n\t\tinherit: true,\r\n\t\t//Actual changes made in scripts.ts as edits to useMoveInner and hitStepMoveHitLoop.\r\n\t\tdesc: \"This Pokemon's attacks with secondary effects have their power multiplied by 1.3, but the secondary effects are removed.\",\r\n\t\tshortDesc: \"This Pokemon's attacks with secondary effects have 1.3x power; nullifies the effects.\",\r\n\t},\r\n\tshieldsdown: {\r\n\t\tonSwitchIn(pokemon) {\r\n\t\t\tif (!['Minior','Prominoid'].includes(pokemon.baseSpecies.baseSpecies) || pokemon.transformed) return;\r\n\t\t\tif (pokemon.hp > pokemon.maxhp / 2) {\r\n\t\t\t\tif (pokemon.species.forme !== 'Meteor') {\r\n\t\t\t\t\tif(pokemon.baseSpecies.baseSpecies === 'Minior') {\r\n\t\t\t\t\t\tpokemon.formeChange('Minior-Meteor');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpokemon.formeChange('Prominoid-Meteor');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (pokemon.species.forme === 'Meteor') {\r\n\t\t\t\t\tpokemon.formeChange(pokemon.set.species);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (!['Minior','Prominoid'].includes(pokemon.baseSpecies.baseSpecies) || pokemon.transformed || !pokemon.activeTurns) return;\r\n\t\t\tif (pokemon.hp > pokemon.maxhp / 2) {\r\n\t\t\t\tif (pokemon.species.forme !== 'Meteor') {\r\n\t\t\t\t\tif(pokemon.baseSpecies.baseSpecies === 'Minior') {\r\n\t\t\t\t\t\tpokemon.formeChange('Minior-Meteor');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpokemon.formeChange('Prominoid-Meteor');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (pokemon.species.forme === 'Meteor') {\r\n\t\t\t\t\tpokemon.formeChange(pokemon.set.species);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidualOrder: 27,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif (!['Minior','Prominoid'].includes(pokemon.baseSpecies.baseSpecies) || pokemon.transformed || !pokemon.hp) return;\r\n\t\t\tif (pokemon.hp > pokemon.maxhp / 2) {\r\n\t\t\t\tif (pokemon.species.forme !== 'Meteor') {\r\n\t\t\t\t\tif(pokemon.baseSpecies.baseSpecies === 'Minior') {\r\n\t\t\t\t\t\tpokemon.formeChange('Minior-Meteor');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tpokemon.formeChange('Prominoid-Meteor');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (pokemon.species.forme === 'Meteor') {\r\n\t\t\t\t\tpokemon.formeChange(pokemon.set.species);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif (!['miniormeteor', 'prominoidmeteor'].includes(target.species.id) || target.transformed) return;\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Shields Down');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonTryAddVolatile(status, target) {\r\n\t\t\tif (!['miniormeteor', 'prominoidmeteor'].includes(target.species.id) || target.transformed) return;\r\n\t\t\tif (status.id !== 'yawn') return;\r\n\t\t\tthis.add('-immune', target, '[from] ability: Shields Down');\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tonModifyMovePriority: -100,\r\n\t\tonAnyModifyMove(move, source, target){ //Fake unbreakableness by deleting ignoringAbility, except for Teravolt and Turboblaze.\r\n\t\t\tif(target !== this.effectState.source) return;\r\n\t\t\tif(move.ignoringAbility && !['teravolt','turboblaze'].includes(source.ability)){\r\n\t\t\t\tdelete move.ignoringAbility;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Shields Down\",\r\n\t\tdesc: \"If this Pokemon is a Minior or Prominoid, it changes to its Core forme if it has 1/2 or less of its maximum HP, and changes to Meteor Form if it has more than 1/2 its maximum HP. This check is done on switch-in and at the end of each turn. While in its Meteor Form, it cannot become affected by non-volatile status conditions. Lunar Ray, Solar Impact, Smite, and Mold Breaker cannot ignore this Ability.\",\r\n\t\tshortDesc: \"If Minior/Prominoid, on switch-in/turn end, changes to Core at <= 1/2 max HP, else Meteor.\",\r\n        flags: {breakable: 1, cantsuppress: 1, failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\trating: 3,\r\n\t\tnum: 197,\r\n\t},\r\n\tslowstart: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tif(!this.effectState.time){\r\n\t\t\t\tthis.effectState.time = 5;\r\n\t\t\t\tthis.add('-start', pokemon, 'ability: Slow Start');\r\n\t\t\t}\r\n\t\t\t//console.log(\"Slow Start count: \" + this.effectState.time);\r\n\t\t},\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\tif(this.effectState.time > 0) return this.chainModify(0.5);\r\n\t\t},\r\n\t\tonModifySpe(spe, pokemon) {\r\n\t\t\tif(this.effectState.time > 0) return this.chainModify(0.5);\r\n\t\t},\r\n\t\tonResidualOrder: 1,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif(pokemon.activeTurns && this.effectState.time > 0) this.effectState.time--;\r\n\t\t\tif(this.effectState.time === 0){\r\n\t\t\t\tthis.effectState.time = -1; //-1 is truthy, so it doesn't get re-applied in onStart, but won't decrement or re-trigger the ending here either\r\n\t\t\t\tthis.add('-end', pokemon, 'Slow Start');\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Slow Start\",\r\n\t\tdesc: \"This Pokemon's Attack and Speed are halved for the first 5 turns it is on the field in battle.\",\r\n\t\tshortDesc: \"This Pokemon's Attack and Speed are halved for its first 5 turns.\",\r\n\t\tflags: {},\r\n\t\trating: -1,\r\n\t\tnum: 112,\r\n\t},\r\n\tsnowcloak: {\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'snow') return false;\r\n\t\t},\r\n\t\tonStart(pokemon){\r\n\t\t\tthis.singleEvent('WeatherChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonWeatherChange(pokemon) {\r\n\t\t\tif(this.field.isWeather('snow')){\r\n\t\t\t\tif (pokemon.volatiles['odorsleuth'] || pokemon.volatiles['evade'] || pokemon.volatiles['minimize'] || pokemon.volatiles['doubleteam'] || pokemon.volatiles['tangledfeet']){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tpokemon.addVolatile('evade', pokemon, 'snow');\r\n\t\t\t\tpokemon.addVolatile('evadestall');\r\n\t\t\t\tthis.add('-singleturn', pokemon, 'ability: Snow Cloak');\r\n\t\t\t} else if (pokemon.volatiles['evade'] && pokemon.volatiles['evade'].source === 'snow'){\r\n\t\t\t\tpokemon.removeVolatile('evade');\r\n\t\t\t\tthis.add('-end', pokemon, 'ability: Snow Cloak');\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Snow Cloak\",\r\n\t\tdesc: \"If this Pokemon is sent out during Snow, or if Snow activates while it is on the field, it becomes Evasive for the rest of the turn. While Evasive, all moves used on this Pokemon will fail accuracy checks, unless they ignore the condition. This Pokemon takes no damage from Snow.\",\r\n\t\tshortDesc: \"This Pokemon becomes Evasive when it encounters Snow; immunity to it.\",\r\n\t\tflags: {},\r\n\t\trating: 1.5,\r\n\t\tnum: 81,\r\n\t\tstart: \"  [POKEMON] disappeared into the snow!\",\r\n\t\tend: \"  [POKEMON] became visible again.\",\r\n\t},\r\n\tsnowplow: {\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'snow') return false;\r\n\t\t},\r\n\t\tonModifySpe(spe, pokemon) {\r\n\t\t\tif (this.field.isWeather('snow')) {\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Snow Plow\",\r\n\t\tshortDesc: \"If Snow is active, this Pokemon's Speed is doubled; immunity to it.\",\r\n\t\tflags: {},\r\n\t\trating: 3,\r\n\t\tnum: 202,\r\n\t},\r\n\tstalwart: {\r\n\t\tinherit: true,\r\n\t\tonBeforeTurn(pokemon){\r\n\t\t\tpokemon.addVolatile('nointerrupt');\r\n\t\t},\r\n\t\tdesc: \"This Pokemon's attacks cannot be interrupted once selected. The Pokemon will ignore sleep, freeze, flinch, Disable, Encore, Imprison, and PP drain to 0 inflicted earlier in the same turn, and bypass the checks for full paralysis, confusion, and attraction if inflicted earlier in the same turn. If given a Choice item earlier in the turn, the move locking will be ignored. Gravity and Heal Block will still prevent moves from executing. Additionally, this Pokemon's moves cannot be redirected to a different target by any effect.\",\r\n\t\tshortDesc: \"This Pokemon's attacks cannot be interrupted or redirected after selection.\",\r\n\t\trating: 1,\r\n\t},\r\n\tsteadfast: {\r\n\t\tonAfterEachBoost(boost, target, source, effect) {\r\n\t\t\tif (!source || target.side === source.side) {\r\n\t\t\t\tif (effect.id === 'stickyweb') {\r\n\t\t\t\t\tthis.hint(\"Court Change Sticky Web counts as lowering your own Speed, and Steadfast only affects stats lowered by foes.\", true, source.side);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tlet statsLowered = false;\r\n\t\t\tlet i: BoostName;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tstatsLowered = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (statsLowered) {\r\n\t\t\t\tthis.add('-ability', target, 'Steadfast');\r\n\t\t\t\tthis.boost({spe: 1}, target, target, null, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Steadfast\",\r\n\t\tdesc: \"This Pokemon's Speed is raised by 1 stage for each of its stat stages that is lowered by an opposing Pokemon.\",\r\n\t\tshortDesc: \"This Pokemon's Speed is raised by 1 for each of its stats that is lowered by a foe.\",\r\n\t\tflags: {},\r\n\t\trating: 2.5,\r\n\t\tnum: 128,\r\n\t},\r\n\tsuctioncups: {\r\n\t\tinherit: true,\r\n\t\tonStart(pokemon){\r\n\t\t\tpokemon.removeVolatile('magnetrise');\r\n\t\t\tpokemon.removeVolatile('telekinesis');\r\n\t\t\tpokemon.removeVolatile('risingchorus');\r\n\t\t},\r\n\t\t//Suction Cups floating block implemented in scripts.ts as part of pokemon.canFloat()\r\n\t\tshortDesc: \"This Pokemon cannot be forced out by another Pokemon's attack/item. Prevents floating.\",\r\n\t\tdesc: \"This Pokemon cannot be forced out by another Pokemon's attack/item. This Pokemon cannot gain floating status.\",\r\n\t},\r\n\tsweetveil: {\r\n\t\tinherit: true,\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.status === 'slp') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Sweet Veil');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tsynchronize: {\r\n\t\tinherit: true,\r\n\t\tonAfterSetStatus(status, target, source, effect) {\r\n\t\t\tif (!source || source === target) return;\r\n\t\t\tif (effect && effect.id === 'toxicspikes') return;\r\n\t\t\tthis.add('-activate', target, 'ability: Synchronize');\r\n\t\t\t// Hack to make status-prevention abilities think Synchronize is a status move\r\n\t\t\t// and show messages when activating against it.\r\n\t\t\tsource.trySetStatus(status, target, {status: status.id, id: 'synchronize'} as Effect);\r\n\t\t},\r\n\t\tdesc: \"If another Pokemon inflicts a non-volatile status condition on this Pokemon, that Pokemon receives the same non-volatile status condition.\",\r\n\t\tshortDesc: \"If status is inflicted by another Pokemon, it also gets that status.\",\r\n\t},\r\n\ttangledfeet: {\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect.id === this.toID('confused') && !pokemon.volatiles['odorsleuth']) {\r\n\t\t\t\ttarget.addVolatile('tangledfeet');\r\n\t\t\t}\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tduration: 2, //Should get removed in onBeforeMove, so this is a failsafe\r\n\t\t\tonStart(pokemon, source) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Tangled Feet');\r\n\t\t\t},\r\n\t\t\tonBeforeMove(pokemon, move) {\r\n\t\t\t\tpokemon.removeVolatile('tangledfeet');\r\n\t\t\t},\r\n\t\t\tonAccuracy(accuracy, target, source, move) {\r\n\t\t\t\tif (!move.ignoreEvasion && typeof(move.accuracy) === 'number') return false;\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon){\r\n\t\t\t\tthis.add('-end', pokemon, 'ability: Tangled Feet', '[silent]');\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Tangled Feet\",\r\n\t\tdesc: \"If the Pokemon is confused and hits itself in confusion, it becomes Evasive until its next turn. While Evasive, all moves used on this Pokemon will fail accuracy checks, unless they ignore the condition.\",\r\n\t\tshortDesc: \"Becomes Evasive after hitting itself in confusion.\",\r\n\t\tflags: {},\r\n\t\trating: 1,\r\n\t\tnum: 77,\r\n\t\tactivate: \"  [POKEMON] became hard to hit!\",\r\n\t},\r\n\ttangling: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target)) \r\n\t\t\t\tthis.add('-activate', target, 'ability: Tangling');{\r\n\t\t\t\tsource.addVolatile('singletrap', target, Dex.abilities.get('tangling'), 'trapper');\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Tangling\",\r\n\t\tdesc: \"Pokemon making contact with this Pokemon become trapped on the following turn.\",\r\n\t\tshortDesc: \"Pokemon making contact with this Pokemon become trapped for a turn.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 221,\r\n\t},\r\n\tteraformzero: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Teraform Zero');\r\n\t\t\tthis.field.clearWeather();\r\n\t\t\tthis.field.clearTerrain();\r\n\t\t},\r\n\t\tonAnySetWeather(target, source, weather) {\r\n\t\t\tconst strongWeathers = ['desolateland', 'primordialsea', 'deltastream'];\r\n\t\t\tif (!strongWeathers.includes(weather.id)){\r\n\t\t\t\tthis.add('-activate', this.effectState.target, 'ability: Teraform Zero');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnySetTerrain(target, source, terrain) {\r\n\t\t\tthis.add('-ability', pokemon, 'ability: Teraform Zero');\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tsuppressWeather: true,\r\n\t\tsuppressTerrain: true,\r\n\t\tname: \"Teraform Zero\",\r\n\t\tshortDesc: \"Clears weather and terrain from the field and prevents them from being set.\",\r\n\t\tdesc: \"When this Pokemon is sent in, active weather and terrain is cleared. Using a weather- or terrain-changing move will fail, and weather- or terrain-changing Abilities will not work, except for Primordial Sea, Desolate Land, and Delta Stream.\",\r\n        flags: {breakable: 1}, \r\n\t\trating: 3.5,\r\n\t\tnum: 309,\r\n\t},\r\n\tterashell: {\r\n\t\tinherit: true,\r\n\t\tonEffectiveness(typeMod, target, type, move) {\r\n\t\t\tif (!target) return;\r\n\t\t\tif (this.effectState.resisted) return -1; // all hits of multi-hit move should be not very effective\r\n\t\t\tif (move.category === 'Status') return;\r\n\t\t\tif (!target.runImmunity(move.type)) return; // immunity has priority\r\n\t\t\tif (target.hp < target.maxhp) return;\r\n\r\n\t\t\tthis.add('-activate', target, 'ability: Tera Shell');\r\n\t\t\tthis.effectState.resisted = true;\r\n\t\t\tdelete move.twoType; //Don't want double resistance\r\n\t\t\treturn -1;\r\n\t\t},\r\n\t\tonBasePowerPriority: 22,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tconst itemName = attacker.getItem().name;\r\n\t\t\tif (itemName.endsWith('Tera Shard') && itemName.substr(0, itemName.length - 11) === move.type) {\r\n\t\t\t\tthis.debug('Tera Shell boost: ' + move.type);\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"If this Pokemon is at full HP, any damage-dealing attack used on it will be treated as not very effective. The user's moves whose type matches that of its held Tera Shard will have their base power multiplied by 1.5x.\",\r\n\t\tshortDesc: \"Full HP: damaging attacks not very effective. Moves of Tera Shard type: 1.5x pwr.\",\r\n        flags: {breakable: 1},\r\n\t},\r\n\tterashift: {\r\n\t\tinherit: true,\r\n\t\tonPreStart(pokemon) {\r\n\t\t\tif (pokemon.baseSpecies.baseSpecies !== 'Terapagos' || pokemon.transformed || 'magicroom' in this.field.pseudoWeather) return;\r\n\t\t\tswitch(pokemon.getItem().name){\r\n\t\t\tcase \"Stellar Tera Shard\":\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Tera Shift');\r\n\t\t\t\tpokemon.formeChange('Terapagos-Stellar', this.effect, true);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"Normal Tera Shard\":\r\n\t\t\tcase \"Fire Tera Shard\":\r\n\t\t\tcase \"Water Tera Shard\":\r\n\t\t\tcase \"Electric Tera Shard\":\r\n\t\t\tcase \"Grass Tera Shard\":\r\n\t\t\tcase \"Ice Tera Shard\":\r\n\t\t\tcase \"Fighting Tera Shard\":\r\n\t\t\tcase \"Poison Tera Shard\":\r\n\t\t\tcase \"Ground Tera Shard\":\r\n\t\t\tcase \"Flying Tera Shard\":\r\n\t\t\tcase \"Psychic Tera Shard\":\r\n\t\t\tcase \"Bug Tera Shard\":\r\n\t\t\tcase \"Rock Tera Shard\":\r\n\t\t\tcase \"Ghost Tera Shard\":\r\n\t\t\tcase \"Dragon Tera Shard\":\r\n\t\t\tcase \"Dark Tera Shard\":\r\n\t\t\tcase \"Steel Tera Shard\":\r\n\t\t\tcase \"Fairy Tera Shard\":\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Tera Shift');\r\n\t\t\t\tpokemon.formeChange('Terapagos-Terastal', this.effect, true);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"If this Pokemon is a Terapagos and it is holding a Tera Shard, it will transform when it enters battle. If holding a Stellar Tera Shard, it will become its Stellar Form; with any other Tera Shard, it will become its Terastal Form.\",\r\n\t\tshortDesc: \"If Terapagos, transforms if holding Tera Shard. Stellar = Stellar, else Terastal.\",\r\n\t},\r\n\ttelepathy: {\r\n\t\tinherit: true,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (['any', 'normal', 'allAdjacent'].includes(move.target) && target !== source && target.side === source.side) {\r\n\t\t\t\tthis.add('-activate', target, 'ability: Telepathy');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryHit(target, source, move) {\r\n\t\t\tif (['any', 'normal', 'allAdjacent'].includes(move.target) && target !== source && target.side === source.side) {\r\n\t\t\t\tthis.add('-activate', this.effectState.target, 'ability: Telepathy');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\trating: 1,\r\n\t\tshortDesc: \"The Pokemon and its allies cannot hit each other with attacks.\",\r\n\t},\r\n\tteravolt: {\r\n\t\tinherit: true,\r\n\t\t//Ignoring Full Metal Body, Prism Armor, Shadow Shield, and Shields Down implemented in those Abilities because of annoying coding setups\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(damage, source, target, move) {\r\n\t\t\tif(move.hasAuraBreak) delete move.hasAuraBreak;\r\n\t\t},\r\n\t\tdesc: \"This Pokemon's moves and their effects completely ignore Abilities that could potentially interfere with them. Abilities which are usually immune to ignoring are still affected, unless it would interfere with the Ability's core mechanics. Additionally, the move Complete Shock will not remove the user's Electric typing.\",\r\n\t},\r\n\tthermalexchange: {\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (move.type === 'Fire' || (move.twoType && move.twoType === 'Fire')) {\r\n\t\t\t\tthis.boost({atk: 2});\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Thermal Exchange\",\r\n\t\tdesc: \"This Pokemon's Attack is raised 2 stages after it is damaged by a Fire-type move.\",\r\n\t\tshortDesc: \"This Pokemon's Attack is raised by 2 when damaged by Fire moves.\",\r\n\t\tflags: {},\r\n\t\trating: 2,\r\n\t\tnum: 270,\r\n\t},\r\n\ttoughclaws: {\r\n\t\tinherit: true,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['contact']) {\r\n\t\t\t\treturn this.chainModify([0x1333, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshortDesc: \"This Pokemon's contact moves have their power multiplied by 1.2.\",\r\n\t},\r\n\ttoxicboost: {\r\n\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\tif (pokemon.hp <= pokemon.maxhp / 2) {\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Toxic Boost\",\r\n\t\tdesc: \"If this Pokemon is poisoned or badly poisoned, its Attack is multiplied by 2.\",\r\n\t\tshortDesc: \"If this Pokemon is poisoned, its Attack is 2x.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 3,\r\n\t\tnum: 137,\r\n\t},\r\n\tturboblaze: {\r\n\t\tinherit: true,\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(damage, source, target, move) {\r\n\t\t\tif(move.hasAuraBreak) delete move.hasAuraBreak;\r\n\t\t},\r\n\t\tdesc: \"This Pokemon's moves and their effects completely ignore Abilities that could potentially interfere with them. Abilities which are usually immune to ignoring are still affected, unless it would interfere with the Ability's core mechanics. Additionally, the move Burn Up will not remove the user's Fire typing.\",\r\n\t},\r\n\tvitalspirit: {\r\n\t\tinherit: true,\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif(source && target === source) return;\r\n\t\t\tif (!source || target.side === source.side) {\r\n\t\t\t\tif (effect.id === 'stickyweb') {\r\n\t\t\t\t\tthis.hint(\"Court Change Sticky Web counts as lowering your own Speed, and Vital Spirit only affects Speed lowered by other Pokemon.\", true, source.side);\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (boost.spe && boost.spe < 0) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tif (!(effect as ActiveMove).secondaries) {\r\n\t\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"Speed\", \"[from] ability: Vital Spirit\", \"[of] \" + target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tshortDesc: \"This Pokemon cannot fall asleep or have its Speed lowered.\",\r\n\t},\r\n\twaterbubble: {\r\n\t\tonSourceModifyAtkPriority: 5,\r\n\t\tonSourceModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' || (move.twoType && move.twoType === 'Fire')) {\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifySpAPriority: 5,\r\n\t\tonSourceModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' || (move.twoType && move.twoType === 'Fire')) {\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.status === 'brn') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Water Bubble');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif (status.id !== 'brn') return;\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Water Bubble');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tname: \"Water Bubble\",\r\n\t\tdesc: \"The power of Fire-type attacks against this Pokemon is halved, and it is immune to burns.\",\r\n\t\tshortDesc: \"The power of Fire-type attacks against this Pokemon is halved; burns are prevented.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 199,\r\n\t},\r\n\twaterveil: {\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.status === 'brn') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Water Veil');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllySetStatus(status, target, source, effect) {\r\n\t\t\tif (status.id === 'brn') {\r\n\t\t\t\tthis.debug('Water Veil prevents burns');\r\n\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\tthis.add('-block', target, 'ability: Water Veil', '[of] ' + effectHolder);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Water Veil\",\r\n\t\tshortDesc: \"This Pokemon and its allies cannot be burned.\",\r\n\t\tblock: \"  [POKEMON] can't be burned due to a watery veil!\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 175,\r\n\t},\r\n\twhitesmoke: {\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tlet activate = false;\r\n\t\t\tconst boosts: SparseBoostsTable = {};\r\n\t\t\tlet i: BoostName;\r\n\t\t\tfor (i in pokemon.boosts) {\r\n\t\t\t\tif (pokemon.boosts[i] < 0) {\r\n\t\t\t\t\tactivate = true;\r\n\t\t\t\t\tboosts[i] = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (activate) {\r\n\t\t\t\tpokemon.setBoost(boosts);\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: White Smoke');\r\n\t\t\t\tthis.add('-clearnegativeboost', pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"White Smoke\",\r\n\t\tdesc: \"Restores all lowered stat stages to 0 when one is less than 0.\",\r\n\t\tflags: {},\r\n\t\trating: 3,\r\n\t\tnum: 73,\r\n\t},\r\n\twindpower: {\r\n\t\tinherit: true,\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (effect.name === 'Defog' && boost.eva) {\r\n\t\t\t\ttarget.addVolatile('charge');\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twindrider: {\r\n\t\tinherit: true,\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.side.sideConditions['tailwind']) {\r\n\t\t\t\tthis.boost({spe: 1}, pokemon, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.flags['wind']) {\r\n\t\t\t\tif (!this.boost({spe: 1}, target, target)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Wind Rider');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllySideConditionStart(target, source, sideCondition) {\r\n\t\t\tconst pokemon = this.effectState.target;\r\n\t\t\tif (sideCondition.id === 'tailwind') {\r\n\t\t\t\tthis.boost({spe: 1}, pokemon, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (effect.name === 'Defog' && boost.eva) {\r\n\t\t\t\tdelete boost.eva;\r\n\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"Evasion\", \"[from] ability: Wind Rider\", \"[of] \" + target);\r\n\t\t\t\tthis.boost({spe: 1}, target, target, null, false, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"This Pokemon is immune to wind moves and raises its Speed by 1 stage when hit by a wind move or when it encounters Tailwind.\",\r\n\t\tshortDesc: \"Speed raised by 1 if hit by a wind move or encounters Tailwind. Wind move immunity.\",\r\n\t},\r\n\tzerotohero: {\r\n\t\tonSwitchIn() {\r\n\t\t\tthis.effectState.switchingIn = true;\r\n\t\t},\r\n\t\tonPreStart(pokemon){ //Presumably, onSwitchIn only activates when not dragged in, and we want the transformation always to activate.\r\n\t\t\tif (pokemon.baseSpecies.baseSpecies !== 'Palafin' || pokemon.transformed || !pokemon.side.totalFainted) return;\r\n\t\t\tif (pokemon.species.forme !== 'Hero') {\r\n\t\t\t\tpokemon.formeChange('Palafin-Hero', this.effect, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.baseSpecies.baseSpecies !== 'Palafin' || pokemon.transformed) return;\r\n\t\t\tif (pokemon.species.forme === 'Hero') {\r\n\t\t\t\tconst fallen = Math.min(pokemon.side.totalFainted, 5);\r\n\t\t\t\tthis.add('-start', pokemon, `fallen:${fallen}`, '[silent]');\r\n\t\t\t\tthis.effectState.fallen = fallen;\r\n\t\t\t\tif (!this.effectState.switchingIn) return;\r\n\t\t\t\tthis.effectState.switchingIn = false;\r\n\t\t\t\tif(!this.effectState.heroMessageDisplayed){\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Zero to Hero');\r\n\t\t\t\t\tthis.effectState.heroMessageDisplayed = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (this.effectState.fallen) {\r\n\t\t\t\tconst powMod = [4096, 4506, 4915, 5325, 5734, 6144];\r\n\t\t\t\tthis.debug(`Zero to Hero boost: ${powMod[this.effectState.fallen]}/4096`);\r\n\t\t\t\treturn this.chainModify([powMod[this.effectState.fallen], 4096]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Zero to Hero\",\r\n\t\tdesc: \"This Pokemon transforms into its Hero Form when it enters the field after an ally has fainted. While in Hero Form, its moves have their power multiplied by 1+(X*0.1), where X is the total number of times any Pokemon has fainted on the user's side when this Ability became active, and X cannot be greater than 5.\",\r\n\t\tshortDesc: \"This Pokemon transforms when an ally faints; moves have 10% more power for each one, max 5.\",\r\n        flags: {cantsuppress: 1, failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\trating: 3.5,\r\n\t\tnum: 278,\r\n\t},\r\n\t/* Abilities edited as changes to other elements */\r\n\tclearbody: {\r\n\t\tinherit: true,\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tlet showMsg = false;\r\n\t\t\tlet i: BoostName;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tdelete boost[i];\r\n\t\t\t\t\tshowMsg = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (showMsg && !(effect as ActiveMove).secondaries) {\r\n\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"[from] ability: Clear Body\", \"[of] \" + target);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tcutecharm: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target)) {\r\n\t\t\t\tif (this.randomChance(3, 10)) {\r\n\t\t\t\t\tsource.addVolatile('attract', this.effectState.target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Cute Charm\",\r\n\t\trating: 0.5,\r\n\t\tnum: 56,\r\n\t},\r\n\tdazzling: {\r\n\t\tonFoeTryMove(source, target, move) {\r\n\t\t\tif (move.target === 'foeSide' || (move.target === 'all' &&  move.id !== 'perishsong')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst dazzlingHolder = this.effectState.target;\r\n\t\t\tif ((target.side === dazzlingHolder.side || move.target === 'all') && move.priority > 0.1) {\r\n\t\t\t\tthis.attrLastMove('[still]');\r\n\t\t\t\tthis.add('cant', source, 'ability: Dazzling', move, '[of] ' + dazzlingHolder);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Dazzling\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2.5,\r\n\t\tnum: 219,\r\n\t},\r\n\teffectspore: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target) && !source.status && source.runStatusImmunity('powder')) {\r\n\t\t\t\tconst r = this.random(100);\r\n\t\t\t\tif (r < 11) {\r\n\t\t\t\t\tsource.setStatus('slp', target);\r\n\t\t\t\t} else if (r < 21) {\r\n\t\t\t\t\tsource.setStatus('par', target);\r\n\t\t\t\t} else if (r < 30) {\r\n\t\t\t\t\tsource.setStatus('psn', target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Effect Spore\",\r\n\t\trating: 2,\r\n\t\tnum: 27,\r\n\t},\r\n\tflamebody: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target)) {\r\n\t\t\t\tif (this.randomChance(3, 10)) {\r\n\t\t\t\t\tsource.trySetStatus('brn', target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Flame Body\",\r\n\t\trating: 2,\r\n\t\tnum: 49,\r\n\t},\r\n\tfullmetalbody: {\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tlet showMsg = false;\r\n\t\t\tlet i: BoostName;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tdelete boost[i];\r\n\t\t\t\t\tshowMsg = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (showMsg && !(effect as ActiveMove).secondaries) {\r\n\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"[from] ability: Full Metal Body\", \"[of] \" + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMovePriority: -100,\r\n\t\tonAnyModifyMove(move, source, target){ //Fake unbreakableness by deleting ignoringAbility, except for Teravolt and Turboblaze.\r\n\t\t\tif(target !== this.effectState.source) return;\r\n\t\t\tif(move.ignoringAbility && !['teravolt','turboblaze'].includes(source.ability)){\r\n\t\t\t\tdelete move.ignoringAbility;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Full Metal Body\",\r\n\t\tdesc: \"Prevents other Pokemon from lowering this Pokemon's stat stages. Lunar Ray, Solar Impact, Smite, and Mold Breaker cannot ignore this Ability.\",\r\n\t\tshortDesc: \"Prevents other Pokemon from lowering this Pokemon's stat stages.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 230,\r\n\t},\r\n\tgooey: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target, true)) {\r\n\t\t\t\tthis.add('-ability', target, 'Gooey');\r\n\t\t\t\tthis.boost({spe: -1}, source, target, null, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Gooey\",\r\n\t\trating: 2,\r\n\t\tnum: 183,\r\n\t},\r\n\timposter: {\r\n\t\tonSwitchIn(pokemon) {\r\n\t\t\tthis.effectState.switchingIn = true;\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\t// Imposter does not activate when Skill Swapped or when Neutralizing Gas leaves the field\r\n\t\t\tif (!this.effectState.switchingIn) return;\r\n\t\t\tconst target = pokemon.side.foe.active[pokemon.side.foe.active.length - 1 - pokemon.position];\r\n\t\t\tif (target) {\r\n\t\t\t\tif(target.hasAbility('owntempo')){\r\n\t\t\t\t\tthis.add('-activate', target, '[from] ability: Own Tempo');\r\n\t\t\t\t\tthis.hint('Own Tempo blocks effects that steal or copy its attributes');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tpokemon.transformInto(target, this.dex.abilities.get('imposter'));\r\n\t\t\t}\r\n\t\t\tthis.effectState.switchingIn = false;\r\n\t\t},\r\n\t\tname: \"Imposter\",\r\n\t\trating: 5,\r\n\t\tnum: 150,\r\n        flags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t},\r\n\tironbarbs: {\r\n\t\tonHitOrder: 1,\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target, true)) {\r\n\t\t\t\tthis.damage(source.baseMaxhp / 8, source, target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Iron Barbs\",\r\n\t\trating: 2.5,\r\n\t\tnum: 160,\r\n\t},\r\n\tmummy: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tconst sourceAbility = source.getAbility();\r\n\t\t\tif (sourceAbility.flags['cantsuppress'] || sourceAbility.id === 'mummy') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target, !source.isAlly(target))) {\r\n\t\t\t\tconst oldAbility = source.setAbility('mummy', target);\r\n\t\t\t\tif (oldAbility) {\r\n\t\t\t\t\tthis.add('-activate', target, 'ability: Mummy', this.dex.abilities.get(oldAbility).name, '[of] ' + source);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Mummy\",\r\n\t\trating: 2,\r\n\t\tnum: 152,\r\n\t},\r\n\tneutralizinggas: {\r\n\t\tinherit: true,\r\n\t\tonPreStart(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\tthis.add('-ability', pokemon, 'Neutralizing Gas');\r\n\t\t\tpokemon.abilityState.ending = false;\r\n\t\t\tconst strongWeathers = ['desolateland', 'primordialsea', 'deltastream'];\r\n\t\t\tfor (const target of this.getAllActive()) {\r\n\t\t\t\tif (target.hasItem('Ability Shield')) {\r\n\t\t\t\t\tthis.add('-block', target, 'item: Ability Shield');\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tthis.singleEvent('End', target.getAbility(), target.abilityState, target, pokemon, 'neutralizinggas');\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\toblivious: {\r\n\t\tinherit: true,\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'attract' || type === 'taunt') return false;\r\n\t\t},\r\n\t\tonTryHit(pokemon, target, move) {\r\n\t\t\tif (move.id === 'attract' || move.id === 'taunt') {\r\n\t\t\t\tthis.add('-immune', pokemon, '[from] ability: Oblivious');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (effect.name === 'Intimidate' && boost.atk) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Oblivious', '[of] ' + target);\r\n\t\t\t}\r\n\t\t\tif (effect.name === 'Disturbance' && boost.spa) {\r\n\t\t\t\tdelete boost.spa;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Special Attack', '[from] ability: Oblivious', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"This Pokemon cannot be infatuated or taunted. Gaining this Ability while infatuated or taunted cures it. This Pokemon is immune to the effect of the Intimidate and Disturbance Abilities.\",\r\n\t\tshortDesc: \"Immunity to infatuation, taunt, Intimidate, and Disturbance.\",\r\n\t},\r\n\topportunist: {\r\n\t\tinherit: true,\r\n\t\tonFoeAfterBoost(boost, target, source, effect) {\r\n\t\t\tif (effect?.name === 'Opportunist' || effect?.name === 'Mirror Herb') return;\r\n\t\t\tif(target.hasAbility('owntempo')){\r\n\t\t\t\tthis.add('-activate', target, '[from] ability: Own Tempo');\r\n\t\t\t\tthis.hint('Own Tempo blocks effects that steal or copy its attributes');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst pokemon = this.effectState.target;\r\n\t\t\tconst positiveBoosts: Partial<BoostsTable> = {};\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! > 0) {\r\n\t\t\t\t\tpositiveBoosts[i] = boost[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (Object.keys(positiveBoosts).length < 1) return;\r\n\t\t\tthis.boost(positiveBoosts, pokemon);\r\n\t\t},\r\n\t\tdesc: \"When an opposing Pokemon has a stat stage raised, this Pokemon copies the effect, unless the opponent has the Own Tempo Ability or was already copying the boost through Opportunist or a held Mirror Herb.\",\r\n\t},\r\n\tpoisonpoint: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target)) {\r\n\t\t\t\tif (this.randomChance(3, 10)) {\r\n\t\t\t\t\tsource.trySetStatus('psn', target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Poison Point\",\r\n\t\trating: 1.5,\r\n\t\tnum: 38,\r\n\t},\r\n\tpoisontouch: {\r\n\t\tonSourceHit(damage, target, source, move) {\r\n\t\t\t// Despite not being a secondary, Shield Dust / Covert Cloak block Poison Touch's effect\r\n\t\t\tif (target.hasAbility('shielddust') || target.hasItem('covertcloak')) return;\r\n\t\t\tif (this.checkMoveMakesContact(move, target, source)) {\r\n\t\t\t\tif (this.randomChance(3, 10)) {\r\n\t\t\t\t\ttarget.trySetStatus('psn', source);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Poison Touch\",\r\n\t\trating: 2,\r\n\t\tnum: 143,\r\n\t},\r\n\troughskin: {\r\n\t\tonHitOrder: 1,\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target, true)) {\r\n\t\t\t\tthis.damage(source.baseMaxhp / 8, source, target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Rough Skin\",\r\n\t\trating: 2.5,\r\n\t\tnum: 24,\r\n\t},\r\n\tscrappy: {\r\n\t\tinherit: true,\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (effect.name === 'Intimidate' && boost.atk) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Scrappy', '[of] ' + target);\r\n\t\t\t}\r\n\t\t\tif (effect.name === 'Disturbance' && boost.spa) {\r\n\t\t\t\tdelete boost.spa;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Special Attack', '[from] ability: Scrappy', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"This Pokemon can hit Ghost types with Normal- and Fighting-type moves. This Pokemon is immune to the effect of the Intimidate and Disturbance Abilities.\",\r\n\t\tshortDesc: \"Fighting, Normal moves hit Ghost. Immune to Intimidate/Disturbance.\",\r\n\t},\r\n\tshadowshield: {\r\n\t\tonModifyMovePriority: -100,\r\n\t\tonAnyModifyMove(move, source, target){ //Fake unbreakableness by deleting ignoringAbility, except for Teravolt and Turboblaze.\r\n\t\t\tif(target !== this.effectState.source) return;\r\n\t\t\tif(move.ignoringAbility && !['teravolt','turboblaze'].includes(source.ability)){\r\n\t\t\t\tdelete move.ignoringAbility;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Shadow Shield\",\r\n\t\tdesc: \"If this Pokemon is at full HP, damage taken from attacks is halved. Lunar Ray, Solar Impact, Smite, and Mold Breaker cannot ignore this Ability.\",\r\n\t\tshortDesc: \"If this Pokemon is at full HP, damage taken from attacks is halved.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 3.5,\r\n\t\tnum: 231,\r\n\t},\r\n\tstatic: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target)) {\r\n\t\t\t\tif (this.randomChance(3, 10)) {\r\n\t\t\t\t\tsource.trySetStatus('par', target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Static\",\r\n\t\trating: 2,\r\n\t\tnum: 9,\r\n\t},\r\n\tstickyhold: {\r\n\t\tonTakeItem(item, pokemon, source) {\r\n\t\t\tif (this.suppressingAbility(pokemon) || !pokemon.hp || pokemon.item === 'stickybarb') return;\r\n\t\t\tif ((source && source !== pokemon) || (this.activeMove && this.activeMove.id === 'knockoff')) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Sticky Hold');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Sticky Hold\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2,\r\n\t\tnum: 60,\r\n\t},\r\n\tstrongjaw: {\r\n\t\tinherit: true,\r\n\t\tdesc: \"This Pokemon's bite-based attacks have their power multiplied by 1.5. Super Fang will do damage equal to 75% of the target's current HP.\",\r\n\t\tshortDesc: \"This Pokemon's bite-based attacks have 1.5x power.\",\r\n\t},\r\n\ttrace: {\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (!pokemon.isStarted || this.effectState.gaveUp) return;\r\n\r\n\t\t\tconst possibleTargets = pokemon.adjacentFoes().filter(\r\n\t\t\t\ttarget => !target.getAbility().flags['notrace'] && target.ability !== 'noability'\r\n\t\t\t);\r\n\t\t\tif (!possibleTargets.length) return;\r\n\r\n\t\t\tconst target = this.sample(possibleTargets);\r\n\t\t\tconst ability = target.getAbility();\r\n\t\t\tif(target.ability === 'owntempo'){ //Own Tempo isn't exempt from copying, it causes it to fail\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Trace');\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Own Tempo');\r\n\t\t\t\tthis.hint('Own Tempo blocks effects that steal or copy its attributes');\r\n\t\t\t\tthis.effectState.gaveUp = true;\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (pokemon.setAbility(ability)) {\r\n\t\t\t\tthis.add('-ability', pokemon, ability, '[from] ability: Trace', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon){\r\n\t\t\tif(this.effectState.gaveUp) delete this.effectState.gaveUp;\r\n\t\t},\r\n\t\tname: \"Trace\",\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1},\r\n\t\trating: 2.5,\r\n\t\tnum: 36,\r\n\t},\r\n\twanderingspirit: {\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (source.getAbility().flags['failskillswap']) return;\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target)) {\r\n\t\t\t\tconst targetCanBeSet = this.runEvent('SetAbility', target, source, this.effect, source.ability);\r\n\t\t\t\tif (!targetCanBeSet) return targetCanBeSet;\r\n\t\t\t\tconst sourceAbility = source.setAbility('wanderingspirit', target);\r\n\t\t\t\tif (!sourceAbility) return;\r\n\t\t\t\tif (target.isAlly(source)) {\r\n\t\t\t\t\tthis.add('-activate', target, 'Skill Swap', '', '', '[of] ' + source);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', target, 'ability: Wandering Spirit', this.dex.abilities.get(sourceAbility).name, 'Wandering Spirit', '[of] ' + source);\r\n\t\t\t\t}\r\n\t\t\t\ttarget.setAbility(sourceAbility);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Wandering Spirit\",\r\n\t\trating: 2.5,\r\n\t\tnum: 254,\r\n\t},\r\n\tzenmode: {\r\n\t\tinherit: true,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif (pokemon.baseSpecies !== 'Darmanitan' || pokemon.transformed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (pokemon.hp <= pokemon.maxhp / 2 && pokemon.species.forme !== 'Zen') {\r\n\t\t\t\tpokemon.addVolatile('zenmode');\r\n\t\t\t\tpokemon.addVolatile('zenmode');\r\n\t\t\t} else if (pokemon.hp > pokemon.maxhp / 2 && pokemon.species.forme === 'Zen') {\r\n\t\t\t\tpokemon.addVolatile('zenmode'); // in case of base Darmanitan-Zen\r\n\t\t\t\tpokemon.removeVolatile('zenmode');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tif (!pokemon.volatiles['zenmode'] || !pokemon.hp) return;\r\n\t\t\tpokemon.transformed = false;\r\n\t\t\tdelete pokemon.volatiles['zenmode'];\r\n\t\t\tif (pokemon.species.baseSpecies === 'Darmanitan' && pokemon.species.battleOnly) {\r\n\t\t\t\tpokemon.formeChange(pokemon.species.battleOnly as string, this.effect, false, '[silent]');\r\n\t\t\t}\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tonStart(pokemon) {\r\n\t\t\t\tif (pokemon.species.id !== 'darmanitanzen') pokemon.formeChange('Darmanitan-Zen');\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tif (pokemon.species.forme === 'Zen') {\r\n\t\t\t\t\tpokemon.formeChange(pokemon.species.battleOnly as string);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\t/* Abilities edited as part of the dual-type update*/\r\n\taerilate: {\r\n\t\tinherit: true,\r\n\t\tonModifyType(move, pokemon) {\r\n\t\t\tconst noModifyType = [\r\n\t\t\t\t'judgment', 'multiattack', 'naturalgift', 'revelationdance', 'technoblast', 'weatherball',\r\n\t\t\t];\r\n\t\t\tif ((move.type === 'Normal' || (move.twoType && move.twoType === 'Normal')) && !noModifyType.includes(move.id) && !(move.isZ && move.category !== 'Status')) {\r\n\t\t\t\tmove.type = 'Flying';\r\n\t\t\t\tif(move.twoType) delete move.twoType;\r\n\t\t\t\tmove.aerilateBoosted = true;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tblaze: {\r\n\t\tinherit: true,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Fire' || (move.twoType && move.twoType === 'Fire')) && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Blaze boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Fire' || (move.twoType && move.twoType === 'Fire')) && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Blaze boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tdarkaura: {\r\n\t\tinherit: true,\r\n\t\tonAnyBasePower(basePower, source, target, move) {\r\n\t\t\tif (target === source || move.category === 'Status' || move.hasAuraBreak || (move.type !== 'Dark' && (!move.twoType || move.twoType !== 'Dark'))) return;\r\n\t\t\tif (!move.auraBooster) move.auraBooster = this.effectState.target;\r\n\t\t\tif (move.auraBooster !== this.effectState.target) return;\r\n\t\t\treturn this.chainModify([0x1547, 0x1000]);\r\n\t\t},\r\n\t},\r\n\tdisguise: {\r\n\t\tinherit: true,\r\n\t\tonCriticalHit(target, source, move) {\r\n\t\t\tif (!target) return;\r\n\t\t\tif (target.species.id !== 'mimikyu' || target.transformed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst hitSub = target.volatiles['substitute'] && !move.flags['authentic'] && !move.infiltrates;\r\n\t\t\tif (hitSub) return;\r\n\r\n\t\t\tif (!target.runImmunity(move.type) || !(move.twoType && target.runImmunity(move.twoType))) return;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonEffectiveness(typeMod, target, type, move) {\r\n\t\t\tif (!target) return;\r\n\t\t\tif (target.species.id !== 'mimikyu' || target.transformed) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst hitSub = target.volatiles['substitute'] && !move.flags['authentic'] && !move.infiltrates;\r\n\t\t\tif (hitSub) return;\r\n\r\n\t\t\tif (!target.runImmunity(move.type) || !(move.twoType && target.runImmunity(move.twoType))) return;\r\n\t\t\treturn 0;\r\n\t\t},\r\n\t},\r\n\teartheater: {\r\n\t\tinherit: true,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && (move.type === 'Ground' || (move.twoType && move.twoType === 'Ground'))) {\r\n\t\t\t\tif (!this.heal(target.baseMaxhp / 4)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Earth Eater');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tfairyaura: {\r\n\t\tinherit: true,\r\n\t\tonAnyBasePower(basePower, source, target, move) {\r\n\t\t\tif (target === source || move.category === 'Status' || move.hasAuraBreak || (move.type !== 'Fairy' && (!move.twoType || move.twoType !== 'Fairy'))) return;\r\n\t\t\tif (!move.auraBooster) move.auraBooster = this.effectState.target;\r\n\t\t\tif (move.auraBooster !== this.effectState.target) return;\r\n\t\t\treturn this.chainModify([0x1547, 0x1000]);\r\n\t\t},\r\n\t},\r\n\tfluffy: {\r\n\t\tinherit: true,\r\n\t\tonSourceModifyDamage(damage, source, target, move) {\r\n\t\t\tlet mod = 1;\r\n\t\t\tif ((move.type === 'Fire' || (move.twoType && move.twoType === 'Fire'))) mod *= 2;\r\n\t\t\tif (move.flags['contact']) mod /= 2;\r\n\t\t\treturn this.chainModify(mod);\r\n\t\t},\r\n\t},\r\n\tgalvanize: {\r\n\t\tinherit: true,\r\n\t\tonModifyType(move, pokemon) {\r\n\t\t\tconst noModifyType = [\r\n\t\t\t\t'judgment', 'multiattack', 'naturalgift', 'revelationdance', 'technoblast', 'weatherball',\r\n\t\t\t];\r\n\t\t\tif ((move.type === 'Normal' || (move.twoType && move.twoType === 'Normal')) && !noModifyType.includes(move.id) && !(move.isZ && move.category !== 'Status')) {\r\n\t\t\t\tmove.type = 'Electric';\r\n\t\t\t\tif(move.twoType) delete move.twoType;\r\n\t\t\t\tmove.galvanizeBoosted = true;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\ticeface: {\r\n\t\tinherit: true,\r\n\t\tonCriticalHit(target, type, move) {\r\n\t\t\tif (!target) return;\r\n\t\t\tif (move.category !== 'Physical' || target.species.id !== 'eiscue' || target.transformed) return;\r\n\t\t\tif (target.volatiles['substitute'] && !(move.flags['authentic'] || move.infiltrates)) return;\r\n\t\t\tif (!target.runImmunity(move.type) || !(move.twoType && target.runImmunity(move.twoType))) return;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonEffectiveness(typeMod, target, type, move) {\r\n\t\t\tif (!target) return;\r\n\t\t\tif (move.category !== 'Physical' || target.species.id !== 'eiscue' || target.transformed) return;\r\n\t\t\tif (target.volatiles['substitute'] && !(move.flags['authentic'] || move.infiltrates)) return;\r\n\t\t\tif (!target.runImmunity(move.type) || !(move.twoType && target.runImmunity(move.twoType))) return;\r\n\t\t\treturn 0;\r\n\t\t},\r\n\t},\r\n\tjustified: {\r\n\t\tinherit: true,\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif ((move.type === 'Dark' || (move.twoType && move.twoType === 'Dark'))) {\r\n\t\t\t\tthis.boost({atk: 1});\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tlightningrod: {\r\n\t\tinherit: true,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && (move.type === 'Electric' || (move.twoType && move.twoType === 'Electric'))) {\r\n\t\t\t\tif (!this.boost({spa: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Lightning Rod');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnyRedirectTarget(target, source, source2, move) {\r\n\t\t\tif ((move.type !== 'Electric' && (!move.twoType || move.twoType !== 'Electric')) || ['firepledge', 'grasspledge', 'waterpledge'].includes(move.id)) return;\r\n\t\t\tconst redirectTarget = ['randomNormal', 'adjacentFoe'].includes(move.target) ? 'normal' : move.target;\r\n\t\t\tif (this.validTarget(this.effectState.target, source, redirectTarget)) {\r\n\t\t\t\tif (move.smartTarget) move.smartTarget = false;\r\n\t\t\t\tif (this.effectState.target !== target) {\r\n\t\t\t\t\tthis.add('-activate', this.effectState.target, 'ability: Lightning Rod');\r\n\t\t\t\t}\r\n\t\t\t\treturn this.effectState.target;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tliquidvoice: {\r\n\t\tinherit: true,\r\n\t\tonModifyType(move, pokemon) {\r\n\t\t\tif (move.flags['sound']) { // hardcode\r\n\t\t\t\tmove.type = 'Water';\r\n\t\t\t\tdelete move.twoType;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tmotordrive: {\r\n\t\tinherit: true,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && (move.type === 'Electric' || (move.twoType && move.twoType === 'Electric'))) {\r\n\t\t\t\tif (!this.boost({spe: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Motor Drive');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tovergrow: {\r\n\t\tinherit: true,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Grass' || (move.twoType && move.twoType === 'Grass')) && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Overgrow boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Grass' || (move.twoType && move.twoType === 'Grass')) && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Overgrow boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tpixilate: {\r\n\t\tinherit: true,\r\n\t\tonModifyType(move, pokemon) {\r\n\t\t\tconst noModifyType = [\r\n\t\t\t\t'judgment', 'multiattack', 'naturalgift', 'revelationdance', 'technoblast', 'weatherball',\r\n\t\t\t];\r\n\t\t\tif ((move.type === 'Normal' || (move.twoType && move.twoType === 'Normal')) && !noModifyType.includes(move.id) && !(move.isZ && move.category !== 'Status')) {\r\n\t\t\t\tmove.type = 'Fairy';\r\n\t\t\t\tif(move.twoType) delete move.twoType;\r\n\t\t\t\tmove.pixilateBoosted = true;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\trattled: {\r\n\t\tinherit: true,\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (['Dark', 'Bug', 'Ghost'].includes(move.type) || (move.twoType && ['Dark', 'Bug', 'Ghost'].includes(move.twoType))) {\r\n\t\t\t\tthis.boost({spe: 1});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAfterBoost(boost, target, source, effect) {\r\n\t\t\tif (effect?.name === 'Intimidate' || effect?.name === 'Disturbance') {\r\n\t\t\t\tthis.boost({spe: 1});\r\n\t\t\t}\r\n\t\t},\r\n\t\tdesc: \"This Pokemon's Speed is raised by 1 stage if hit by a Bug-, Dark-, or Ghost-type attack, or if an opposing Pokemon's Intimidate or Disturbance Ability affected this Pokemon.\",\r\n\t\tshortDesc: \"+1 Speed if hit by a Bug/Dark/Ghost-type attack or Intimidate/Disturbance.\",\r\n\t},\r\n\trefrigerate: {\r\n\t\tinherit: true,\r\n\t\tonModifyType(move, pokemon) {\r\n\t\t\tconst noModifyType = [\r\n\t\t\t\t'judgment', 'multiattack', 'naturalgift', 'revelationdance', 'technoblast', 'weatherball',\r\n\t\t\t];\r\n\t\t\tif ((move.type === 'Normal' || (move.twoType && move.twoType === 'Normal')) && !noModifyType.includes(move.id) && !(move.isZ && move.category !== 'Status')) {\r\n\t\t\t\tmove.type = 'Ice';\r\n\t\t\t\tif(move.twoType) delete move.twoType;\r\n\t\t\t\tmove.refrigerateBoosted = true;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\trockypayload: {\r\n\t\tinherit: true,\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Rock' || (move.twoType && move.twoType === 'Rock'))) {\r\n\t\t\t\tthis.debug('Rocky Payload boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Rock' || (move.twoType && move.twoType === 'Rock'))) {\r\n\t\t\t\tthis.debug('Rocky Payload boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tsandforce: {\r\n\t\tinherit: true,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (this.field.isWeather('sandstorm')) {\r\n\t\t\t\tif (['Rock', 'Ground', 'Steel'].includes(move.type) || (move.twoType && ['Rock', 'Ground', 'Steel'].includes(move.twoType))) {\r\n\t\t\t\t\tthis.debug('Sand Force boost');\r\n\t\t\t\t\treturn this.chainModify([0x14CD, 0x1000]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tsapsipper: {\r\n\t\tinherit: true,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && (move.type === 'Grass' || (move.twoType && move.twoType === 'Grass'))) {\r\n\t\t\t\tif (!this.boost({atk: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Sap Sipper');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryHitSide(target, source, move) {\r\n\t\t\tif (target === this.effectState.target || target.side !== source.side) return;\r\n\t\t\tif (move.type === 'Grass' || (move.twoType && move.twoType === 'Grass')) {\r\n\t\t\t\tthis.boost({atk: 1}, this.effectState.target);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tsteamengine: {\r\n\t\tinherit: true,\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (['Water', 'Fire'].includes(move.type) || (move.twoType && ['Water', 'Fire'].includes(move.twoType))) {\r\n\t\t\t\tthis.boost({spe: 6});\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tsteelworker: {\r\n\t\tinherit: true,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Steel' || (move.twoType && move.twoType === 'Steel')) {\r\n\t\t\t\tthis.debug('Steelworker boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Steel' || (move.twoType && move.twoType === 'Steel')) {\r\n\t\t\t\tthis.debug('Steelworker boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tstormdrain: {\r\n\t\tinherit: true,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && (move.type === 'Water' || (move.twoType && move.twoType === 'Water'))) {\r\n\t\t\t\tif (!this.boost({spa: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Storm Drain');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnyRedirectTarget(target, source, source2, move) {\r\n\t\t\tif ((move.type !== 'Water' && (!move.twoType || move.twoType !== 'Water')) || ['firepledge', 'grasspledge', 'waterpledge'].includes(move.id)) return;\r\n\t\t\tconst redirectTarget = ['randomNormal', 'adjacentFoe'].includes(move.target) ? 'normal' : move.target;\r\n\t\t\tif (this.validTarget(this.effectState.target, source, redirectTarget)) {\r\n\t\t\t\tif (move.smartTarget) move.smartTarget = false;\r\n\t\t\t\tif (this.effectState.target !== target) {\r\n\t\t\t\t\tthis.add('-activate', this.effectState.target, 'ability: Storm Drain');\r\n\t\t\t\t}\r\n\t\t\t\treturn this.effectState.target;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tswarm: {\r\n\t\tinherit: true,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Bug' || (move.twoType && move.twoType === 'Bug')) && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Swarm boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Bug' || (move.twoType && move.twoType === 'Bug')) && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Swarm boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tthickfat: {\r\n\t\tinherit: true,\r\n\t\tonSourceModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tlet moveTypes = 0;\r\n\t\t\tif (move.type === 'Ice' || (move.twoType && move.twoType === 'Ice')) {\r\n\t\t\t\tthis.debug('Thick Fat weaken');\r\n\t\t\t\tmoveTypes++;\r\n\t\t\t}\r\n\t\t\tif (move.type === 'Fire' || (move.twoType && move.twoType === 'Fire')) {\r\n\t\t\t\tthis.debug('Thick Fat weaken');\r\n\t\t\t\tmoveTypes++;\r\n\t\t\t}\r\n\t\t\tif(moveTypes) return this.chainModify(Math.pow(0.5,moveTypes)); //.5 for 1 match, .25 for 2 matches; works for 0 matches but doesn't need to return\r\n\t\t},\r\n\t\tonSourceModifySpA(atk, attacker, defender, move) {\r\n\t\t\tlet moveTypes = 0;\r\n\t\t\tif (move.type === 'Ice' || (move.twoType && move.twoType === 'Ice')) {\r\n\t\t\t\tthis.debug('Thick Fat weaken');\r\n\t\t\t\tmoveTypes++;\r\n\t\t\t}\r\n\t\t\tif (move.type === 'Fire' || (move.twoType && move.twoType === 'Fire')) {\r\n\t\t\t\tthis.debug('Thick Fat weaken');\r\n\t\t\t\tmoveTypes++;\r\n\t\t\t}\r\n\t\t\tif(moveTypes) return this.chainModify(Math.pow(0.5,moveTypes)); //.5 for 1 match, .25 for 2 matches; works for 0 matches but doesn't need to return\r\n\t\t},\r\n\t},\r\n\ttorrent: {\r\n\t\tinherit: true,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Water' || (move.twoType && move.twoType === 'Water')) && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Torrent boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif ((move.type === 'Water' || (move.twoType && move.twoType === 'Water')) && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Torrent boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tvoltabsorb: {\r\n\t\tinherit: true,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && (move.type === 'Electric' || (move.twoType && move.twoType === 'Electric'))) {\r\n\t\t\t\tif (!this.heal(target.baseMaxhp / 4)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Volt Absorb');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twaterabsorb: {\r\n\t\tinherit: true,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && (move.type === 'Water' || (move.twoType && move.twoType === 'Water'))) {\r\n\t\t\t\tif (!this.heal(target.baseMaxhp / 4)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Water Absorb');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twatercompaction: {\r\n\t\tinherit: true,\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (move.type === 'Water' || (move.twoType && move.twoType === 'Water')) {\r\n\t\t\t\tthis.boost({def: 2});\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\t\r\n\t/* Renamed and deleted Abilities */\r\n\tescapeplan: {\r\n\t\tonEmergencyExit(target) {\r\n\t\t\tif (!this.canSwitch(target.side) || target.forceSwitchFlag || target.switchFlag) return;\r\n\t\t\tfor (const side of this.sides) {\r\n\t\t\t\tfor (const active of side.active) {\r\n\t\t\t\t\tactive.switchFlag = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttarget.switchFlag = true;\r\n\t\t\tthis.add('-activate', target, 'ability: Escape Plan');\r\n\t\t},\r\n\t\tname: \"Escape Plan\",\r\n\t\tdesc: \"When this Pokemon has more than 1/2 its maximum HP and takes damage bringing it to 1/2 or less of its maximum HP, it immediately switches out to a chosen ally. This effect applies after all hits from a multi-hit move; This effect applies to both direct and indirect damage, except Curse and Substitute on use, Belly Drum, Pain Split, and confusion damage.\",\r\n\t\tshortDesc: \"This Pokemon switches out when it reaches 1/2 or less of its maximum HP.\",\r\n\t\tflags: {},\r\n\t\trating: 1,\r\n\t\tnum: 1017,\r\n\t},\r\n\twimpout: null,\r\n\temergencyexit: null,\r\n\tinduction: {\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(spa, pokemon) {\r\n\t\t\tif (pokemon.side.active.length === 1) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tfor (const allyActive of pokemon.side.active) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tallyActive && allyActive.position !== pokemon.position &&\r\n\t\t\t\t\t!allyActive.fainted && allyActive.hasAbility('induction')\r\n\t\t\t\t) {\r\n\t\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Induction\",\r\n\t\tdesc: \"If an active ally also has this Ability, this Pokemon's Special Attack is multiplied by 1.5.\",\r\n\t\tshortDesc: \"If an active ally also has this Ability, this Pokemon's Sp. Atk is 1.5x.\",\r\n\t\tflags: {},\r\n\t\trating: 0,\r\n\t\tnum: 1018,\r\n\t},\r\n\tplus: null,\r\n\tminus: null,\r\n\tpowerofalchemy: null,\r\n\tpowerspot: null,\r\n\tmajesty: {\r\n\t\tonFoeTryMove(source, target, move) {\r\n\t\t\tif (move.target === 'foeSide' || (move.target === 'all' &&  move.id !== 'perishsong')) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst dazzlingHolder = this.effectState.target;\r\n\t\t\tif ((target.side === dazzlingHolder.side || move.target === 'all') && move.priority > 0.1) {\r\n\t\t\t\tthis.attrLastMove('[still]');\r\n\t\t\t\tthis.add('cant', source, 'ability: Majesty', move, '[of] ' + dazzlingHolder);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tname: \"Majesty\",\r\n\t\tdesc: \"While this Pokemon is active, priority moves from opposing Pokemon targeted at allies are prevented from having an effect.\",\r\n\t\tshortDesc: \"While this Pokemon is active, allies are protected from opposing priority moves.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 2.5,\r\n\t\tnum: 214,\r\n\t},\r\n\tqueenlymajesty: null,\r\n\trebound: null,\r\n\tslushrush: null,\r\n\ttanglinghair: null,\r\n\tangershell: null,\r\n\tasoneglastrier: null,\r\n\tasonespectrier: null,\r\n\tbattlebond: null,\r\n\tchillingneigh: null,\r\n\tcuriousmedicine: null,\r\n\tdragonsmaw: null,\r\n\tgorillatactics: null,\r\n\tgrimneigh: null,\r\n\tlibero: null,\r\n\tlingeringaroma: null,\r\n\tmirrorarmor: null,\r\n\tperishbody: null,\r\n\tpunkrock: null,\r\n\tsteelyspirit: null,\r\n\tsupersweetsyrup: null,\r\n\tsupremeoverlord: null,\r\n\ttransistor: null,\r\n\tunseenfist: null,\r\n\twellbakedbody: null,\r\n\tembodyaspectteal: null,\r\n\tembodyaspectwellspring: null,\r\n\tembodyaspecthearthflame: null,\r\n\tembodyaspectcornerstone: null,\r\n\t\r\n\t/* CAP */\r\n\temergence: {\r\n\t\tonTryHitPriority: 1,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (this.effectState.target.activeTurns) return;\r\n\r\n\t\t\tif (target === source || move.hasBounced || !move.flags['reflectable']) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst newMove = this.dex.getActiveMove(move.id);\r\n\t\t\tnewMove.hasBounced = true;\r\n\t\t\tthis.actions.useMove(newMove, target, source);\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tonAllyTryHitSide(target, source, move) {\r\n\t\t\tif (this.effectState.target.activeTurns) return;\r\n\r\n\t\t\tif (target.side === source.side || move.hasBounced || !move.flags['reflectable']) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst newMove = this.dex.getActiveMove(move.id);\r\n\t\t\tnewMove.hasBounced = true;\r\n\t\t\tthis.actions.useMove(newMove, this.effectState.target, source);\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tduration: 1,\r\n\t\t},\r\n\t\tisNonstandard: \"CAP\",\r\n\t\tname: \"Emergence\",\r\n\t\tdesc: \"On switch-in, this Pokemon blocks certain status moves and instead uses the move against the original user.\",\r\n\t\tshortDesc: \"On switch-in, blocks certain status moves and bounces them back to the user.\",\r\n        flags: {breakable: 1},\r\n\t\trating: 3,\r\n\t\tnum: -3,\r\n\t},\r\n\tmountaineer: null,\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,MAAM,YAAsD;AAAA;AAAA,EAElE,gBAAgB;AAAA,IACf,aAAaA,UAAQ;AACpB,MAAAA,SAAQ,YAAY,aAAa;AAAA,IAClC;AAAA,IACA,aAAa,MAAM;AAGlB,WAAK,eAAe;AAAA,IACrB;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,OAAO,GAAG;AACxB,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,OAAO,GAAG;AACxB,aAAK,MAAM,iBAAiB;AAC5B,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,QAAQ,QAAQ;AACf,UAAI,UAAU;AACd,iBAAW,UAAU,KAAK,aAAa,GAAG;AACzC,YAAI,OAAO,eAAe,YAAY;AAAG,oBAAU;AAAA,MACpD;AACA,YAAM,YAAY,CAAC,UAAU,eAAe,eAAe,WAAW;AACtE,YAAM,QAAQ,CAAC,OAAO,MAAM,GAAG,OAAO,KAAK,uBAAuB,CAAC;AACnE,iBAAW,QAAQ,OAAO;AACzB,mBAAW,iBAAiB,WAAW;AACtC,cAAI,KAAK,oBAAoB,aAAa,GAAG;AAC5C,iBAAK,IAAI,YAAY,MAAM,KAAK,IAAI,WAAW,IAAI,aAAa,EAAE,IAAI;AACtE,sBAAU;AAAA,UACX;AAAA,QACD;AAAA,MACD;AACA,UAAI,SAAQ;AACX,aAAK,IAAI,aAAa,QAAQ,sBAAsB;AACpD,aAAK,IAAI,aAAa,QAAQ,eAAe;AAAA,MAC9C;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,4BAA4B;AAAA,IAC5B,mBAAmB,QAAQ,QAAQ;AAClC,UAAI,EAAE,WAAW,KAAK,YAAY,WAAW,CAAC,KAAK,UAAU,OAAO,IAAI,KAAK,OAAO,mBAAmB,OAAO;AAAY;AAC1H,iBAAW,QAAQ,KAAK,OAAO;AAC9B,mBAAW,UAAU,KAAK,QAAQ;AACjC,iBAAO,kBAAkB;AAAA,QAC1B;AAAA,MACD;AACA,aAAO,kBAAkB;AACzB,WAAK,IAAI,aAAa,QAAQ,sBAAsB;AACpD,WAAK,IAAI,cAAc,QAAQ,wBAAwB,UAAU,MAAM;AAAA,IACxE;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,WAAW;AAAA,EACZ;AAAA,EACA,aAAa;AAAA,IACZ,QAAQA,UAAS;AAChB,UAAI,YAAY;AAChB,iBAAW,UAAUA,SAAQ,aAAa,GAAG;AAC5C,YAAI,CAAC,WAAW;AACf,eAAK,IAAI,YAAYA,UAAS,eAAe,OAAO;AACpD,sBAAY;AAAA,QACb;AACA,YAAI,OAAO,UAAU,YAAY,GAAG;AACnC,eAAK,IAAI,WAAW,MAAM;AAAA,QAC3B,OAAO;AACN,eAAK,MAAM,EAAC,KAAK,GAAE,GAAG,QAAQA,UAAS,MAAM,IAAI;AAAA,QAClD;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,KAAK,WAAW,WAAW,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,SAAU;AAClG,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAW,QAAQ,2BAA2B;AAAA,QACxD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,oBAAoB,QAAQ,QAAQ,SAAS,MAAM;AAClD,UAAI,KAAK,SAAS,UAAU,KAAK,MAAM,aAAa;AAAG;AACvD,YAAM,iBAAiB,CAAC,gBAAgB,aAAa,EAAE,SAAS,KAAK,MAAM,IAAI,WAAW,KAAK;AAC/F,UAAI,KAAK,YAAY,KAAK,YAAY,QAAQ,QAAQ,cAAc,GAAG;AACtE,YAAI,KAAK;AAAa,eAAK,cAAc;AACzC,YAAI,KAAK,YAAY,WAAW,QAAQ;AACvC,eAAK,IAAI,aAAa,KAAK,YAAY,QAAQ,oBAAoB;AAAA,QACpE;AACA,eAAO,KAAK,YAAY;AAAA,MACzB;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,UAAU,MAAM,GAAG;AACjC,aAAK,MAAM,mBAAmB;AAC9B,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,WAAW,MAAMA,UAAS;AACzB,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,cAAc;AAAA;AAAA,IAEb,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,aAAa;AAAA,IACZ,QAAQA,UAAQ;AACf,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAaA,QAAO;AAAA,IACzE;AAAA,IACA,gBAAgBA,UAAS;AACxB,UAAIA,SAAQ,UAAU,YAAY,KAAKA,SAAQ,UAAU,OAAO,KAAKA,SAAQ,UAAU,UAAU,KAAKA,SAAQ,UAAU,YAAY,KAAKA,SAAQ,UAAU,aAAa,GAAE;AACzK;AAAA,MACD;AACA,UAAG,KAAK,MAAM,UAAU,eAAe,GAAE;AACxC,QAAAA,SAAQ,YAAY,SAASA,UAAS,cAAc;AACpD,QAAAA,SAAQ,YAAY,YAAY;AAChC,aAAK,IAAI,eAAeA,UAAS,uBAAuB;AAAA,MACzD,WAAW,KAAK,YAAY,WAAW,gBAAe;AACrD,QAAAA,SAAQ,eAAe,OAAO;AAC9B,aAAK,IAAI,QAAQA,UAAS,uBAAuB;AAAA,MAClD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,IACP,KAAK;AAAA,EACN;AAAA,EACA,aAAa;AAAA,IACZ,YAAY,KAAKA,UAAS;AACzB,UAAI,cAAc,KAAK,MAAM,eAAe;AAC3C,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,SAAS;AAAA,IACR,aAAa,MAAM,QAAQ,QAAQ;AAClC,UAAI,KAAK,WAAW,OAAM;AACzB,aAAK,MAAM,wCAAwC;AACnD,aAAK,SAAS;AAAA,MACf,WAAU,KAAK,aAAY;AAC1B,mBAAW,aAAa,KAAK,aAAY;AACxC,cAAG,UAAU,WAAW,OAAM;AAC7B,iBAAK,MAAM,wCAAwC;AACnD,sBAAU,SAAS;AAAA,UACpB;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA;AAAA,IAEA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,iBAAiB;AAAA,IACjB,WAAWA,UAAS;AACnB,UAAI,CAAC,CAAC,oBAAoB,iBAAiB,EAAE,SAASA,SAAQ,QAAQ,IAAI,KAAKA,SAAQ,aAAa;AACnG;AAAA,MACD;AACA,UAAIA,SAAQ,MAAMA,SAAQ,QAAQ,KAAK,CAAC,CAAC,MAAM,EAAE,SAASA,SAAQ,QAAQ,KAAK,GAAG;AACjF,QAAAA,SAAQ,YAAY,UAAU;AAAA,MAC/B,WAAWA,SAAQ,KAAKA,SAAQ,QAAQ,KAAK,CAAC,MAAM,EAAE,SAASA,SAAQ,QAAQ,KAAK,GAAG;AACtF,QAAAA,SAAQ,YAAY,UAAU;AAC9B,QAAAA,SAAQ,eAAe,UAAU;AAAA,MAClC;AAAA,IACD;AAAA,IACA,MAAMA,UAAS;AACd,UAAI,CAACA,SAAQ,UAAU,UAAU,KAAK,CAACA,SAAQ;AAAI;AACnD,MAAAA,SAAQ,cAAc;AACtB,aAAOA,SAAQ,UAAU,UAAU;AACnC,UAAIA,SAAQ,QAAQ,gBAAgB,sBAAsBA,SAAQ,QAAQ,YAAY;AACrF,QAAAA,SAAQ,YAAYA,SAAQ,QAAQ,YAAsB,KAAK,QAAQ,OAAO,UAAU;AAAA,MACzF;AAAA,IACD;AAAA,IACA,WAAW;AAAA,MACV,QAAQA,UAAS;AAChB,YAAIA,SAAQ,QAAQ,OAAO;AAAkB,UAAAA,SAAQ,YAAY,iBAAiB;AAAA,MACnF;AAAA,MACA,MAAMA,UAAS;AACd,YAAI,CAAC,MAAM,EAAE,SAASA,SAAQ,QAAQ,KAAK,GAAG;AAC7C,UAAAA,SAAQ,YAAYA,SAAQ,QAAQ,UAAoB;AAAA,QACzD;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,EAAC;AAAA,IACxF,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,QAAQA,UAAS;AAChB,WAAK,YAAY,WAAW;AAC5B,WAAK,YAAY,iBAAiB;AAAA,IACnC;AAAA,IACA,mBAAmB;AAAA,IACnB,UAAUA,UAAS,QAAQ,MAAM;AAChC,UAAI,KAAK,YAAY,aAAa,KAAK,MAAMA,SAAQ,oBAAoB;AACxE,aAAK,YAAY;AAAA,MAClB,WAAWA,SAAQ,UAAU,aAAa,GAAG;AAC5C,YAAI,KAAK,YAAY,aAAa,KAAK,IAAI;AAC1C,eAAK,YAAY,iBAAiB;AAAA,QACnC,OAAO;AACN,eAAK,YAAY;AAAA,QAClB;AAAA,MACD,OAAO;AACN,aAAK,YAAY,iBAAiB;AAAA,MACnC;AACA,WAAK,YAAY,WAAW,KAAK;AAAA,IAClC;AAAA,IACA,eAAe,QAAQ,QAAQ,QAAQ,MAAM;AAC5C,YAAM,SAAS,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI;AAClD,YAAM,iBAAiB,KAAK,YAAY,iBAAiB,IAAI,IAAI,KAAK,YAAY;AAClF,WAAK,MAAM,6BAA6B,OAAO,cAAc,QAAQ;AACrE,aAAO,KAAK,YAAY,CAAC,OAAO,cAAc,GAAG,IAAI,CAAC;AAAA,IACvD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACA,OAAO,CAAC;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,EACT;AAAA,EACA,aAAa;AAAA,IACZ,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,MAAM,SAAS,GAAG;AAC1B,YAAI,KAAK,aAAa,GAAG,EAAE,GAAG;AAC7B,iBAAO,aAAa,OAAO,MAAM;AAAA,QAClC;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,QAAQA,UAAS;AAChB,UAAI,CAAC,CAAC,kBAAkB,uBAAuB,EAAE,SAASA,SAAQ,QAAQ,IAAI;AAAG;AACjF,UAAIA,SAAQ,QAAQ,SAAS;AAAyB,QAAAA,SAAQ,YAAY,uBAAuB;AAAA,IAClG;AAAA,IACA,sBAAsB;AAAA,IACtB,aAAa,UAAU,UAAU,MAAM;AACtC,UAAI,CAAC,CAAC,kBAAkB,uBAAuB,EAAE,SAAS,SAAS,QAAQ,IAAI;AAAG;AAClF,YAAM,cAAe,KAAK,aAAa,WAAW,0BAA0B;AAC5E,UAAI,SAAS,QAAQ,SAAS;AAAa,iBAAS,YAAY,WAAW;AAAA,IAC5E;AAAA,IACA,YAAY,QAAQ,QAAQ,QAAQ,QAAQ;AAC3C,UAAI,CAAC,UAAU,CAAC,UAAU,OAAO,QAAQ,SAAS;AAAyB;AAC3E,UAAI,OAAO,OAAO;AAAQ;AAC1B,UAAI,WAAW,QAAQ;AACtB,aAAK,MAAM,wBAAwB;AACnC,YAAI,OAAO,OAAO,iBAAkB,OAAO,eAAe,UAAU,CAAC,OAAO,aAAc;AACzF,eAAK,IAAI,WAAW,QAAQ,2BAA2B;AAAA,QACxD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiB,QAAQ,QAAQ,QAAQ,QAAQ;AAChD,UAAI,CAAC,UAAU,CAAC,UAAU,OAAO,QAAQ,SAAS;AAAyB;AAC3E,UAAI,CAAC,aAAa,SAAS,aAAa,aAAa,YAAY,MAAM,EAAE,SAAS,OAAO,EAAE,KAAK,WAAW,QAAQ;AAClH,YAAI,OAAO,eAAe,UAAU,CAAC,OAAO;AAAa,eAAK,IAAI,WAAW,QAAQ,2BAA2B;AAChH,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,SAAS,QAAQ,QAAQ,QAAQ,QAAO;AACvC,UAAI,OAAO,QAAQ,SAAS;AAAyB;AACrD,UAAG,UAAU,CAAC,UAAS,eAAe,YAAY,EAAE,SAAS,OAAO,EAAE;AAAG,eAAO;AAAA,IACjF;AAAA,IACA,WAAW,MAAMA,UAAS;AACzB,UAAIA,SAAQ,QAAQ,SAAS;AAAyB;AACtD,UAAI,CAAC,aAAa,MAAM,EAAE,SAAS,IAAI;AAAG,eAAO;AAAA,IAClD;AAAA,IACA,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAI,OAAO,QAAQ,SAAS,2BAA4B,UAAU,WAAW;AAAS;AACtF,UAAI,UAAU;AACd,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,iBAAO,MAAM,CAAC;AACd,oBAAU;AAAA,QACX;AAAA,MACD;AACA,UAAI,WAAW,CAAE,OAAsB,aAAa;AACnD,aAAK,IAAI,SAAS,QAAQ,WAAW,6BAA6B,UAAU,MAAM;AAAA,MACnF;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,EAAC,WAAW,GAAG,cAAc,GAAG,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IACjI,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,kCAAkC;AAAA,IAClC,yBAAyB,QAAQ,QAAQ,MAAM;AAC9C,UAAI,KAAK,aAAa,YAAY,CAAC,OAAO,iBAAiB;AAC1D,aAAK,KAAK,KAAK,cAAc,GAAG,MAAM;AAAA,MACvC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,MAAM;AAAA,IACA,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,cAAc;AAAA,IACb,QAAQ,QAAQ;AACf,WAAK,IAAI,aAAa,QAAQ,uBAAuB;AACrD,WAAK,MAAM,iBAAiB,SAAS;AAAA,IACtC;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,QAAQA,UAAQ;AACf,iBAAU,QAAQA,SAAQ,KAAK,QAAO;AACrC,aAAK,mBAAmB;AAAA,MACzB;AAAA,IACD;AAAA;AAAA,IAEA,eAAeA,UAAQ;AACtB,MAAAA,SAAQ,mBAAmB;AAAA,IAC5B;AAAA,IACA,gBAAgBA,UAAQ;AACvB,aAAOA,SAAQ;AAAA,IAChB;AAAA,IACA,MAAMA,UAAQ;AACb,iBAAU,QAAQA,SAAQ,KAAK,QAAO;AACrC,eAAO,KAAK;AAAA,MACb;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,aAAaA,UAAS,QAAQ,MAAM;AACnC,WAAK,MAAM,uCAAuC,KAAK,EAAE;AACzD,WAAK,IAAI,aAAaA,UAAS,mBAAmB;AAClD,WAAK,aAAa,SAAS;AAC3B,WAAK,QAAQ,SAASA,UAAS,KAAK,MAAM,MAAM;AAChD,aAAO;AAAA,IACR;AAAA,IACA,SAASA,UAAS;AACjB,UAAIA,SAAQ,UAAU,cAAc,GAAG;AACtC,QAAAA,SAAQ,eAAe,cAAc;AACrC,aAAK,MAAM,4BAA4B;AACvC,aAAK,IAAI,aAAaA,UAAS,mBAAmB;AAAA,MACnD;AAAA,IACD;AAAA,IACA,sBAAsB;AAAA,IACtB,aAAaA,UAAS;AACrB,UAAIA,SAAQ,UAAU,cAAc,GAAG;AACtC,QAAAA,SAAQ,eAAe,cAAc;AACrC,aAAK,MAAM,qCAAqC;AAAA,MACjD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,UAAU;AAAA,IACJ,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,QAAQ,QAAQ;AACf,WAAK,IAAI,YAAY,QAAQ,aAAa;AAC1C,aAAO,KAAK,iBAAiB,UAAU;AAAA,IACxC;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,QAAQA,UAAS;AAChB,UAAI,YAAY;AAChB,iBAAW,UAAUA,SAAQ,KAAK,IAAI,QAAQ;AAC7C,YAAI,CAAC,UAAU,CAACA,SAAQ,WAAW,MAAM;AAAG;AAC5C,YAAI,CAAC,WAAW;AACf,eAAK,IAAI,YAAYA,UAAS,oBAAoB;AAClD,sBAAY;AAAA,QACb;AACA,YAAI,OAAO,UAAU,YAAY,GAAG;AACnC,eAAK,IAAI,WAAW,MAAM;AAAA,QAC3B,OAAO;AACN,iBAAO,YAAY,OAAO;AAAA,QAC3B;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,UAAU;AAAA,EACX;AAAA,EACA,cAAc;AAAA,IACb,WAAWA,UAAS;AACnB,UAAGA,SAAQ,QAAQ,gBAAgB,WAAWA,SAAQ,aAAa,cAAc;AAAK,QAAAA,SAAQ,aAAa,cAAc;AAAA,IAC1H;AAAA,IACA,WAAWA,UAAS;AACnB,UAAGA,SAAQ,QAAQ,gBAAgB,SAAQ;AAC1C,YAAG,CAACA,SAAQ,aAAa,cAAa;AACrC,UAAAA,SAAQ,aAAa,YAAYA,SAAQ,QAAQ;AACjD,iBAAMA,SAAQ,aAAa,cAAc,YAAW;AACnD,YAAAA,SAAQ,aAAa,YAAY,KAAK,IAAI,QAAQ,IAAI,KAAK,OAAOA,SAAQ,QAAQ,UAAU,CAAC,EAAE;AAAA,UAChG;AACA,cAAGA,SAAQ,aAAa,cAAcA,SAAQ,QAAQ,OAAM;AAC3D,YAAAA,SAAQ,aAAa,eAAe;AAAA,UACrC;AACA,cAAGA,SAAQ,aAAa,cAAc;AAAI,YAAAA,SAAQ,aAAa,YAAY;AAAA,QAC5E;AACA,YAAGA,SAAQ,aAAa,cAAc,KAAI;AACzC,eAAK,IAAI,aAAaA,UAAS,wBAAwB;AACvD,eAAK,IAAI,UAAUA,UAAS,WAAWA,SAAQ,KAAK,GAAG;AACvD,UAAAA,SAAQ,WAAW,EAAE,kBAAkB;AAAA,QACxC;AACA,YAAGA,SAAQ,aAAa,cAAc,KAAI;AAEzC,eAAK,IAAI,MAAMA,UAAS,wBAAwB;AAChD,UAAAA,SAAQ,aAAa,SAAS;AAC9B,gBAAM,iBAAiB,CAAC,gBAAgB,iBAAiB,aAAa;AACtE,qBAAW,UAAU,KAAK,aAAa,GAAG;AACzC,gBAAI,OAAO,QAAQ,gBAAgB,GAAG;AACrC,mBAAK,IAAI,UAAU,QAAQ,sBAAsB;AACjD;AAAA,YACD;AACA,iBAAK,YAAY,OAAO,OAAO,WAAW,GAAG,OAAO,cAAc,QAAQA,UAAS,iBAAiB;AAAA,UACrG;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,QAAQA,UAAQ;AACf,UAAGA,SAAQ,QAAQ,gBAAgB,SAAQ;AAE1C,cAAM,cAAcA,SAAQ,YAAY;AACxC,YAAI,YAAY;AAChB,gBAAOA,SAAQ,aAAa,WAAU;AAAA,UACrC,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,uBAAW,QAAQA,SAAQ,OAAO,GAAG;AACpC,mBAAK,YAAY,SAAS;AAC1B,mBAAK,YAAY,OAAO;AAAA,YACzB;AACA;AAAA,UACD,KAAK;AACJ,gBAAI,CAACA,SAAQ,aAAa;AAAa;AACvC,gBAAI,aAAa;AAChB,kBAAG,YAAY,WAAW,UAAU,GAAE;AACrC,qBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,qBAAK,IAAI,WAAW,aAAa,2BAA2B;AAC5D,qBAAK,KAAK,4DAA4D;AACtE;AAAA,cACD;AACA,cAAAA,SAAQ,cAAc,aAAa,KAAK,IAAI,UAAU,IAAI,cAAc,CAAC;AAAA,YAC1E;AACA;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,iBAAK,MAAM,iBAAiB,UAAU;AACtC;AAAA,UACD,KAAK;AACJ,uBAAW,UAAUA,SAAQ,KAAK,IAAI,QAAQ;AAC7C,kBAAI,CAAC;AAAQ;AACb,kBAAG,CAAC,WAAU;AACb,qBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,4BAAY;AAAA,cACb;AACA,kBAAI,OAAO,UAAU,YAAY,GAAG;AACnC,qBAAK,IAAI,WAAW,MAAM;AAAA,cAC3B,OAAO;AACN,qBAAK,MAAM,EAAC,KAAK,IAAI,KAAK,IAAI,KAAK,GAAE,GAAG,QAAQA,UAAS,MAAM,IAAI;AAAA,cACpE;AAAA,YACD;AACA;AAAA,UACD,KAAK;AACJ,iBAAK,MAAM,EAAC,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,EAAC,GAAGA,QAAO;AAC5D;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,MAAMA,UAAS,wBAAwB;AAChD,iBAAK,KAAKA,SAAQ,WAAWA,QAAO;AACpC,YAAAA,SAAQ,WAAW;AACnB;AAAA,UACD,KAAK;AACJ,wBAAY;AACZ,uBAAW,OAAOA,SAAQ,KAAK,IAAI,QAAQ;AAC1C,kBAAI,UAAU;AACd,kBAAI;AACJ,mBAAK,KAAK,IAAI,QAAQ;AACrB,oBAAI,IAAI,OAAO,CAAC,MAAM;AAAG;AACzB,oBAAI,OAAO,CAAC,IAAI,CAAC,IAAI,OAAO,CAAC;AAC7B,0BAAU;AAAA,cACX;AACA,kBAAG,SAAQ;AACV,oBAAG,CAAC,WAAU;AACb,uBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,8BAAY;AAAA,gBACb;AACA,qBAAK,IAAI,gBAAgB,KAAK,0BAA0B;AAAA,cACzD;AAAA,YACD;AACA;AAAA,UACD,KAAK;AACJ,kBAAM,WAAW,YAAY,iBAAiB;AAC9C,kBAAM,YAAY,KAAK,OAAO,WAAWA,SAAQ,MAAM,CAAC,KAAK;AAC7D,kBAAM,eAAe,WAAW;AAChC,wBAAY,MAAM,YAAY,KAAK,YAAY;AAC/C,iBAAK,IAAI,UAAU,aAAa,YAAY,WAAW,2BAA2B,UAAU;AAC5F,YAAAA,SAAQ,MAAM,SAAS;AACvB,iBAAK,IAAI,UAAUA,UAASA,SAAQ,WAAW,2BAA2B,UAAU;AACpF,kBAAM,SAAS,KAAK,OAAO,YAAY,YAAY,MAAMA,SAAQ,YAAY,OAAO,CAAC;AACrF,wBAAY,YAAY,MAAM;AAC9B,YAAAA,SAAQ,YAAY,MAAM;AAC1B,kBAAM,SAAS,KAAK,OAAO,YAAY,YAAY,MAAMA,SAAQ,YAAY,OAAO,CAAC;AACrF,wBAAY,YAAY,MAAM;AAC9B,YAAAA,SAAQ,YAAY,MAAM;AAC1B,kBAAM,SAAS,KAAK,OAAO,YAAY,YAAY,MAAMA,SAAQ,YAAY,OAAO,CAAC;AACrF,wBAAY,YAAY,MAAM;AAC9B,YAAAA,SAAQ,YAAY,MAAM;AAC1B,kBAAM,SAAS,KAAK,OAAO,YAAY,YAAY,MAAMA,SAAQ,YAAY,OAAO,CAAC;AACrF,wBAAY,YAAY,MAAM;AAC9B,YAAAA,SAAQ,YAAY,MAAM;AAC1B,kBAAM,SAAS,KAAK,OAAO,YAAY,YAAY,MAAMA,SAAQ,YAAY,OAAO,CAAC;AACrF,wBAAY,YAAY,MAAM;AAC9B,YAAAA,SAAQ,YAAY,MAAM;AAC1B,iBAAK,IAAI,MAAMA,UAAS,0BAA0B,WAAW;AAC7D;AAAA,UACD,KAAK;AACJ,gBAAI,CAACA,SAAQ,MAAM;AAClB,mBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,0BAAY;AACZ,oBAAM,WAAW,YAAY,SAASA,QAAO;AAC7C,kBAAI,YAAY,KAAK,YAAY,YAAY,UAAU,YAAY,UAAUA,UAAS,aAAaA,SAAQ,WAAW,GAAG,QAAQ,KAAKA,SAAQ,QAAQ,QAAQ,GAAG;AAChK,qBAAK,IAAI,YAAY,aAAa,UAAU,YAAY,sBAAsB,UAAUA,QAAO;AAC/F,qBAAK,IAAI,SAASA,UAAS,UAAU,sBAAsB,UAAU,WAAW;AAAA,cACjF,OAAO;AACN,4BAAY,OAAO,SAAS;AAAA,cAC7B;AAAA,YACD;AACA,uBAAW,OAAOA,SAAQ,KAAK,IAAI,QAAQ;AAC1C,kBAAI,CAAC;AAAK;AACV,kBAAG,CAAC,WAAU;AACb,qBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,4BAAY;AAAA,cACb;AACA,oBAAM,OAAO,IAAI,SAASA,QAAO;AACjC,kBAAI,MAAM;AACT,qBAAK,IAAI,YAAY,KAAK,KAAK,MAAM,wBAAwB,UAAUA,QAAO;AAAA,cAC/E;AAAA,YACD;AACA;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,uBAAW,UAAUA,SAAQ,KAAK,IAAI,QAAQ;AAC7C,kBAAI,CAAC;AAAQ;AACb,qBAAO,YAAY,QAAQ;AAAA,YAC5B;AACA;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,iBAAK,MAAM,iBAAiB,YAAY;AACxC;AAAA,UACD,KAAK;AACJ,YAAAA,SAAQ,YAAY,YAAYA,UAAS,eAAe;AACxD,uBAAW,UAAUA,SAAQ,KAAK,IAAI,QAAQ;AAC7C,kBAAI,CAAC,UAAU,OAAO;AAAS;AAC/B,kBAAI,OAAO,MAAM;AAChB,qBAAK,IAAI,aAAaA,UAAS,wBAAwB;AACvD,qBAAK,IAAI,SAAS,QAAQ,OAAO,QAAQ,EAAE,MAAM,gBAAgB,UAAUA,UAAS,YAAY;AAAA,cACjG;AAAA,YACD;AACA,YAAAA,SAAQ,YAAY,YAAY;AAChC;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,iBAAK,MAAM,EAAC,KAAK,GAAE,GAAGA,QAAO;AAC7B;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,iBAAK,MAAM,EAAC,KAAK,GAAE,GAAGA,QAAO;AAC7B;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,iBAAK,MAAM,iBAAiB,WAAW;AACvC;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,uBAAW,UAAUA,SAAQ,KAAK,IAAI,QAAQ;AAC7C,kBAAI,CAAC,UAAU,OAAO;AAAS;AAC/B,qBAAO,YAAY,QAAQ;AAAA,YAC5B;AACA,YAAAA,SAAQ,KAAK,IAAI,iBAAiB,WAAW;AAC7C,YAAAA,SAAQ,YAAY,UAAU;AAC9B;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,MAAMA,UAAS,wBAAwB;AAChD,YAAAA,SAAQ,YAAY,SAAS;AAC7B;AAAA,UACD,KAAK;AACJ,kBAAM,gBAAgB;AAAA,cACrB;AAAA,cAAW;AAAA,cAAe;AAAA,cAAc;AAAA,cAAa;AAAA,cAAQ;AAAA,cAAa;AAAA,cAAc;AAAA,cAAU;AAAA,cAAe;AAAA,cAAe;AAAA,YACjI;AACA,uBAAW,aAAa,eAAe;AACtC,kBAAIA,SAAQ,KAAK,oBAAoB,SAAS,GAAG;AAChD,qBAAK,IAAI,YAAYA,SAAQ,MAAM,KAAK,IAAI,WAAW,IAAI,SAAS,EAAE,IAAI;AAAA,cAC3E;AACA,kBAAIA,SAAQ,KAAK,IAAI,oBAAoB,SAAS,GAAG;AACpD,qBAAK,IAAI,YAAYA,SAAQ,KAAK,KAAK,KAAK,IAAI,WAAW,IAAI,SAAS,EAAE,IAAI;AAAA,cAC/E;AAAA,YACD;AACA,iBAAK,MAAM,aAAa;AACxB,iBAAK,MAAM,aAAa;AACxB;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,wBAAY,kBAAkB;AAC9B;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,iBAAK,MAAM,WAAW,gBAAgB;AACtC;AAAA,UACD,KAAK;AACJ,gBAAIA,SAAQ,KAAK,OAAO,SAAS;AAAG;AACpC,uBAAW,UAAUA,SAAQ,KAAK,IAAI,QAAQ;AAC7C,oBAAM,SAAS,KAAK,MAAM,SAAS,MAAM;AACzC,kBAAI,CAAC;AAAQ;AACb,kBAAG,CAAC,WAAU;AACb,qBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,4BAAY;AAAA,cACb;AACA,qBAAO,QAAQ;AACf,mBAAK,IAAI,aAAa,QAAQ,OAAO;AAAA,YACtC;AACA;AAAA,UACD,KAAK;AACJ,gBAAG,aAAa,KAAK,MAAM,eAAc;AACxC,mBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,0BAAY;AACZ,mBAAK,MAAM,oBAAoB,SAAS;AAAA,YACzC;AACA,uBAAW,UAAUA,SAAQ,KAAK,QAAQ;AACzC,kBAAI,CAAC,UAAU,OAAO,WAAW,CAAC,OAAO,SAAS;AAAG;AACrD,kBAAG,CAAC,WAAU;AACb,qBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,4BAAY;AAAA,cACb;AACA,qBAAO,YAAY,YAAY;AAAA,YAEhC;AACA,uBAAW,UAAUA,SAAQ,KAAK,IAAI,QAAQ;AAC7C,kBAAI,CAAC,UAAU,OAAO,WAAW,CAAC,OAAO,SAAS;AAAG;AACrD,kBAAG,CAAC,WAAU;AACb,qBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,4BAAY;AAAA,cACb;AACA,kBAAG,OAAO,YAAY,aAAa,GAAE;AACpC,uBAAO,UAAU,aAAa,EAAE,WAAW;AAAA,cAC5C;AAAA,YACD;AACA;AAAA,UACD,KAAK;AACJ,iBAAK,IAAI,OAAOA,UAAS,wBAAwB;AACjD;AAAA,QACF;AAAA,MACD;AAAA,IACD;AAAA,IACA,aAAaA,UAAQ;AACpB,UAAGA,SAAQ,QAAQ,gBAAgB,WAAWA,SAAQ,aAAa,cAAc,KAAI;AACpF,YAAG,KAAK,SAAS;AAAG;AACpB,YAAI,YAAY;AAEhB,mBAAW,UAAUA,SAAQ,KAAK,IAAI,QAAQ;AAC7C,gBAAM,SAAS,KAAK,MAAM,SAAS,MAAM;AACzC,cAAI,CAAC;AAAQ;AACb,cAAG,CAAC,WAAU;AACb,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,wBAAY;AAAA,UACb;AACA,iBAAO,QAAQ;AACf,eAAK,IAAI,aAAa,QAAQ,OAAO;AAAA,QACtC;AAAA,MACD;AAAA,IACD;AAAA,IACA,cAAc,QAAQ;AACrB,YAAMA,WAAU,KAAK,YAAY;AACjC,UAAGA,SAAQ,QAAQ,gBAAgB,WAAWA,SAAQ,aAAa,cAAc,KAAI;AACpF,QAAAA,SAAQ,YAAY,YAAYA,UAAS,eAAe;AAAA,MACzD;AAAA,IACD;AAAA,IACA,sBAAsB;AAAA,IACtB,aAAa,MAAM,QAAQ,QAAQ;AAClC,UAAG,OAAO,QAAQ,gBAAgB,WAAW,OAAO,aAAa,cAAc,KAAI;AAClF,YAAI,KAAK;AAAY;AACrB,cAAM,OAAO,KAAK,qBAAqB,QAAQ,MAAM;AACrD,YAAI,QAAQ,SAAS,SAAS,OAAO,SAAS,EAAE,KAAK,MAAM,MAAM;AAChE,eAAK,IAAI,YAAY,QAAQ,eAAe;AAC5C,iBAAO,QAAQ,IAAI;AACnB,iBAAO,SAAS;AAChB,cAAG,KAAK,OAAO,eAAc;AAC5B,iBAAK,aAAa,MAAM,MAAM;AAAA,UAC/B;AACA,eAAK,IAAI,UAAU,QAAQ,cAAc,IAAI;AAAA,QAC9C;AAAA,MACD;AAAA,IACD;AAAA,IACA,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAG,OAAO,QAAQ,gBAAgB,WAAW,OAAO,aAAa,cAAc,KAAI;AAClF,YAAI,WAAW,UAAU,KAAK,cAAc,CAAC,KAAK,MAAM,aAAa,GAAG;AACvE;AAAA,QACD;AACA,cAAM,UAAU,KAAK,IAAI,cAAc,KAAK,EAAE;AAC9C,gBAAQ,aAAa;AACrB,gBAAQ,mBAAmB;AAC3B,aAAK,QAAQ,QAAQ,SAAS,QAAQ,MAAM;AAC5C,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiB,QAAQ,QAAQ,MAAM;AACtC,UAAG,OAAO,QAAQ,gBAAgB,WAAW,OAAO,aAAa,cAAc,KAAI;AAClF,YAAI,OAAO,SAAS,OAAO,QAAQ,KAAK,cAAc,CAAC,KAAK,MAAM,aAAa,GAAG;AACjF;AAAA,QACD;AACA,cAAM,UAAU,KAAK,IAAI,cAAc,KAAK,EAAE;AAC9C,gBAAQ,aAAa;AACrB,gBAAQ,mBAAmB;AAC3B,aAAK,QAAQ,QAAQ,SAAS,QAAQ,MAAM;AAC5C,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiB,UAAU,QAAQ,QAAQ,MAAM;AAChD,UAAG,OAAO,QAAQ,gBAAgB,WAAW,OAAO,aAAa,cAAc,KAAI;AAClF,YAAG,OAAO,sBAAsB,KAAK,WAAW,GAAE;AACjD,iBAAO;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAAA,IACA,aAAa,MAAM,QAAQ,QAAQ;AAClC,UAAG,OAAO,QAAQ,gBAAgB,SAAQ;AACzC,YAAG,OAAO,aAAa,cAAc,KAAI;AACxC,eAAK,OAAO;AAAA,QACb;AACA,YAAG,OAAO,aAAa,cAAc,KAAI;AACxC,cAAG,OAAO,sBAAsB,GAAE;AACjC,iBAAK,MAAM,8BAA8B;AACzC,iBAAK,WAAW;AAChB,iBAAK,WAAW;AAChB,iBAAK,cAAc;AACnB,iBAAK,gBAAgB;AAAA,UACtB;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,iBAAiB,QAAQA,UAAS;AAEjC,YAAM,cAAc,KAAK,YAAY;AACrC,UAAG,YAAY,QAAQ,gBAAgB,WAAW,YAAY,aAAa,cAAc,KAAI;AAC5F,YAAI,gBAAgBA;AAAS;AAC7B,YAAI,gBAAgB,KAAK,iBAAiBA,aAAY,KAAK,cAAc;AACxE,iBAAO,KAAK,IAAI;AAChB,iBAAO,KAAK,IAAI;AAChB,iBAAO,SAAS,IAAI;AAAA,QACrB;AACA,YAAIA,aAAY,KAAK,iBAAiB,gBAAgB,KAAK,cAAc;AACxE,iBAAO,KAAK,IAAI;AAChB,iBAAO,KAAK,IAAI;AAChB,iBAAO,KAAK,IAAI;AAChB,iBAAO,UAAU,IAAI;AAAA,QACtB;AAAA,MACD;AAAA,IACD;AAAA,IACA,cAAc,QAAQA,UAAS,QAAQ,MAAM;AAC5C,UAAGA,SAAQ,QAAQ,gBAAgB,SAAQ;AAC1C,YAAGA,SAAQ,aAAa,cAAc,KAAI;AAC1C,cAAG,CAACA,SAAQ;AAAI;AACf,cAAI,CAAC,KAAK,MAAM,YAAY,KAAK,KAAK,OAAO,YAAY;AACxD,iBAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,gBAAG,OAAO,UAAU,SAAS;AAAG,qBAAO,eAAe,SAAS;AAC/D,mBAAO,YAAY,WAAW,KAAK,YAAY,MAAM;AAAA,UACtD;AAAA,QACD;AACA,YAAGA,SAAQ,aAAa,cAAc,eAAc;AAAA,UAAC;AACpD,gBAAM,SAAS,KAAK,IAAI,QAAQ,WAAW;AAC3C,iBAAO,WAAW;AAClB,iBAAO,iBAAiB,EAAC,UAAU,KAAK;AACxC,eAAK,QAAQ,QAAQ,QAAQA,QAAO;AAAA,QACrC;AAAA,MACD;AAAA,IACD;AAAA,IACA,cAAcA,UAAS;AACtB,UAAGA,SAAQ,QAAQ,gBAAgB,WAAW,CAAC,KAAI,GAAG,EAAE,SAASA,SAAQ,aAAa,SAAS,GAAE;AAChG,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAG,OAAO,QAAQ,gBAAgB,WAAW,OAAO,aAAa,cAAc,KAAI;AAClF,YAAI;AACJ,aAAK,KAAK,OAAO;AAChB,gBAAM,CAAC,KAAM;AAAA,QACd;AAAA,MACD;AAAA,IACD;AAAA,IACA,QAAQ,QAAQ,QAAQ,QAAQ;AAC/B,UAAG,OAAO,QAAQ,gBAAgB,WAAW,OAAO,aAAa,cAAc,KAAI;AAClF,YAAI,CAAC,UAAU,CAAC,UAAU,OAAO,OAAO,MAAM;AAAG;AACjD,YAAI,OAAO,eAAe,UAAU,CAAC,OAAO,MAAM,YAAY,GAAG;AAChE,eAAK,IAAI,YAAY,QAAQ,eAAe;AAC5C,eAAK,IAAI,aAAa,QAAQ,oBAAoB;AAClD,iBAAO,MAAM;AAAA,QACd;AAAA,MACD;AAAA,IACD;AAAA,IACA,mBAAmB,QAAQ,QAAQ,QAAQ,QAAQ;AAClD,UAAG,OAAO,QAAQ,gBAAgB,WAAW,OAAO,aAAa,cAAc;AAC/E,YAAI,UAAU,OAAO,eAAe,QAAQ;AAC3C,eAAK,MAAM,EAAC,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAM,GAAG,MAAM;AAAA,QACrF;AAAA;AAAA,IACD;AAAA,IACA,WAAWA,UAAQ;AAClB,UAAGA,SAAQ,QAAQ,gBAAgB,WAAWA,SAAQ,aAAa,cAAc,eAAc;AAAA,QAAE;AAChG,cAAM,SAAS,KAAK,IAAI,MAAM,IAAI,WAAW;AAC7C,eAAO,WAAW;AAClB,eAAO,iBAAiB,CAAC;AACzB,eAAO,eAAe,QAAQ,IAAI;AAClC,aAAK,QAAQ,QAAQ,QAAQA,QAAO;AAAA,MACrC;AACA,MAAAA,SAAQ,aAAa,YAAY,CAAC;AAAA,IACnC;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IA8BN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IACzH,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,IACP,OAAO;AAAA,IACP,GAAG;AAAA,IACH,GAAG;AAAA,IACH,GAAG;AAAA,IACH,GAAG;AAAA,IACH,IAAI;AAAA,EACL;AAAA;AAAA,EAEA,SAAS;AAAA,IACR,QAAQA,UAAS;AAChB,WAAK,IAAI,YAAYA,UAAS,mBAAmB;AACjD,YAAM,iBAAiB,CAAC,gBAAgB,iBAAiB,aAAa;AACtE,UAAI,CAAC,eAAe,SAAS,KAAK,MAAM,OAAO,GAAE;AAChD,aAAK,MAAM,aAAa;AAAA,MACzB;AACA,WAAK,YAAY,cAAc;AAAA,IAChC;AAAA,IACA,gBAAgB,QAAQ,QAAQ,SAAS;AACxC,YAAM,iBAAiB,CAAC,gBAAgB,iBAAiB,aAAa;AACtE,UAAI,CAAC,eAAe,SAAS,QAAQ,EAAE,GAAE;AACxC,aAAK,IAAI,aAAa,KAAK,YAAY,QAAQ,mBAAmB;AAClE,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,MAAM;AAAA,IACN,WAAW;AAAA,IACX,MAAM;AAAA,IACA,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,IACP,UAAU;AAAA,EACX;AAAA,EACA,SAAS;AAAA,IACR,WAAWA,UAAQ;AAClB,WAAK,YAAY,cAAc;AAAA,IAChC;AAAA,IACA,QAAQA,UAAQ;AACf,YAAM,WAAWA,SAAQ,KAAK;AAC9B,UAAI,CAAC,KAAK,YAAY,eAAe,CAAC;AAAU;AAChD,YAAM,UAAU,SAAS,WAAW;AACpC,UAAI,QAAQ,MAAM,YAAY,KAAK,QAAQ,OAAO;AAAa;AAC/D,WAAK,IAAI,YAAY,KAAK,YAAY,QAAQ,SAAS,2BAA2B,UAAU,QAAQ;AACpG,WAAK,YAAY,OAAO,WAAW,OAAO;AAC1C,WAAK,YAAY,cAAc;AAAA,IAEhC;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,EAAC;AAAA,IAChE,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,YAAY,WAAWA,UAAS,cAAc,MAAM;AACnD,UAAG,CAAC,eAAc,iBAAiB,EAAE,SAAS,KAAK,MAAM,GAAE;AAC1D,YAAG,KAAK,YAAY,YAAY,QAAU;AACzC,qBAAW,UAAUA,SAAQ,eAAe,IAAI,EAAE,SAAS;AAC1D,gBAAI,OAAO,iBAAiB,KAAK,MAAM,SAAS,MAAM,GAAG;AACxD,mBAAK,YAAY,UAAU;AAC3B;AAAA,YACD;AACA,iBAAK,YAAY,UAAU;AAAA,UAC5B;AAAA,QACD;AACA,YAAI,KAAK,YAAY,YAAY,MAAM;AACtC,eAAK,MAAM,gBAAgB;AAC3B,iBAAO,KAAK,YAAY,GAAG;AAAA,QAC5B;AAAA,MACD,OAAO;AACN,YAAI,EAAE,aAAa,iBAAiB,KAAK,MAAM,SAAS,YAAY,IAAI;AACvE,eAAK,MAAM,gBAAgB;AAC3B,iBAAO,KAAK,YAAY,GAAG;AAAA,QAC5B;AAAA,MACD;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAWA,UAAS;AACnB,UAAG,KAAK,YAAY,YAAY,QAAU;AACzC,aAAK,MAAM,4BAA4B;AACvC,aAAK,YAAY,UAAU;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,cAAc;AAAA,IACb,SAAS;AAAA,IACT,QAAQA,UAAS;AAChB,iBAAW,UAAUA,SAAQ,KAAK,IAAI,QAAQ;AAC7C,YAAI,CAAC,UAAU,OAAO;AAAS;AAC/B,mBAAW,YAAY,OAAO,WAAW;AACxC,gBAAM,OAAO,KAAK,IAAI,MAAM,IAAI,SAAS,IAAI;AAC7C,cAAI,KAAK,aAAa;AAAU;AAChC,cAAG,KAAK;AAAc,iBAAK,OAAO,YAAY,cAAc,MAAM,MAAMA,UAAS,MAAM;AACvF,cAAI,KAAK,SAAQ;AAChB,gBAAI,KAAK,IAAI,YAAY,MAAMA,QAAO,KAAK,KAAK,IAAI,iBAAiB,MAAMA,QAAO,KAAK,GAAG;AACzF,mBAAK,IAAI,YAAYA,UAAS,uBAAuB;AACrD;AAAA,YACD;AAAA,UACD;AACA,gBAAM,WAAW,KAAK;AACtB,cAAI,KAAK,IAAI,YAAY,UAAUA,QAAO,KAAK,KAAK,IAAI,iBAAiB,UAAUA,QAAO,KAAK,GAAG;AACjG,iBAAK,IAAI,YAAYA,UAAS,uBAAuB;AACrD;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,cAAc,QAAQ;AACrB,UAAG,CAAC,KAAK;AAAM;AACf,YAAMA,WAAU,KAAK,YAAY;AACjC,iBAAW,YAAY,OAAO,WAAW;AACxC,cAAM,OAAO,KAAK,IAAI,MAAM,IAAI,SAAS,IAAI;AAC7C,YAAI,KAAK,aAAa;AAAU;AAChC,YAAG,KAAK;AAAc,eAAK,OAAO,YAAY,cAAc,MAAM,MAAMA,UAAS,MAAM;AACvF,YAAI,KAAK,SAAQ;AAChB,cAAI,KAAK,IAAI,YAAY,MAAMA,QAAO,KAAK,KAAK,IAAI,iBAAiB,MAAMA,QAAO,KAAK,GAAG;AACzF,iBAAK,IAAI,YAAYA,UAAS,uBAAuB;AACrD;AAAA,UACD;AAAA,QACD;AACA,cAAM,WAAW,KAAK;AACtB,YAAI,KAAK,IAAI,YAAY,UAAUA,QAAO,KAAK,KAAK,IAAI,iBAAiB,UAAUA,QAAO,KAAK,GAAG;AACjG,eAAK,IAAI,YAAYA,UAAS,uBAAuB;AACrD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,WAAW,UAAU,QAAQ,QAAQ,MAAM;AAC1C,UAAI,WAAW,KAAK,YAAY,UAAU,OAAO,aAAc,YAAY,KAAK;AAAe;AAC/F,UAAG,KAAK;AAAc,aAAK,OAAO,YAAY,cAAc,MAAM,MAAM,SAAS,MAAM;AACvF,UAAI,CAAC,KAAK,SAAQ;AACjB,YAAI,KAAK,IAAI,YAAY,MAAM,MAAM,KAAK,KAAK,IAAI,iBAAiB,MAAM,MAAM,KAAK,GAAG;AACvF,eAAK,IAAI,SAAS,QAAQ,MAAM;AAChC,iBAAO;AAAA,QACR;AAAA,MACD;AACA,YAAM,WAAW,KAAK;AACtB,UAAI,KAAK,IAAI,YAAY,UAAU,MAAM,KAAK,KAAK,IAAI,iBAAiB,UAAU,MAAM,KAAK,GAAG;AAC/F,aAAK,IAAI,SAAS,QAAQ,MAAM;AAChC,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,IACX,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,QAAQA,UAAQ;AACf,WAAK,IAAI,aAAaA,UAAS,qBAAqB;AACpD,WAAK,MAAM,iBAAiB,cAAc;AAAA,IAC3C;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,SAAS;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,WAAWA,UAAS;AACnB,MAAAA,SAAQ,aAAa,QAASA,SAAQ,QAAQ,UAAU,QAAQ,QAAQ;AACxE,WAAK,IAAI,YAAYA,UAAS,QAAQ;AACtC,WAAK,IAAI,YAAYA,UAAS,SAAS;AACvC,WAAK,YAAY,WAAW;AAAA,IAC7B;AAAA,IACA,UAAU,QAAQ,QAAQ,QAAQ;AACjC,UAAG,OAAO,aAAa,UAAU;AAAU;AAC3C,UAAI,OAAO,OAAO,QAAQ;AACzB,aAAK,KAAK,OAAO,YAAY,CAAC;AAAA,MAC/B;AAAA,IACD;AAAA,IACA,WAAW,MAAMA,UAAS;AACzB,UAAGA,SAAQ,aAAa,UAAU;AAAU;AAC5C,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,cAAc,QAAQA,UAAS,QAAQ,MAAM;AAC5C,UAAIA,SAAQ,aAAa,UAAU,SAAS,OAAO,UAAU,SAAS;AAAG;AACzE,UAAI,CAAC,KAAK,MAAM,YAAY,KAAK,KAAK,OAAO,YAAY;AACxD,YAAI,KAAK,aAAa,GAAG,EAAE,GAAG;AAC7B,iBAAO,YAAY,WAAW,KAAK,YAAY,MAAM;AAAA,QACtD;AAAA,MACD;AAAA,IACD;AAAA,IACA,QAAQ;AACP,WAAK,YAAY,WAAW;AAAA,IAC7B;AAAA,IACA,kBAAkB;AACjB,aAAO,CAAC,KAAK,YAAY;AAAA,IAC1B;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,EAAC;AAAA,EACzF;AAAA,EACA,SAAS;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,WAAWA,UAAS;AACnB,MAAAA,SAAQ,aAAa,QAASA,SAAQ,QAAQ,UAAU,QAAQ,QAAQ;AACxE,WAAK,IAAI,YAAYA,UAAS,QAAQ;AACtC,WAAK,IAAI,YAAYA,UAAS,SAAS;AACvC,WAAK,YAAY,WAAW;AAAA,IAC7B;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAWA,UAAS,UAAU,MAAM;AAC/C,UAAGA,SAAQ,aAAa,UAAU;AAAU;AAC5C,UAAI,KAAK,MAAM,UAAU,MAAM,GAAG;AACjC,aAAK,MAAM,mBAAmB;AAC9B,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,kCAAkC;AAAA,IAClC,yBAAyB,QAAQ,QAAQ,MAAM;AAC9C,UAAG,OAAO,aAAa,UAAU;AAAO;AACxC,UAAI,KAAK,aAAa,YAAY,CAAC,OAAO,iBAAiB;AAC1D,aAAK,KAAK,KAAK,cAAc,GAAG,MAAM;AAAA,MACvC;AAAA,IACD;AAAA,IACA,WAAW,MAAMA,UAAS;AACzB,UAAGA,SAAQ,aAAa,UAAU;AAAU;AAC5C,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,QAAQ;AACP,WAAK,YAAY,WAAW;AAAA,IAC7B;AAAA,IACA,kBAAkB;AACjB,aAAO,CAAC,KAAK,YAAY;AAAA,IAC1B;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,EAAC;AAAA,EACzF;AAAA,EACA,SAAS;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,WAAWA,UAAS;AACnB,MAAAA,SAAQ,aAAa,QAASA,SAAQ,QAAQ,UAAU,QAAQ,QAAQ;AACxE,WAAK,IAAI,YAAYA,UAAS,QAAQ;AAAA,IACvC;AAAA,IACA,aAAa,QAAQ,QAAQ,MAAM;AAClC,UAAI,KAAK,WAAW,aAAc,KAAK,WAAW,SAAU,KAAK,OAAO,cAAe;AACtF;AAAA,MACD;AAEA,YAAM,iBAAiB,KAAK,YAAY;AACxC,WAAK,OAAO,SAAS,eAAe,QAAQ,KAAK,WAAW,UAAU,KAAK,WAAW,KAAK;AAC1F,aAAK,aAAa,SAAS;AAC3B,aAAK,IAAI,QAAQ,gBAAgB,oBAAoB,MAAM,UAAU,MAAM;AAC3E,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,UAAU,QAAQ,QAAQ,QAAQ;AACjC,UAAG,OAAO,aAAa,UAAU;AAAU;AAC3C,UAAI,OAAO,OAAO,QAAQ;AACzB,aAAK,KAAK,OAAO,YAAY,CAAC;AAAA,MAC/B;AAAA,IACD;AAAA,IACA,WAAW,MAAMA,UAAS;AACzB,UAAGA,SAAQ,aAAa,UAAU;AAAU;AAC5C,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,cAAc,QAAQA,UAAS,QAAQ,MAAM;AAC5C,UAAIA,SAAQ,aAAa,UAAU,SAAS,OAAO,UAAU,SAAS;AAAG;AACzE,UAAI,CAAC,KAAK,MAAM,YAAY,KAAK,KAAK,OAAO,YAAY;AACxD,YAAI,KAAK,aAAa,GAAG,EAAE,GAAG;AAC7B,iBAAO,YAAY,WAAW,KAAK,YAAY,MAAM;AAAA,QACtD;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,EAAC;AAAA,EACzF;AAAA,EACA,SAAS;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,WAAWA,UAAS;AACnB,MAAAA,SAAQ,aAAa,QAASA,SAAQ,QAAQ,UAAU,QAAQ,QAAQ;AACxE,WAAK,IAAI,YAAYA,UAAS,QAAQ;AAAA,IACvC;AAAA,IACA,aAAa,QAAQ,QAAQ,MAAM;AAClC,UAAI,KAAK,WAAW,aAAc,KAAK,WAAW,SAAU,KAAK,OAAO,cAAe;AACtF;AAAA,MACD;AAEA,YAAM,iBAAiB,KAAK,YAAY;AACxC,WAAK,OAAO,SAAS,eAAe,QAAQ,KAAK,WAAW,UAAU,KAAK,WAAW,KAAK;AAC1F,aAAK,aAAa,SAAS;AAC3B,aAAK,IAAI,QAAQ,gBAAgB,oBAAoB,MAAM,UAAU,MAAM;AAC3E,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAWA,UAAS,UAAU,MAAM;AAC/C,UAAGA,SAAQ,aAAa,UAAU;AAAU;AAC5C,UAAI,KAAK,MAAM,UAAU,MAAM,GAAG;AACjC,aAAK,MAAM,mBAAmB;AAC9B,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,kCAAkC;AAAA,IAClC,yBAAyB,QAAQ,QAAQ,MAAM;AAC9C,UAAG,OAAO,aAAa,UAAU;AAAO;AACxC,UAAI,KAAK,aAAa,YAAY,CAAC,OAAO,iBAAiB;AAC1D,aAAK,KAAK,KAAK,cAAc,GAAG,MAAM;AAAA,MACvC;AAAA,IACD;AAAA,IACA,WAAW,MAAMA,UAAS;AACzB,UAAGA,SAAQ,aAAa,UAAU;AAAU;AAC5C,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,EAAC;AAAA,EACzF;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,qBAAqB,QAAQ,QAAQ,MAAM;AAC1C,UAAI,CAAC,UAAU,WAAW,UAAU,CAAC,OAAO,MAAM,CAAC,KAAK;AAAa;AACrE,YAAM,iBAAiB,OAAO,kBAAkB;AAChD,UAAI,CAAC;AAAgB;AACrB,YAAM,SAAS,KAAK,WAAW,KAAK,cAAc,eAAe;AACjE,UAAI,OAAO,MAAM,OAAO,QAAQ,KAAK,OAAO,KAAK,SAAS,OAAO,QAAQ,GAAG;AAC3E,aAAK,MAAM,EAAC,KAAK,GAAG,KAAK,GAAG,KAAK,EAAC,CAAC;AAAA,MACpC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,UAAU;AAAA,IACT,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAI,UAAU,WAAW,UAAU,MAAM,OAAO,MAAM,MAAM,GAAG;AAC9D,aAAK,MAAM,EAAC,KAAK,CAAC,MAAM,IAAG,GAAG,QAAQ,QAAQ,MAAM,OAAO,IAAI;AAC/D,eAAO,MAAM;AAAA,MACd;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,cAAc;AAAA,IACb,QAAQA,UAAS;AAChB,WAAK,IAAI,YAAYA,UAAS,wBAAwB;AACtD,WAAK,MAAM,aAAa;AACxB,WAAK,YAAY,cAAc;AAAA,IAChC;AAAA,IACA,mBAAmB,QAAQ,QAAQ,MAAM;AACxC,UAAI,WAAW,UAAU,KAAK,aAAa;AAAU;AACrD,WAAK,eAAe;AAAA,IACrB;AAAA,IACA,gBAAgB,QAAQ,QAAQ,SAAS;AACxC,WAAK,IAAI,YAAY,SAAS,wBAAwB;AACtD,aAAO;AAAA,IACR;AAAA,IACA,iBAAiB;AAAA,IACjB,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,IACP,UAAU;AAAA,EACX;AAAA,EACA,WAAW;AAAA,IACV,QAAQA,UAAS;AAChB,WAAK,IAAI,YAAYA,UAAS,qBAAqB;AAAA,IACpD;AAAA,IACA,gBAAgB,QAAQ,QAAQ,SAAS;AACxC,UAAG,KAAK,YAAY,OAAO;AAAiB;AAC5C,aAAO;AAAA,IACR;AAAA,IACA,YAAYA,UAAS;AACpB,UAAI,mBAAmB;AACvB,YAAM,WAAW,KAAK,aAAa;AACnC,WAAK,UAAU,UAAU,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AACpD,iBAAW,UAAU,UAAU;AAC9B,YAAI,OAAO,WAAW,cAAc,GAAG;AACtC,6BAAmB;AAAA,QACpB,WAAW,OAAO,WAAW,eAAe,GAAG;AAC9C,6BAAmB;AAAA,QACpB,WAAW,OAAO,WAAW,aAAa,GAAG;AAC5C,6BAAmB;AAAA,QACpB;AAAA,MACD;AACA,UAAG;AAAkB,aAAK,MAAM,WAAW,gBAAgB;AAAA,IAC5D;AAAA,IACA,iBAAiB;AAAA,IACjB,MAAM;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,qBAAqB,QAAQ,QAAQ,MAAM;AAC1C,UAAI,CAAC,OAAO,MAAM,CAAC,OAAO,YAAY,KAAK,eAAe,UAAU,KAAK,aAAa;AAAU;AAChG,YAAM,OAAO,KAAK,qBAAqB,QAAS,KAAK,UAAU,CAAC,KAAK,MAAM,KAAK,OAAO,IAAI,KAAK,MAAO,IAAI;AAC3G,UAAI,OAAO,SAAS,EAAE,KAAK,MAAM,MAAM;AACtC,YAAI,SAAS,SAAS,CAAC,OAAO,QAAQ,IAAI;AAAG,iBAAO;AACpD,aAAK,IAAI,UAAU,QAAQ,cAAc,MAAM,8BAA8B;AAAA,MAC9E;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,SAASA,UAAS;AACjB,UAAIA,SAAQ,YAAY,gBAAgB,aAAa;AAEpD,YAAIA,SAAQ,YAAY,YAAY;AAAG,UAAAA,SAAQ,eAAe,YAAY;AAC1E;AAAA,MACD;AACA,iBAAU,QAAQA,SAAQ,eAAe,GAAE;AAC1C,YAAG,KAAK,YAAY,gBAAgB;AAAW;AAC/C,YAAI,CAACA,SAAQ,YAAY,YAAY,GAAG;AAEvC,cAAI,KAAK,YAAY,WAAW;AAAG;AAEnC,eAAK,MAAM,aAAaA,QAAO;AAE/B,eAAK,IAAI,aAAaA,UAAS,oBAAoB;AACnD,UAAAA,SAAQ,YAAY,cAAc,IAAI;AACtC,eAAK,YAAY,aAAaA,QAAO;AAAA,QAEtC;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,sBAAsB;AAAA,IACtB,aAAa,MAAM;AAClB,UAAI,CAAC,KAAK;AAAgB,aAAK,iBAAiB,CAAC;AACjD,UAAI,KAAK,mBAAmB,MAAM;AACjC,aAAK,eAAe,QAAQ,IAAI;AAChC,aAAK,eAAe,KAAK,IAAI;AAC7B,aAAK,eAAe,KAAK,IAAI;AAAA,MAC9B;AAAA,IACD;AAAA;AAAA,IAEA,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,QAAQ;AAAA,IACP,SAAS;AAAA,IACT,MAAM;AAAA,IACN,QAAQA,UAAS;AAChB,UAAI,YAAY;AAChB,iBAAU,QAAQA,SAAQ,eAAe,GAAE;AAC1C,YAAI,KAAK;AAAS;AAClB,YAAG,KAAK,WAAW,UAAU,GAAE;AAC9B,cAAG,CAAC,WAAU;AACb,iBAAK,IAAI,aAAaA,UAAS,kBAAkB;AACjD,wBAAY;AAAA,UACb;AACA,eAAK,IAAI,aAAa,MAAM,2BAA2B;AACvD,eAAK,KAAK,uDAAuD;AACjE;AAAA,QACD;AAEA,YAAI;AACJ,aAAK,KAAK,KAAK,QAAQ;AACtB,UAAAA,SAAQ,OAAO,CAAC,IAAI,KAAK,OAAO,CAAC;AAAA,QAClC;AACA,YAAG,CAAC,WAAU;AACb,eAAK,IAAI,YAAYA,UAAS,kBAAkB;AAChD,sBAAY;AAAA,QACb;AACA,aAAK,IAAI,cAAcA,UAAS,IAAI;AAAA,MACrC;AAAA,IACD;AAAA,IACA,WAAW;AAAA,IACX,MAAM;AAAA,EACP;AAAA,EACA,MAAM;AAAA,IACL,SAAS;AAAA,IACT,aAAa,QAAQ,QAAQ,QAAQ;AACpC,UAAI,CAAC,WAAW,aAAa,aAAa,UAAU,eAAe,gBAAgB,WAAW,EAAE,SAAS,OAAO,EAAE,GAAG;AACpH,aAAK,aAAa,SAAS;AAC3B,aAAK,IAAI,QAAQ,KAAK,YAAY,QAAQ,iBAAiB,QAAQ,UAAU,MAAM;AACnF,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,iBAAiB;AAAA,IAChB,SAAS;AAAA;AAAA,IACT,QAAQA,UAAS;AAChB,UAAIA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG;AACpC,UAAI,KAAK,MAAM,EAAC,KAAK,GAAG,KAAK,EAAC,GAAGA,QAAO,GAAG;AAC1C,aAAK,YAAY,cAAc;AAAA,MAChC;AAAA,IACD;AAAA,IACA,qBAAqBA,UAAS,QAAQ,MAAM;AAC3C,UAAI,KAAK,YAAY,eAAeA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG;AACpE,UAAI,KAAK,MAAM,EAAC,KAAK,GAAG,KAAK,EAAC,GAAGA,QAAO,GAAG;AAC1C,aAAK,YAAY,cAAc;AAAA,MAChC;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAWA,UAAS,QAAQ,MAAM;AACjC,UAAI,KAAK,YAAY,eAAeA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG;AACpE,UAAI,KAAK,MAAM,EAAC,KAAK,GAAG,KAAK,EAAC,GAAGA,QAAO,GAAG;AAC1C,aAAK,YAAY,cAAc;AAAA,MAChC;AAAA,IACD;AAAA,IACA,MAAMA,UAAS;AACd,aAAO,KAAK,YAAY;AAAA,IACzB;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,YAAY,KAAKA,UAAS;AACzB,UAAIA,SAAQ,MAAMA,SAAQ,QAAQ,GAAG;AACpC,eAAO,KAAK,YAAY,CAAC,MAAO,IAAM,CAAC;AAAA,MACxC;AAAA,IACD;AAAA,IACA,YAAY,KAAKA,UAAS;AACzB,UAAIA,SAAQ,MAAMA,SAAQ,QAAQ,GAAG;AACpC,eAAO,KAAK,YAAY,CAAC,MAAO,IAAM,CAAC;AAAA,MACxC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,WAAW,WAAW,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,UAAW;AAC/F,YAAI,CAAC,KAAK,KAAK,OAAO,YAAY,CAAC,GAAG;AACrC,eAAK,IAAI,WAAW,QAAQ,0BAA0B;AAAA,QACvD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,wBAAwB;AAAA,IACxB,eAAe,WAAW,UAAU,UAAU,MAAM;AACnD,UAAI,KAAK,YAAY,WAAW;AAAU;AAC1C,UAAK,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAU;AACxE,eAAO,KAAK,YAAY,IAAI;AAAA,MAC7B;AAAA,IACD;AAAA,IACA,UAAU,QAAQ,QAAQ,QAAQ;AACjC,UAAI,OAAO,OAAO,eAAe,OAAO,OAAO,iBAAiB;AAC/D,aAAK,KAAK,OAAO,YAAY,EAAE;AAAA,MAChC,WAAW,OAAO,OAAO,cAAc,OAAO,OAAO,gBAAgB;AACpE,aAAK,OAAO,OAAO,YAAY,IAAI,QAAQ,MAAM;AAAA,MAClD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,cAAc;AAAA,IACb,QAAQA,UAAS;AAChB,UAAIA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG;AACpC,UAAI,KAAK,MAAM,EAAC,KAAK,GAAG,KAAK,EAAC,GAAGA,QAAO,GAAG;AAC1C,aAAK,YAAY,cAAc;AAAA,MAChC;AAAA,IACD;AAAA,IACA,qBAAqBA,UAAS,QAAQ,MAAM;AAC3C,UAAGA,SAAQ,gBAAgB,aAAa,KAAK,YAAY,eAAeA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG;AACxG,cAAOA,SAAQ,OAAM;AAAA,QACrB,KAAK;AACJ,cAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,iBAAK,YAAY,cAAc;AAAA,UAChC;AACA;AAAA,QACD,KAAK;AACJ,cAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,iBAAK,YAAY,cAAc;AAAA,UAChC;AACA;AAAA,QACD,KAAK;AACJ,cAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,iBAAK,YAAY,cAAc;AAAA,UAChC;AACA;AAAA,QACD;AACC,cAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,iBAAK,YAAY,cAAc;AAAA,UAChC;AACA;AAAA,MACD;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAWA,UAAS,QAAQ,MAAM;AACjC,UAAGA,SAAQ,gBAAgB,aAAa,KAAK,YAAY,eAAeA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG;AACxG,cAAOA,SAAQ,OAAM;AAAA,QACrB,KAAK;AACJ,cAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,iBAAK,YAAY,cAAc;AAAA,UAChC;AACA;AAAA,QACD,KAAK;AACJ,cAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,iBAAK,YAAY,cAAc;AAAA,UAChC;AACA;AAAA,QACD,KAAK;AACJ,cAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,iBAAK,YAAY,cAAc;AAAA,UAChC;AACA;AAAA,QACD;AACC,cAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,iBAAK,YAAY,cAAc;AAAA,UAChC;AACA;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAMA,UAAS;AACd,aAAO,KAAK,YAAY;AAAA,IACzB;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IACxG,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,YAAY,KAAKA,UAAS;AACzB,UAAIA,SAAQ,MAAMA,SAAQ,QAAQ,GAAG;AACpC,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,WAAW;AAAA,IACV,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,KAAK,WAAW,WAAW,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,SAAU;AAClG,aAAK,WAAW;AAChB,YAAI,CAAC,OAAO,YAAY,SAAS,GAAG;AACnC,eAAK,IAAI,WAAW,QAAQ,4BAA4B;AAAA,QACzD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAMA,UAAS;AACd,MAAAA,SAAQ,eAAe,SAAS;AAAA,IACjC;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,gBAAgB,QAAQ,QAAQ,QAAQ,QAAQ;AAC/C,UAAI,KAAK,MAAM,iBAAiB,KAAK,YAAY,MAAM,MAAM,mBAAmB,UAAU,WAAW,UAAU,UAAU,OAAO,OAAO,QAAQ;AAC9I,aAAK,MAAM,yCAAyC;AACpD,YAAI,OAAO,OAAO,iBAAkB,OAAO,eAAe,UAAU,CAAC,OAAO,aAAc;AACzF,gBAAM,eAAe,KAAK,YAAY;AACtC,eAAK,IAAI,UAAU,QAAQ,wBAAwB,UAAU,YAAY;AAAA,QAC1E;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,qBAAqB,QAAQ,QAAQ;AACpC,UAAI,KAAK,MAAM,iBAAiB,KAAK,YAAY,MAAM,MAAM,mBAAmB,OAAO,OAAO,QAAQ;AACrG,aAAK,MAAM,2BAA2B;AACtC,cAAM,eAAe,KAAK,YAAY;AACtC,aAAK,IAAI,UAAU,QAAQ,wBAAwB,UAAU,YAAY;AACzE,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,QAAQA,UAAQ;AACf,MAAAA,SAAQ,YAAY,YAAYA,UAAS,UAAU;AAAA,IACpD;AAAA,IACA,WAAW;AAAA;AAAA,MACV,QAAQA,UAAS;AAEhB,YAAI,eAAyB;AAC7B,aAAK,YAAY,YAAY,CAAC;AAC9B,iBAAS,IAAI,GAAG,IAAIA,SAAQ,KAAK,IAAI,OAAO,QAAQ,KAAK;AACxD,gBAAM,SAASA,SAAQ,KAAK,IAAI,OAAO,CAAC;AACxC,yBAAe,OAAO,iBAAiBA,QAAO;AAC9C,cAAG,CAAC;AAAc;AAClB,gBAAM,aAAa,KAAK,OAAO,YAAY;AAC3C,eAAK,YAAY,UAAU,WAAW,CAAC,CAAC,IAAI,WAAW,CAAC;AACxD,eAAK,IAAI,aAAaA,UAAS,uCAAuC,WAAW,CAAC,EAAE,IAAI,UAAU,WAAW,CAAC,CAAC;AAAA,QAEhH;AAAA,MACD;AAAA,MACA,cAAc,QAAO;AACpB,YAAI,eAAqC;AACzC,cAAMA,WAAU,KAAK,YAAY;AACjC,uBAAe,OAAO,iBAAiBA,QAAO;AAC9C,YAAG,CAAC;AAAc;AAClB,cAAM,aAAa,KAAK,OAAO,YAAY;AAC3C,aAAK,YAAY,UAAU,WAAW,CAAC,CAAC,IAAI,WAAW,CAAC;AACxD,aAAK,IAAI,aAAaA,UAAS,uCAAuC,WAAW,CAAC,EAAE,IAAI,UAAU,WAAW,CAAC,CAAC;AAAA,MAEhH;AAAA,MACA,eAAe,QAAO;AACrB,YAAG,KAAK,YAAY,UAAU,OAAO,QAAQ;AAAG,iBAAO,KAAK,YAAY,UAAU,OAAO,QAAQ;AAAA,MAClG;AAAA,MACA,WAAW,UAAU,QAAQ,QAAQ,MAAM;AAE1C,YAAI,WAAW,UAAU,OAAO,aAAc,YAAY,KAAK;AAAe;AAI9E,YAAI,KAAK,YAAY,UAAU,OAAO,QAAQ,MAAM,KAAK,IAAG;AAC3D,iBAAO;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAAA,IACA,QAAQ;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,IACX,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,iBAAiB,UAAUA,UAAS,QAAQ,MAAM;AACjD,UAAI,SAAS,KAAK,SAAS,YAAa,KAAK,WAAW,KAAK,YAAY,aAAcA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG,eAAO,WAAW;AAAA,IAC1I;AAAA,IACA,QAAQ;AAAA,IACR,WAAW;AAAA,EACZ;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,YAAYA,UAAS;AACpB,UAAI,KAAK,MAAM,UAAU,eAAe;AAAG,eAAO,KAAK,YAAY,CAAC;AAAA,IACrE;AAAA,IACA,WAAW;AAAA,EACZ;AAAA,EACA,UAAU;AAAA,IACT,mBAAmB;AAAA,IACnB,UAAUA,UAAS;AAClB,WAAK,IAAI,aAAaA,UAAS,oBAAoB;AACnD,aAAO;AAAA,IACR;AAAA,IACA,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAI,UAAU,WAAW;AAAQ;AACjC,UAAI,MAAM,OAAO,MAAM,MAAM,GAAG;AAC/B,eAAO,MAAM;AACb,YAAI,CAAE,OAAsB,aAAa;AACxC,eAAK,IAAI,SAAS,QAAQ,WAAW,UAAU,6BAA6B,UAAU,MAAM;AAAA,QAC7F;AAAA,MACD;AACA,UAAI,MAAM,OAAO,MAAM,MAAM,GAAG;AAC/B,eAAO,MAAM;AACb,YAAI,CAAE,OAAsB,aAAa;AACxC,eAAK,IAAI,SAAS,QAAQ,WAAW,WAAW,6BAA6B,UAAU,MAAM;AAAA,QAC9F;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,cAAc;AAAA,IACb,SAAS;AAAA,IACT,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,MAAM,iBAAiB,MAAM,mBAAmB;AACxD,aAAK,MAAM,qBAAqB;AAChC,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,QAAQ;AAAA,IACR,WAAW;AAAA,EACZ;AAAA;AAAA,EAEA,QAAQ;AAAA,IACP,QAAQA,UAAS;AAChB,iBAAW,QAAQA,SAAQ,eAAe,GAAG;AAC5C,aAAK,IAAI,aAAaA,UAAS,iBAAiB;AAChD,aAAK,WAAW;AAAA,MACjB;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,kBAAkB,WAAW,UAAU,UAAU,MAAM;AACtD,UAAI,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAS;AACtE,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,SAAS,QAAQ,QAAQ,QAAQ,QAAQ;AAAA,IAAC;AAAA,IAC1C,SAASA,UAAS;AACjB,UAAIA,SAAQ,WAAW,OAAO;AAC7B,aAAK,IAAI,aAAaA,UAAS,oBAAoB;AACnD,QAAAA,SAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,YAAY,QAAQ,QAAQ,QAAQ,QAAQ;AAC3C,UAAI,OAAO,OAAO;AAAO;AACzB,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAW,QAAQ,2BAA2B;AAAA,MACxD;AACA,aAAO;AAAA,IACR;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,QAAQA,UAAQ;AACf,MAAAA,SAAQ,eAAe,YAAY;AACnC,MAAAA,SAAQ,eAAe,aAAa;AACpC,MAAAA,SAAQ,eAAe,cAAc;AAAA,IACtC;AAAA;AAAA,IAEA,WAAW;AAAA,IACX,OAAO;AAAA,EACR;AAAA,EACA,aAAa;AAAA,IACZ,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAI,UAAU,WAAW,UAAU,MAAM,OAAO,MAAM,MAAM,GAAG;AAC9D,aAAK,MAAM,EAAC,KAAK,CAAC,MAAM,IAAG,GAAG,QAAQ,QAAQ,MAAM,OAAO,IAAI;AAC/D,eAAO,MAAM;AAAA,MACd;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,UAAU,QAAQ,QAAQ,QAAQ;AACjC,UAAI,OAAO,OAAO,QAAQ;AACzB,aAAK,KAAK,OAAO,YAAY,CAAC;AAAA,MAC/B;AAAA,IACD;AAAA,IACA,WAAW,MAAMA,UAAS;AACzB,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,SAAS,QAAQA,UAAS,QAAQ,QAAQ;AACzC,UAAI,OAAO,OAAO;AAAO,eAAO;AAAA,IACjC;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,YAAY;AAAA,IACX,QAAQA,UAAQ;AACf,UAAI,cAAc,KAAK,MAAM,eAAe;AAC3C,aAAK,MAAM,oBAAoB,UAAU;AAAA,MAC1C;AAAA,IACD;AAAA,IACA,aAAa,QAAQ,QAAQ,QAAQ;AACpC,UAAI,OAAO,OAAO,YAAY;AAC7B,aAAK,aAAa,SAAS;AAC3B,aAAK,IAAI,QAAQ,KAAK,YAAY,QAAQ,uBAAuB,QAAQ,UAAU,KAAK,YAAY,MAAM;AAC1G,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,kBAAkB;AAAA,IAClB,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,KAAK,MAAM,QAAQ,KAAK,WAAW,UAAU,KAAK,IAAI,YAAY,UAAU,MAAM,GAAG;AACxF,aAAK,IAAI,WAAW,QAAQ,0BAA0B;AACtD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,WAAW;AAAA,EACZ;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,aAAa,MAAM;AAGlB,WAAK,eAAe;AAAA,IACrB;AAAA,IACA,WAAW,OAAO,QAAQ,QAAQ,QAAQ;AACzC,UAAI,OAAO,SAAS,gBAAgB,MAAM,KAAK;AAC9C,eAAO,MAAM;AACb,aAAK,IAAI,SAAS,QAAQ,WAAW,UAAU,+BAA+B,UAAU,MAAM;AAAA,MAC/F;AACA,UAAI,OAAO,SAAS,iBAAiB,MAAM,KAAK;AAC/C,eAAO,MAAM;AACb,aAAK,IAAI,SAAS,QAAQ,WAAW,kBAAkB,+BAA+B,UAAU,MAAM;AAAA,MACvG;AAAA,IACD;AAAA,IACA,cAAc,QAAQ,QAAQ,QAAO;AACpC,UAAG,OAAO,UAAU,YAAY,GAAG;AAAW,eAAO,OAAO,UAAU,YAAY,EAAE;AAAA,IACrF;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,gCAAgC;AAAA,IAChC,uBAAuB,UAAU;AAChC,UAAI,OAAO,aAAa,YAAY,EAAE,cAAc,KAAK,MAAM;AAAgB;AAC/E,WAAK,MAAM,+BAA+B;AAC1C,aAAO,WAAW;AAAA,IACnB;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,eAAe;AAAA,IACd,SAAS;AAAA;AAAA,IACT,QAAQA,UAAS;AAChB,UAAIA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG;AACpC,UAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,aAAK,YAAY,aAAa;AAAA,MAC/B;AAAA,IACD;AAAA,IACA,qBAAqBA,UAAS,QAAQ,MAAM;AAC3C,UAAI,KAAK,YAAY,cAAcA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG;AACnE,UAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,aAAK,YAAY,aAAa;AAAA,MAC/B;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAWA,UAAS,QAAQ,MAAM;AACjC,UAAI,KAAK,YAAY,cAAcA,SAAQ,KAAKA,SAAQ,QAAQ;AAAG;AACnE,UAAI,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,QAAO,GAAG;AAClC,aAAK,YAAY,aAAa;AAAA,MAC/B;AAAA,IACD;AAAA,IACA,MAAMA,UAAS;AACd,aAAO,KAAK,YAAY;AAAA,IACzB;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,OAAO,GAAG;AACxB,aAAK,MAAM,iBAAiB;AAC5B,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,OAAO;AAAA,IACN,SAAS;AAAA;AAAA,IAET,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAI,CAAC,CAAC,YAAY,cAAc,EAAE,SAAS,OAAO,iBAAiB,CAAC,KAAM,UAAU,WAAW;AAAS;AACxG,UAAI,UAAU;AACd,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,iBAAO,MAAM,CAAC;AACd,oBAAU;AAAA,QACX;AAAA,MACD;AACA,UAAI,WAAW,CAAE,OAAsB,aAAa;AACnD,aAAK,IAAI,SAAS,QAAQ,WAAW,8BAA8B,UAAU,MAAM;AAAA,MACpF;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,YAAY,KAAKA,UAAS;AACzB,aAAO,KAAK,YAAY,GAAG;AAAA,IAC5B;AAAA,IACA,WAAW;AAAA,EACZ;AAAA,EACA,QAAQ;AAAA,IACP,SAAS;AAAA,IACT,cAAcA,UAAS;AACtB,aAAO;AAAA,IACR;AAAA,IACA,WAAW;AAAA,EACZ;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,gBAAgB,QAAQ,QAAQ,QAAQ,QAAQ;AAE/C,YAAM,UAAU,CAAC,SAAS,aAAa,aAAa;AACpD,UAAI,QAAQ,SAAS,OAAO,EAAE,GAAG;AAChC,cAAM,QAAS,CAAC,OAAO,aAAa,KAAK,OAAO,SAAS,aAAa,OAAO,OAAO;AACpF,aAAK,OAAO,QAAS,SAAS,MAAO,QAAQ,QAAQ,MAAM;AAC3D,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AAAA,EACA,UAAU;AAAA;AAAA,IACT,yBAAyB,QAAQ,QAAQ,MAAM;AAE9C,UAAI,CAAC,QAAQ,CAAC,UAAU,WAAW,UAAU,KAAK,aAAa,YAAY,KAAK,YAAY;AAAU;AACtG,YAAM,WAAW,OAAO,SAAS,MAAM;AACvC,YAAM,SAAS,OAAO,SAAS;AAC/B,UAAI,OAAO,QAAQ,OAAO,QAAS,CAAC,YAAY,CAAC,QAAS;AACzD,YAAI;AAAU,iBAAO,OAAO,SAAS;AACrC,YAAI;AAAQ,iBAAO,OAAO,OAAO;AACjC;AAAA,MACD;AACA,WAAK,YAAY,WAAW;AAC5B,UACE,UAAU,CAAC,KAAK,YAAY,YAAY,QAAQ,OAAO,WAAW,QAAQ,QAAQ,MAAM,MAAM,KAC9F,YAAY,CAAC,KAAK,YAAY,YAAY,UAAU,OAAO,WAAW,QAAQ,QAAQ,MAAM,QAAQ,GACpG;AACD,YAAI;AAAU,iBAAO,OAAO,SAAS;AACrC,YAAI;AAAQ,iBAAO,OAAO,OAAO;AACjC;AAAA,MACD;AACA,WAAK,IAAI,YAAY,QAAQ,mBAAmB;AAChD,WAAK,IAAI,aAAa,QAAQ,eAAe,UAAU,MAAM;AAC7D,UAAI,QAAQ;AACX,eAAO,QAAQ,MAAM;AACrB,aAAK,IAAI,SAAS,QAAQ,QAAQ,oBAAoB;AAAA,MACvD,OAAO;AACN,aAAK,IAAI,YAAY,QAAQ,UAAU,YAAY,oBAAoB;AAAA,MACxE;AACA,UAAI,UAAU;AACb,eAAO,QAAQ,QAAQ;AACvB,aAAK,IAAI,SAAS,QAAQ,UAAU,oBAAoB;AAAA,MACzD,OAAO;AACN,aAAK,IAAI,YAAY,QAAQ,QAAQ,YAAY,oBAAoB;AAAA,MACtE;AAAA,IACD;AAAA,IACA,YAAYA,UAAS;AACpB,aAAO,KAAK,YAAY;AAAA,IACzB;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,KAAK;AAAA,IACL,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,SAAS,QAAQ,QAAQ,QAAQ,QAAQ;AACxC,UAAI,OAAO,eAAe,UAAU,OAAO,SAAS,YACnD,CAAC,CAAC,KAAK,IAAI,MAAM,IAAI,SAAS,GAAG,KAAK,IAAI,WAAW,IAAI,gBAAgB,GAAG,KAAK,IAAI,WAAW,IAAI,WAAW,GAAG,KAAK,IAAI,WAAW,IAAI,YAAY,GAAG,KAAK,IAAI,WAAW,IAAI,aAAa,GAAG,KAAK,IAAI,WAAW,IAAI,YAAY,CAAC,EAAE,SAAS,MAAM,GACtP;AACD,YAAI,OAAO,eAAe;AAAW,eAAK,IAAI,aAAa,QAAQ,cAAc,OAAO,IAAI;AAC5F,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,OAAO;AACxB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,OAAO;AACxB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,WAAW,MAAMA,UAAS;AACzB,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,YAAY;AAAA,IACX,QAAQA,UAAQ;AACf,UAAI,YAAY;AAChB,iBAAU,UAAUA,SAAQ,aAAa,GAAE;AAC1C,YAAI,OAAO,QAAQ,OAAO,KAAK,CAAC,OAAO,UAAU,SAAS,GAAG;AAC5D,cAAG,CAAC,WAAU;AACb,iBAAK,IAAI,YAAYA,UAAS,aAAa;AAC3C,wBAAY;AAAA,UACb;AACA,iBAAO,YAAY,WAAWA,UAAS,cAAc,SAAS;AAAA,QAC/D;AAAA,MACD;AAAA,IACD;AAAA,IACA,cAAc,QAAO;AACpB,UAAI,OAAO,QAAQ,OAAO,KAAK,CAAC,OAAO,UAAU,SAAS,GAAG;AAC5D,eAAO,YAAY,WAAW,KAAK,YAAY,QAAQ,+BAA+B,SAAS;AAAA,MAChG;AAAA,IACD;AAAA,IACA,MAAMA,UAAQ;AACb,UAAGA,SAAQ,UAAU,SAAS,GAAE;AAC/B,mBAAU,WAAWA,SAAQ,UAAU,SAAS,EAAE,eAAc;AAC/D,kBAAQ,eAAe,SAAS;AAAA,QACjC;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,cAAc;AAAA,IACb,SAAS;AAAA,IACT,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,QAAQ,GAAG;AACzB,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,gBAAgBA,UAAS;AACxB,UAAI;AACJ,cAAQ,KAAK,MAAM,iBAAiB,GAAG;AAAA,QACvC,KAAK;AACJ,oBAAU;AACV;AAAA,QACD,KAAK;AACJ,oBAAU;AACV;AAAA,QACD,KAAK;AACJ,oBAAU;AACV;AAAA,QACD,KAAK;AACJ,oBAAU;AACV;AAAA,QACD;AACC,oBAAUA,SAAQ,QAAQ,MAAM,CAAC;AACjC;AAAA,MACD;AACA,YAAM,QAAQA,SAAQ,SAAS;AAC/B,UAAI,MAAM,CAAC,MAAM,WAAW,CAACA,SAAQ,QAAQ,MAAM,CAAC,IAAI,CAAC,SAAS,MAAM,CAAC,CAAC,IAAI,OAAO;AAAG;AACxF,WAAK,IAAI,UAAUA,UAAS,cAAcA,SAAQ,SAAS,EAAE,KAAK,GAAG,GAAG,yBAAyB;AAAA,IAClG;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,EACT;AAAA,EACA,OAAO;AAAA,IACN,YAAY,QAAQ,QAAQ,MAAM;AACjC,UAAG,KAAK,aAAa,YAAW;AAC/B,aAAK,YAAY,QAAQ,EAAC,KAAK,GAAG,KAAK,GAAE;AAAA,MAC1C;AACA,UAAG,KAAK,aAAa,WAAU;AAC9B,aAAK,YAAY,QAAQ,EAAC,KAAK,GAAG,KAAK,GAAE;AAAA,MAC1C;AAAA,IACD;AAAA,IACA,cAAc,QAAQ,QAAQ,QAAQ,MAAK;AAC1C,UAAG,KAAK,aAAa,YAAW;AAC/B,aAAK,YAAY,QAAQ,EAAC,KAAK,GAAG,KAAK,GAAE;AAAA,MAC1C;AACA,UAAG,KAAK,aAAa,WAAU;AAC9B,aAAK,YAAY,QAAQ,EAAC,KAAK,GAAG,KAAK,GAAE;AAAA,MAC1C;AAAA,IACD;AAAA,IACA,mBAAmB,QAAQ,QAAQ,QAAQ,QAAQ;AAClD,UAAI,UAAU,OAAO,eAAe,QAAQ;AAC3C,aAAK,YAAY,QAAQ,EAAC,KAAK,GAAG,KAAK,GAAG,KAAK,GAAE;AAAA,MAClD;AAAA,IACD;AAAA,IACA,UAAU,QAAQ,QAAQ,QAAQ,QAAQ;AACzC,UAAG,UAAU,KAAK,YAAY,OAAO,QAAQ,GAAE;AAC9C,aAAK,YAAY,QAAQ,EAAC,KAAK,GAAG,KAAK,GAAG,KAAK,GAAG,KAAK,IAAI,KAAK,GAAE;AAAA,MACnE;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAWA,UAAS;AACnB,UAAG,KAAK,YAAY,UAAU;AAAM,aAAK,MAAM,KAAK,YAAY,KAAK;AACrE,WAAK,YAAY,QAAQ;AAAA,IAC1B;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,eAAe;AAAA,IACd,SAAS;AAAA,IACT,aAAa,MAAM;AAClB,UAAI,KAAK,aAAa,UAAU;AAC/B,aAAK,gBAAgB;AACrB,aAAK,iBAAiB;AAAA,MACvB;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,aAAa,MAAM;AAClB,WAAK,gBAAgB;AAAA,IACtB;AAAA,IACA,cAAc,UAAU,QAAQ,QAAQ,MAAM;AAC7C,UAAI,SAAS,WAAW,KAAK,YAAY,UAAU,WAAW,KAAK,YAAY,SAAS;AACvF,eAAO;AAAA,MACR;AACA,aAAO;AAAA,IACR;AAAA,EACD;AAAA,EACA,WAAW;AAAA,IACV,sBAAsB;AAAA,IACtB,gBAAgB,MAAM,QAAQ,QAAQ;AACrC,cAAQ,IAAI,cAAc;AAC1B,cAAQ,IAAI,KAAK,YAAY,MAAM;AACnC,cAAQ,IAAI,WAAW,KAAK,YAAY,MAAM;AAC9C,cAAQ,IAAI,WAAW,KAAK,YAAY,MAAM;AAC9C,UAAI,KAAK,OAAO,cAAa,EAAE,WAAW,KAAK,YAAY,UAAU,WAAW,KAAK,YAAY;AAAS;AAC1G,YAAM,eAAe;AAAA,QACpB;AAAA,QAAa;AAAA,QAAe;AAAA,QAAY;AAAA,QAAe;AAAA,QAAe;AAAA,QAAmB;AAAA,QAAe;AAAA,QAAe;AAAA,QAAa;AAAA,MACrI;AACA,UAAI,EAAE,WAAW,KAAK,YAAY,UAAU,aAAa,SAAS,KAAK,EAAE,IAAI;AAC5E,aAAK,OAAO;AACZ,YAAI,KAAK;AAAS,iBAAO,KAAK;AAAA,MAC/B;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,iBAAiB;AAAA,IAChB,SAAS;AAAA,IACT,YAAY,KAAKA,UAAS;AACzB,UAAI,CAAC,YAAY,cAAc,EAAE,SAAS,KAAK,MAAM,iBAAiB,CAAC,GAAG;AACzE,aAAK,MAAM,kBAAkB;AAC7B,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,QAAQ;AAAA,IACR,WAAW;AAAA,EACZ;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,WAAW,MAAMA,UAAS;AACzB,UAAI,CAAC,UAAS,aAAY,MAAM,EAAE,SAAS,IAAI;AAAG,eAAO;AAAA,IAC1D;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,aAAa,MAAM;AAClB,WAAK,QAAQ,EAAC,GAAG,KAAK,OAAO,eAAe,GAAG,eAAe,GAAG,aAAa,EAAE;AAChF,aAAO,KAAK,MAAM,QAAQ;AAC1B,aAAO,KAAK,MAAM,QAAQ;AAC1B,WAAK,WAAW;AAChB,WAAK,aAAa;AAAA,IACnB;AAAA,IACA,WAAW,OAAO,QAAQ,QAAQ,QAAQ;AACzC,UAAI,OAAO,SAAS,gBAAgB,MAAM,KAAK;AAC9C,eAAO,MAAM;AACb,aAAK,IAAI,SAAS,QAAQ,WAAW,UAAU,6BAA6B,UAAU,MAAM;AAAA,MAC7F;AACA,UAAI,OAAO,SAAS,iBAAiB,MAAM,KAAK;AAC/C,eAAO,MAAM;AACb,aAAK,IAAI,SAAS,QAAQ,WAAW,kBAAkB,6BAA6B,UAAU,MAAM;AAAA,MACrG;AAAA,IACD;AAAA;AAAA,IAEA,MAAM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,eAAe,EAAC;AAAA,IAC5E,UAAU;AAAA,EACX;AAAA,EACA,cAAc;AAAA,IACb,aAAa,QAAQ,QAAQ,MAAM;AAClC,UAAI,KAAK,aAAa,YAAY,KAAK,gBAAgB,KAAK;AAAU;AACtE,UAAI,CAAC,YAAY,SAAS,SAAS,EAAE,SAAS,KAAK,EAAE;AAAG;AACxD,UAAI,CAAC,KAAK,MAAM,QAAQ,KAAK,CAAC,KAAK,aAAa,CAAC,KAAK,QAAQ;AAC7D,aAAK,WAAW;AAChB,aAAK,eAAe;AAAA,MACrB;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAWA,UAAS,QAAQ,MAAM;AAC7C,UAAI,KAAK,iBAAiB,kBAAkB,KAAK,MAAM,GAAE;AACxD,YAAG,KAAK;AAAW,iBAAO,KAAK;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,SAASA,UAAS;AACjB,UAAI,CAAC,OAAO,KAAK,EAAE,SAASA,SAAQ,MAAM,GAAG;AAC5C,aAAK,IAAI,aAAaA,UAAS,sBAAsB;AACrD,QAAAA,SAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,YAAY,QAAQ,QAAQ,QAAQ,QAAQ;AAC3C,UAAI,CAAC,CAAC,OAAO,KAAK,EAAE,SAAS,OAAO,EAAE;AAAG;AACzC,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAW,QAAQ,6BAA6B;AAAA,MAC1D;AACA,aAAO;AAAA,IACR;AAAA,IACA,gBAAgB,QAAQ,QAAQ,QAAQ,QAAQ;AAC/C,UAAI,CAAC,CAAC,OAAO,KAAK,EAAE,SAAS,OAAO,EAAE;AAAG;AACzC,UAAK,QAAiB,QAAQ;AAC7B,cAAM,eAAe,KAAK,YAAY;AACtC,aAAK,IAAI,UAAU,QAAQ,wBAAwB,UAAU,YAAY;AAAA,MAC1E;AACA,aAAO;AAAA,IACR;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,qBAAqB,QAAQ,QAAQ,MAAM;AAC1C,UAAI,UAAU,WAAW,UAAU,MAAM,MAAM,SAAS,GAAG;AAC1D,YAAI,OAAO,QAAQ,OAAO,cAAc,OAAO,mBAAmB,OAAO,eAAe,MAAM;AAC7F;AAAA,QACD;AACA,cAAM,WAAW,OAAO,SAAS,MAAM;AACvC,YAAI,CAAC,UAAU;AACd;AAAA,QACD;AACA,aAAK,IAAI,YAAY,QAAQ,UAAU,YAAY,8BAA8B,UAAU,MAAM;AACjG,aAAK,IAAI,SAAS,QAAQ,UAAU,8BAA8B,UAAU,MAAM;AAAA,MACnF;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,WAAW;AAAA,IACV,yBAAyB;AAAA,IACzB,gBAAgB,WAAW,UAAU,UAAU,MAAM;AACpD,UAAI,CAAC,KAAK,gBAAgB,aAAa,KAAK,YAAY,QAAQ;AAC/D,YAAI,CAAC,KAAK;AAAa,eAAK,cAAc,KAAK,YAAY;AAC3D,YAAI,KAAK,gBAAgB,KAAK,YAAY;AAAQ;AAClD,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,EACR;AAAA,EACA,YAAY;AAAA,IACX,sBAAsB;AAAA,IACtB,gBAAgB,MAAM,QAAQ,QAAO;AACpC,UAAG,WAAW,KAAK,YAAY;AAAQ;AACvC,UAAG,KAAK,mBAAmB,CAAC,CAAC,YAAW,YAAY,EAAE,SAAS,OAAO,OAAO,GAAE;AAC9E,eAAO,KAAK;AAAA,MACb;AAAA,IACD;AAAA,IACA,WAAWA,UAAS;AACnB,WAAK,OAAOA,SAAQ,YAAY,IAAIA,UAASA,QAAO;AAAA,IACrD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,SAAS;AAAA,IACR,aAAa,QAAQ,QAAQ,MAAM;AAClC,UAAI,KAAK;AAAY;AACrB,YAAM,OAAO,KAAK;AAClB,UAAI,QAAQ,SAAS,SAAS,OAAO,SAAS,EAAE,KAAK,MAAM,MAAM;AAChE,YAAI,CAAC,OAAO,QAAQ,IAAI;AAAG;AAC3B,aAAK,IAAI,UAAU,QAAQ,cAAc,MAAM,yBAAyB;AAAA,MACzE;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,gBAAgB;AAAA,IACf,SAAS;AAAA,IACT,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQA,UAAS,QAAQ,QAAQ;AAChC,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAaA,UAAS,2BAA2B,YAAY;AAAA,QACvE,OAAO;AACN,eAAK,IAAI,aAAaA,UAAS,yBAAyB;AAAA,QACzD;AACA,aAAK,YAAY,WAAWA,SAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAUA,UAAS,mBAAmB,KAAK,YAAY,QAAQ;AAAA,MACzE;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,MAAMA,UAAS;AACd,aAAK,IAAI,QAAQA,UAAS,gBAAgB;AAAA,MAC3C;AAAA,IACD;AAAA,IACA,MAAMA,UAAQ;AACb,UAAGA,SAAQ,UAAU,gBAAgB;AAAG,eAAOA,SAAQ,UAAU,gBAAgB;AAAA,IAClF;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,eAAe;AAAA,IACd,SAASA,UAAS;AACjB,UAAIA,SAAQ,WAAW,OAAO;AAC7B,aAAK,IAAI,aAAaA,UAAS,yBAAyB;AACxD,QAAAA,SAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,WAAW,MAAMA,UAAS;AACzB,UAAI,SAAS,UAAU,SAAS;AAAO,eAAO;AAAA,IAC/C;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,WAAW,UAAU,UAAU,MAAM;AACtD,UAAK,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,SAAW;AAC1E,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQA,UAAS,QAAQ,QAAQ;AAChC,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAaA,UAAS,wBAAwB,YAAY;AAAA,QACpE,OAAO;AACN,eAAK,IAAI,aAAaA,UAAS,sBAAsB;AAAA,QACtD;AACA,aAAK,YAAY,WAAWA,SAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAUA,UAAS,eAAe,KAAK,YAAY,QAAQ;AAAA,MACrE;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAKA,UAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAASA,SAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,MAAMA,UAAS;AACd,aAAK,IAAI,QAAQA,UAAS,aAAa;AAAA,MACxC;AAAA,IACD;AAAA,IACA,MAAMA,UAAQ;AACb,UAAGA,SAAQ,UAAU,YAAY;AAAG,eAAOA,SAAQ,UAAU,YAAY;AAAA,IAC1E;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,UAAU,QAAQ,QAAQ,QAAQ;AACjC,UAAI,OAAO,OAAO,eAAe,OAAO,OAAO,iBAAiB;AAC/D,aAAK,KAAK,OAAO,YAAY,CAAC;AAAA,MAC/B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,UAAU;AAAA,IACT,WAAWA,UAAQ;AAClB,WAAK,YAAY,cAAc;AAAA,IAChC;AAAA,IACA,QAAQA,UAAQ;AACf,YAAM,WAAWA,SAAQ,KAAK;AAC9B,UAAI,CAAC,KAAK,YAAY,eAAe,CAAC;AAAU;AAChD,YAAM,UAAU,SAAS,WAAW;AACpC,UAAI,QAAQ,MAAM,YAAY,KAAK,QAAQ,OAAO;AAAa;AAC/D,WAAK,IAAI,YAAY,KAAK,YAAY,QAAQ,SAAS,4BAA4B,UAAU,QAAQ;AACrG,WAAK,YAAY,OAAO,WAAW,OAAO;AAC1C,WAAK,YAAY,cAAc;AAAA,IAChC;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,EAAC;AAAA,IAChE,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,SAAS,UAAU,SAAS,QAAQ;AACvC,YAAI,SAAS,WAAW,SAAS,QAAQ;AACxC,eAAK,MAAM,eAAe;AAC1B,iBAAO,KAAK,YAAY,GAAG;AAAA,QAC5B,OAAO;AACN,eAAK,MAAM,gBAAgB;AAC3B,iBAAO,KAAK,YAAY,IAAI;AAAA,QAC7B;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,SAAS;AAAA,IACR,uBAAuB;AAAA,IACvB,cAAcA,UAAS;AACtB,UAAG,CAACA,SAAQ,UAAU,YAAY,GAAE;AACnC,QAAAA,SAAQ,UAAU;AAAA,MACnB;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACA,OAAO,CAAC;AAAA,IACd,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,WAAW,MAAMA,UAAS;AACzB,UAAI,SAAS;AAAa,eAAO;AAAA,IAClC;AAAA,IACA,QAAQA,UAAQ;AACf,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAaA,QAAO;AAAA,IACzE;AAAA,IACA,gBAAgBA,UAAS;AACxB,UAAI,KAAK,MAAM,UAAU,WAAW,GAAE;AACrC,YAAIA,SAAQ,UAAU,YAAY,KAAKA,SAAQ,UAAU,OAAO,KAAKA,SAAQ,UAAU,UAAU,KAAKA,SAAQ,UAAU,YAAY,KAAKA,SAAQ,UAAU,aAAa,GAAE;AACzK;AAAA,QACD;AACA,QAAAA,SAAQ,YAAY,SAASA,UAAS,WAAW;AACjD,QAAAA,SAAQ,YAAY,YAAY;AAChC,aAAK,IAAI,eAAeA,UAAS,oBAAoB;AAAA,MACtD,WAAWA,SAAQ,UAAU,OAAO,KAAKA,SAAQ,UAAU,OAAO,EAAE,WAAW,aAAY;AAC1F,QAAAA,SAAQ,eAAe,OAAO;AAC9B,aAAK,IAAI,QAAQA,UAAS,oBAAoB;AAAA,MAC/C;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,IACP,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,QAAQA,UAAS;AAChB,UAAI,CAAC,CAAC,cAAc,QAAQ,EAAE,SAASA,SAAQ,YAAY,WAAW,KAAKA,SAAQ,QAAQ,MAAMA,SAAQ;AAAa;AACtH,UAAIA,SAAQ,KAAKA,SAAQ,QAAQ,GAAG;AACnC,YAAIA,SAAQ,QAAQ,OAAO,cAAc;AACxC,UAAAA,SAAQ,YAAY,mBAAmB;AAAA,QACxC,WAAWA,SAAQ,QAAQ,OAAO,UAAU;AAC3C,UAAAA,SAAQ,YAAY,eAAe;AAAA,QACpC;AAAA,MACD,OAAO;AACN,YAAIA,SAAQ,QAAQ,OAAO,oBAAoB;AAC9C,UAAAA,SAAQ,YAAY,YAAY;AAAA,QACjC,WAAWA,SAAQ,QAAQ,OAAO,gBAAgB;AACjD,UAAAA,SAAQ,YAAY,QAAQ;AAAA,QAC7B;AAAA,MACD;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAWA,UAAS;AACnB,UACC,CAAC,CAAC,cAAc,QAAQ,EAAE,SAASA,SAAQ,YAAY,WAAW,KAAKA,SAAQ,QAAQ,MACvFA,SAAQ,eAAe,CAACA,SAAQ;AAC/B;AACF,UAAIA,SAAQ,KAAKA,SAAQ,QAAQ,GAAG;AACnC,YAAIA,SAAQ,QAAQ,OAAO,cAAc;AACxC,UAAAA,SAAQ,YAAY,mBAAmB;AAAA,QACxC,WAAWA,SAAQ,QAAQ,OAAO,UAAU;AAC3C,UAAAA,SAAQ,YAAY,eAAe;AAAA,QACpC;AAAA,MACD,OAAO;AACN,YAAIA,SAAQ,QAAQ,OAAO,oBAAoB;AAC9C,UAAAA,SAAQ,YAAY,YAAY;AAAA,QACjC,WAAWA,SAAQ,QAAQ,OAAO,gBAAgB;AACjD,UAAAA,SAAQ,YAAY,QAAQ;AAAA,QAC7B;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IACzH,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,QAAQA,UAAQ;AACf,UAAI,YAAY;AAChB,iBAAU,UAAUA,SAAQ,aAAa,GAAE;AAC1C,YAAI,CAAC,OAAO,WAAW,WAAW,KAAK,CAAC,OAAO,UAAU,SAAS,GAAG;AACpE,cAAG,CAAC,WAAU;AACb,iBAAK,IAAI,YAAYA,UAAS,YAAY;AAC1C,wBAAY;AAAA,UACb;AACA,iBAAO,YAAY,WAAWA,UAAS,aAAa,SAAS;AAAA,QAC9D;AAAA,MACD;AAAA,IACD;AAAA,IACA,cAAc,QAAO;AACpB,UAAI,CAAC,OAAO,WAAW,WAAW,KAAK,CAAC,OAAO,UAAU,SAAS,GAAG;AACpE,aAAK,IAAI,YAAY,KAAK,YAAY,QAAQ,YAAY;AAC1D,eAAO,YAAY,WAAW,KAAK,YAAY,QAAQ,8BAA8B,SAAS;AAAA,MAC/F;AAAA,IACD;AAAA,IACA,MAAMA,UAAQ;AACb,UAAGA,SAAQ,UAAU,SAAS,GAAE;AAC/B,mBAAU,WAAWA,SAAQ,UAAU,SAAS,EAAE,eAAc;AAC/D,kBAAQ,eAAe,SAAS;AAAA,QACjC;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,SAAS,GAAG;AAC1B,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA;AAAA,IAET,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,aAAa;AAAA,IACZ,WAAWA,UAAS;AACnB,UAAI,CAAC,CAAC,UAAS,WAAW,EAAE,SAASA,SAAQ,YAAY,WAAW,KAAKA,SAAQ;AAAa;AAC9F,UAAIA,SAAQ,KAAKA,SAAQ,QAAQ,GAAG;AACnC,YAAIA,SAAQ,QAAQ,UAAU,UAAU;AACvC,cAAGA,SAAQ,YAAY,gBAAgB,UAAU;AAChD,YAAAA,SAAQ,YAAY,eAAe;AAAA,UACpC,OAAO;AACN,YAAAA,SAAQ,YAAY,kBAAkB;AAAA,UACvC;AAAA,QACD;AAAA,MACD,OAAO;AACN,YAAIA,SAAQ,QAAQ,UAAU,UAAU;AACvC,UAAAA,SAAQ,YAAYA,SAAQ,IAAI,OAAO;AAAA,QACxC;AAAA,MACD;AAAA,IACD;AAAA,IACA,QAAQA,UAAS;AAChB,UAAI,CAAC,CAAC,UAAS,WAAW,EAAE,SAASA,SAAQ,YAAY,WAAW,KAAKA,SAAQ,eAAe,CAACA,SAAQ;AAAa;AACtH,UAAIA,SAAQ,KAAKA,SAAQ,QAAQ,GAAG;AACnC,YAAIA,SAAQ,QAAQ,UAAU,UAAU;AACvC,cAAGA,SAAQ,YAAY,gBAAgB,UAAU;AAChD,YAAAA,SAAQ,YAAY,eAAe;AAAA,UACpC,OAAO;AACN,YAAAA,SAAQ,YAAY,kBAAkB;AAAA,UACvC;AAAA,QACD;AAAA,MACD,OAAO;AACN,YAAIA,SAAQ,QAAQ,UAAU,UAAU;AACvC,UAAAA,SAAQ,YAAYA,SAAQ,IAAI,OAAO;AAAA,QACxC;AAAA,MACD;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAWA,UAAS;AACnB,UAAI,CAAC,CAAC,UAAS,WAAW,EAAE,SAASA,SAAQ,YAAY,WAAW,KAAKA,SAAQ,eAAe,CAACA,SAAQ;AAAI;AAC7G,UAAIA,SAAQ,KAAKA,SAAQ,QAAQ,GAAG;AACnC,YAAIA,SAAQ,QAAQ,UAAU,UAAU;AACvC,cAAGA,SAAQ,YAAY,gBAAgB,UAAU;AAChD,YAAAA,SAAQ,YAAY,eAAe;AAAA,UACpC,OAAO;AACN,YAAAA,SAAQ,YAAY,kBAAkB;AAAA,UACvC;AAAA,QACD;AAAA,MACD,OAAO;AACN,YAAIA,SAAQ,QAAQ,UAAU,UAAU;AACvC,UAAAA,SAAQ,YAAYA,SAAQ,IAAI,OAAO;AAAA,QACxC;AAAA,MACD;AAAA,IACD;AAAA,IACA,YAAY,QAAQ,QAAQ,QAAQ,QAAQ;AAC3C,UAAI,CAAC,CAAC,gBAAgB,iBAAiB,EAAE,SAAS,OAAO,QAAQ,EAAE,KAAK,OAAO;AAAa;AAC5F,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAW,QAAQ,8BAA8B;AAAA,MAC3D;AACA,aAAO;AAAA,IACR;AAAA,IACA,iBAAiB,QAAQ,QAAQ;AAChC,UAAI,CAAC,CAAC,gBAAgB,iBAAiB,EAAE,SAAS,OAAO,QAAQ,EAAE,KAAK,OAAO;AAAa;AAC5F,UAAI,OAAO,OAAO;AAAQ;AAC1B,WAAK,IAAI,WAAW,QAAQ,8BAA8B;AAC1D,aAAO;AAAA,IACR;AAAA,IACA,sBAAsB;AAAA,IACtB,gBAAgB,MAAM,QAAQ,QAAO;AACpC,UAAG,WAAW,KAAK,YAAY;AAAQ;AACvC,UAAG,KAAK,mBAAmB,CAAC,CAAC,YAAW,YAAY,EAAE,SAAS,OAAO,OAAO,GAAE;AAC9E,eAAO,KAAK;AAAA,MACb;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,GAAG,cAAc,GAAG,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IACvI,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,QAAQA,UAAS;AAChB,UAAG,CAAC,KAAK,YAAY,MAAK;AACzB,aAAK,YAAY,OAAO;AACxB,aAAK,IAAI,UAAUA,UAAS,qBAAqB;AAAA,MAClD;AAAA,IAED;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAKA,UAAS;AACzB,UAAG,KAAK,YAAY,OAAO;AAAG,eAAO,KAAK,YAAY,GAAG;AAAA,IAC1D;AAAA,IACA,YAAY,KAAKA,UAAS;AACzB,UAAG,KAAK,YAAY,OAAO;AAAG,eAAO,KAAK,YAAY,GAAG;AAAA,IAC1D;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAWA,UAAS;AACnB,UAAGA,SAAQ,eAAe,KAAK,YAAY,OAAO;AAAG,aAAK,YAAY;AACtE,UAAG,KAAK,YAAY,SAAS,GAAE;AAC9B,aAAK,YAAY,OAAO;AACxB,aAAK,IAAI,QAAQA,UAAS,YAAY;AAAA,MACvC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,WAAW,MAAMA,UAAS;AACzB,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,QAAQA,UAAQ;AACf,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAaA,QAAO;AAAA,IACzE;AAAA,IACA,gBAAgBA,UAAS;AACxB,UAAG,KAAK,MAAM,UAAU,MAAM,GAAE;AAC/B,YAAIA,SAAQ,UAAU,YAAY,KAAKA,SAAQ,UAAU,OAAO,KAAKA,SAAQ,UAAU,UAAU,KAAKA,SAAQ,UAAU,YAAY,KAAKA,SAAQ,UAAU,aAAa,GAAE;AACzK;AAAA,QACD;AACA,QAAAA,SAAQ,YAAY,SAASA,UAAS,MAAM;AAC5C,QAAAA,SAAQ,YAAY,YAAY;AAChC,aAAK,IAAI,eAAeA,UAAS,qBAAqB;AAAA,MACvD,WAAWA,SAAQ,UAAU,OAAO,KAAKA,SAAQ,UAAU,OAAO,EAAE,WAAW,QAAO;AACrF,QAAAA,SAAQ,eAAe,OAAO;AAC9B,aAAK,IAAI,QAAQA,UAAS,qBAAqB;AAAA,MAChD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,OAAO;AAAA,IACP,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,WAAW,MAAMA,UAAS;AACzB,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,YAAY,KAAKA,UAAS;AACzB,UAAI,KAAK,MAAM,UAAU,MAAM,GAAG;AACjC,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,aAAaA,UAAQ;AACpB,MAAAA,SAAQ,YAAY,aAAa;AAAA,IAClC;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ;AAAA,EACT;AAAA,EACA,WAAW;AAAA,IACV,iBAAiB,OAAO,QAAQ,QAAQ,QAAQ;AAC/C,UAAI,CAAC,UAAU,OAAO,SAAS,OAAO,MAAM;AAC3C,YAAI,OAAO,OAAO,aAAa;AAC9B,eAAK,KAAK,gHAAgH,MAAM,OAAO,IAAI;AAAA,QAC5I;AACA;AAAA,MACD;AACA,UAAI,eAAe;AACnB,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,yBAAe;AAAA,QAChB;AAAA,MACD;AACA,UAAI,cAAc;AACjB,aAAK,IAAI,YAAY,QAAQ,WAAW;AACxC,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,QAAQ,QAAQ,MAAM,IAAI;AAAA,MAChD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,QAAQA,UAAQ;AACf,MAAAA,SAAQ,eAAe,YAAY;AACnC,MAAAA,SAAQ,eAAe,aAAa;AACpC,MAAAA,SAAQ,eAAe,cAAc;AAAA,IACtC;AAAA;AAAA,IAEA,WAAW;AAAA,IACX,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,SAASA,UAAS;AACjB,UAAIA,SAAQ,WAAW,OAAO;AAC7B,aAAK,IAAI,aAAaA,UAAS,qBAAqB;AACpD,QAAAA,SAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,EACD;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,iBAAiB,QAAQ,QAAQ,QAAQ,QAAQ;AAChD,UAAI,CAAC,UAAU,WAAW;AAAQ;AAClC,UAAI,UAAU,OAAO,OAAO;AAAe;AAC3C,WAAK,IAAI,aAAa,QAAQ,sBAAsB;AAGpD,aAAO,aAAa,QAAQ,QAAQ,EAAC,QAAQ,OAAO,IAAI,IAAI,cAAa,CAAW;AAAA,IACrF;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,aAAa;AAAA,IACZ,SAAS,QAAQ,QAAQ,QAAQ,QAAQ;AACxC,UAAI,OAAO,OAAO,KAAK,KAAK,UAAU,KAAK,CAAC,QAAQ,UAAU,YAAY,GAAG;AAC5E,eAAO,YAAY,aAAa;AAAA,MACjC;AAAA,IACD;AAAA,IACA,WAAW;AAAA,MACV,UAAU;AAAA;AAAA,MACV,QAAQA,UAAS,QAAQ;AACxB,aAAK,IAAI,aAAaA,UAAS,uBAAuB;AAAA,MACvD;AAAA,MACA,aAAaA,UAAS,MAAM;AAC3B,QAAAA,SAAQ,eAAe,aAAa;AAAA,MACrC;AAAA,MACA,WAAW,UAAU,QAAQ,QAAQ,MAAM;AAC1C,YAAI,CAAC,KAAK,iBAAiB,OAAO,KAAK,aAAc;AAAU,iBAAO;AAAA,MACvE;AAAA,MACA,MAAMA,UAAQ;AACb,aAAK,IAAI,QAAQA,UAAS,yBAAyB,UAAU;AAAA,MAC9D;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,IACL,UAAU;AAAA,EACX;AAAA,EACA,UAAU;AAAA,IACT,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,sBAAsB,MAAM,QAAQ,MAAM;AAClD,aAAK,IAAI,aAAa,QAAQ,mBAAmB;AAAE;AACnD,eAAO,YAAY,cAAc,QAAQ,IAAI,UAAU,IAAI,UAAU,GAAG,SAAS;AAAA,MAClF;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,cAAc;AAAA,IACb,QAAQA,UAAS;AAChB,WAAK,IAAI,YAAYA,UAAS,eAAe;AAC7C,WAAK,MAAM,aAAa;AACxB,WAAK,MAAM,aAAa;AAAA,IACzB;AAAA,IACA,gBAAgB,QAAQ,QAAQ,SAAS;AACxC,YAAM,iBAAiB,CAAC,gBAAgB,iBAAiB,aAAa;AACtE,UAAI,CAAC,eAAe,SAAS,QAAQ,EAAE,GAAE;AACxC,aAAK,IAAI,aAAa,KAAK,YAAY,QAAQ,wBAAwB;AACvE,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,gBAAgB,QAAQ,QAAQ,SAAS;AACxC,WAAK,IAAI,YAAY,SAAS,wBAAwB;AACtD,aAAO;AAAA,IACR;AAAA,IACA,iBAAiB;AAAA,IACjB,iBAAiB;AAAA,IACjB,MAAM;AAAA,IACN,WAAW;AAAA,IACX,MAAM;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,gBAAgB,SAAS,QAAQ,MAAM,MAAM;AAC5C,UAAI,CAAC;AAAQ;AACb,UAAI,KAAK,YAAY;AAAU,eAAO;AACtC,UAAI,KAAK,aAAa;AAAU;AAChC,UAAI,CAAC,OAAO,YAAY,KAAK,IAAI;AAAG;AACpC,UAAI,OAAO,KAAK,OAAO;AAAO;AAE9B,WAAK,IAAI,aAAa,QAAQ,qBAAqB;AACnD,WAAK,YAAY,WAAW;AAC5B,aAAO,KAAK;AACZ,aAAO;AAAA,IACR;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,YAAM,WAAW,SAAS,QAAQ,EAAE;AACpC,UAAI,SAAS,SAAS,YAAY,KAAK,SAAS,OAAO,GAAG,SAAS,SAAS,EAAE,MAAM,KAAK,MAAM;AAC9F,aAAK,MAAM,uBAAuB,KAAK,IAAI;AAC3C,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,EAC3B;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,WAAWA,UAAS;AACnB,UAAIA,SAAQ,YAAY,gBAAgB,eAAeA,SAAQ,eAAe,eAAe,KAAK,MAAM;AAAe;AACvH,cAAOA,SAAQ,QAAQ,EAAE,MAAK;AAAA,QAC9B,KAAK;AACJ,eAAK,IAAI,aAAaA,UAAS,qBAAqB;AACpD,UAAAA,SAAQ,YAAY,qBAAqB,KAAK,QAAQ,IAAI;AAC1D;AAAA,QACD,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK;AACJ,eAAK,IAAI,aAAaA,UAAS,qBAAqB;AACpD,UAAAA,SAAQ,YAAY,sBAAsB,KAAK,QAAQ,IAAI;AAC3D;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,CAAC,OAAO,UAAU,aAAa,EAAE,SAAS,KAAK,MAAM,KAAK,WAAW,UAAU,OAAO,SAAS,OAAO,MAAM;AAC/G,aAAK,IAAI,aAAa,QAAQ,oBAAoB;AAClD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,aAAa,QAAQ,QAAQ,MAAM;AAClC,UAAI,CAAC,OAAO,UAAU,aAAa,EAAE,SAAS,KAAK,MAAM,KAAK,WAAW,UAAU,OAAO,SAAS,OAAO,MAAM;AAC/G,aAAK,IAAI,aAAa,KAAK,YAAY,QAAQ,oBAAoB;AACnE,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,QAAQ;AAAA,IACR,WAAW;AAAA,EACZ;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA;AAAA,IAET,qBAAqB;AAAA,IACrB,YAAY,QAAQ,QAAQ,QAAQ,MAAM;AACzC,UAAG,KAAK;AAAc,eAAO,KAAK;AAAA,IACnC;AAAA,IACA,MAAM;AAAA,EACP;AAAA,EACA,iBAAiB;AAAA,IAChB,cAAc,QAAQ,QAAQ,QAAQ,MAAM;AAC3C,UAAI,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAS;AACtE,aAAK,MAAM,EAAC,KAAK,EAAC,CAAC;AAAA,MACpB;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,SAAS,GAAG;AAC1B,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,WAAW;AAAA,EACZ;AAAA,EACA,YAAY;AAAA,IACX,YAAY,KAAKA,UAAS;AACzB,UAAIA,SAAQ,MAAMA,SAAQ,QAAQ,GAAG;AACpC,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,qBAAqB;AAAA,IACrB,YAAY,QAAQ,QAAQ,QAAQ,MAAM;AACzC,UAAG,KAAK;AAAc,eAAO,KAAK;AAAA,IACnC;AAAA,IACA,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAG,UAAU,WAAW;AAAQ;AAChC,UAAI,CAAC,UAAU,OAAO,SAAS,OAAO,MAAM;AAC3C,YAAI,OAAO,OAAO,aAAa;AAC9B,eAAK,KAAK,4HAA4H,MAAM,OAAO,IAAI;AAAA,QACxJ;AACA;AAAA,MACD;AACA,UAAI,MAAM,OAAO,MAAM,MAAM,GAAG;AAC/B,eAAO,MAAM;AACb,YAAI,CAAE,OAAsB,aAAa;AACxC,eAAK,IAAI,SAAS,QAAQ,WAAW,SAAS,gCAAgC,UAAU,MAAM;AAAA,QAC/F;AAAA,MACD;AAAA,IACD;AAAA,IACA,WAAW;AAAA,EACZ;AAAA,EACA,aAAa;AAAA,IACZ,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAS;AACtE,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAS;AACtE,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,SAASA,UAAS;AACjB,UAAIA,SAAQ,WAAW,OAAO;AAC7B,aAAK,IAAI,aAAaA,UAAS,uBAAuB;AACtD,QAAAA,SAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,YAAY,QAAQ,QAAQ,QAAQ,QAAQ;AAC3C,UAAI,OAAO,OAAO;AAAO;AACzB,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAW,QAAQ,8BAA8B;AAAA,MAC3D;AACA,aAAO;AAAA,IACR;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,SAASA,UAAS;AACjB,UAAIA,SAAQ,WAAW,OAAO;AAC7B,aAAK,IAAI,aAAaA,UAAS,qBAAqB;AACpD,QAAAA,SAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,gBAAgB,QAAQ,QAAQ,QAAQ,QAAQ;AAC/C,UAAI,OAAO,OAAO,OAAO;AACxB,aAAK,MAAM,2BAA2B;AACtC,cAAM,eAAe,KAAK,YAAY;AACtC,aAAK,IAAI,UAAU,QAAQ,uBAAuB,UAAU,YAAY;AACxE,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO;AAAA,IACD,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,SAASA,UAAS;AACjB,UAAI,WAAW;AACf,YAAM,SAA4B,CAAC;AACnC,UAAI;AACJ,WAAK,KAAKA,SAAQ,QAAQ;AACzB,YAAIA,SAAQ,OAAO,CAAC,IAAI,GAAG;AAC1B,qBAAW;AACX,iBAAO,CAAC,IAAI;AAAA,QACb;AAAA,MACD;AACA,UAAI,UAAU;AACb,QAAAA,SAAQ,SAAS,MAAM;AACvB,aAAK,IAAI,aAAaA,UAAS,sBAAsB;AACrD,aAAK,IAAI,uBAAuBA,QAAO;AAAA,MACxC;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAI,OAAO,SAAS,WAAW,MAAM,KAAK;AACzC,eAAO,YAAY,QAAQ;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,QAAQA,UAAS;AAChB,UAAIA,SAAQ,KAAK,eAAe,UAAU,GAAG;AAC5C,aAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,UAASA,QAAO;AAAA,MACtC;AAAA,IACD;AAAA,IACA,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,WAAW,UAAU,KAAK,MAAM,MAAM,GAAG;AAC5C,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,GAAG,QAAQ,MAAM,GAAG;AAC1C,eAAK,IAAI,WAAW,QAAQ,4BAA4B;AAAA,QACzD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,yBAAyB,QAAQ,QAAQ,eAAe;AACvD,YAAMA,WAAU,KAAK,YAAY;AACjC,UAAI,cAAc,OAAO,YAAY;AACpC,aAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,UAASA,QAAO;AAAA,MACtC;AAAA,IACD;AAAA,IACA,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAI,OAAO,SAAS,WAAW,MAAM,KAAK;AACzC,eAAO,MAAM;AACb,aAAK,IAAI,SAAS,QAAQ,WAAW,WAAW,8BAA8B,UAAU,MAAM;AAC9F,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,QAAQ,QAAQ,MAAM,OAAO,IAAI;AAAA,MACvD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,YAAY;AAAA,IACX,aAAa;AACZ,WAAK,YAAY,cAAc;AAAA,IAChC;AAAA,IACA,WAAWA,UAAQ;AAClB,UAAIA,SAAQ,YAAY,gBAAgB,aAAaA,SAAQ,eAAe,CAACA,SAAQ,KAAK;AAAc;AACxG,UAAIA,SAAQ,QAAQ,UAAU,QAAQ;AACrC,QAAAA,SAAQ,YAAY,gBAAgB,KAAK,QAAQ,IAAI;AAAA,MACtD;AAAA,IACD;AAAA,IACA,QAAQA,UAAS;AAChB,UAAIA,SAAQ,YAAY,gBAAgB,aAAaA,SAAQ;AAAa;AAC1E,UAAIA,SAAQ,QAAQ,UAAU,QAAQ;AACrC,cAAM,SAAS,KAAK,IAAIA,SAAQ,KAAK,cAAc,CAAC;AACpD,aAAK,IAAI,UAAUA,UAAS,UAAU,UAAU,UAAU;AAC1D,aAAK,YAAY,SAAS;AAC1B,YAAI,CAAC,KAAK,YAAY;AAAa;AACnC,aAAK,YAAY,cAAc;AAC/B,YAAG,CAAC,KAAK,YAAY,sBAAqB;AACzC,eAAK,IAAI,aAAaA,UAAS,uBAAuB;AACtD,eAAK,YAAY,uBAAuB;AAAA,QACzC;AAAA,MACD;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,YAAY,QAAQ;AAC5B,cAAM,SAAS,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI;AAClD,aAAK,MAAM,uBAAuB,OAAO,KAAK,YAAY,MAAM,QAAQ;AACxE,eAAO,KAAK,YAAY,CAAC,OAAO,KAAK,YAAY,MAAM,GAAG,IAAI,CAAC;AAAA,MAChE;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,cAAc,GAAG,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IACzH,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA;AAAA,EAEA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAI,UAAU,WAAW;AAAQ;AACjC,UAAI,UAAU;AACd,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,iBAAO,MAAM,CAAC;AACd,oBAAU;AAAA,QACX;AAAA,MACD;AACA,UAAI,WAAW,CAAE,OAAsB,aAAa;AACnD,aAAK,IAAI,SAAS,QAAQ,WAAW,8BAA8B,UAAU,MAAM;AAAA,MACpF;AAAA,IACD;AAAA,EACD;AAAA,EACA,WAAW;AAAA,IACV,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,sBAAsB,MAAM,QAAQ,MAAM,GAAG;AACrD,YAAI,KAAK,aAAa,GAAG,EAAE,GAAG;AAC7B,iBAAO,YAAY,WAAW,KAAK,YAAY,MAAM;AAAA,QACtD;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,aAAa,QAAQ,QAAQ,MAAM;AAClC,UAAI,KAAK,WAAW,aAAc,KAAK,WAAW,SAAU,KAAK,OAAO,cAAe;AACtF;AAAA,MACD;AAEA,YAAM,iBAAiB,KAAK,YAAY;AACxC,WAAK,OAAO,SAAS,eAAe,QAAQ,KAAK,WAAW,UAAU,KAAK,WAAW,KAAK;AAC1F,aAAK,aAAa,SAAS;AAC3B,aAAK,IAAI,QAAQ,QAAQ,qBAAqB,MAAM,UAAU,cAAc;AAC5E,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,aAAa;AAAA,IACZ,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,sBAAsB,MAAM,QAAQ,MAAM,KAAK,CAAC,OAAO,UAAU,OAAO,kBAAkB,QAAQ,GAAG;AAC7G,cAAM,IAAI,KAAK,OAAO,GAAG;AACzB,YAAI,IAAI,IAAI;AACX,iBAAO,UAAU,OAAO,MAAM;AAAA,QAC/B,WAAW,IAAI,IAAI;AAClB,iBAAO,UAAU,OAAO,MAAM;AAAA,QAC/B,WAAW,IAAI,IAAI;AAClB,iBAAO,UAAU,OAAO,MAAM;AAAA,QAC/B;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,sBAAsB,MAAM,QAAQ,MAAM,GAAG;AACrD,YAAI,KAAK,aAAa,GAAG,EAAE,GAAG;AAC7B,iBAAO,aAAa,OAAO,MAAM;AAAA,QAClC;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,eAAe;AAAA,IACd,cAAc,OAAO,QAAQ,QAAQ,QAAQ;AAC5C,UAAI,UAAU,WAAW;AAAQ;AACjC,UAAI,UAAU;AACd,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,iBAAO,MAAM,CAAC;AACd,oBAAU;AAAA,QACX;AAAA,MACD;AACA,UAAI,WAAW,CAAE,OAAsB,aAAa;AACnD,aAAK,IAAI,SAAS,QAAQ,WAAW,mCAAmC,UAAU,MAAM;AAAA,MACzF;AAAA,IACD;AAAA,IACA,sBAAsB;AAAA,IACtB,gBAAgB,MAAM,QAAQ,QAAO;AACpC,UAAG,WAAW,KAAK,YAAY;AAAQ;AACvC,UAAG,KAAK,mBAAmB,CAAC,CAAC,YAAW,YAAY,EAAE,SAAS,OAAO,OAAO,GAAE;AAC9E,eAAO,KAAK;AAAA,MACb;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,OAAO;AAAA,IACN,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,sBAAsB,MAAM,QAAQ,QAAQ,IAAI,GAAG;AAC3D,aAAK,IAAI,YAAY,QAAQ,OAAO;AACpC,aAAK,MAAM,EAAC,KAAK,GAAE,GAAG,QAAQ,QAAQ,MAAM,IAAI;AAAA,MACjD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,UAAU;AAAA,IACT,WAAWA,UAAS;AACnB,WAAK,YAAY,cAAc;AAAA,IAChC;AAAA,IACA,QAAQA,UAAS;AAEhB,UAAI,CAAC,KAAK,YAAY;AAAa;AACnC,YAAM,SAASA,SAAQ,KAAK,IAAI,OAAOA,SAAQ,KAAK,IAAI,OAAO,SAAS,IAAIA,SAAQ,QAAQ;AAC5F,UAAI,QAAQ;AACX,YAAG,OAAO,WAAW,UAAU,GAAE;AAChC,eAAK,IAAI,aAAa,QAAQ,2BAA2B;AACzD,eAAK,KAAK,4DAA4D;AACtE;AAAA,QACD;AACA,QAAAA,SAAQ,cAAc,QAAQ,KAAK,IAAI,UAAU,IAAI,UAAU,CAAC;AAAA,MACjE;AACA,WAAK,YAAY,cAAc;AAAA,IAChC;AAAA,IACA,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,IACC,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,EACzG;AAAA,EACA,WAAW;AAAA,IACV,YAAY;AAAA,IACZ,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,sBAAsB,MAAM,QAAQ,QAAQ,IAAI,GAAG;AAC3D,aAAK,OAAO,OAAO,YAAY,GAAG,QAAQ,MAAM;AAAA,MACjD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,OAAO;AAAA,IACN,MAAM,QAAQ,QAAQ,MAAM;AAC3B,YAAM,gBAAgB,OAAO,WAAW;AACxC,UAAI,cAAc,MAAM,cAAc,KAAK,cAAc,OAAO,SAAS;AACxE;AAAA,MACD;AACA,UAAI,KAAK,sBAAsB,MAAM,QAAQ,QAAQ,CAAC,OAAO,OAAO,MAAM,CAAC,GAAG;AAC7E,cAAM,aAAa,OAAO,WAAW,SAAS,MAAM;AACpD,YAAI,YAAY;AACf,eAAK,IAAI,aAAa,QAAQ,kBAAkB,KAAK,IAAI,UAAU,IAAI,UAAU,EAAE,MAAM,UAAU,MAAM;AAAA,QAC1G;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,iBAAiB;AAAA,IAChB,SAAS;AAAA,IACT,WAAWA,UAAS;AACnB,UAAIA,SAAQ;AAAa;AACzB,WAAK,IAAI,YAAYA,UAAS,kBAAkB;AAChD,MAAAA,SAAQ,aAAa,SAAS;AAC9B,YAAM,iBAAiB,CAAC,gBAAgB,iBAAiB,aAAa;AACtE,iBAAW,UAAU,KAAK,aAAa,GAAG;AACzC,YAAI,OAAO,QAAQ,gBAAgB,GAAG;AACrC,eAAK,IAAI,UAAU,QAAQ,sBAAsB;AACjD;AAAA,QACD;AACA,aAAK,YAAY,OAAO,OAAO,WAAW,GAAG,OAAO,cAAc,QAAQA,UAAS,iBAAiB;AAAA,MACrG;AAAA,IACD;AAAA,EACD;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,WAAW,MAAMA,UAAS;AACzB,UAAI,SAAS,aAAa,SAAS;AAAS,eAAO;AAAA,IACpD;AAAA,IACA,SAASA,UAAS,QAAQ,MAAM;AAC/B,UAAI,KAAK,OAAO,aAAa,KAAK,OAAO,SAAS;AACjD,aAAK,IAAI,WAAWA,UAAS,2BAA2B;AACxD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,WAAW,OAAO,QAAQ,QAAQ,QAAQ;AACzC,UAAI,OAAO,SAAS,gBAAgB,MAAM,KAAK;AAC9C,eAAO,MAAM;AACb,aAAK,IAAI,SAAS,QAAQ,WAAW,UAAU,6BAA6B,UAAU,MAAM;AAAA,MAC7F;AACA,UAAI,OAAO,SAAS,iBAAiB,MAAM,KAAK;AAC/C,eAAO,MAAM;AACb,aAAK,IAAI,SAAS,QAAQ,WAAW,kBAAkB,6BAA6B,UAAU,MAAM;AAAA,MACrG;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,gBAAgB,OAAO,QAAQ,QAAQ,QAAQ;AAC9C,UAAI,QAAQ,SAAS,iBAAiB,QAAQ,SAAS;AAAe;AACtE,UAAG,OAAO,WAAW,UAAU,GAAE;AAChC,aAAK,IAAI,aAAa,QAAQ,2BAA2B;AACzD,aAAK,KAAK,4DAA4D;AACtE;AAAA,MACD;AACA,YAAMA,WAAU,KAAK,YAAY;AACjC,YAAM,iBAAuC,CAAC;AAC9C,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,yBAAe,CAAC,IAAI,MAAM,CAAC;AAAA,QAC5B;AAAA,MACD;AACA,UAAI,OAAO,KAAK,cAAc,EAAE,SAAS;AAAG;AAC5C,WAAK,MAAM,gBAAgBA,QAAO;AAAA,IACnC;AAAA,IACA,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,sBAAsB,MAAM,QAAQ,MAAM,GAAG;AACrD,YAAI,KAAK,aAAa,GAAG,EAAE,GAAG;AAC7B,iBAAO,aAAa,OAAO,MAAM;AAAA,QAClC;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,aAAa;AAAA,IACZ,YAAY,QAAQ,QAAQ,QAAQ,MAAM;AAEzC,UAAI,OAAO,WAAW,YAAY,KAAK,OAAO,QAAQ,aAAa;AAAG;AACtE,UAAI,KAAK,sBAAsB,MAAM,QAAQ,MAAM,GAAG;AACrD,YAAI,KAAK,aAAa,GAAG,EAAE,GAAG;AAC7B,iBAAO,aAAa,OAAO,MAAM;AAAA,QAClC;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,YAAY;AAAA,IACZ,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,sBAAsB,MAAM,QAAQ,QAAQ,IAAI,GAAG;AAC3D,aAAK,OAAO,OAAO,YAAY,GAAG,QAAQ,MAAM;AAAA,MACjD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,WAAW,OAAO,QAAQ,QAAQ,QAAQ;AACzC,UAAI,OAAO,SAAS,gBAAgB,MAAM,KAAK;AAC9C,eAAO,MAAM;AACb,aAAK,IAAI,SAAS,QAAQ,WAAW,UAAU,2BAA2B,UAAU,MAAM;AAAA,MAC3F;AACA,UAAI,OAAO,SAAS,iBAAiB,MAAM,KAAK;AAC/C,eAAO,MAAM;AACb,aAAK,IAAI,SAAS,QAAQ,WAAW,kBAAkB,2BAA2B,UAAU,MAAM;AAAA,MACnG;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,cAAc;AAAA,IACb,sBAAsB;AAAA,IACtB,gBAAgB,MAAM,QAAQ,QAAO;AACpC,UAAG,WAAW,KAAK,YAAY;AAAQ;AACvC,UAAG,KAAK,mBAAmB,CAAC,CAAC,YAAW,YAAY,EAAE,SAAS,OAAO,OAAO,GAAE;AAC9E,eAAO,KAAK;AAAA,MACb;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,QAAQ;AAAA,IACP,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,KAAK,sBAAsB,MAAM,QAAQ,MAAM,GAAG;AACrD,YAAI,KAAK,aAAa,GAAG,EAAE,GAAG;AAC7B,iBAAO,aAAa,OAAO,MAAM;AAAA,QAClC;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,YAAY;AAAA,IACX,WAAW,MAAMA,UAAS,QAAQ;AACjC,UAAI,KAAK,mBAAmBA,QAAO,KAAK,CAACA,SAAQ,MAAMA,SAAQ,SAAS;AAAc;AACtF,UAAK,UAAU,WAAWA,YAAa,KAAK,cAAc,KAAK,WAAW,OAAO,YAAa;AAC7F,aAAK,IAAI,aAAaA,UAAS,sBAAsB;AACrD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,OAAO;AAAA,IACN,SAASA,UAAS;AACjB,UAAI,CAACA,SAAQ,aAAa,KAAK,YAAY;AAAQ;AAEnD,YAAM,kBAAkBA,SAAQ,aAAa,EAAE;AAAA,QAC9C,CAAAC,YAAU,CAACA,QAAO,WAAW,EAAE,MAAM,SAAS,KAAKA,QAAO,YAAY;AAAA,MACvE;AACA,UAAI,CAAC,gBAAgB;AAAQ;AAE7B,YAAM,SAAS,KAAK,OAAO,eAAe;AAC1C,YAAM,UAAU,OAAO,WAAW;AAClC,UAAG,OAAO,YAAY,YAAW;AAChC,aAAK,IAAI,aAAaD,UAAS,gBAAgB;AAC/C,aAAK,IAAI,WAAW,QAAQ,2BAA2B;AACvD,aAAK,KAAK,4DAA4D;AACtE,aAAK,YAAY,SAAS;AAC1B;AAAA,MACD;AACA,UAAIA,SAAQ,WAAW,OAAO,GAAG;AAChC,aAAK,IAAI,YAAYA,UAAS,SAAS,yBAAyB,UAAU,MAAM;AAAA,MACjF;AAAA,IACD;AAAA,IACA,MAAMA,UAAQ;AACb,UAAG,KAAK,YAAY;AAAQ,eAAO,KAAK,YAAY;AAAA,IACrD;AAAA,IACA,MAAM;AAAA,IACN,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,EAAC;AAAA,IAChE,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,iBAAiB;AAAA,IAChB,MAAM,QAAQ,QAAQ,MAAM;AAC3B,UAAI,OAAO,WAAW,EAAE,MAAM,eAAe;AAAG;AAChD,UAAI,KAAK,sBAAsB,MAAM,QAAQ,MAAM,GAAG;AACrD,cAAM,iBAAiB,KAAK,SAAS,cAAc,QAAQ,QAAQ,KAAK,QAAQ,OAAO,OAAO;AAC9F,YAAI,CAAC;AAAgB,iBAAO;AAC5B,cAAM,gBAAgB,OAAO,WAAW,mBAAmB,MAAM;AACjE,YAAI,CAAC;AAAe;AACpB,YAAI,OAAO,OAAO,MAAM,GAAG;AAC1B,eAAK,IAAI,aAAa,QAAQ,cAAc,IAAI,IAAI,UAAU,MAAM;AAAA,QACrE,OAAO;AACN,eAAK,IAAI,aAAa,QAAQ,6BAA6B,KAAK,IAAI,UAAU,IAAI,aAAa,EAAE,MAAM,oBAAoB,UAAU,MAAM;AAAA,QAC5I;AACA,eAAO,WAAW,aAAa;AAAA,MAChC;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,WAAWA,UAAS;AACnB,UAAIA,SAAQ,gBAAgB,gBAAgBA,SAAQ,aAAa;AAChE;AAAA,MACD;AACA,UAAIA,SAAQ,MAAMA,SAAQ,QAAQ,KAAKA,SAAQ,QAAQ,UAAU,OAAO;AACvE,QAAAA,SAAQ,YAAY,SAAS;AAC7B,QAAAA,SAAQ,YAAY,SAAS;AAAA,MAC9B,WAAWA,SAAQ,KAAKA,SAAQ,QAAQ,KAAKA,SAAQ,QAAQ,UAAU,OAAO;AAC7E,QAAAA,SAAQ,YAAY,SAAS;AAC7B,QAAAA,SAAQ,eAAe,SAAS;AAAA,MACjC;AAAA,IACD;AAAA,IACA,MAAMA,UAAS;AACd,UAAI,CAACA,SAAQ,UAAU,SAAS,KAAK,CAACA,SAAQ;AAAI;AAClD,MAAAA,SAAQ,cAAc;AACtB,aAAOA,SAAQ,UAAU,SAAS;AAClC,UAAIA,SAAQ,QAAQ,gBAAgB,gBAAgBA,SAAQ,QAAQ,YAAY;AAC/E,QAAAA,SAAQ,YAAYA,SAAQ,QAAQ,YAAsB,KAAK,QAAQ,OAAO,UAAU;AAAA,MACzF;AAAA,IACD;AAAA,IACA,WAAW;AAAA,MACV,QAAQA,UAAS;AAChB,YAAIA,SAAQ,QAAQ,OAAO;AAAiB,UAAAA,SAAQ,YAAY,gBAAgB;AAAA,MACjF;AAAA,MACA,MAAMA,UAAS;AACd,YAAIA,SAAQ,QAAQ,UAAU,OAAO;AACpC,UAAAA,SAAQ,YAAYA,SAAQ,QAAQ,UAAoB;AAAA,QACzD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA;AAAA,EAEA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,aAAa,MAAMA,UAAS;AAC3B,YAAM,eAAe;AAAA,QACpB;AAAA,QAAY;AAAA,QAAe;AAAA,QAAe;AAAA,QAAmB;AAAA,QAAe;AAAA,MAC7E;AACA,WAAK,KAAK,SAAS,YAAa,KAAK,WAAW,KAAK,YAAY,aAAc,CAAC,aAAa,SAAS,KAAK,EAAE,KAAK,EAAE,KAAK,OAAO,KAAK,aAAa,WAAW;AAC5J,aAAK,OAAO;AACZ,YAAG,KAAK;AAAS,iBAAO,KAAK;AAC7B,aAAK,kBAAkB;AAAA,MACxB;AAAA,IACD;AAAA,EACD;AAAA,EACA,OAAO;AAAA,IACN,SAAS;AAAA,IACT,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,WAAK,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,WAAY,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC7G,aAAK,MAAM,aAAa;AACxB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,WAAK,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,WAAY,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC7G,aAAK,MAAM,aAAa;AACxB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,eAAe,WAAW,QAAQ,QAAQ,MAAM;AAC/C,UAAI,WAAW,UAAU,KAAK,aAAa,YAAY,KAAK,gBAAiB,KAAK,SAAS,WAAW,CAAC,KAAK,WAAW,KAAK,YAAY;AAAU;AAClJ,UAAI,CAAC,KAAK;AAAa,aAAK,cAAc,KAAK,YAAY;AAC3D,UAAI,KAAK,gBAAgB,KAAK,YAAY;AAAQ;AAClD,aAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,IACzC;AAAA,EACD;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,cAAc,QAAQ,QAAQ,MAAM;AACnC,UAAI,CAAC;AAAQ;AACb,UAAI,OAAO,QAAQ,OAAO,aAAa,OAAO,aAAa;AAC1D;AAAA,MACD;AACA,YAAM,SAAS,OAAO,UAAU,YAAY,KAAK,CAAC,KAAK,MAAM,WAAW,KAAK,CAAC,KAAK;AACnF,UAAI;AAAQ;AAEZ,UAAI,CAAC,OAAO,YAAY,KAAK,IAAI,KAAK,EAAE,KAAK,WAAW,OAAO,YAAY,KAAK,OAAO;AAAI;AAC3F,aAAO;AAAA,IACR;AAAA,IACA,gBAAgB,SAAS,QAAQ,MAAM,MAAM;AAC5C,UAAI,CAAC;AAAQ;AACb,UAAI,OAAO,QAAQ,OAAO,aAAa,OAAO,aAAa;AAC1D;AAAA,MACD;AACA,YAAM,SAAS,OAAO,UAAU,YAAY,KAAK,CAAC,KAAK,MAAM,WAAW,KAAK,CAAC,KAAK;AACnF,UAAI;AAAQ;AAEZ,UAAI,CAAC,OAAO,YAAY,KAAK,IAAI,KAAK,EAAE,KAAK,WAAW,OAAO,YAAY,KAAK,OAAO;AAAI;AAC3F,aAAO;AAAA,IACR;AAAA,EACD;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,WAAW,WAAW,KAAK,SAAS,YAAa,KAAK,WAAW,KAAK,YAAY,WAAY;AACjG,YAAI,CAAC,KAAK,KAAK,OAAO,YAAY,CAAC,GAAG;AACrC,eAAK,IAAI,WAAW,QAAQ,6BAA6B;AAAA,QAC1D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,eAAe,WAAW,QAAQ,QAAQ,MAAM;AAC/C,UAAI,WAAW,UAAU,KAAK,aAAa,YAAY,KAAK,gBAAiB,KAAK,SAAS,YAAY,CAAC,KAAK,WAAW,KAAK,YAAY;AAAW;AACpJ,UAAI,CAAC,KAAK;AAAa,aAAK,cAAc,KAAK,YAAY;AAC3D,UAAI,KAAK,gBAAgB,KAAK,YAAY;AAAQ;AAClD,aAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,IACzC;AAAA,EACD;AAAA,EACA,QAAQ;AAAA,IACP,SAAS;AAAA,IACT,qBAAqB,QAAQ,QAAQ,QAAQ,MAAM;AAClD,UAAI,MAAM;AACV,UAAK,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY;AAAU,eAAO;AAChF,UAAI,KAAK,MAAM,SAAS;AAAG,eAAO;AAClC,aAAO,KAAK,YAAY,GAAG;AAAA,IAC5B;AAAA,EACD;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,aAAa,MAAMA,UAAS;AAC3B,YAAM,eAAe;AAAA,QACpB;AAAA,QAAY;AAAA,QAAe;AAAA,QAAe;AAAA,QAAmB;AAAA,QAAe;AAAA,MAC7E;AACA,WAAK,KAAK,SAAS,YAAa,KAAK,WAAW,KAAK,YAAY,aAAc,CAAC,aAAa,SAAS,KAAK,EAAE,KAAK,EAAE,KAAK,OAAO,KAAK,aAAa,WAAW;AAC5J,aAAK,OAAO;AACZ,YAAG,KAAK;AAAS,iBAAO,KAAK;AAC7B,aAAK,mBAAmB;AAAA,MACzB;AAAA,IACD;AAAA,EACD;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,cAAc,QAAQ,MAAM,MAAM;AACjC,UAAI,CAAC;AAAQ;AACb,UAAI,KAAK,aAAa,cAAc,OAAO,QAAQ,OAAO,YAAY,OAAO;AAAa;AAC1F,UAAI,OAAO,UAAU,YAAY,KAAK,EAAE,KAAK,MAAM,WAAW,KAAK,KAAK;AAAc;AACtF,UAAI,CAAC,OAAO,YAAY,KAAK,IAAI,KAAK,EAAE,KAAK,WAAW,OAAO,YAAY,KAAK,OAAO;AAAI;AAC3F,aAAO;AAAA,IACR;AAAA,IACA,gBAAgB,SAAS,QAAQ,MAAM,MAAM;AAC5C,UAAI,CAAC;AAAQ;AACb,UAAI,KAAK,aAAa,cAAc,OAAO,QAAQ,OAAO,YAAY,OAAO;AAAa;AAC1F,UAAI,OAAO,UAAU,YAAY,KAAK,EAAE,KAAK,MAAM,WAAW,KAAK,KAAK;AAAc;AACtF,UAAI,CAAC,OAAO,YAAY,KAAK,IAAI,KAAK,EAAE,KAAK,WAAW,OAAO,YAAY,KAAK,OAAO;AAAI;AAC3F,aAAO;AAAA,IACR;AAAA,EACD;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,cAAc,QAAQ,QAAQ,QAAQ,MAAM;AAC3C,UAAK,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAU;AACxE,aAAK,MAAM,EAAC,KAAK,EAAC,CAAC;AAAA,MACpB;AAAA,IACD;AAAA,EACD;AAAA,EACA,cAAc;AAAA,IACb,SAAS;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,WAAW,WAAW,KAAK,SAAS,cAAe,KAAK,WAAW,KAAK,YAAY,aAAc;AACrG,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAW,QAAQ,+BAA+B;AAAA,QAC5D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,oBAAoB,QAAQ,QAAQ,SAAS,MAAM;AAClD,UAAK,KAAK,SAAS,eAAe,CAAC,KAAK,WAAW,KAAK,YAAY,eAAgB,CAAC,cAAc,eAAe,aAAa,EAAE,SAAS,KAAK,EAAE;AAAG;AACpJ,YAAM,iBAAiB,CAAC,gBAAgB,aAAa,EAAE,SAAS,KAAK,MAAM,IAAI,WAAW,KAAK;AAC/F,UAAI,KAAK,YAAY,KAAK,YAAY,QAAQ,QAAQ,cAAc,GAAG;AACtE,YAAI,KAAK;AAAa,eAAK,cAAc;AACzC,YAAI,KAAK,YAAY,WAAW,QAAQ;AACvC,eAAK,IAAI,aAAa,KAAK,YAAY,QAAQ,wBAAwB;AAAA,QACxE;AACA,eAAO,KAAK,YAAY;AAAA,MACzB;AAAA,IACD;AAAA,EACD;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,aAAa,MAAMA,UAAS;AAC3B,UAAI,KAAK,MAAM,OAAO,GAAG;AACxB,aAAK,OAAO;AACZ,eAAO,KAAK;AAAA,MACb;AAAA,IACD;AAAA,EACD;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,WAAW,WAAW,KAAK,SAAS,cAAe,KAAK,WAAW,KAAK,YAAY,aAAc;AACrG,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAW,QAAQ,6BAA6B;AAAA,QAC1D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,WAAK,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,YAAa,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/G,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,WAAK,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,YAAa,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/G,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,aAAa,MAAMA,UAAS;AAC3B,YAAM,eAAe;AAAA,QACpB;AAAA,QAAY;AAAA,QAAe;AAAA,QAAe;AAAA,QAAmB;AAAA,QAAe;AAAA,MAC7E;AACA,WAAK,KAAK,SAAS,YAAa,KAAK,WAAW,KAAK,YAAY,aAAc,CAAC,aAAa,SAAS,KAAK,EAAE,KAAK,EAAE,KAAK,OAAO,KAAK,aAAa,WAAW;AAC5J,aAAK,OAAO;AACZ,YAAG,KAAK;AAAS,iBAAO,KAAK;AAC7B,aAAK,kBAAkB;AAAA,MACxB;AAAA,IACD;AAAA,EACD;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,cAAc,QAAQ,QAAQ,QAAQ,MAAM;AAC3C,UAAI,CAAC,QAAQ,OAAO,OAAO,EAAE,SAAS,KAAK,IAAI,KAAM,KAAK,WAAW,CAAC,QAAQ,OAAO,OAAO,EAAE,SAAS,KAAK,OAAO,GAAI;AACtH,aAAK,MAAM,EAAC,KAAK,EAAC,CAAC;AAAA,MACpB;AAAA,IACD;AAAA,IACA,aAAa,OAAO,QAAQ,QAAQ,QAAQ;AAC3C,UAAI,QAAQ,SAAS,gBAAgB,QAAQ,SAAS,eAAe;AACpE,aAAK,MAAM,EAAC,KAAK,EAAC,CAAC;AAAA,MACpB;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,aAAa,MAAMA,UAAS;AAC3B,YAAM,eAAe;AAAA,QACpB;AAAA,QAAY;AAAA,QAAe;AAAA,QAAe;AAAA,QAAmB;AAAA,QAAe;AAAA,MAC7E;AACA,WAAK,KAAK,SAAS,YAAa,KAAK,WAAW,KAAK,YAAY,aAAc,CAAC,aAAa,SAAS,KAAK,EAAE,KAAK,EAAE,KAAK,OAAO,KAAK,aAAa,WAAW;AAC5J,aAAK,OAAO;AACZ,YAAG,KAAK;AAAS,iBAAO,KAAK;AAC7B,aAAK,qBAAqB;AAAA,MAC3B;AAAA,IACD;AAAA,EACD;AAAA,EACA,cAAc;AAAA,IACb,SAAS;AAAA,IACT,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAK,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAU;AACxE,aAAK,MAAM,qBAAqB;AAChC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAK,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAU;AACxE,aAAK,MAAM,qBAAqB;AAChC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,UAAU,WAAW,GAAG;AACtC,YAAI,CAAC,QAAQ,UAAU,OAAO,EAAE,SAAS,KAAK,IAAI,KAAM,KAAK,WAAW,CAAC,QAAQ,UAAU,OAAO,EAAE,SAAS,KAAK,OAAO,GAAI;AAC5H,eAAK,MAAM,kBAAkB;AAC7B,iBAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,QACzC;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EACA,WAAW;AAAA,IACV,SAAS;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,WAAW,WAAW,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,UAAW;AAC/F,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAW,QAAQ,4BAA4B;AAAA,QACzD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiB,QAAQ,QAAQ,MAAM;AACtC,UAAI,WAAW,KAAK,YAAY,UAAU,OAAO,SAAS,OAAO;AAAM;AACvE,UAAI,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,SAAU;AACxE,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,KAAK,YAAY,MAAM;AAAA,MAC7C;AAAA,IACD;AAAA,EACD;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,cAAc,QAAQ,QAAQ,QAAQ,MAAM;AAC3C,UAAI,CAAC,SAAS,MAAM,EAAE,SAAS,KAAK,IAAI,KAAM,KAAK,WAAW,CAAC,SAAS,MAAM,EAAE,SAAS,KAAK,OAAO,GAAI;AACxG,aAAK,MAAM,EAAC,KAAK,EAAC,CAAC;AAAA,MACpB;AAAA,IACD;AAAA,EACD;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,SAAU;AACxE,aAAK,MAAM,mBAAmB;AAC9B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,SAAU;AACxE,aAAK,MAAM,mBAAmB;AAC9B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,WAAW,WAAW,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,UAAW;AAC/F,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAW,QAAQ,6BAA6B;AAAA,QAC1D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,oBAAoB,QAAQ,QAAQ,SAAS,MAAM;AAClD,UAAK,KAAK,SAAS,YAAY,CAAC,KAAK,WAAW,KAAK,YAAY,YAAa,CAAC,cAAc,eAAe,aAAa,EAAE,SAAS,KAAK,EAAE;AAAG;AAC9I,YAAM,iBAAiB,CAAC,gBAAgB,aAAa,EAAE,SAAS,KAAK,MAAM,IAAI,WAAW,KAAK;AAC/F,UAAI,KAAK,YAAY,KAAK,YAAY,QAAQ,QAAQ,cAAc,GAAG;AACtE,YAAI,KAAK;AAAa,eAAK,cAAc;AACzC,YAAI,KAAK,YAAY,WAAW,QAAQ;AACvC,eAAK,IAAI,aAAa,KAAK,YAAY,QAAQ,sBAAsB;AAAA,QACtE;AACA,eAAO,KAAK,YAAY;AAAA,MACzB;AAAA,IACD;AAAA,EACD;AAAA,EACA,OAAO;AAAA,IACN,SAAS;AAAA,IACT,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,WAAK,KAAK,SAAS,SAAU,KAAK,WAAW,KAAK,YAAY,UAAW,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC3G,aAAK,MAAM,aAAa;AACxB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,WAAK,KAAK,SAAS,SAAU,KAAK,WAAW,KAAK,YAAY,UAAW,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC3G,aAAK,MAAM,aAAa;AACxB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AAAA,EACA,UAAU;AAAA,IACT,SAAS;AAAA,IACT,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,YAAY;AAChB,UAAI,KAAK,SAAS,SAAU,KAAK,WAAW,KAAK,YAAY,OAAQ;AACpE,aAAK,MAAM,kBAAkB;AAC7B;AAAA,MACD;AACA,UAAI,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAS;AACtE,aAAK,MAAM,kBAAkB;AAC7B;AAAA,MACD;AACA,UAAG;AAAW,eAAO,KAAK,YAAY,KAAK,IAAI,KAAI,SAAS,CAAC;AAAA,IAC9D;AAAA,IACA,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,YAAY;AAChB,UAAI,KAAK,SAAS,SAAU,KAAK,WAAW,KAAK,YAAY,OAAQ;AACpE,aAAK,MAAM,kBAAkB;AAC7B;AAAA,MACD;AACA,UAAI,KAAK,SAAS,UAAW,KAAK,WAAW,KAAK,YAAY,QAAS;AACtE,aAAK,MAAM,kBAAkB;AAC7B;AAAA,MACD;AACA,UAAG;AAAW,eAAO,KAAK,YAAY,KAAK,IAAI,KAAI,SAAS,CAAC;AAAA,IAC9D;AAAA,EACD;AAAA,EACA,SAAS;AAAA,IACR,SAAS;AAAA,IACT,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,WAAK,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,YAAa,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/G,aAAK,MAAM,eAAe;AAC1B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,WAAK,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,YAAa,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/G,aAAK,MAAM,eAAe;AAC1B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,EACD;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,WAAW,WAAW,KAAK,SAAS,cAAe,KAAK,WAAW,KAAK,YAAY,aAAc;AACrG,YAAI,CAAC,KAAK,KAAK,OAAO,YAAY,CAAC,GAAG;AACrC,eAAK,IAAI,WAAW,QAAQ,6BAA6B;AAAA,QAC1D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AAAA,EACA,aAAa;AAAA,IACZ,SAAS;AAAA,IACT,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,WAAW,WAAW,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,UAAW;AAC/F,YAAI,CAAC,KAAK,KAAK,OAAO,YAAY,CAAC,GAAG;AACrC,eAAK,IAAI,WAAW,QAAQ,8BAA8B;AAAA,QAC3D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AAAA,EACA,iBAAiB;AAAA,IAChB,SAAS;AAAA,IACT,cAAc,QAAQ,QAAQ,QAAQ,MAAM;AAC3C,UAAI,KAAK,SAAS,WAAY,KAAK,WAAW,KAAK,YAAY,SAAU;AACxE,aAAK,MAAM,EAAC,KAAK,EAAC,CAAC;AAAA,MACpB;AAAA,IACD;AAAA,EACD;AAAA;AAAA,EAGA,YAAY;AAAA,IACX,gBAAgB,QAAQ;AACvB,UAAI,CAAC,KAAK,UAAU,OAAO,IAAI,KAAK,OAAO,mBAAmB,OAAO;AAAY;AACjF,iBAAW,QAAQ,KAAK,OAAO;AAC9B,mBAAW,UAAU,KAAK,QAAQ;AACjC,iBAAO,aAAa;AAAA,QACrB;AAAA,MACD;AACA,aAAO,aAAa;AACpB,WAAK,IAAI,aAAa,QAAQ,sBAAsB;AAAA,IACrD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,SAAS;AAAA,EACT,eAAe;AAAA,EACf,WAAW;AAAA,IACV,qBAAqB;AAAA,IACrB,YAAY,KAAKA,UAAS;AACzB,UAAIA,SAAQ,KAAK,OAAO,WAAW,GAAG;AACrC;AAAA,MACD;AACA,iBAAW,cAAcA,SAAQ,KAAK,QAAQ;AAC7C,YACC,cAAc,WAAW,aAAaA,SAAQ,YAC9C,CAAC,WAAW,WAAW,WAAW,WAAW,WAAW,GACvD;AACD,iBAAO,KAAK,YAAY,GAAG;AAAA,QAC5B;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACX,OAAO,CAAC;AAAA,IACR,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,MAAM;AAAA,EACN,OAAO;AAAA,EACP,gBAAgB;AAAA,EAChB,WAAW;AAAA,EACX,SAAS;AAAA,IACR,aAAa,QAAQ,QAAQ,MAAM;AAClC,UAAI,KAAK,WAAW,aAAc,KAAK,WAAW,SAAU,KAAK,OAAO,cAAe;AACtF;AAAA,MACD;AAEA,YAAM,iBAAiB,KAAK,YAAY;AACxC,WAAK,OAAO,SAAS,eAAe,QAAQ,KAAK,WAAW,UAAU,KAAK,WAAW,KAAK;AAC1F,aAAK,aAAa,SAAS;AAC3B,aAAK,IAAI,QAAQ,QAAQ,oBAAoB,MAAM,UAAU,cAAc;AAC3E,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,gBAAgB;AAAA,EAChB,SAAS;AAAA,EACT,WAAW;AAAA,EACX,cAAc;AAAA,EACd,YAAY;AAAA,EACZ,gBAAgB;AAAA,EAChB,gBAAgB;AAAA,EAChB,YAAY;AAAA,EACZ,eAAe;AAAA,EACf,iBAAiB;AAAA,EACjB,YAAY;AAAA,EACZ,gBAAgB;AAAA,EAChB,WAAW;AAAA,EACX,QAAQ;AAAA,EACR,gBAAgB;AAAA,EAChB,aAAa;AAAA,EACb,YAAY;AAAA,EACZ,UAAU;AAAA,EACV,cAAc;AAAA,EACd,iBAAiB;AAAA,EACjB,iBAAiB;AAAA,EACjB,YAAY;AAAA,EACZ,YAAY;AAAA,EACZ,eAAe;AAAA,EACf,kBAAkB;AAAA,EAClB,wBAAwB;AAAA,EACxB,yBAAyB;AAAA,EACzB,yBAAyB;AAAA;AAAA,EAGzB,WAAW;AAAA,IACV,kBAAkB;AAAA,IAClB,SAAS,QAAQ,QAAQ,MAAM;AAC9B,UAAI,KAAK,YAAY,OAAO;AAAa;AAEzC,UAAI,WAAW,UAAU,KAAK,cAAc,CAAC,KAAK,MAAM,aAAa,GAAG;AACvE;AAAA,MACD;AACA,YAAM,UAAU,KAAK,IAAI,cAAc,KAAK,EAAE;AAC9C,cAAQ,aAAa;AACrB,WAAK,QAAQ,QAAQ,SAAS,QAAQ,MAAM;AAC5C,aAAO;AAAA,IACR;AAAA,IACA,iBAAiB,QAAQ,QAAQ,MAAM;AACtC,UAAI,KAAK,YAAY,OAAO;AAAa;AAEzC,UAAI,OAAO,SAAS,OAAO,QAAQ,KAAK,cAAc,CAAC,KAAK,MAAM,aAAa,GAAG;AACjF;AAAA,MACD;AACA,YAAM,UAAU,KAAK,IAAI,cAAc,KAAK,EAAE;AAC9C,cAAQ,aAAa;AACrB,WAAK,QAAQ,QAAQ,SAAS,KAAK,YAAY,QAAQ,MAAM;AAC7D,aAAO;AAAA,IACR;AAAA,IACA,WAAW;AAAA,MACV,UAAU;AAAA,IACX;AAAA,IACA,eAAe;AAAA,IACf,MAAM;AAAA,IACN,MAAM;AAAA,IACN,WAAW;AAAA,IACL,OAAO,EAAC,WAAW,EAAC;AAAA,IAC1B,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,aAAa;AACd;",
  "names": ["pokemon", "target"]
}
