{
  "version": 3,
  "sources": ["../../../../data/mods/gen9fe/abilities.ts"],
  "sourcesContent": ["export const Abilities: import('../../../sim/dex-abilities').ModdedAbilityDataTable = {\r\n\t/* FEG9 abils */\r\n\tunfiltered: {\r\n\t\tshortDesc: \"Filter + Contrary + This Pokemon's NvE Moves deal 4/3x damage.\",\r\n\t\tonSourceModifyDamage(damage, source, target, move) {\r\n\t\t\tif (target.getMoveHitData(move).typeMod > 0) {\r\n\t\t\t\tthis.debug('Unfiltered neutralize');\r\n\t\t\t\treturn this.chainModify(0.75);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonChangeBoost(boost, target, source, effect) {\r\n\t\t\tif (effect?.id === 'zpower') return;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tboost[i]! *= -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyDamage(damage, source, target, move) {\r\n\t\t\tif (target.getMoveHitData(move).typeMod < 0) {\r\n\t\t\t\tthis.debug('Unfiltered boost');\r\n\t\t\t\treturn this.chainModify([5461, 4096]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Unfiltered\",\r\n    },\r\n\tquickstart: {\r\n\t\tshortDesc: \"On switch-in, this Pokemon's Attack and Speed are doubled for 5 turns.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tpokemon.addVolatile('quickstart');\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['quickstart'];\r\n\t\t\tthis.add('-end', pokemon, 'Quickstart', '[silent]');\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tduration: 5,\r\n\t\t\tonStart(target) {\r\n\t\t\t\tthis.add('-start', target, 'ability: Quickstart');\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t},\r\n\t\t\tonEnd(target) {\r\n\t\t\t\tthis.add('-end', target, 'Quickstart');\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Quickstart\",\r\n    },\r\n\tholygrail: {\r\n\t\tshortDesc: \"Good As Gold + Levitate\",\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (move.category === 'Status' && target !== source) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Holy Grail');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t  name: \"Holy Grail\",\r\n    },\r\n\talldevouring: {\r\n\t\tshortDesc: \"Beast Boost + Run Away\",\r\n\t\tonSourceAfterFaint(length, target, source, effect) {\r\n\t\t\tif (effect?.effectType === 'Move') {\r\n\t\t\t\tconst bestStat = source.getBestStat(true, true);\r\n\t\t\t\tthis.boost({[bestStat]: length}, source);\r\n\t\t\t}\r\n\t\t},\r\n\t  name: \"All-Devouring\",\r\n    },\r\n\tgalvanicrelay: {\r\n\t\tshortDesc: \"Mycelium Might + Transistor; Electric attacks also ignore abilities.\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Electric') {\r\n\t\t\t\tthis.debug('Galvanic Relay boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Electric') {\r\n\t\t\t\tthis.debug('Galvanic Relay boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFractionalPriorityPriority: -1,\r\n\t\tonFractionalPriority(priority, pokemon, target, move) {\r\n\t\t\tif (move.category === 'Status') {\r\n\t\t\t\treturn -0.1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tif (move.category === 'Status' || move.type === 'Electric') {\r\n\t\t\t\tmove.ignoreAbility = true;\r\n\t\t\t}\r\n\t\t},\r\n\t  name: \"Galvanic Relay\",\r\n    },\r\n\tforestfury: {\r\n\t\tshortDesc: \"Intimidate + Hyper Cutter + Cannot be statused by opponents.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tlet activated = false;\r\n\t\t\tfor (const target of pokemon.adjacentFoes()) {\r\n\t\t\t\tif (!activated) {\r\n\t\t\t\t\tthis.add('-ability', pokemon, 'Forest Fury', 'boost');\r\n\t\t\t\t\tactivated = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.volatiles['substitute']) {\r\n\t\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.boost({atk: -1}, target, pokemon, null, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tif (boost.atk && boost.atk < 0) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tif (!(effect as ActiveMove).secondaries) {\r\n\t\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"Attack\", \"[from] ability: Forest Fury\", \"[of] \" + target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Forest Fury');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonTryAddVolatile(status, target) {\r\n\t\t\tif (status.id === 'yawn') {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Forest Fury');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Forest Fury\",\r\n    },\r\n\tgrowthspurt: {\r\n\t\tshortDesc: \"Effects of Harvest; Berry is restored at 1/3 or less of its max HP.\",\r\n\t\tonResidualOrder: 26,\r\n\t\tonResidualSubOrder: 1,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif (pokemon.hp && !pokemon.item && this.dex.items.get(pokemon.lastItem).isBerry && (this.field.isWeather(['sunnyday', 'desolateland']) || this.randomChance(1, 2))) {\r\n\t\t\t\tpokemon.setItem(pokemon.lastItem);\r\n\t\t\t\tpokemon.lastItem = '';\r\n\t\t\t\tthis.add('-item', pokemon, pokemon.getItem(), '[from] ability: Growth Spurt');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAfterMoveSecondary(target, source, move) {\r\n\t\t\tif (!source || source === target || !target.hp || !move.totalDamage) return;\r\n\t\t\tconst lastAttackedBy = target.getLastAttackedBy();\r\n\t\t\tif (!lastAttackedBy) return;\r\n\t\t\tconst damage = move.multihit ? move.totalDamage : lastAttackedBy.damage;\r\n\t\t\tconst threshold = target.maxhp / 3;\r\n\t\t\tif (target.hp <= threshold && target.hp + damage > threshold && !target.item && this.dex.items.get(target.lastItem).isBerry) {\r\n\t\t\t\t\ttarget.setItem(target.lastItem);\r\n\t\t\t\t\ttarget.lastItem = '';\r\n\t\t\t\t\tthis.add('-item', target, target.getItem(), '[from] ability: Growth Spurt');\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Growth Spurt\",\r\n    },\r\n\tlightdrive: {\r\n\t\tshortDesc: \"Light Metal + Quark Drive. Quark Drive activates if the user is lighter.\",\r\n\t\tonModifyWeight(weighthg) {\r\n\t\t\treturn this.trunc(weighthg / 2);\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('lightdrive');\r\n\t\t\t} else if (!pokemon.volatiles['lightdrive']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('lightdrive');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (!(pokemon.volatiles['lightdrive']?.fromBooster || pokemon.volatiles['lightdrive']?.fromWeightDiff) && !this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.removeVolatile('lightdrive');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnyPrepareHit(source, target, move) {\r\n\t\t\tif (move.hasBounced || source === target) return;\r\n\t\t\tconst user = this.effectState.target;\r\n\t\t\tif (user.volatiles['lightdrive'] && !user.volatiles['lightdrive'].fromWeightDiff) return;\r\n\t\t\tvar yourweight;\r\n\t\t\tif (source === user) {\r\n\t\t\t\tyourweight = target.getWeight();\r\n\t\t\t} else if (target === user) {\r\n\t\t\t\tyourweight = source.getWeight();\r\n\t\t\t} else return;\r\n\t\t\tif (user.getWeight() < yourweight) {\r\n\t\t\t\tif (user.volatiles['lightdrive']) return;\r\n\t\t\t\tuser.addVolatile('lightdrive');\r\n\t\t\t\tuser.volatiles['lightdrive'].fromWeightDiff = true;\r\n\t\t\t} else if (user.volatiles['lightdrive']) {\r\n\t\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\t\tuser.volatiles['lightdrive'].fromWeightDiff = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuser.removeVolatile('lightdrive');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['lightdrive'];\r\n\t\t\tthis.add('-end', pokemon, 'Light Drive', '[silent]');\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Light Drive', '[fromitem]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Light Drive');\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'quarkdrive' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Light Drive atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Light Drive def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Light Drive spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Light Drive spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tfor (const target of pokemon.foes()) {\r\n\t\t\t\t\tif (target.hasAbility('dyschronometria')) {\r\n\t\t\t\t\t\tthis.debug('Dyschronometria negating spe boost');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.debug('Light Drive spe boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Quark Drive');\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Light Drive\",\r\n\t},\r\n\tscraprock: {\r\n\t\tshortDesc: \"Scrappy + Solid Rock\",\r\n\t\tonSourceModifyDamage(damage, source, target, move) {\r\n\t\t\tif (target.getMoveHitData(move).typeMod > 0) {\r\n\t\t\t\tthis.debug('Scrap Rock neutralize');\r\n\t\t\t\treturn this.chainModify(0.75);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMovePriority: -5,\r\n\t\tonModifyMove(move) {\r\n\t\t\t//if ignoreImmunity does not exist replace with blank object\r\n\t\t\t//If it's not unconditional then populate Fighting and Normal fields\r\n\t\t\tif ((move.ignoreImmunity ||= {}) !== true) {\r\n\t\t\t\tmove.ignoreImmunity['Fighting'] = true;\r\n\t\t\t\tmove.ignoreImmunity['Normal'] = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (['Intimidate','Mad Cow','Forest Fury','Shock Factor','Daunting Storm','Toxic Attitude'].includes(effect.name) && boost.atk) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Scrap Rock', '[of] ' + target);\r\n\t\t\t} else if (effect.name === 'Fishy Threat' && boost.spe) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Speed', '[from] ability: Scrap Rock', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Scrap Rock\",\r\n\t\trating: 3,\r\n\t},\r\n\treachless: {\r\n\t\tshortDesc: \"Effects of Rock Head and Reckless.\",\r\n\t\tonBasePowerPriority: 23,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.recoil || move.hasCrashDamage) {\r\n\t\t\t\tthis.debug('Reachless boost');\r\n\t\t\t\treturn this.chainModify([0x1333, 0x1000]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect.id === 'recoil') {\r\n\t\t\t\tif (!this.activeMove) throw new Error(\"Battle.activeMove is null\");\r\n\t\t\t\tif (this.activeMove.id !== 'struggle') return null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Reachless\",\r\n\t\trating: 3,\r\n\t},\r\n\topeningact: {\r\n\t\tshortDesc: \"Protosynthesis + Prankster. Protosynthesis also activates when using a priority move.\",\r\n\t\tonPrepareHit(source, target, move) {\r\n\t\t\tconst isItSunny = this.field.isWeather('sunnyday');\r\n\t\t\tif (move.priority > 0) {\r\n\t\t\t\tif (isItSunny || source.volatiles['openingact']) return;\r\n\t\t\t\tsource.addVolatile('openingact');\r\n\t\t\t\tsource.volatiles['openingact'].fromPriority = true;\r\n\t\t\t} else if (source.volatiles['openingact']?.fromPriority) {\r\n\t\t\t\tif (isItSunny) {\r\n\t\t\t\t\tsource.volatiles['openingact'].fromPriority = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsource.removeVolatile('openingact');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyPriority(priority, pokemon, target, move) {\r\n\t\t\tif (move?.category === 'Status') {\r\n\t\t\t\tmove.pranksterBoosted = true;\r\n\t\t\t\treturn priority + 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('WeatherChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonWeatherChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\t// Protosynthesis is not affected by Utility Umbrella\r\n\t\t\tif (this.field.isWeather('sunnyday')) {\r\n\t\t\t\tpokemon.addVolatile('openingact');\r\n\t\t\t} else if (!(pokemon.volatiles['openingact']?.fromBooster || pokemon.volatiles['openingact']?.fromPriority)) {\r\n\t\t\t\tpokemon.removeVolatile('openingact');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['openingact'];\r\n\t\t\tthis.add('-end', pokemon, 'Protosynthesis', '[silent]');\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Opening Act', '[fromitem]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Opening Act');\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'protosynthesis' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Opening Act atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Opening Act def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Opening Act spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Opening Act spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tfor (const target of pokemon.foes()) {\r\n\t\t\t\t\tif (target.hasAbility('dyschronometria')) {\r\n\t\t\t\t\t\tthis.debug('Dyschronometria negating spe boost');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.debug('Opening Act spe boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Protosynthesis');\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Opening Act\",\r\n\t\trating: 3,\r\n\t},\r\n\tnecromancer: {\r\n\t\tshortDesc: \"This Pokemon's offensive stat is multiplied by 1.5 while using a Ghost-type attack and takes 50% damage from Ghost and Steel attacks; can't be statused.\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ghost') {\r\n\t\t\t\tthis.debug('Necromancer boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ghost') {\r\n\t\t\t\tthis.debug('Necromancer boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifyAtkPriority: 6,\r\n\t\tonSourceModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ghost' || move.type === 'Steel') {\r\n\t\t\t\tthis.debug('Necromancer weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifySpAPriority: 5,\r\n\t\tonSourceModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ghost' || move.type === 'Steel') {\r\n\t\t\t\tthis.debug('Necromancer weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Necromancer');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonTryAddVolatile(status, target) {\r\n\t\t\tif (status.id === 'yawn') {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Necromancer');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Necromancer\",\r\n\t\trating: 3,\r\n\t},\r\n\tregainpatience: {\r\n\t\tshortDesc: \"Berserk + Regenerator\",\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tthis.effectState.checkedBerserk = !!(effect.effectType !== \"Move\" || effect.multihit || effect.negateSecondary\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t|| (effect.hasSheerForce && source.hasAbility(['overwhelming','sheerforce','forceofnature','sandwrath'])));\r\n\t\t},\r\n\t\tonTryEatItem(item) {\r\n\t\t\tconst healingItems = [\r\n\t\t\t\t'aguavberry', 'enigmaberry', 'figyberry', 'iapapaberry', 'magoberry', 'sitrusberry', 'wikiberry', 'oranberry', 'berryjuice',\r\n\t\t\t];\r\n\t\t\treturn (!healingItems.includes(item.id) || this.effectState.checkedBerserk);\r\n\t\t},\r\n\t\tonAfterMoveSecondary(target, source, move) {\r\n\t\t\tthis.effectState.checkedBerserk = true;\r\n\t\t\tif (!source || source === target || !target.hp || !move.totalDamage) return;\r\n\t\t\tconst lastAttackedBy = target.getLastAttackedBy();\r\n\t\t\tif (!lastAttackedBy) return;\r\n\t\t\tconst damage = move.multihit ? move.totalDamage : lastAttackedBy.damage;\r\n\t\t\tconst threshold = target.maxhp*.5;\r\n\t\t\tif (target.hp <= threshold && target.hp + damage > threshold) {\r\n\t\t\t\tthis.boost({spa: 1}, target, target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tpokemon.heal(pokemon.baseMaxhp / 3);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Regain Patience\",\r\n\t\trating: 3,\r\n\t},\r\n\tquarksurge: {\r\n\t\tshortDesc: \"Quark Drive + Electric Surge\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t\tthis.field.setTerrain('electricterrain');\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('quarkdrive');\r\n\t\t\t} else if (!pokemon.volatiles['quarkdrive']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('quarkdrive');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['quarkdrive'];\r\n\t\t\tthis.add('-end', pokemon, 'Quark Drive', '[silent]');\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Quark Surge\",\r\n\t\trating: 3,\r\n\t},\r\n\tonceuponatime: {\r\n\t\tshortDesc: \"Protosynthesis + Infiltrator\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('WeatherChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonWeatherChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\t// Protosynthesis is not affected by Utility Umbrella\r\n\t\t\tif (this.field.isWeather('sunnyday')) {\r\n\t\t\t\tpokemon.addVolatile('protosynthesis');\r\n\t\t\t} else if (!pokemon.volatiles['protosynthesis']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('protosynthesis');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['protosynthesis'];\r\n\t\t\tthis.add('-end', pokemon, 'Protosynthesis', '[silent]');\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.infiltrates = true;\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Once Upon a Time\",\r\n\t\trating: 3,\r\n\t},\r\n\tprimitive: {\r\n\t\tshortDesc: \"Protosynthesis + Oblivious\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('WeatherChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'attract') return false;\r\n\t\t},\r\n\t\tonTryHit(pokemon, target, move) {\r\n\t\t\tif (['attract','captivate','taunt'].includes(move.id)) {\r\n\t\t\t\tthis.add('-immune', pokemon, '[from] ability: Primitive');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (['Intimidate','Mad Cow','Forest Fury','Shock Factor','Daunting Storm','Toxic Attitude'].includes(effect.name) && boost.atk) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Primitive', '[of] ' + target);\r\n\t\t\t} else if (effect.name === 'Fishy Threat' && boost.spe) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Speed', '[from] ability: Primitive', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonWeatherChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\t// Protosynthesis is not affected by Utility Umbrella\r\n\t\t\tif (this.field.isWeather('sunnyday')) {\r\n\t\t\t\tpokemon.addVolatile('protosynthesis');\r\n\t\t\t} else if (!pokemon.volatiles['protosynthesis']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('protosynthesis');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.volatiles['attract']) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Primitive');\r\n\t\t\t\tpokemon.removeVolatile('attract');\r\n\t\t\t\tthis.add('-end', pokemon, 'move: Attract', '[from] ability: Primitive');\r\n\t\t\t}\r\n\t\t\tif (pokemon.volatiles['taunt']) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Primitive');\r\n\t\t\t\tpokemon.removeVolatile('taunt');\r\n\t\t\t\t// Taunt's volatile already sends the -end message when removed\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['protosynthesis'];\r\n\t\t\tthis.add('-end', pokemon, 'Protosynthesis', '[silent]');\r\n\t\t},\r\n\t\tflags: {breakable: 1, failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Primitive\",\r\n\t\trating: 3,\r\n\t},\r\n\t/*systempurge: {\r\n\t\tshortDesc: \"Hit by a Dark move or Booster Energy used: highest stat is 1.3x, or 1.5x if Speed.\",\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (move.type === 'Dark') {\r\n\t\t\t\ttarget.addVolatile('systempurge');\r\n\t\t\t}\r\n\t\t},\r\n\t\t/ *onTerrainChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('systempurge');\r\n\t\t\t} else if (!pokemon.volatiles['systempurge']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('systempurge');\r\n\t\t\t}\r\n\t\t},* /\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['systempurge'];\r\n\t\t\tthis.add('-end', pokemon, 'Quark Drive', '[silent]');\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: System Purge', '[fromitem]');\r\n\t\t\t\t\tthis.add('-message', `${pokemon.name} used its booster energy to activate a System Purge!`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: System Purge');\r\n\t\t\t\t\tthis.add('-message', `${pokemon.name} activated a System Purge in response to the attack!`);\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'quarkdrive' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('System Purge atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('System Purge def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('System Purge spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('System Purge spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tfor (const target of pokemon.foes()) {\r\n\t\t\t\t\tif (target.hasAbility('dyschronometria')) {\r\n\t\t\t\t\t\tthis.debug('Dyschronometria negating spe boost');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.debug('System Purge spe boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Quark Drive');\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"System Purge\",\r\n\t\trating: 3,\r\n\t},*/\r\n\tbaryonblade: {\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('baryonblade');\r\n\t\t\t} else if (!pokemon.volatiles['baryonblade']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('baryonblade');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyCritRatio(critRatio) {\r\n\t\t\treturn critRatio + 1;\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['baryonblade'];\r\n\t\t\tthis.add('-end', pokemon, 'Baryon Blade', '[silent]');\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Baryon Blade', '[fromitem]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Baryon Blade');\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'quarkdrive' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyCritRatio(critRatio) {\r\n\t\t\t\treturn critRatio + 1;\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive spe boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Baryon Blade', '[silent]');\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Baryon Blade\",\r\n\t\tshortDesc: \"Quark Drive effects. +1 Critrate; +2 instead under Quark Drive.\",\r\n\t},\r\n\t/*delayedreaction: {\r\n\t\tshortDesc: \"This Pokemon switches out at the end of the next turn after being lowered to 50% of its max HP.\",\r\n\t\tonAfterMoveSecondary(target, source, move) {\r\n\t\t\tif (!source || source === target || !target.hp || !move.totalDamage) return;\r\n\t\t\tconst lastAttackedBy = target.getLastAttackedBy();\r\n\t\t\tif (!lastAttackedBy) return;\r\n\t\t\tconst damage = move.multihit ? move.totalDamage : lastAttackedBy.damage;\r\n\t\t\tif (target.hp <= target.maxhp*.5 && target.hp + damage > target.maxhp*.5) {\r\n\t\t\t\ttarget.addVolatile('delayedreaction');\r\n\t\t\t\tthis.add('-ability', target, 'Delayed Reaction');\r\n\t\t\t\tthis.add('-message', `${target.name} is getting ready to leave the battlefield!`);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tduration: 1,\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-ability', pokemon, 'Delayed Reaction');\r\n\t\t\t\tthis.add('-message', `${pokemon.name} ejected itself from the battle!`);\r\n\t\t\t\tpokemon.switchFlag = true;\t\t\t\t\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Delayed Reaction\",\r\n\t\trating: 1,\r\n\t},*/\r\n\tmadcow: {\r\n\t\tshortDesc: \"On switch-in, or when this Pokemon is lowered to 50% max HP, the foe's Attack is lowered by 1 stage.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tlet activated = false;\r\n\t\t\tfor (const target of pokemon.adjacentFoes()) {\r\n\t\t\t\tif (!activated) {\r\n\t\t\t\t\tthis.add('-ability', pokemon, 'Mad Cow', 'boost');\r\n\t\t\t\t\tactivated = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.volatiles['substitute']) {\r\n\t\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.boost({atk: -1}, target, pokemon, null, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEmergencyExit(target) {\r\n\t\t\tif (!this.canSwitch(target.side) || target.forceSwitchFlag || target.switchFlag) return;\r\n\t\t\tfor (const side of this.sides) {\r\n\t\t\t\tfor (const active of side.active) {\r\n\t\t\t\t\tactive.switchFlag = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.add('-activate', target, 'ability: Mad Cow');\r\n\t\t\tfor (const pokemon of target.adjacentFoes()) {\r\n\t\t\t\tif (pokemon.volatiles['substitute']) {\r\n\t\t\t\t\tthis.add('-immune', pokemon);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.boost({atk: -1}, pokemon, target, null, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttarget.switchFlag = false;\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Mad Cow\",\r\n\t\trating: 3.5,\r\n\t},\r\n\tchoreography: {\r\n\t\tshortDesc: \"Protean + Dancer; Dancer is once per switch-in instead of Protean.\",\r\n\t\tonPrepareHit(source, target, move) {\r\n\t\t\tif (move.hasBounced || move.isFutureMove || move.sourceEffect === 'snatch') return;\r\n\t\t\tconst type = move.type;\r\n\t\t\tif (type && type !== '???' && source.getTypes().join() !== type && source.setType(type)) {\r\n\t\t\t\tthis.add('-start', source, 'typechange', type, '[from] ability: Choreography');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSwitchIn(pokemon) {\r\n\t\t\tdelete this.effectState.choreography;\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Choreography\",\r\n\t\trating: 4,\r\n\t},\r\n\tsquall: {\r\n\t\tshortDesc: \"+1 Atk if hit by a Fire or Ice move or Tailwind begins; Fire & Ice immunity.\",\r\n\t\tonTryHitPriority: 1,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && (move.type === 'Ice' || move.type === 'Fire')) {\r\n\t\t\t\tif (!this.boost({atk: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Squall');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryHitSide(target, source, move) {\r\n\t\t\tif (target === this.effectState.target || target.side !== source.side) return;\r\n\t\t\tif (move.type === 'Ice' || move.type === 'Fire') {\r\n\t\t\t\tthis.boost({atk: 1}, this.effectState.target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllySideConditionStart(target, source, sideCondition) {\r\n\t\t\tconst pokemon = this.effectState.target;\r\n\t\t\tif (sideCondition.id === 'tailwind') {\r\n\t\t\t\tthis.boost({atk: 1}, pokemon, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Squall\",\r\n\t\trating: 4,\r\n\t},\r\n\tstoneage: {\r\n\t\tshortDesc: \"Sturdy + Technician\",\r\n\t\tonBeforeMovePriority: 9,\r\n\t\tonBeforeMove(pokemon) {\r\n\t\t\tif (pokemon.species.name !== 'Relishadow' || pokemon.transformed) return;\r\n\t\t\tpokemon.formeChange('Relishadow-Zenith');\r\n\t\t\tthis.add('-start', pokemon, 'typechange', pokemon.getTypes(true).join('/'), '[silent]');\r\n\t\t},\r\n\t\tonTryHit(pokemon, target, move) {\r\n\t\t\tif (move.ohko) {\r\n\t\t\t\tthis.add('-immune', pokemon, '[from] ability: Stone Age');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagePriority: -100,\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (target.hp === target.maxhp && damage >= target.hp && effect && effect.effectType === 'Move') {\r\n\t\t\t\tthis.add('-ability', target, 'Stone Age');\r\n\t\t\t\treturn target.hp - 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 30,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tconst basePowerAfterMultiplier = this.modify(basePower, this.event.modifier);\r\n\t\t\tthis.debug('Base Power: ' + basePowerAfterMultiplier);\r\n\t\t\tif (basePowerAfterMultiplier <= 60) {\r\n\t\t\t\tthis.debug('Stone Age boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Stone Age\",\r\n\t\trating: 3,\r\n\t},\r\n\tstonewheel: {\r\n\t\tshortDesc: \"Rock Head + Technician\",\r\n\t\tonBeforeMovePriority: 9,\r\n\t\tonBeforeMove(pokemon) {\r\n\t\t\tif (pokemon.species.name !== 'Relishadow' || pokemon.transformed) return;\r\n\t\t\tpokemon.formeChange('Relishadow-Zenith');\r\n\t\t\tthis.add('-start', pokemon, 'typechange', pokemon.getTypes(true).join('/'), '[silent]');\r\n\t\t},\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect.id === 'recoil') {\r\n\t\t\t\tif (!this.activeMove) throw new Error(\"Battle.activeMove is null\");\r\n\t\t\t\tif (this.activeMove.id !== 'struggle') return null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 30,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tconst basePowerAfterMultiplier = this.modify(basePower, this.event.modifier);\r\n\t\t\tthis.debug('Base Power: ' + basePowerAfterMultiplier);\r\n\t\t\tif (basePowerAfterMultiplier <= 60) {\r\n\t\t\t\tthis.debug('Stone Age boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Stone Wheel\",\r\n\t\trating: 3,\r\n\t},\r\n\tmoltencore: {\r\n\t\tshortDesc: \"Turboblaze + Rock Head\",\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect.id === 'recoil') {\r\n\t\t\t\tif (!this.activeMove) throw new Error(\"Battle.activeMove is null\");\r\n\t\t\t\tif (this.activeMove.id !== 'struggle') return null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Molten Core');\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.ignoreAbility = true;\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Molten Core\",\r\n\t\trating: 3,\r\n\t},\r\n\teczema: {\r\n\t\tshortDesc: \"Unaware + Rough Skin\",\r\n\t\tonDamagingHitOrder: 1,\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target, true)) {\r\n\t\t\t\tthis.damage(source.baseMaxhp / 8, source, target);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Okay so Mold Breaker hits through Rough Skin but not Unaware\r\n\t\t//While Rough Skin announces itself through its effects, UNAWARE DOESN'T\r\n\t\tonStart(pokemon) {\r\n\t\t\tpokemon.addVolatile('ability:unaware');\r\n\t\t},\r\n\t\tonSourcePrepareHit(source, target, move) {\r\n\t\t\tif (target.volatiles['ability:unaware']) {\r\n\t\t\t\tif (move.ignoreAbility) target.removeVolatile('ability:unaware');\r\n\t\t\t} else if (!move.ignoreAbility) target.addVolatile('ability:unaware');\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tpokemon.removeVolatile('ability:unaware');\r\n\t\t},\r\n\t\t/*onAnyModifyBoost(boosts, pokemon) {\r\n\t\t\tconst unawareUser = this.effectState.target;\r\n\t\t\tif (unawareUser === pokemon) return;\r\n\t\t\tif (unawareUser === this.activePokemon) {\r\n\t\t\t\tif (pokemon !== this.activeTarget) return;\r\n\t\t\t\tboosts['def'] = 0;\r\n\t\t\t\tboosts['spd'] = 0;\r\n\t\t\t\tboosts['evasion'] = 0;\r\n\t\t\t}\r\n\t\t\telse if (pokemon === this.activePokemon && unawareUser === this.activeTarget) {\r\n\t\t\t\tboosts['atk'] = 0;\r\n\t\t\t\tboosts['def'] = 0;\r\n\t\t\t\tboosts['spa'] = 0;\r\n\t\t\t\tboosts['accuracy'] = 0;\r\n\t\t\t}\r\n\t\t},*/\r\n\t\tflags: {},\r\n\t\tname: \"Eczema\",\r\n\t\trating: 3,\r\n\t},\r\n\taurashield: {\r\n\t\tshortDesc: \"Shield Dust + While this Pokemon is active, moves with secondary effects used by any Pokemon have 1.33x power.\",\r\n\t\tonModifySecondaries(secondaries) {\r\n\t\t\tthis.debug('Aura Shield prevent secondary');\r\n\t\t\treturn secondaries.filter(effect => !!(effect.self || effect.dustproof));\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Aura Shield');\r\n\t\t},\r\n\t\tonAnyBasePowerPriority: 20,\r\n\t\tonAnyBasePower(basePower, source, target, move) {\r\n\t\t\tif (target === source || move.category === 'Status' || !move.secondaries) return;\r\n\t\t\tif (!move.auraBooster) move.auraBooster = this.effectState.target;\r\n\t\t\telse if (move.auraBooster !== this.effectState.target) return;\r\n\t\t\treturn this.chainModify([move.hasAuraBreak ? 0x0C00 : 0x1547, 0x1000]);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Aura Shield\",\r\n\t\trating: 3,\r\n\t},\r\n\tfaultyphoton: {\r\n\t\tshortDesc: \"Disguise + Quark Drive\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonDamagePriority: 1,\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect?.effectType === 'Move' && target.species.id === 'ironmimic' && !target.transformed) {\r\n\t\t\t\tthis.add('-activate', target, 'ability: Faulty Photon');\r\n\t\t\t\tthis.effectState.busted = true;\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonCriticalHit(target, source, move) {\r\n\t\t\tif (!target/*) return;\r\n\t\t\tif (*/|| target.species.id !== 'ironmimic' || target.transformed || !target.runImmunity(move.type)) return;\r\n\t\t\tconst hitSub = target.volatiles['substitute'] && !move.flags['authentic'] && !(move.infiltrates/* && this.gen >= 6*/);\r\n\t\t\tif (hitSub) return;\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonEffectiveness(typeMod, target, type, move) {\r\n\t\t\tif (!target/*) return;\r\n\t\t\tif (*/|| target.species.id !== 'ironmimic' || target.transformed || !target.runImmunity(move.type)) return;\r\n\t\t\tconst hitSub = target.volatiles['substitute'] && !move.flags['authentic'] && !(move.infiltrates/* && this.gen >= 6*/);\r\n\t\t\tif (hitSub) return;\r\n\t\t\treturn 0;\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.species.id === 'ironmimic' && this.effectState.busted) {\r\n\t\t\t\t//const speciesid = /*pokemon.species.id === 'mimikyutotem' ? 'Mimikyu-Busted-Totem' :*/ 'Iron Mimic-Busted';\r\n\t\t\t\t//pokemon.formeChange(speciesid, this.effect, true);\r\n\t\t\t\tpokemon.formeChange('Iron Mimic-Busted', this.effect, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'typechange', pokemon.getTypes(true).join('/'), '[silent]');\r\n\t\t\t\tthis.damage(pokemon.baseMaxhp / 8, pokemon, pokemon, this.dex.species.get('Iron Mimic-Busted'));\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('quarkdrive');\r\n\t\t\t} else if (!pokemon.volatiles['quarkdrive']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('quarkdrive');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['quarkdrive'];\r\n\t\t\tthis.add('-end', pokemon, 'Quark Drive', '[silent]');\r\n\t\t},\r\n\t\tflags: {\r\n\t\t\tfailroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, cantsuppress: 1,\r\n\t\t\tbreakable: 1, notransform: 1,\r\n\t\t},\t\r\n\t\tname: \"Faulty Photon\",\r\n\t\trating: 3,\r\n\t},\r\n\tdyschronometria: {\r\n\t\tshortDesc: \"While this Pokemon is active, all Paradox boosts are suppressed.\",\r\n\t\tonAnyModifyAtkPriority: 4,\r\n\t\tonAnyModifyAtk(atk, attacker, defender, move) {\r\n\t\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\t\tif (attacker.isAlly(abilityHolder) || attacker.ignoringAbility() || !this.effectState.unnerved) return;\r\n\t\t\t\tif (!move.suppressedParadox) move.suppressedParadox = abilityHolder;\r\n\t\t\t\telse if (move.suppressedParadox !== abilityHolder) return;\r\n\t\t\t\tfor (const paradox of ['faultyphoton', /*'systempurge'*/ 'baryonblade', 'onceuponatime', 'primitive', 'quarksurge', \r\n\t\t\t\t\t\t\t\t\t\t\t'lightdrive', 'openingact', 'protosynthesis', 'quarkdrive', 'nanorepairs', 'firewall', \r\n\t\t\t\t\t\t\t\t\t\t\t'weightoflife', 'circuitbreaker', 'ancientmarble', 'prehistorichunter', 'heatproofdrive']) {\r\n\t\t\t\t\tif (attacker.hasAbility(paradox)) {\r\n\t\t\t\t\t\tif ((attacker?.volatiles['quarkdrive'] || attacker?.volatiles['protosynthesis'] || attacker?.volatiles[paradox])?.bestStat !== 'atk') return;\r\n\t\t\t\t\t\tthis.debug('Dyschronometria nullify');\r\n\t\t\t\t\t\treturn this.chainModify([3151, 4096]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t},\r\n\t\tonAnyModifyDefPriority: 5,\r\n\t\tonAnyModifyDef(atk, attacker, defender, move) {\r\n\t\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\t\tif (defender.isAlly(abilityHolder) || defender.ignoringAbility() || !this.effectState.unnerved) return;\r\n\t\t\t\tif (!move.suppressedParadox) move.suppressedParadox = abilityHolder;\r\n\t\t\t\telse if (move.suppressedParadox !== abilityHolder) return;\r\n\t\t\t\tfor (const paradox of ['faultyphoton', /*'systempurge'*/ 'baryonblade', 'onceuponatime', 'primitive', 'quarksurge', \r\n\t\t\t\t\t\t\t\t\t\t\t'lightdrive', 'openingact', 'protosynthesis', 'quarkdrive', 'nanorepairs', 'firewall',\r\n\t\t\t\t\t\t\t\t\t\t\t'weightoflife', 'circuitbreaker', 'ancientmarble', 'prehistorichunter', 'heatproofdrive']) {\r\n\t\t\t\t\tif (defender.hasAbility(paradox)) {\r\n\t\t\t\t\t\tif ((defender?.volatiles['quarkdrive'] || defender?.volatiles['protosynthesis'] || defender?.volatiles[paradox])?.bestStat !== 'def') return;\r\n\t\t\t\t\t\tthis.debug('Dyschronometria nullify');\r\n\t\t\t\t\t\treturn this.chainModify([3151, 4096]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t},\r\n\t\tonAnyModifySpAPriority: 4,\r\n\t\tonAnyModifySpA(atk, attacker, defender, move) {\r\n\t\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\t\tif (attacker.isAlly(abilityHolder) || attacker.ignoringAbility() || !this.effectState.unnerved) return;\r\n\t\t\t\tif (!move.suppressedParadox) move.suppressedParadox = abilityHolder;\r\n\t\t\t\telse if (move.suppressedParadox !== abilityHolder) return;\r\n\t\t\t\tfor (const paradox of ['faultyphoton', /*'systempurge'*/ 'baryonblade', 'onceuponatime', 'primitive', 'quarksurge', \r\n\t\t\t\t\t\t\t\t\t\t\t'lightdrive', 'openingact', 'protosynthesis', 'quarkdrive', 'nanorepairs', 'firewall', \r\n\t\t\t\t\t\t\t\t\t\t\t'weightoflife', 'circuitbreaker', 'ancientmarble', 'prehistorichunter', 'heatproofdrive']) {\r\n\t\t\t\t\tif (attacker.hasAbility(paradox)) {\r\n\t\t\t\t\t\tif ((attacker?.volatiles['quarkdrive'] || attacker?.volatiles['protosynthesis'] || attacker?.volatiles[paradox]).bestStat !== 'spa') return;\r\n\t\t\t\t\t\tthis.debug('Dyschronometria nullify');\r\n\t\t\t\t\t\treturn this.chainModify([3151, 4096]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t},\r\n\t\tonAnyModifySpDPriority: 5,\r\n\t\tonAnyModifySpD(atk, attacker, defender, move) {\r\n\t\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\t\tif (defender.isAlly(abilityHolder) || defender.ignoringAbility() || !this.effectState.unnerved) return;\r\n\t\t\t\tif (!move.suppressedParadox) move.suppressedParadox = abilityHolder;\r\n\t\t\t\telse if (move.suppressedParadox !== abilityHolder) return;\r\n\t\t\t\tfor (const paradox of ['faultyphoton', /*'systempurge'*/ 'baryonblade', 'onceuponatime', 'primitive', 'quarksurge', \r\n\t\t\t\t\t\t\t\t\t\t\t'lightdrive', 'openingact', 'protosynthesis', 'quarkdrive', 'nanorepairs', 'firewall', \r\n\t\t\t\t\t\t\t\t\t\t\t'weightoflife', 'circuitbreaker', 'ancientmarble', 'prehistorichunter', 'heatproofdrive']) {\r\n\t\t\t\t\tif (defender.hasAbility(paradox)) {\r\n\t\t\t\t\t\tif ((defender?.volatiles['quarkdrive'] || defender?.volatiles['protosynthesis'] || defender?.volatiles[paradox])?.bestStat !== 'def') return;\r\n\t\t\t\t\t\tthis.debug('Dyschronometria nullify');\r\n\t\t\t\t\t\treturn this.chainModify([3151, 4096]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t},\r\n\t\t//Speed suppression in the other Paradox abilities\r\n\t\tonPreStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Dyschronometria');\r\n\t\t\tthis.effectState.unnerved = true;\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (this.effectState.unnerved) return;\r\n\t\t\tthis.add('-ability', pokemon, 'Dyschronometria');\r\n\t\t\tthis.effectState.unnerved = true;\r\n\t\t},\r\n\t\tonEnd() {\r\n\t\t\tthis.effectState.unnerved = false;\r\n\t\t},\r\n\t\tflags: {breakable: 1, failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Dyschronometria\",\r\n\t\trating: 3,\r\n\t},\r\n\t\r\n\tfirewall: {\r\n\t\tshortDesc: \"Quark Drive + x1.5 power to Fire-type moves when active\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' && attacker.volatiles['quarkdrive']) {\r\n\t\t\t\tthis.debug('Firewall Fire boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' && attacker.volatiles['quarkdrive']) {\r\n\t\t\t\tthis.debug('Firewall Fire boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('quarkdrive');\r\n\t\t\t} else if (!pokemon.volatiles['quarkdrive']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('quarkdrive');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['quarkdrive'];\r\n\t\t\tthis.add('-end', pokemon, 'Quark Drive', '[silent]');\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Firewall\",\r\n\t\trating: 3,\r\n\t},\r\n\tnanorepairs: {\r\n\t\tshortDesc: \"Quark Drive + Regenerator\",\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tpokemon.heal(pokemon.baseMaxhp / 3);\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('quarkdrive');\r\n\t\t\t} else if (!pokemon.volatiles['quarkdrive']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('quarkdrive');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['quarkdrive'];\r\n\t\t\tthis.add('-end', pokemon, 'Quark Drive', '[silent]');\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Nanorepairs\",\r\n\t\trating: 3,\r\n\t},\r\n\tironsights: {\r\n\t\tshortDesc: \"x1.33 Atk/SpA/Acc.\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk) {\r\n\t\t\treturn this.chainModify([5461, 4096]);\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(spa) {\r\n\t\t\treturn this.chainModify([5461, 4096]);\r\n\t\t},\r\n\t\tonSourceModifyAccuracyPriority: -1,\r\n\t\tonSourceModifyAccuracy(accuracy) {\r\n\t\t\tif (typeof accuracy !== 'number') return;\r\n\t\t\tthis.debug('ironsights - enhancing accuracy');\r\n\t\t\treturn this.chainModify([5461, 4096]);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Iron Sights\",\r\n\t\trating: 3,\r\n\t},\r\n\trejuvenate: {\r\n\t\tshortDesc: \"On switch-out: If no status then heal 1/3 Max HP, else heal status\",\r\n\t\tonCheckShow(pokemon) {\r\n\t\t\t// This is complicated\r\n\t\t\t// For the most part, in-game, it's obvious whether or not Natural Cure activated,\r\n\t\t\t// since you can see how many of your opponent's pokemon are statused.\r\n\t\t\t// The only ambiguous situation happens in Doubles/Triples, where multiple pokemon\r\n\t\t\t// that could have Natural Cure switch out, but only some of them get cured.\r\n\t\t\tif (pokemon.side.active.length === 1/*) return;\r\n\t\t\tif (*/|| pokemon.showCure === true || pokemon.showCure === false) return;\r\n\r\n\t\t\tconst cureList = [];\r\n\t\t\tlet noCureCount = 0;\r\n\t\t\tfor (const curPoke of pokemon.side.active) {\r\n\t\t\t\t// pokemon not statused\r\n\t\t\t\tif (!curPoke || !curPoke.status) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: not statused or doesn't exist\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (curPoke.showCure) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: Rejuvenate already known\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tconst species = curPoke.species;\r\n\t\t\t\t// pokemon can't get Natural Cure\r\n\t\t\t\tif (!Object.values(species.abilities).includes('Natural Cure') && !Object.values(species.abilities).includes('Natural Pressures') && !Object.values(species.abilities).includes('Rejuvenate')) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: no Rejuvenate\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// pokemon's ability is known to be Natural Cure\r\n\t\t\t\tif (!species.abilities['1'] && !species.abilities['H']) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: only one ability\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// pokemon isn't switching this turn\r\n\t\t\t\tif (curPoke !== pokemon && !this.queue.willSwitch(curPoke)) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: not switching\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (curPoke.hasAbility(['naturalcure','rejuvenate','naturalpressures'])) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" confirmed: could be Rejuvenate (and is)\");\r\n\t\t\t\t\tcureList.push(curPoke);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" confirmed: could be Rejuvenate (but isn't)\");\r\n\t\t\t\t\tnoCureCount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!cureList.length || !noCureCount) {\r\n\t\t\t\t// It's possible to know what pokemon were cured\r\n\t\t\t\tfor (const pkmn of cureList) {\r\n\t\t\t\t\tpkmn.showCure = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// It's not possible to know what pokemon were cured\r\n\r\n\t\t\t\t// Unlike a -hint, this is real information that battlers need, so we use a -message\r\n\t\t\t\tthis.add('-message', \"(\" + cureList.length + \" of \" + pokemon.side.name + \"'s pokemon \" + (cureList.length === 1 ? \"was\" : \"were\") + \" cured by Natural Cure.)\");\r\n\r\n\t\t\t\tfor (const pkmn of cureList) {\r\n\t\t\t\t\tpkmn.showCure = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tif (!pokemon.status) {\r\n\t\t\t\tpokemon.heal(pokemon.baseMaxhp / 3);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (pokemon.showCure === undefined) pokemon.showCure = true;\r\n\t\t\tif (pokemon.showCure) this.add('-curestatus', pokemon, pokemon.status, '[from] ability: Rejuvenate');\r\n\t\t\tpokemon.setStatus('');\r\n\t\t\t// only reset .showCure if it's false\r\n\t\t\t// (once you know a Pokemon has Natural Cure, its cures are always known)\r\n\t\t\tpokemon.showCure ||= undefined;\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Rejuvenate\",\r\n\t\trating: 3,\r\n\t},\r\n\telectromagneticveil: {\r\n\t\tshortDesc: \"This Pokemon heals 1/4 of its max HP when hit by Electric moves or burned; Electric & Burn immunity.\",\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Electric') {\r\n\t\t\t\tif (!this.heal(target.baseMaxhp/4)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Electromagnetic Veil');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif (status.id !== 'brn') return;\r\n\t\t\tif ((effect as Move)?.status && !this.heal(target.baseMaxhp/4)) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Electromagnetic Veil');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.status === 'brn') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Electromagnetic Veil');\r\n\t\t\t\tthis.heal(target.baseMaxhp/4);\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Electromagnetic Veil\",\r\n\t\trating: 3,\r\n\t},\r\n\trisingtension: {\r\n\t\tshortDesc: \"Levitate + Cursed Body\",\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (!source.volatiles['disable']/*) return;\r\n\t\t\tif (*/ && !move.isFutureMove/*) {\r\n\t\t\t\tif (*/&& this.randomChance(3, 10)) {\r\n\t\t\t\t\tsource.addVolatile('disable', this.effectState.target);\r\n\t\t\t\t}\r\n\t\t\t//}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Rising Tension\",\r\n\t\trating: 3,\r\n\t},\r\n\tgrindset: {\r\n\t\tshortDesc: \"While active, own Attack is 1.5x, other Pokemon's Attack is 0.5.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (this.suppressingAbility(pokemon)) return;\r\n\t\t\tthis.add('-ability', pokemon, 'Grindset');\r\n\t\t\tthis.add('-message', `The grind never stops for ${pokemon.name}, lowering the foe's Attack and raising its own!`);\r\n\t\t},\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk) {\r\n\t\t\treturn this.chainModify(1.5);\r\n\t\t},\r\n\t\tonAnyModifyAtk(atk, source, target, move) {\r\n\t\t\tif (source.hasAbility('Grindset')) return;\r\n\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\tif (!move.ruinedAtk) move.ruinedAtk = abilityHolder;\r\n\t\t\telse if (move.ruinedAtk !== abilityHolder) return;\r\n\t\t\tthis.debug('Grindset Atk drop');\r\n\t\t\treturn this.chainModify(0.5);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Grindset\",\r\n\t\trating: 3,\r\n\t},\r\n\tshockfactor: {\r\n\t\tshortDesc: \"Static + Intimidate\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tlet activated = false;\r\n\t\t\tfor (const target of pokemon.adjacentFoes()) {\r\n\t\t\t\tif (!activated) {\r\n\t\t\t\t\tthis.add('-ability', pokemon, 'Shock Factor', 'boost');\r\n\t\t\t\t\tactivated = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.volatiles['substitute']) {\r\n\t\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.boost({atk: -1}, target, pokemon, null, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (move.flags['contact'] && this.randomChance(3, 10)) {\r\n\t\t\t\t\tsource.trySetStatus('par', target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Shock Factor\",\r\n\t\trating: 3,\r\n\t},\r\n\tshellshock: {\r\n\t\tshortDesc: \"Effects of Rock Head. Moves with Recoil have a 30% chance of inflicting paralysis.\",\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect.id === 'recoil') {\r\n\t\t\t\tif (!this.activeMove) throw new Error(\"Battle.activeMove is null\");\r\n\t\t\t\tif (this.activeMove.id !== 'struggle') return null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tif (!move || !(move.recoil || move.hasCrashDamage) || move.target === 'self') return;\r\n\t\t\t(move.secondaries ||= []).push({\r\n\t\t\t\tchance: 30,\r\n\t\t\t\tstatus: 'par',\r\n\t\t\t\tability: this.dex.abilities.get('shellshock'),\r\n\t\t\t});\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Shell Shock\",\r\n\t\trating: 3,\r\n\t},\r\n\tcircuitbreaker: {\r\n\t\tshortDesc: \"Quark Drive + Mold Breaker\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t\tif (!this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tthis.add('-ability', pokemon, 'Circuit Breaker');\r\n\t\t\t\tthis.add('-message', `${pokemon.name} breaks the circuit!`);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.ignoreAbility = true;\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('circuitbreaker');\r\n\t\t\t} else if (!pokemon.volatiles['circuitbreaker']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('circuitbreaker');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['circuitbreaker'];\r\n\t\t\tthis.add('-end', pokemon, 'Quark Drive', '[silent]');\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Circuit Breaker', '[fromitem]');\r\n\t\t\t\t\tthis.add('-message', `${pokemon.name} used its Booster Energy to overclock its Circuit Breaker!`);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Circuit Breaker');\r\n\t\t\t\t\tthis.add('-message', `The Electric Terrain lets ${pokemon.name} overclock its Circuit Breaker!`);\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'quarkdrive' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Circuit Breaker atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Circuit Breaker def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Circuit Breaker spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Circuit Breaker spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tfor (const target of pokemon.foes()) {\r\n\t\t\t\t\tif (target.hasAbility('dyschronometria')) {\r\n\t\t\t\t\t\tthis.debug('Dyschronometria negating spe boost');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.debug('Circuit Breaker spe boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Quark Drive');\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Circuit Breaker\",\r\n\t\trating: 3,\r\n\t},\r\n\tweightoflife: {\r\n\t\tshortDesc: \"Heavy Metal + Protosynthesis. Protosynthesis activates if the user is heavier.\",\r\n\t\tonModifyWeightPriority: 1,\r\n\t\tonModifyWeight(weighthg) {\r\n\t\t\treturn weighthg * 2;\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('WeatherChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonWeatherChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\t// Protosynthesis is not affected by Utility Umbrella\r\n\t\t\tif (this.field.isWeather('sunnyday')) {\r\n\t\t\t\tpokemon.addVolatile('weightoflife');\r\n\t\t\t} else if (!pokemon.volatiles['weightoflife']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('weightoflife');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (!(pokemon.volatiles['weightoflife']?.fromBooster || pokemon.volatiles['weightoflife']?.fromWeightDiff) && !this.field.isWeather('sunnyday')) {\r\n\t\t\t\tpokemon.removeVolatile('weightoflife');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnyPrepareHit(source, target, move) {\r\n\t\t\tif (move.hasBounced || source === target) return;\r\n\t\t\tconst user = this.effectState.target;\r\n\t\t\tif (user.volatiles['weightoflife'] && !user.volatiles['weightoflife'].fromWeightDiff) return;\r\n\t\t\tvar yourweight;\r\n\t\t\tif (source === user) {\r\n\t\t\t\tyourweight = target.getWeight();\r\n\t\t\t} else if (target === user) {\r\n\t\t\t\tyourweight = source.getWeight();\r\n\t\t\t} else return;\r\n\t\t\t\r\n\t\t\tif (user.getWeight() > yourweight) {\r\n\t\t\t\tif (user.volatiles['weightoflife']) return;\r\n\t\t\t\tuser.addVolatile('weightoflife');\r\n\t\t\t\tuser.volatiles['weightoflife'].fromWeightDiff = true;\r\n\t\t\t} else if (user.volatiles['weightoflife']) {\r\n\t\t\t\tif (this.field.isWeather('sunnyday')) {\r\n\t\t\t\t\tuser.volatiles['weightoflife'].fromWeightDiff = false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuser.removeVolatile('weightoflife');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['weightoflife'];\r\n\t\t\tthis.add('-end', pokemon, 'Protosynthesis', '[silent]');\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Weight of Life', '[fromitem]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Weight of Life');\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'protosynthesis' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Weight of Life atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Weight of Life def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Weight of Life spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Weight of Life spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tfor (const target of pokemon.foes()) {\r\n\t\t\t\t\tif (target.hasAbility('dyschronometria')) {\r\n\t\t\t\t\t\tthis.debug('Dyschronometria negating spe boost');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.debug('Weight of Life spe boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Protosynthesis');\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Weight of Life\",\r\n\t\trating: 1,\r\n\t\tnum: 135,\r\n\t},\r\n\trebelsblade: {\r\n\t\tshortDesc: \"This Pokemon's slicing moves have x1.5 power and a 30% chance to inflict poisoning.\",\r\n\t\tonBasePowerPriority: 19,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['slicing']) {\r\n\t\t\t\tthis.debug('Rebels Blade boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tif (!move || !move.flags['slicing'] || move.target === 'self') return;\r\n\t\t\t(move.secondaries ||= []).push({\r\n\t\t\t\tchance: 30,\r\n\t\t\t\tstatus: 'psn',\r\n\t\t\t\tability: this.dex.abilities.get('rebelsblade'),\r\n\t\t\t});\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Rebel's Blade\",\r\n\t\trating: 3,\r\n\t},\r\n\tnaturalpressures: {\r\n\t\tshortDesc: \"Natural Cure + Pressure\",\r\n\t\tonCheckShow(pokemon) {\r\n\t\t\t// This is complicated\r\n\t\t\t// For the most part, in-game, it's obvious whether or not Natural Pressures activated,\r\n\t\t\t// since you can see how many of your opponent's pokemon are statused.\r\n\t\t\t// The only ambiguous situation happens in Doubles/Triples, where multiple pokemon\r\n\t\t\t// that could have Natural Pressures switch out, but only some of them get cured.\r\n\t\t\tif (pokemon.side.active.length === 1/*) return;\r\n\t\t\tif (*/|| pokemon.showCure === true || pokemon.showCure === false) return;\r\n\r\n\t\t\tconst cureList = [];\r\n\t\t\tlet noCureCount = 0;\r\n\t\t\tfor (const curPoke of pokemon.side.active) {\r\n\t\t\t\t// pokemon not statused\r\n\t\t\t\tif (!curPoke || !curPoke.status) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: not statused or doesn't exist\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (curPoke.showCure) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: Natural Pressures already known\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tconst species = curPoke.species;\r\n\t\t\t\t// pokemon can't get Natural Pressures\r\n\t\t\t\tif (!Object.values(species.abilities).includes('Natural Cure') && !Object.values(species.abilities).includes('Natural Pressures') && !Object.values(species.abilities).includes('Rejuvenate')) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: no Natural Pressures\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// pokemon's ability is known to be Natural Pressures\r\n\t\t\t\tif (!species.abilities['1'] && !species.abilities['H']) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: only one ability\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// pokemon isn't switching this turn\r\n\t\t\t\tif (curPoke !== pokemon && !this.queue.willSwitch(curPoke)) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: not switching\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (curPoke.hasAbility(['naturalpressures','naturalcure','rejuvenate'])) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" confirmed: could be Natural Pressures (and is)\");\r\n\t\t\t\t\tcureList.push(curPoke);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" confirmed: could be Natural Pressures (but isn't)\");\r\n\t\t\t\t\tnoCureCount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!cureList.length || !noCureCount) {\r\n\t\t\t\t// It's possible to know what pokemon were cured\r\n\t\t\t\tfor (const pkmn of cureList) {\r\n\t\t\t\t\tpkmn.showCure = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// It's not possible to know what pokemon were cured\r\n\r\n\t\t\t\t// Unlike a -hint, this is real information that battlers need, so we use a -message\r\n\t\t\t\tthis.add('-message', \"(\" + cureList.length + \" of \" + pokemon.side.name + \"'s pokemon \" + (cureList.length === 1 ? \"was\" : \"were\") + \" cured by Natural Cure.)\");\r\n\r\n\t\t\t\tfor (const pkmn of cureList) {\r\n\t\t\t\t\tpkmn.showCure = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tif (!pokemon.status) return;\r\n\r\n\t\t\t// if pokemon.showCure is undefined, it was skipped because its ability\r\n\t\t\t// is known\r\n\t\t\tif (pokemon.showCure === undefined) pokemon.showCure = true;\r\n\r\n\t\t\tif (pokemon.showCure) this.add('-curestatus', pokemon, pokemon.status, '[from] ability: Natural Pressures');\r\n\t\t\tpokemon.setStatus('');\r\n\r\n\t\t\t// only reset .showCure if it's false\r\n\t\t\t// (once you know a Pokemon has Natural Pressures, its cures are always known)\r\n\t\t\tpokemon.showCure ||= undefined;\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Natural Pressures');\r\n\t\t},\r\n\t\tonDeductPP(target, source) {\r\n\t\t\tif (target.side === source.side) return;\r\n\t\t\treturn 1;\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Natural Pressures\",\r\n\t\trating: 3,\r\n\t},\r\n\tvitalmetalbody: {\r\n\t\tshortDesc: \"Vital Spirit + Full Metal Body\",\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.status === 'slp') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Vital Metal Body');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif (status.id !== 'slp') return;\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Vital Metal Body');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tlet showMsg = false;\r\n\t\t\tlet i: BoostName;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tdelete boost[i];\r\n\t\t\t\t\tshowMsg = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (showMsg && !(effect as ActiveMove).secondaries && effect.id !== 'octolock') {\r\n\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"[from] ability: Vital Metal Body\", \"[of] \" + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryAddVolatile(status, target) {\r\n\t\t\tif (status.id === 'yawn') {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Vital Metal Body');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Vital Metal Body\",\r\n\t\trating: 3,\r\n\t},\r\n\tfortunomorphosis: {\r\n\t\tshortDesc: \"This Pokemon gains the Laser Focus effect when it takes a hit from an attack.\",\r\n\t\tonDamagingHitOrder: 1,\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\ttarget.addVolatile('laserfocus');\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Fortunomorphosis\",\r\n\t\trating: 3,\r\n\t},\r\n\tburningpetals: {\r\n\t\tshortDesc: \"Allied Fire-types status/stat drop/Fire immune; Gains x1.5 to Fire on activation.\",\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Fire' && target.hasType('Fire')) {\r\n\t\t\t\tmove.accuracy = true;\r\n\t\t\t\tif (!target.addVolatile('burningpetals')) {\r\n\t\t\t\t\tthis.add('-block', target, 'ability: Burning Petals', '[of] ' + target)\r\n\t\t\t\t\tthis.add('-message', `${target.name} is surrounded by burning petals!`);\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryHitSide(target, source, move) {\r\n\t\t\tif (!target.isAlly(source) && move.type === 'Fire' && target.hasType('Fire')) {\r\n\t\t\t\tmove.accuracy = true;\r\n\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\tif (!effectHolder.addVolatile('burningpetals')) {\r\n\t\t\t\t\tthis.add('-block', target, 'ability: Burning Petals', '[of] ' + effectHolder)\r\n\t\t\t\t\tthis.add('-message', `${target.name} is surrounded by burning petals!`);\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryBoost(boost, target, source, effect) {\r\n\t\t\tif ((source && target === source) || !target.hasType('Fire')) return;\r\n\t\t\tlet showMsg = false;\r\n\t\t\tlet i: BoostName;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tdelete boost[i];\r\n\t\t\t\t\tshowMsg = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (showMsg && !(effect as ActiveMove).secondaries) {\r\n\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\tif (!effectHolder.addVolatile('burningpetals')) {\r\n\t\t\t\t\tthis.add('-block', target, 'ability: Burning Petals', '[of] ' + effectHolder);\r\n\t\t\t\t\tthis.add('-message', `${target.name} is surrounded by burning petals!`);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllySetStatus(status, target, source, effect) {\r\n\t\t\tif (source && target !== source && effect && effect.id !== 'yawn' && target.hasType('Fire')) {\r\n\t\t\t\tthis.debug('interrupting setStatus with Burning Petals');\r\n\t\t\t\tif (effect.name === 'Synchronize' || (effect.effectType === 'Move' && !effect.secondaries)) {\r\n\t\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\t\tif (!effectHolder.addVolatile('burningpetals')) {\r\n\t\t\t\t\t\tthis.add('-block', target, 'ability: Burning Petals', '[of] ' + effectHolder);\r\n\t\t\t\t\t\tthis.add('-message', `${target.name} is surrounded by burning petals!`);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryAddVolatile(status, target) {\r\n\t\t\tif (status.id === 'yawn' && target.hasType('Fire')) {\r\n\t\t\t\tthis.debug('Burning Petals blocking yawn');\r\n\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\tif (!effectHolder.addVolatile('burningpetals')) this.add('-block', target, 'ability: Burning Petals', '[of] ' + effectHolder);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tpokemon.removeVolatile('burningpetals');\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(target) {\r\n\t\t\t\tthis.add('-ability', target, target.getAbility().name);\r\n\t\t\t\tthis.add('-start', target, 'Flash Fire', '[silent]');\r\n\t\t\t\tthis.add('-message', `The power of ${target.name}'s Fire-type moves rose!`);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\t\tif (move.type === 'Fire' && attacker.hasAbility(['burningpetals','suppressivefire'])) {\r\n\t\t\t\t\tthis.debug('Burning Petals boost');\r\n\t\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\t\tif (move.type === 'Fire' && attacker.hasAbility(['burningpetals','suppressivefire'])) {\r\n\t\t\t\t\tthis.debug('Burning Petals boost');\r\n\t\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonEnd(target) {\r\n\t\t\t\tthis.add('-end', target, 'Flash Fire', '[silent]');\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Burning Petals\",\r\n\t\trating: 3,\r\n\t},\r\n\tsnowblind: {\r\n\t\tshortDesc: \"Snow Warning + Unseen Fist\",\r\n\t\tonStart(source) {\r\n\t\t\tthis.field.setWeather('snow');\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tif (move.flags['contact']) delete move.flags['protect'];\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Snowblind\",\r\n\t\trating: 3,\r\n\t},\r\n\tunvital: {\r\n\t\tshortDesc: \"Unaware + Vital Spirit\",\r\n\t\tonAnyModifyBoost(boosts, pokemon) {\r\n\t\t\tconst unawareUser = this.effectState.target;\r\n\t\t\tif (unawareUser === pokemon) return;\r\n\t\t\tif (unawareUser === this.activePokemon) {\r\n\t\t\t\tif (pokemon !== this.activeTarget) return;\r\n\t\t\t\tboosts['def'] = 0;\r\n\t\t\t\tboosts['spd'] = 0;\r\n\t\t\t\tboosts['evasion'] = 0;\r\n\t\t\t}\r\n\t\t\telse if (pokemon === this.activePokemon && unawareUser === this.activeTarget) {\r\n\t\t\t\tboosts['atk'] = 0;\r\n\t\t\t\tboosts['def'] = 0;\r\n\t\t\t\tboosts['spa'] = 0;\r\n\t\t\t\tboosts['accuracy'] = 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.status === 'slp') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Unvital');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif (status.id !== 'slp') return;\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Unvital');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonTryAddVolatile(status, target) {\r\n\t\t\tif (status.id === 'yawn') {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Unvital');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Unvital\",\r\n\t\trating: 3,\r\n\t},\r\n\townluck: {\r\n\t\tshortDesc: \"This Pokemon has +1 crit ratio and is immune to Intimidate and derivatives thereof.\",\r\n\t\tonModifyCritRatio(critRatio) {\r\n\t\t\treturn critRatio + 1;\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (['Intimidate','Mad Cow','Forest Fury','Shock Factor','Daunting Storm','Toxic Attitude'].includes(effect.name) && boost.atk) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Own Luck', '[of] ' + target);\r\n\t\t\t} else if (effect.name === 'Fishy Threat' && boost.spe) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Speed', '[from] ability: Own Luck', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Own Luck\",\r\n\t\trating: 3,\r\n\t},\r\n\tarmourlock: {\r\n\t\tshortDesc: \"This Pokemon can neither be critted nor have its item removed.\",\r\n\t\tonTakeItem(item, pokemon, source) {\r\n\t\t\tif (!this.activeMove) throw new Error(\"Battle.activeMove is null\");\r\n\t\t\tif (!pokemon.hp || pokemon.item === 'stickybarb') return;\r\n\t\t\tif ((source && source !== pokemon) || this.activeMove.id === 'knockoff') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Armour Lock');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonCriticalHit: false,\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Armour Lock\",\r\n\t\trating: 3,\r\n\t},\r\n\tglacialfocus: {\r\n\t\tshortDesc: \"This Pokemon can't be flinched or have its Evasion lowered.\",\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tif (boost.evasion && boost.evasion < 0) {\r\n\t\t\t\tdelete boost.evasion;\r\n\t\t\t\tif (!(effect as ActiveMove).secondaries) {\r\n\t\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"accuracy\", \"[from] ability: Glacial Focus\", \"[of] \" + target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryAddVolatile(status, pokemon) {\r\n\t\t\tif (status.id === 'flinch') return null;\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Glacial Focus\",\r\n\t\trating: 3,\r\n\t},\r\n\tslushie: {\r\n\t\tshortDesc: \"Mold Breaker + Slush Rush\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Slushie');\r\n\t\t\tthis.add('-message', `${pokemon.name} is drinking a slushie!`);\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.ignoreAbility = true;\r\n\t\t},\r\n\t\tonModifySpe(spe, pokemon) {\r\n\t\t\tif (['hail', 'snow'].includes(pokemon.effectiveWeather())) {\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Slushie\",\r\n\t\trating: 3,\r\n\t},\r\n\tsandwrath: {\r\n\t\tshortDesc: \"Sand Stream + Sheer Force\",\r\n\t\tonStart(source) {\r\n\t\t\tthis.field.setWeather('sandstorm');\r\n\t\t},\r\n\t\tonModifyMove(move, pokemon) {\r\n\t\t\tif (move.secondaries) {\r\n\t\t\t\tdelete move.secondaries;\r\n\t\t\t\t// Technically not a secondary effect, but it is negated\r\n\t\t\t\tdelete move.self;\r\n\t\t\t\tif (move.id === 'clangoroussoulblaze') delete move.selfBoost;\r\n\t\t\t\t// Actual negation of `AfterMoveSecondary` effects implemented in scripts.js\r\n\t\t\t\tmove.hasSheerForce = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(basePower, pokemon, target, move) {\r\n\t\t\tif (move.hasSheerForce) return this.chainModify([5325, 4096]);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Sand Wrath\",\r\n\t\trating: 3,\r\n\t},\r\n\tpondweed: {\r\n\t\tshortDesc: \"Grass/Water immunity, +1 Attack if hit by either\",\r\n\t\tonTryHitPriority: 1,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && ['Grass','Water'].includes(move.type)) {\r\n\t\t\t\tif (!this.boost({atk: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Pondweed');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryHitSide(target, source, move) {\r\n\t\t\tif (source === this.effectState.target || !target.isAlly(source)) return;\r\n\t\t\tif (move.type === 'Grass' || move.type === 'Water') {\r\n\t\t\t\tthis.boost({atk: 1}, this.effectState.target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Pondweed\",\r\n\t\trating: 3,\r\n\t},\r\n\twetskin: {\r\n\t\tshortDesc: \"Hydration + Torrent\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Water' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Wet Skin boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Water' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Wet Skin boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidualOrder: 5,\r\n\t\tonResidualSubOrder: 4,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif (pokemon.status && ['raindance', 'primordialsea'].includes(pokemon.effectiveWeather())) {\r\n\t\t\t\tthis.debug('wetskin');\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Wet Skin');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Wet Skin\",\r\n\t\trating: 3,\r\n\t},\r\n\tfriskexchange: {\r\n\t\tshortDesc: \"Frisk + Thermal Exchange\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tfor (const target of pokemon.side.foe.active) {\r\n\t\t\t\tif (!target || target.fainted || !target.item) continue;\r\n\t\t\t\tthis.add('-item', target, target.getItem().name, '[from] ability: Frisk Exchange', '[of] ' + pokemon, '[identify]');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (move.type === 'Fire') {\r\n\t\t\t\tthis.boost({atk: 1});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.status === 'brn') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Frisk Exchange');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif (status.id !== 'brn') return;\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Frisk Exchange');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Frisk Exchange\",\r\n\t\trating: 3,\r\n\t},\r\n\tfreeflight: {\r\n\t\tshortDesc: \"Libero + Levitate\",\r\n\t\tonPrepareHit(source, target, move) {\r\n\t\t\tif (this.effectState.libero/*) return;\r\n\t\t\tif (*/|| move.hasBounced || move.isFutureMove || move.sourceEffect === 'snatch') return;\r\n\t\t\tconst type = move.type;\r\n\t\t\tif (type && type !== '???' && source.getTypes().join() !== type && source.setType(type)) {\r\n\t\t\t\tthis.effectState.libero = true;\r\n\t\t\t\tthis.add('-start', source, 'typechange', type, '[from] ability: Free Flight');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSwitchIn() {\r\n\t\t\tdelete this.effectState.libero;\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Free Flight\",\r\n\t\trating: 3,\r\n\t},\r\n\tpillage: {\r\n\t\tname: \"Pillage\",\r\n\t\tshortDesc: \"On switch-in, swaps ability with the opponent.\",\r\n\t\tonSwitchIn(pokemon) {\r\n\t\t\tthis.effectState.switchingIn = true;\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.foes().some(\r\n\t\t\t\tfoeActive => foeActive && foeActive.isAdjacent(pokemon) && foeActive.ability === 'noability'\r\n\t\t\t) || pokemon.species.id !== 'zoinkazenta') {\r\n\t\t\t\tthis.effectState.gaveUp = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (!pokemon.isStarted || this.effectState.gaveUp || !this.effectState.switchingIn) return;\r\n\t\t\tconst possibleTargets = pokemon.foes().filter(foeActive => foeActive && !foeActive.getAbility().flags['notrace']\r\n\t\t\t\t&& !foeActive.getAbility().flags['failskillswap'] && foeActive.isAdjacent(pokemon));\r\n\t\t\tif (!possibleTargets.length) return;\r\n\t\t\tconst rand = (possibleTargets.length > 1) ? this.random(possibleTargets.length) : 0;\r\n\t\t\tconst target = possibleTargets[rand];\r\n\t\t\tconst pillageAbil = pokemon.getAbility();\r\n\t\t\tconst ability = target.getAbility();\r\n\t\t\tif (!this.runEvent('SetAbility', target, pokemon, this.effect, pillageAbil)\r\n\t\t\t\t|| !this.runEvent('SetAbility', pokemon, pokemon, this.effect, ability)) return;\r\n\t\t\tthis.add('-ability', pokemon, 'Pillage');\r\n\t\t\tthis.add('-activate', pokemon, 'move: Skill Swap', ability, pillageAbil, '[of] ' + target);\r\n\t\t\tthis.singleEvent('End', pillageAbil, pillageAbil.abilityState, pokemon);\r\n\t\t\tthis.singleEvent('End', ability, ability.abilityState, target);\r\n\t\t\tpokemon.ability = ability.id\r\n\t\t\tpokemon.abilityState = {id: this.toID(pokemon.ability), target: pokemon};\r\n\t\t\ttarget.ability = pillageAbil.id;\r\n\t\t\ttarget.abilityState = {id: this.toID(pillageAbil.id), target: target};\r\n\t\t\tthis.singleEvent('Start', ability, pokemon.abilityState, pokemon);\r\n\t\t\tthis.singleEvent('Start', pillageAbil, target.abilityState, target);\r\n\t\t\t\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noentrain: 1, notrace: 1},\r\n\t\trating: 5,\r\n\t},\r\n\tfatfingers: {\r\n\t\tshortDesc: \"Long Reach + Thick Fat\",\r\n\t\tonModifyMove(move) {\r\n\t\t\tdelete move.flags['contact'];\r\n\t\t},\r\n\t\tonSourceModifyAtkPriority: 6,\r\n\t\tonSourceModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ice' || move.type === 'Fire') {\r\n\t\t\t\tthis.debug('Fat Fingers weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifySpAPriority: 5,\r\n\t\tonSourceModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ice' || move.type === 'Fire') {\r\n\t\t\t\tthis.debug('Fat Fingers weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Fat Fingers\",\r\n\t\trating: 3,\r\n\t},\r\n\thourglass: {\r\n\t\tshortDesc: \"Mirror Armor + Sand Rush\",\r\n\t\tonModifySpe(spe, pokemon) {\r\n\t\t\tif (this.field.isWeather('sandstorm')) {\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'sandstorm') return false;\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\t// Don't bounce self stat changes, or boosts that have already bounced\r\n\t\t\tif (!source || target === source || !boost || effect.name === 'Hourglass') return;\r\n\t\t\tlet b: BoostID;\r\n\t\t\tfor (b in boost) {\r\n\t\t\t\tif (boost[b]! < 0 && target.boosts[b] > -6) {\r\n\t\t\t\t\tconst negativeBoost: SparseBoostsTable = {};\r\n\t\t\t\t\tnegativeBoost[b] = boost[b];\r\n\t\t\t\t\tdelete boost[b];\r\n\t\t\t\t\tif (source.hp) {\r\n\t\t\t\t\t\tthis.add('-ability', target, 'Hourglass');\r\n\t\t\t\t\t\tthis.boost(negativeBoost, source, target, null, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Hourglass\",\r\n\t\trating: 3,\r\n\t},\r\n\t\r\n\tpiezoelectric: {\r\n\t\tshortDesc: \"Volt Absorb + Pressure\",\r\n\t\tonDeductPP(target, source) {\r\n\t\t\tif (!target.isAlly(source)) return 1;\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Piezoelectric');\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Electric' && !move.ignoreAbility) {\r\n\t\t\t\tif (!this.heal(target.baseMaxhp / 4)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Piezoelectric');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Piezoelectric\",\r\n\t\trating: 3,\r\n\t},\r\n\tfieldday: {\r\n\t\tshortDesc: \"If Grassy Terrain is active, this Pokemon's Speed is doubled.\",\r\n\t\tonModifySpe(spe) {\r\n\t\t\tif (this.field.isTerrain('grassyterrain')) {\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Field Day\",\r\n\t\trating: 3,\r\n\t},\r\n\tforceofnature: {\r\n\t\tshortDesc: \"Grassy Surge + Sheer Force.\",\r\n\t\tonStart(source) {\r\n\t\t\tthis.field.setTerrain('grassyterrain');\r\n\t\t},\r\n\t\tonModifyMove(move, pokemon) {\r\n\t\t\tif (move.secondaries) {\r\n\t\t\t\tdelete move.secondaries;\r\n\t\t\t\t// Technically not a secondary effect, but it is negated\r\n\t\t\t\tdelete move.self;\r\n\t\t\t\tif (move.id === 'clangoroussoulblaze') delete move.selfBoost;\r\n\t\t\t\t// Actual negation of `AfterMoveSecondary` effects implemented in scripts.js\r\n\t\t\t\tmove.hasSheerForce = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(basePower, pokemon, target, move) {\r\n\t\t\tif (move.hasSheerForce) return this.chainModify([5325, 4096]);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Force of Nature\",\r\n\t},\r\n\tairbornearmor: {\r\n\t\tshortDesc: \"Prism Armor + Levitate\",\r\n\t\tonSourceModifyDamage(damage, source, target, move) {\r\n\t\t\tif (target.getMoveHitData(move).typeMod > 0) {\r\n\t\t\t\tthis.debug('Airborne Armor neutralize');\r\n\t\t\t\treturn this.chainModify(0.75);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Airborne Armor\",\r\n\t\trating: 3,\r\n\t},\r\n\tbleedingedge: {\r\n\t\tshortDesc: \"Mold Breaker + Technician\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Bleeding Edge');\r\n\t\t\tthis.add('-message', `${pokemon.name} breaks the mold!`);\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.ignoreAbility = true;\r\n\t\t},\r\n\t\tonBasePowerPriority: 30,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tconst basePowerAfterMultiplier = this.modify(basePower, this.event.modifier);\r\n\t\t\tthis.debug('Base Power: ' + basePowerAfterMultiplier);\r\n\t\t\tif (basePowerAfterMultiplier <= 60) {\r\n\t\t\t\tthis.debug('Bleeding Edge boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Bleeding Edge\",\r\n\t\trating: 3,\r\n\t},\r\n\tancientmarble: {\r\n\t\tshortDesc: \"Protosynthesis + Sharpness\",\r\n\t\tonBasePowerPriority: 19,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['slicing']) {\r\n\t\t\t\tthis.debug('Ancient Marble boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('WeatherChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonWeatherChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\t// Protosynthesis is not affected by Utility Umbrella\r\n\t\t\tif (this.field.isWeather('sunnyday')) {\r\n\t\t\t\tpokemon.addVolatile('protosynthesis');\r\n\t\t\t} else if (!pokemon.volatiles['protosynthesis']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('protosynthesis');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['protosynthesis'];\r\n\t\t\tthis.add('-end', pokemon, 'Protosynthesis', '[silent]');\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Ancient Marble\",\r\n\t\trating: 3,\r\n\t},\r\n\tspongeofruin: {\r\n\t\tshortDesc: \"Beads of Ruin + Water Absorb\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (this.suppressingAbility(pokemon)) return;\r\n\t\t\tthis.add('-ability', pokemon, 'Sponge of Ruin');\r\n\t\t\tthis.add('-message', `${pokemon.name}'s Sponge of Ruin weakened the Sp. Def of all surrounding Pok\u00E9mon!`);\r\n\t\t},\r\n\t\tonAnyModifySpD(spd, target, source, move) {\r\n\t\t\tif (target.hasAbility(['Sponge of Ruin', 'Beads of Ruin'])) return;\r\n\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\tif (!move.ruinedSpD?.hasAbility(['Sponge of Ruin', 'Beads of Ruin'])) move.ruinedSpD = abilityHolder;\r\n\t\t\telse if (move.ruinedSpD !== abilityHolder) return;\r\n\t\t\tthis.debug('Sponge of Ruin SpD drop');\r\n\t\t\treturn this.chainModify(0.75);\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Water') {\r\n\t\t\t\tif (!this.heal(target.baseMaxhp / 4)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Sponge of Ruin');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Sponge of Ruin\",\r\n\t\trating: 3,\r\n\t},\r\n\toverwhelming: {\r\n\t\tshortDesc: \"Magic Guard + Sheer Force\",\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect.effectType !== 'Move') {\r\n\t\t\t\tif (effect.effectType === 'Ability') this.add('-activate', source, 'ability: ' + effect.name);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMove(move, pokemon) {\r\n\t\t\tif (move.secondaries) {\r\n\t\t\t\tdelete move.secondaries;\r\n\t\t\t\t// Technically not a secondary effect, but it is negated\r\n\t\t\t\tdelete move.self;\r\n\t\t\t\tif (move.id === 'clangoroussoulblaze') delete move.selfBoost;\r\n\t\t\t\t// Actual negation of `AfterMoveSecondary` effects implemented in scripts.js\r\n\t\t\t\tmove.hasSheerForce = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(basePower, pokemon, target, move) {\r\n\t\t\tif (move.hasSheerForce) return this.chainModify([5325, 4096]);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Overwhelming\",\r\n\t\trating: 3,\r\n\t},\r\n\tprehistorichunter: {\r\n\t\tshortDesc: \"Protosynthesis + Gulp Missile; Activating one also activates the other\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('WeatherChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (!source.hp || !source.isActive || target.transformed || target.isSemiInvulnerable()) return;\r\n\t\t\tif (['screamcormorantgulping', 'screamcormorantgorging'].includes(target.species.id)) {\r\n\t\t\t\tthis.damage(source.baseMaxhp / 4, source, target);\r\n\t\t\t\tif (target.species.id === 'screamcormorantgulping') {\r\n\t\t\t\t\tthis.boost({def: -1}, source, target, null, true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsource.trySetStatus('par', target, move);\r\n\t\t\t\t}\r\n\t\t\t\ttarget.formeChange('screamcormorant', move);\r\n\t\t\t\tdelete target.volatiles['prehistorichunter'];\r\n\t\t\t}\r\n\t\t},\r\n\t\t// The Dive part of this mechanic is implemented in Dive's `onTryMove` in moves.ts\r\n\t\tonSourceTryPrimaryHit(target, source, effect) {\r\n\t\t\tif (\r\n\t\t\t\teffect?.id === 'surf' && source.hasAbility('prehistorichunter') &&\r\n\t\t\t\tsource.species.name === 'Scream Cormorant' && !source.transformed\r\n\t\t\t) {\r\n\t\t\t\tconst forme = source.hp <= source.maxhp / 2 ? 'screamcormorantgorging' : 'screamcormorantgulping';\r\n\t\t\t\tsource.formeChange(forme, effect);\r\n\t\t\t\tsource.addVolatile('prehistorichunter');\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tonWeatherChange(pokemon) {\r\n\t\t\t// if (pokemon.transformed) return;\r\n\t\t\tconst forme = pokemon.hp <= pokemon.maxhp / 2 ? 'screamcormorantgorging' : 'screamcormorantgulping';\r\n\t\t\t// Protosynthesis is not affected by Utility Umbrella\r\n\t\t\tif (this.field.isWeather('sunnyday')) {\r\n\t\t\t\tpokemon.addVolatile('prehistorichunter');\r\n\t\t\t\tpokemon.formeChange(forme, this.effect, false, '[msg]');\r\n\t\t\t} else if (!pokemon.volatiles['prehistorichunter']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('prehistorichunter');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['prehistorichunter'];\r\n\t\t\tthis.add('-end', pokemon, 'Protosynthesis', '[silent]');\r\n\t\t},\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tconst forme = pokemon.hp <= pokemon.maxhp / 2 ? 'screamcormorantgorging' : 'screamcormorantgulping';\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Prehistoric Hunter', '[fromitem]');\r\n\t\t\t\t\tif (pokemon.species.id === 'screamcormorant') {\r\n\t\t\t\t\t\tthis.add('-message', `${pokemon.name} used its Booster Energy to locate nearby prey!`);\r\n\t\t\t\t\t\tpokemon.formeChange(forme, this.effect, false, '[msg]');\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: Prehistoric Hunter');\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'protosynthesis' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Prehistoric Hunter atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Prehistoric Hunter def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Prehistoric Hunter spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Prehistoric Hunter spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tfor (const target of pokemon.foes()) {\r\n\t\t\t\t\tif (target.hasAbility('dyschronometria')) {\r\n\t\t\t\t\t\tthis.debug('Dyschronometria negating spe boost');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.debug('Prehistoric Hunter spe boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Protosynthesis');\r\n\t\t\t},\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, cantsuppress: 1, notransform: 1},\r\n\t\tname: \"Prehistoric Hunter\",\r\n\t\trating: 3,\r\n\t},\r\n\tlawnmowerofruin: {\r\n\t\tshortDesc: \"Sap Sipper + Vessel of Ruin\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (this.suppressingAbility(pokemon)) return;\r\n\t\t\tthis.add('-ability', pokemon, 'Lawnmower of Ruin');\r\n\t\t\tthis.add('-message', `${pokemon.name}'s Lawnmower of Ruin weakened the Sp. Atk of all surrounding Pok\u00E9mon!`);\r\n\t\t},\r\n\t\tonAnyModifySpA(spa, source, target, move) {\r\n\t\t\tif (source.hasAbility(['Lawnmower of Ruin', 'Vessel of Ruin'])) return;\r\n\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\tif (!move.ruinedSpA) move.ruinedSpA = abilityHolder;\r\n\t\t\telse if (move.ruinedSpA !== abilityHolder) return;\r\n\t\t\tthis.debug('Lawnmower of Ruin SpA drop');\r\n\t\t\treturn this.chainModify(0.75);\r\n\t\t},\r\n\t\tonTryHitPriority: 1,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Grass') {\r\n\t\t\t\tif (!this.boost({atk: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Lawnmower of Ruin');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryHitSide(target, source, move) {\r\n\t\t\tif (source === this.effectState.target || !target.isAlly(source) || move.type !== 'Grass') return;\r\n\t\t\tthis.boost({atk: 1}, this.effectState.target);\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Lawnmower of Ruin\",\r\n\t},\r\n\tbarbedchain: {\r\n\t\tshortDesc: \"This Pokemon\u2019s contact moves do an additional 1/8 of the target\u2019s max HP in damage.\",\r\n\t\tonSourceDamagingHit(damage, target, source, move) {\r\n\t\t\t// Despite not being a secondary, Shield Dust / Covert Cloak block Toxic Chain's effect\r\n\t\t\tif (target.hasAbility('shielddust') || target.hasItem('covertcloak') || !target.hp || !this.checkMoveMakesContact(move, target, source)) return; \r\n\t\t\tthis.damage(target.baseMaxhp / 8, target, source)\r\n\t\t},\r\n\t\tname: \"Barbed Chain\",\r\n\t},\r\n\tsteamyscales: {\r\n\t\tshortDesc: \"Multiscale effects. Damage from Water and Fire is halved.\",\r\n\t\tonSourceBasePowerPriority: 17,\r\n\t\tonSourceBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' || move.type === 'Water') {\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifyDamage(damage, source, target, move) {\r\n\t\t\tif (target.hp >= target.maxhp) {\r\n\t\t\t\tthis.debug('Steamy Scales weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Steamy Scales\",\r\n\t},\r\n\tmarvelsteam: {\r\n\t\tshortDesc: \"When hit by a damaging Water or Fire-type move, +6 to Def and Spe.\",\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (['Water', 'Fire'].includes(move.type)) {\r\n\t\t\t\tthis.boost({def: 6, spe: 6});\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Marvel Steam\",\r\n\t},\r\n\thellkite: {\r\n\t\tshortDesc: \"Levitate effects + 1.5x power to Dragon and Ground moves.\",\r\n\t\t//floatation under scripts.ts\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (['Dragon','Ground'].includes(move.type)) {\r\n\t\t\t\tthis.debug('Hellkite boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (['Dragon','Ground'].includes(move.type)) {\r\n\t\t\t\tthis.debug('Hellkite boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Hellkite\",\r\n\t},\r\n\tfeistytempo: {\r\n\t\tshortDesc: \"Guts + Own Tempo\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (attacker.status) {\r\n\t\t\t\t//Burn attack cut being ignored is in scripts.ts/actions\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.volatiles['confusion']) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Feisty Tempo');\r\n\t\t\t\tpokemon.removeVolatile('confusion');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryAddVolatile(status, pokemon) {\r\n\t\t\tif (status.id === 'confusion') return null;\r\n\t\t},\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (move?.volatileStatus === 'confusion') {\r\n\t\t\t\tthis.add('-immune', target, 'confusion', '[from] ability: Feisty Tempo');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (['Intimidate','Mad Cow','Forest Fury','Shock Factor','Daunting Storm','Toxic Attitude'].includes(effect.name) && boost.atk) {\r\n\t\t\t\tdelete boost.atk;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Feisty Tempo', '[of] ' + target);\r\n\t\t\t} else if (effect.name === 'Fishy Threat' && boost.spe) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Speed', '[from] ability: Feisty Tempo', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Feisty Tempo\",\r\n\t},\r\n\twellbakedflameorb: {\r\n\t\tshortDesc: \"Guts + Well-Baked Body\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (attacker.status) {\r\n\t\t\t\t//Burn attack cut being ignored is in scripts.ts/actions\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Fire') {\r\n\t\t\t\tif (!this.boost({def: 2})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Well-Baked Flame Orb');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Well-Baked Flame Orb\",\r\n\t},\r\n\tadrenalinearoma: {\r\n\t\tshortDesc: \"Guts + Aroma Veil\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (attacker.status) {\r\n\t\t\t\t//Burn attack cut being ignored is in scripts.ts/actions\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryAddVolatile(status, target, source, effect) {\r\n\t\t\tif (['attract', 'disable', 'encore', 'healblock', 'taunt', 'torment'].includes(status.id)) {\r\n\t\t\t\tif (effect.effectType === 'Move') {\r\n\t\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\t\tthis.add('-block', target, 'ability: Adrenaline Aroma', '[of] ' + effectHolder);\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Adrenaline Aroma\",\r\n\t},\r\n\tpowerbuns: {\r\n\t\tshortDesc: \"Sheer Force + Well-Baked Body\",\r\n\t\tonModifyMove(move, pokemon) {\r\n\t\t\tif (move.secondaries) {\r\n\t\t\t\tdelete move.secondaries;\r\n\t\t\t\t// Technically not a secondary effect, but it is negated\r\n\t\t\t\tdelete move.self;\r\n\t\t\t\tif (move.id === 'clangoroussoulblaze') delete move.selfBoost;\r\n\t\t\t\t// Actual negation of `AfterMoveSecondary` effects implemented in scripts.js\r\n\t\t\t\tmove.hasSheerForce = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(basePower, pokemon, target, move) {\r\n\t\t\tif (move.hasSheerForce) return this.chainModify([5325, 4096]);\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Fire') {\r\n\t\t\t\tif (!this.boost({def: 2})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Power Buns');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Power Buns\",\r\n\t},\r\n\thoneymoon: {\r\n\t\tshortDesc: \"Levitate + Honey Gather\",\r\n\t\t// airborneness implemented in scripts.ts\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Honey Moon\",\r\n\t},\r\n\taircontrol: {\r\n\t\tshortDesc: \"Levitate + Mind's Eye\",\r\n\t\t// airborneness implemented in scripts.ts\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tif (boost.accuracy && boost.accuracy < 0) {\r\n\t\t\t\tdelete boost.accuracy;\r\n\t\t\t\tif (!(effect as ActiveMove).secondaries) {\r\n\t\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"accuracy\", \"[from] ability: Air Control\", \"[of] \" + target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMovePriority: -5,\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.ignoreEvasion = true;\r\n\t\t\tif ((move.ignoreImmunity ||= {}) !== true) {\r\n\t\t\t\tmove.ignoreImmunity['Fighting'] = true;\r\n\t\t\t\tmove.ignoreImmunity['Normal'] = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Air Control\",\r\n\t},\r\n\tlivelylocks: {\r\n\t\tshortDesc: \"Copies opponent's stat changes to Speed on switch-in\",\r\n\t\tonStart(pokemon) {\r\n\t\t\t//Currently because Costar bypasses sub Lively Locks too will bypass sub \r\n\t\t\t\r\n\t\t\t//let activated = false;\r\n\t\t\tfor (const target of pokemon.adjacentFoes()) {\r\n\t\t\t\tif (!target.boosts.spe) continue;\r\n\t\t\t//\tif (!activated) {\r\n\t\t\t//\t\tthis.add('-ability', pokemon, 'Lively Locks', 'boost');\r\n\t\t\t//\t\tactivated = true;\r\n\t\t\t//\t}\r\n\t\t\t//\tif (target.volatiles['substitute']) {\r\n\t\t\t//\t\tthis.add('-immune', target);\r\n\t\t\t//\t} else {\r\n\t\t\t\t\tthis.boost({spe: target.boosts.spe}, pokemon);\r\n\t\t\t\t\treturn;\r\n\t\t\t//\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Lively Locks\",\r\n\t},\r\n\tangrybird: {\r\n\t\tshortDesc: \"Defiant + Competitive\",\r\n\t\tonAfterEachBoost(boost, target, source, effect) {\r\n\t\t\tif (!source || target.isAlly(source)) return;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tthis.boost({atk: 2, spa: 2}, target, target, null, false, true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Angry Bird\",\r\n\t},\r\n\tsharpgoggles: {\r\n\t\tshortDesc: \"Tinted Lens + Competitive\",\r\n\t\tonModifyDamage(damage, source, target, move) {\r\n\t\t\tif (target.getMoveHitData(move).typeMod < 0) {\r\n\t\t\t\tthis.debug('Tinted Lens boost');\r\n\t\t\t\treturn this.chainModify(2);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAfterEachBoost(boost, target, source, effect) {\r\n\t\t\tif (!source || target.isAlly(source)) return;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tthis.boost({spa: 2}, target, target, null, false, true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Sharp Goggles\",\r\n\t},\r\n\twinterstorm: {\r\n\t\tshortDesc: \"Under snow, heal 6.25% of own max HP and damage opponents for 12.5% of their max HP at end of turn.\",\r\n\t\tonWeather(target, source, effect) {\r\n\t\t\tif (effect.id === 'snow' || effect.id === 'hail') {\r\n\t\t\t\tthis.heal(target.baseMaxhp / 16);\r\n\t\t\t\tfor (const pokemon of target.foes()) {\r\n\t\t\t\t\tthis.damage(pokemon.baseMaxhp / 8, pokemon, target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'hail') return false;\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Winter Storm\",\r\n\t},\r\n\tfishythreat: {\r\n\t\tshortDesc: \"On switch-in, inflict -2 Speed to opponents.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tlet activated = false;\r\n\t\t\tfor (const target of pokemon.adjacentFoes()) {\r\n\t\t\t\tif (!activated) {\r\n\t\t\t\t\tthis.add('-ability', pokemon, 'Fishy Threat', 'boost');\r\n\t\t\t\t\tactivated = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.volatiles['substitute']) {\r\n\t\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.boost({spe: -2}, target, pokemon, null, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Fishy Threat\",\r\n\t\trating: 3.5,\r\n\t},\r\n\theatproofdrive: {\r\n\t\tshortDesc: \"Heatproof + Quark Drive\",\r\n\t\tonSourceModifyAtkPriority: 6,\r\n\t\tonSourceModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire') {\r\n\t\t\t\tthis.debug('Heatproof Drive Atk weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifySpAPriority: 5,\r\n\t\tonSourceModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire') {\r\n\t\t\t\tthis.debug('Heatproof Drive SpA weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect && effect.id === 'brn') {\r\n\t\t\t\treturn damage / 2;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('quarkdrive');\r\n\t\t\t} else if (!pokemon.volatiles['quarkdrive']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('quarkdrive');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['quarkdrive'];\r\n\t\t\tthis.add('-end', pokemon, 'Quark Drive', '[silent]');\r\n\t\t},\r\n\t\tflags: {breakable: 1, failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Heatproof Drive\",\r\n\t\trating: 4,\r\n\t},\r\n\t/*armorfist: {\r\n\t\tshortDesc: \"x1.2 power to punch and priority moves (stacking); Own side is protected from the sort\",\r\n\t\tonFoeTryMove(target, source, move) {\r\n\t\t\tconst targetAllExceptions = ['perishsong', 'flowershield', 'rototiller'];\r\n\t\t\tif (move.target === 'foeSide' || (move.target === 'all' && !targetAllExceptions.includes(move.id))) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst armorTailHolder = this.effectState.target;\r\n\t\t\tif ((source.isAlly(armorTailHolder) || move.target === 'all') && (move.priority > 0.1 || move.flags['punch'])) {\r\n\t\t\t\tthis.attrLastMove('[still]');\r\n\t\t\t\tthis.add('cant', armorTailHolder, 'ability: Armor Fist', move, '[of] ' + target);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 23,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['punch'] || move.priority > 0.1) {\r\n\t\t\t\tthis.debug('Armor Fist boost');\r\n\t\t\t\treturn this.chainModify([(move.priority > 0.1 && move.flags['punch']) ? 5898 : 4915, 4096]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Armor Fist\",\r\n\t},\r\n\tmercurypulse: {\r\n\t\tshortDesc: \"On switch-in, summons Rain Dance. During Rain Dance, Attack is 1.3333x.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (this.field.setWeather('raindance')) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'Mercury Pulse', '[source]');\r\n\t\t\t} else if (this.field.isWeather('raindance')) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Mercury Pulse');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\tif (['raindance', 'primordialsea'].includes(pokemon.effectiveWeather())) {\r\n\t\t\t\tthis.debug('Mercury boost');\r\n\t\t\t\treturn this.chainModify([5461, 4096]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Mercury Pulse\",\r\n\t\trating: 4.5,\r\n\t},*/\r\n\tfiredup: {\r\n\t\tshortDesc: \"Side protected from Fire and Priority moves; x1.5 power on priority.\",\r\n\t\tonFoeTryMove(target, source, move) {\r\n\t\t\tconst targetAllExceptions = ['perishsong', 'flowershield', 'rototiller'];\r\n\t\t\tif (move.target === 'foeSide' || (move.target === 'all' && !targetAllExceptions.includes(move.id))) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst armorTailHolder = this.effectState.target;\r\n\t\t\tif ((source.isAlly(armorTailHolder) || move.target === 'all') && (move.priority > 0.1 || move.type === 'Fire')) {\r\n\t\t\t\tthis.attrLastMove('[still]');\r\n\t\t\t\tthis.add('cant', armorTailHolder, 'ability: Fired Up', move, '[of] ' + target);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.priority > 0.1) {\r\n\t\t\t\tthis.debug('Fired Up boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.priority > 0.1) {\r\n\t\t\t\tthis.debug('Fired Up boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Fired Up\",\r\n\t},\r\n\tfiredrinker: {\r\n\t\tshortDesc: \"Sap Sipper + Blaze. Sap Sipper also activates against Fire-type moves.\",\r\n\t\tonTryHitPriority: 1,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && ['Fire','Grass'].includes(move.type)) {\r\n\t\t\t\tif (!this.boost({atk: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Fire Drinker');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryHitSide(target, source, move) {\r\n\t\t\tif (source === this.effectState.target || !target.isAlly(source)) return;\r\n\t\t\tif (['Fire','Grass'].includes(move.type)) {\r\n\t\t\t\tthis.boost({atk: 1}, this.effectState.target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Fire Drinker boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Fire Drinker boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Fire Drinker\",\r\n\t},\r\n\tminddomain: {\r\n\t\tshortDesc: \"When stats are lowered, +2 SpA and sets up Psychic Terrain.\",\r\n\t\tonAfterEachBoost(boost, target, source, effect) {\r\n\t\t\tif (!source || target.isAlly(source)) return;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tthis.boost({spa: 2}, target, target, null, false, true);\r\n\t\t\t\t\tthis.field.setTerrain('psychicterrain');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Mind Domain\",\r\n\t\trating: 4,\r\n\t},\r\n\tforcedfencer: {\r\n\t\tshortDesc: \"Pressure + Stance Change\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Forced Fencer');\r\n\t\t},\r\n\t\tonDeductPP(target, source) {\r\n\t\t\tif (target.isAlly(source)) return;\r\n\t\t\treturn 1;\r\n\t\t},\r\n\t\tonModifyMovePriority: 1,\r\n\t\tonModifyMove(move, attacker, defender) {\r\n\t\t\tif (attacker.species.baseSpecies !== 'Deoxyslash-Speed' || attacker.transformed) return;\r\n\t\t\tlet targetForme;\r\n\t\t\tif (move.id === 'kingsshield') {\r\n\t\t\t\ttargetForme = 'Deoxyslash-Speed';\r\n\t\t\t} else if (move.category !== 'Status') {\r\n\t\t\t\ttargetForme = 'Deoxyslash-Speed-Blade';\r\n\t\t\t} else {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\r\n\t\t\tif (attacker.species.name !== targetForme) attacker.formeChange(targetForme);\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, cantsuppress: 1},\r\n\t\tname: \"Forced Fencer\",\r\n\t\trating: 4,\r\n\t},\r\n\t//Introduced with FEUU\r\n\tstormclinic: {\r\n\t\tshortDesc: \"Regenerator + Wind Rider\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.side.sideConditions['tailwind']) {\r\n\t\t\t\tthis.boost({atk: 1}, pokemon, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.flags['wind']) {\r\n\t\t\t\tif (!this.boost({atk: 1}, target, target)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Wind Rider');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllySideConditionStart(target, source, sideCondition) {\r\n\t\t\tconst pokemon = this.effectState.target;\r\n\t\t\tif (sideCondition.id === 'tailwind') {\r\n\t\t\t\tthis.boost({atk: 1}, pokemon, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tpokemon.heal(pokemon.baseMaxhp / 3);\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Storm Clinic\",\r\n\t},\r\n\tultraface: {\r\n\t\tshortDesc: \"Eisephalon: Change to No Face form on KO and gain +1 to highest stat; Reverts in Snow\",\r\n\t\tonSourceAfterFaint(length, target, source, effect) {\r\n\t\t\tif (effect && effect.effectType === 'Move' && source.species.id === 'eisephalon') {\r\n\t\t\t\tthis.boost({[this.effectState.bestStat ||= source.getBestStat(true, true)]: length}, source);\r\n\t\t\t\tsource.formeChange('Eisephalon-No-Face', this.effect, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonWeatherChange(pokemon, source, sourceEffect) {\r\n\t\t\t// snow/hail resuming because Cloud Nine/Air Lock ended does not trigger Ice Face\r\n\t\t\tif ((sourceEffect as Ability)?.suppressWeather || !pokemon.hp) return;\r\n\t\t\tif (this.field.isWeather(['hail', 'snow']) && pokemon.species.id === 'eisephalonnoface') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Ultra Face');\r\n\t\t\t\tpokemon.formeChange('Eisephalon', this.effect, true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {\r\n\t\t\tfailroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, cantsuppress: 1,\r\n\t\t\tnotransform: 1,\r\n\t\t},\r\n\t\tname: \"Ultra Face\",\r\n\t\trating: 3.5,\r\n\t\tnum: 224,\r\n\t},\r\n\temperorsclothes: {\r\n\t\tshortDesc: \"Deal 10% bonus damage for each hit taken (up to 50%)\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (!pokemon.hp) return;\r\n\t\t\tlet attacked = pokemon.timesAttacked;\r\n\t\t\tif (attacked > 0) {\r\n\t\t\t\tthis.effectState.fallen = attacked > 5 ? 5 : attacked;\r\n\t\t\t\tthis.add('-start', pokemon, `fallen${this.effectState.fallen}`, '[silent]');\r\n\t\t\t} else {\r\n\t\t\t\tthis.effectState.fallen = 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (!target.hp || this.effectState.fallen >= 5) return;\r\n\t\t\tif (!move.isMax && !move.flags['futuremove'] && move.id !== 'struggle') {\r\n\t\t\t\tif (this.effectState.fallen) {\r\n\t\t\t\t\tthis.add('-end', target, `fallen${this.effectState.fallen}`, '[silent]');\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.fallen++;\r\n\t\t\t\tthis.add('-activate', target, 'ability: Emperor\\'s Clothes');\r\n\t\t\t\tthis.add('-start', target, `fallen${this.effectState.fallen}`, '[silent]');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 21,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (this.effectState.fallen) {\r\n\t\t\t\tconst powMod = [4096, 4506, 4915, 5325, 5734, 6144];\r\n\t\t\t\tthis.debug(`Supreme Overlord boost: ${powMod[this.effectState.fallen]}/4096`);\r\n\t\t\t\treturn this.chainModify([powMod[this.effectState.fallen], 4096]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Emperor's Clothes\",\r\n\t},\r\n\t/*innermood: {\r\n\t\tshortDesc: \"Inner Focus + Moody\",\r\n\t\tonTryAddVolatile(status, pokemon) {\r\n\t\t\tif (status.id === 'flinch') return null;\r\n\t\t},\r\n\t\tonResidualOrder: 28,\r\n\t\tonResidualSubOrder: 2,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tlet stats: BoostID[] = [];\r\n\t\t\tconst boost: SparseBoostsTable = {};\r\n\t\t\tlet statPlus: BoostID;\r\n\t\t\tfor (statPlus in pokemon.boosts) {\r\n\t\t\t\tif (statPlus === 'accuracy' || statPlus === 'evasion') continue;\r\n\t\t\t\tif (pokemon.boosts[statPlus] < 6) {\r\n\t\t\t\t\tstats.push(statPlus);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet randomStat: BoostID | undefined = stats.length ? this.sample(stats) : undefined;\r\n\t\t\tif (randomStat) boost[randomStat] = 2;\r\n\r\n\t\t\tstats = [];\r\n\t\t\tlet statMinus: BoostID;\r\n\t\t\tfor (statMinus in pokemon.boosts) {\r\n\t\t\t\tif (statMinus === 'accuracy' || statMinus === 'evasion') continue;\r\n\t\t\t\tif (pokemon.boosts[statMinus] > -6 && statMinus !== randomStat) {\r\n\t\t\t\t\tstats.push(statMinus);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trandomStat = stats.length ? this.sample(stats) : undefined;\r\n\t\t\tif (randomStat) boost[randomStat] = -1;\r\n\r\n\t\t\tthis.boost(boost, pokemon, pokemon);\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (['Intimidate','Mad Cow','Forest Fury','Shock Factor','Daunting Storm','Toxic Attitude'].includes(effect.name)) {\r\n\t\t\t\tif (boost.atk) {\r\n\t\t\t\t\tdelete boost.atk;\r\n\t\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Inner Mood', '[of] ' + target);\r\n\t\t\t\t}\r\n\t\t\t} else if (effect.name === 'Fishy Threat' && boost.spe) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Speed', '[from] ability: Inner Mood', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Inner Mood\",\r\n\t},*/\r\n\terratic: {\r\n\t\tshortDesc: \"+2 to a random stat (not Acc./Eva.) when any stat is lowered by a foe.\",\r\n\t\tonAfterEachBoost(boost, target, source, effect) {\r\n\t\t\tif (!source || target.isAlly(source)) return;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tlet stats: BoostID[] = [];\r\n\t\t\t\t\tlet statPlus: BoostID;\r\n\t\t\t\t\tfor (statPlus in target.boosts) {\r\n\t\t\t\t\t\tif (!['accuracy','evasion'].includes(statPlus) && target.boosts[statPlus] < 6) {\r\n\t\t\t\t\t\t\tstats.push(statPlus);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//Don't boost if it's +6 across the board and the mon suffered a drop to Evasion or Accuracy\r\n\t\t\t\t\tif (stats.length) this.boost({[this.sample(stats)]: 2}, target, target, null, false, true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Erratic\",\r\n\t},\r\n\tnononsense: {\r\n\t\tshortDesc: \"Battle Armor + Clear Body\",\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tlet showMsg = false;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tdelete boost[i];\r\n\t\t\t\t\tshowMsg = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (showMsg && !(effect as ActiveMove).secondaries && effect.id !== 'octolock') {\r\n\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"[from] ability: No Nonsense\", \"[of] \" + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonCriticalHit: false,\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"No Nonsense\",\r\n\t},\r\n\t/*magneticstorm: {\r\n\t\tshortDesc: \"Magnet Pull + Storm Drain\",\r\n\t\tonFoeTrapPokemon(pokemon) {\r\n\t\t\tif (pokemon.hasType('Steel') && pokemon.isAdjacent(this.effectState.target)) {\r\n\t\t\t\tpokemon.tryTrap(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFoeMaybeTrapPokemon(pokemon, source) {\r\n\t\t\tif (!(source ||= this.effectState.target) || !pokemon.isAdjacent(source)) return;\r\n\t\t\tif (!pokemon.knownType || pokemon.hasType('Steel')) {\r\n\t\t\t\tpokemon.maybeTrapped = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Water') {\r\n\t\t\t\tif (!this.boost({spa: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Magnetic Storm');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnyRedirectTarget(target, source, source2, move) {\r\n\t\t\tif (move.type !== 'Water' || move.flags['pledgecombo']) return;\r\n\t\t\tconst redirectTarget = ['randomNormal', 'adjacentFoe'].includes(move.target) ? 'normal' : move.target;\r\n\t\t\tif (this.validTarget(this.effectState.target, source, redirectTarget)) {\r\n\t\t\t\tif (move.smartTarget) move.smartTarget = false;\r\n\t\t\t\tif (this.effectState.target !== target) {\r\n\t\t\t\t\tthis.add('-activate', this.effectState.target, 'ability: Magnetic Storm');\r\n\t\t\t\t}\r\n\t\t\t\treturn this.effectState.target;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Magnetic Storm\",\r\n\t},*/\r\n\tsushistorm: {\r\n\t\tshortDesc: \"Sturdy + Storm Drain\",\r\n\t\tonTryHit(pokemon, target, move) {\r\n\t\t\tif (target !== source && move.type === 'Water') {\r\n\t\t\t\tif (!this.boost({spa: 1})) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Sushi Storm');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\tif (move.ohko) {\r\n\t\t\t\tthis.add('-immune', pokemon, '[from] ability: Sushi Storm');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagePriority: -30,\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (target.hp === target.maxhp && damage >= target.hp && effect && effect.effectType === 'Move') {\r\n\t\t\t\tthis.add('-ability', target, 'Sushi Storm');\r\n\t\t\t\treturn target.hp - 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnyRedirectTarget(target, source, source2, move) {\r\n\t\t\tif (move.type !== 'Water' || move.flags['pledgecombo']) return;\r\n\t\t\tconst redirectTarget = ['randomNormal', 'adjacentFoe'].includes(move.target) ? 'normal' : move.target;\r\n\t\t\tif (this.validTarget(this.effectState.target, source, redirectTarget)) {\r\n\t\t\t\tif (move.smartTarget) move.smartTarget = false;\r\n\t\t\t\tif (this.effectState.target !== target) {\r\n\t\t\t\t\tthis.add('-activate', this.effectState.target, 'ability: Sushi Storm');\r\n\t\t\t\t}\r\n\t\t\t\treturn this.effectState.target;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Sushi Storm\",\r\n\t},\r\n\tcommandingpull: {\r\n\t\tshortDesc: \"Opposing Steels and boosted are trapped\",\r\n\t\tonFoeTrapPokemon(pokemon) {\r\n\t\t\tif ((pokemon.positiveBoosts() || pokemon.hasType('Steel')) && pokemon.isAdjacent(this.effectState.target)) {\r\n\t\t\t\tpokemon.tryTrap(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFoeMaybeTrapPokemon(pokemon, source) {\r\n\t\t\tif (!(source ||= this.effectState.target) || !pokemon.isAdjacent(source)) return;\r\n\t\t\tif (!pokemon.knownType || pokemon.positiveBoosts() ||  pokemon.hasType('Steel')) {\r\n\t\t\t\tpokemon.maybeTrapped = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Commanding Pull\",\r\n\t},\r\n\t/*ultraimpulse: {\r\n\t\tshortDesc: \"x1.5 to highest stat when burned; +1 upon landing a KO\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.effectState.bestStat = pokemon.getBestStat(true, true);\r\n\t\t},\r\n\t\tonBasePowerPriority: 19,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tconst bestStat = this.effectState.bestStat;\r\n\t\t\tif (['atk','spa'].includes(bestStat) && attacker.status === 'brn'\r\n\t\t\t\t&& move.category === (bestStat === 'spa' ? 'Special' : 'Physical')) {\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyDefPriority: 6,\r\n\t\tonModifyDef(def, pokemon) {\r\n\t\t\tif (this.effectState.bestStat === 'def' && pokemon.status === 'brn') {\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpDPriority: 6,\r\n\t\tonModifySpD(spd, pokemon) {\r\n\t\t\tif (this.effectState.bestStat === 'spd' && pokemon.status === 'brn') {\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpe(spe, pokemon) {\r\n\t\t\tif (this.effectState.bestStat === 'spe' && pokemon.status === 'brn') {\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceAfterFaint(length, target, source, effect) {\r\n\t\t\tif (effect && effect.effectType === 'Move') {\r\n\t\t\t\tthis.boost({[this.effectState.bestStat]: length}, source);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Ultra Impulse\",\r\n\t},*/\r\n\tultrashackles: {\r\n\t\tshortDesc: \"Unburden effects. +1 Speed when landing a KO.\",\r\n\t\tonAfterUseItem(item, pokemon) {\r\n\t\t\tif (pokemon === this.effectState.target) pokemon.addVolatile('unburden');\r\n\t\t},\r\n\t\tonTakeItem(item, pokemon) {\r\n\t\t\tpokemon.addVolatile('unburden');\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tpokemon.removeVolatile('unburden');\r\n\t\t},\r\n\t\tonSourceAfterFaint(length, target, source, effect) {\r\n\t\t\tif (effect && effect.effectType === 'Move') {\r\n\t\t\t\tthis.boost({spe: length}, source);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Ultra Shackles\",\r\n\t},\r\n\tdauntingstorm: {\r\n\t\tshortDesc: \"Water Absorb + Intimidate\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tlet activated = false;\r\n\t\t\tfor (const target of pokemon.adjacentFoes()) {\r\n\t\t\t\tif (!activated) {\r\n\t\t\t\t\tthis.add('-ability', pokemon, 'Daunting Storm', 'boost');\r\n\t\t\t\t\tactivated = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.volatiles['substitute']) {\r\n\t\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.boost({atk: -1}, target, pokemon, null, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Water') {\r\n\t\t\t\tif (!this.heal(target.baseMaxhp / 4)) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Daunting Storm');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Daunting Storm\",\r\n\t},\r\n\tmagnetize: {\r\n\t\tshortDesc: \"Galvanize + Levitate + x1.2 power to Ground.\",\r\n\t\t//levitate's airborneness in scripts.ts/pokemon#IsGrounded()\r\n\t\tonModifyTypePriority: -1,\r\n\t\tonModifyType(move, pokemon) {\r\n\t\t\tconst noModifyType = [\r\n\t\t\t\t'judgment', 'multiattack', 'naturalgift', 'revelationdance', 'technoblast', 'terrainpulse', 'weatherball',\r\n\t\t\t];\r\n\t\t\tif (move.type === 'Normal' && !(noModifyType.includes(move.id) || (move.isZ && move.category !== 'Status') || (move.name === 'Tera Blast' && pokemon.terastallized))) {\r\n\t\t\t\tmove.type = 'Electric';\r\n\t\t\t\tmove.typeChangerBoosted = this.effect;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 23,\r\n\t\tonBasePower(basePower, pokemon, target, move) {\r\n\t\t\tif (move.typeChangerBoosted === this.effect || move.type === 'Ground') return this.chainModify([4915, 4096]);\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Magnetize\",\r\n\t},\r\n\tmagneticforce: {\r\n\t\tshortDesc: \"Galvanize effects + Traps Electric-types.\",\r\n\t\t//levitate's airborneness in scripts.ts/pokemon#IsGrounded()\r\n\t\tonFoeTrapPokemon(pokemon) {\r\n\t\t\tif (pokemon.hasType('Electric') && pokemon.isAdjacent(this.effectState.target)) {\r\n\t\t\t\tpokemon.tryTrap(true);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFoeMaybeTrapPokemon(pokemon, source) {\r\n\t\t\tif (!(source ||= this.effectState.target) || !pokemon.isAdjacent(source)) return;\r\n\t\t\tif (!pokemon.knownType || pokemon.hasType('Electric')) {\r\n\t\t\t\tpokemon.maybeTrapped = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyTypePriority: -1,\r\n\t\tonModifyType(move, pokemon) {\r\n\t\t\tconst noModifyType = [\r\n\t\t\t\t'judgment', 'multiattack', 'naturalgift', 'revelationdance', 'technoblast', 'terrainpulse', 'weatherball',\r\n\t\t\t];\r\n\t\t\tif (move.type === 'Normal' && !(noModifyType.includes(move.id) || (move.isZ && move.category !== 'Status') || (move.name === 'Tera Blast' && pokemon.terastallized))) {\r\n\t\t\t\tmove.type = 'Electric';\r\n\t\t\t\tmove.typeChangerBoosted = this.effect;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonBasePowerPriority: 23,\r\n\t\tonBasePower(basePower, pokemon, target, move) {\r\n\t\t\tif (move.typeChangerBoosted === this.effect) return this.chainModify([4915, 4096]);\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Magnetic Force\",\r\n\t},\r\n\thydrotechnic: {\r\n\t\tshortDesc: \"Moves with <=60BP have x1.5 power and restore 6.25% of Max HP after use.\",\r\n\t\tonBasePowerPriority: 30,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tconst basePowerAfterMultiplier = this.modify(basePower, this.event.modifier);\r\n\t\t\tthis.debug('Base Power: ' + basePowerAfterMultiplier);\r\n\t\t\tif (basePowerAfterMultiplier <= 60) {\r\n\t\t\t\tthis.debug('Technician boost');\r\n\t\t\t\t///uhhh let's hope this typeChangerBoosted hack works\r\n\t\t\t\tmove.typeChangerBoosted = this.effect;\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceDamagingHit(damage, target, source, move) {\r\n\t\t\tif (source && move.typeChangerBoosted === this.effect)\r\n\t\t\t\tthis.heal(source.baseMaxhp / 16, source, source);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Hydrotechnic\",\r\n\t},\r\n\tshearstrength: {\r\n\t\tshortDesc: \"Takes x0.75 damage from SE moves and moves with secondaries.\",\r\n\t\tonSourceModifyDamage(damage, source, target, move) {\r\n\t\t\tif (move.secondaries || target.getMoveHitData(move).typeMod > 0) {\r\n\t\t\t\tthis.debug('Shear Strength neutralize');\r\n\t\t\t\treturn this.chainModify(0.75);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Shear Strength\",\r\n\t},\r\n\tsuppressivefire: {\r\n\t\tshortDesc: \"Filter + Flash Fire\",\r\n\t\tonSourceModifyDamage(damage, source, target, move) {\r\n\t\t\tif (target.getMoveHitData(move).typeMod > 0) {\r\n\t\t\t\tthis.debug('Filter neutralize');\r\n\t\t\t\treturn this.chainModify(0.75);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && move.type === 'Fire') {\r\n\t\t\t\tmove.accuracy = true;\r\n\t\t\t\tif (!target.addVolatile('burningpetals')) {\r\n\t\t\t\t\tthis.add('-immune', target, '[from] ability: Suppressive Fire');\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tpokemon.removeVolatile('burningpetals');\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Suppressive Fire\",\r\n\t},\r\n\tinnovate: {\r\n\t\tshortDesc: \"Scrappy + Quark Drive.\",\r\n\t\tonModifyMovePriority: -5,\r\n\t\tonModifyMove(move) {\r\n\t\t\tif ((move.ignoreImmunity ||= {}) !== true) {\r\n\t\t\t\tmove.ignoreImmunity['Fighting'] = true;\r\n\t\t\t\tmove.ignoreImmunity['Normal'] = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (['Intimidate','Mad Cow','Forest Fury','Shock Factor','Daunting Storm','Toxic Attitude'].includes(effect.name)) {\r\n\t\t\t\tif (boost.atk) {\r\n\t\t\t\t\tdelete boost.atk;\r\n\t\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Innovate', '[of] ' + target);\r\n\t\t\t\t}\r\n\t\t\t} else if (effect.name === 'Fishy Threat' && boost.spe) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Speed', '[from] ability: Innovate', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.singleEvent('TerrainChange', this.effect, this.effectState, pokemon);\r\n\t\t},\r\n\t\tonTerrainChange(pokemon) {\r\n\t\t\tif (pokemon.transformed) return;\r\n\t\t\tif (this.field.isTerrain('electricterrain')) {\r\n\t\t\t\tpokemon.addVolatile('quarkdrive');\r\n\t\t\t} else if (!pokemon.volatiles['quarkdrive']?.fromBooster) {\r\n\t\t\t\tpokemon.removeVolatile('quarkdrive');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tdelete pokemon.volatiles['quarkdrive'];\r\n\t\t\tthis.add('-end', pokemon, 'Quark Drive', '[silent]');\r\n\t\t},\r\n\t\tflags: {breakable: 1, failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1, notransform: 1},\r\n\t\tname: \"Innovate\",\r\n\t\trating: 4,\r\n\t},\r\n\t/*numbskull: {\r\n\t\tshortDesc: \"Unaware + Rock Head\",\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect.id === 'recoil') {\r\n\t\t\t\tif (!this.activeMove) throw new Error(\"Battle.activeMove is null\");\r\n\t\t\t\tif (this.activeMove.id !== 'struggle') return null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAnyModifyBoost(boosts, pokemon) {\r\n\t\t\tconst unawareUser = this.effectState.target;\r\n\t\t\tif (unawareUser === pokemon) return;\r\n\t\t\tif (unawareUser === this.activePokemon) {\r\n\t\t\t\tif (pokemon !== this.activeTarget) return;\r\n\t\t\t\tboosts['def'] = 0;\r\n\t\t\t\tboosts['spd'] = 0;\r\n\t\t\t\tboosts['evasion'] = 0;\r\n\t\t\t}\r\n\t\t\telse if (pokemon === this.activePokemon && unawareUser === this.activeTarget) {\r\n\t\t\t\tboosts['atk'] = 0;\r\n\t\t\t\tboosts['def'] = 0;\r\n\t\t\t\tboosts['spa'] = 0;\r\n\t\t\t\tboosts['accuracy'] = 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Numbskull\",\r\n\t\trating: 3,\r\n\t},*/\r\n\t\r\n\tprehistoricpresence: {\r\n\t\tshortDesc: \"Unaware + Pressure\",\r\n\t\tonDeductPP(target, source) {\r\n\t\t\tif (!target.isAlly(source)) return 1;\r\n\t\t},\r\n\t\t//Mold Breaker doesn't hit through Pressure but it hits through Unaware\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Prehistoric Presence');\r\n\t\t\tpokemon.addVolatile('ability:unaware');\r\n\t\t},\r\n\t\tonSourcePrepareHit(source, target, move) {\r\n\t\t\tif (target.volatiles['ability:unaware']) {\r\n\t\t\t\tif (move.ignoreAbility) target.removeVolatile('ability:unaware');\r\n\t\t\t} else if (!move.ignoreAbility) target.addVolatile('ability:unaware');\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tpokemon.removeVolatile('ability:unaware');\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Prehistoric Presence\",\r\n\t\trating: 3,\r\n\t},\r\n\thotheaded: {\r\n\t\tshortDesc: \"Recoil immunity; x1.5 power to Recoil, Fire when below 1/3 HP\",\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (effect.id === 'recoil') {\r\n\t\t\t\tif (!this.activeMove) throw new Error(\"Battle.activeMove is null\");\r\n\t\t\t\tif (this.activeMove.id !== 'struggle') return null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (attacker.hp <= attacker.maxhp / 3 && (move.type === 'Fire' || move.recoil)) {\r\n\t\t\t\tthis.debug('Hotheaded boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (attacker.hp <= attacker.maxhp / 3 && (move.type === 'Fire' || move.recoil)) {\r\n\t\t\t\tthis.debug('Hotheaded boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Hotheaded\",\r\n\t\trating: 3,\r\n\t},\r\n\t/*appleofruin: {\r\n\t\tshortDesc: \"Pokemon without this ability have their evasion multiplied by 0.75x.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (this.suppressingAbility(pokemon)) return;\r\n\t\t\tthis.add('-ability', pokemon, 'Apple of Ruin');\r\n\t\t\tthis.add('-message', `${pokemon.name}'s Apple of Ruin weakened the Evasion of all surrounding Pok\u00E9mon!`);\r\n\t\t},\r\n\t\tonAnyModifyAccuracyPriority: -1,\r\n\t\tonAnyModifyAccuracy(accuracy, target, source, move) {\r\n\t\t\tif (target.hasAbility('Apple of Ruin')) return;\r\n\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\tif (!move.ruinedEva) move.ruinedEva = abilityHolder;\r\n\t\t\telse if (move.ruinedEva !== abilityHolder) return;\r\n\t\t\tthis.debug('Apple of Ruin Evasion drop');\r\n\t\t\treturn this.chainModify([5448, 4096]);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Apple of Ruin\",\r\n\t\trating: 4,\r\n\t},*/\r\n\tswordofrejuvenation: {\r\n\t\tshortDesc: \"Sword of Ruin + Regenerator.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (this.suppressingAbility(pokemon)) return;\r\n\t\t\tthis.add('-ability', pokemon, 'Sword of Rejuvenation');\r\n\t\t\tthis.add('-message', `${pokemon.name}'s Apple of Ruin weakened the Defense of all surrounding Pok\u00E9mon!`);\r\n\t\t},\r\n\t\tonAnyModifyDef(def, target, source, move) {\r\n\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\tif (target.hasAbility(['Sword of Ruin','Sword of Rejuvenation'])) return;\r\n\t\t\tif (!move.ruinedDef?.hasAbility(['Sword of Ruin','Sword of Rejuvenation'])) move.ruinedDef = abilityHolder;\r\n\t\t\tif (move.ruinedDef !== abilityHolder) return;\r\n\t\t\tthis.debug('Sword of Ruin Def drop');\r\n\t\t\treturn this.chainModify(0.75);\r\n\t\t},\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tpokemon.heal(pokemon.baseMaxhp / 3);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Sword of Rejuvenation\",\r\n\t},\r\n\tbestboost: {\r\n\t\tshortDesc: \"This Pokemon's highest stat can't be lowered.\", //and raises 1 stage after KOing a foe.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.effectState.bestStat = pokemon.getBestStat(true, true);\r\n\t\t},\r\n\t\t/*onSourceAfterFaint(length, target, source, effect) {\r\n\t\t\tif (effect && effect.effectType === 'Move') {\r\n\t\t\t\tthis.boost({[this.effectState.bestStat]: length}, source);\r\n\t\t\t}\r\n\t\t},*/\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tconst bestStat = (this.effectState.bestStat ||= target.getBestStat(true, true));\r\n\t\t\tif (boost[bestStat] && boost[bestStat]! < 0) {\r\n\t\t\t\tdelete boost[bestStat];\r\n\t\t\t\tif (!(effect as ActiveMove).secondaries) {\r\n\t\t\t\t\tthis.add(\"-fail\", target, \"unboost\", bestStat, \"[from] ability: Best Boost\", \"[of] \" + target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Best Boost\",\r\n\t\trating: 3.5,\r\n\t},\r\n\trogue: {\r\n\t\tshortDesc: \"Competitive + Overcoat\",\r\n\t\tonAfterEachBoost(boost, target, source, effect) {\r\n\t\t\tif (!source || target.isAlly(source)) return;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tthis.boost({spa: 2}, target, target, null, false, true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (['sandstorm',/*'hail',*/'powder'].includes(type)) return false;\r\n\t\t},\r\n\t\tonTryHitPriority: 1,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (move.flags['powder'] && target !== source && this.dex.getImmunity('powder', target)) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Rogue');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Rogue\",\r\n\t},\r\n\tunidentifiedflyingobject: {\r\n\t\t//airborneness in scripts.ts#pokemon\r\n\t\tshortDesc: \"Levitate effects. If this Pokemon would be hit by a Ground move, the attacker becomes confused.\",\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\t//target should be airborne\r\n\t\t\tif (target !== source && move.type === 'Ground' && !source.volatiles['confusion'] && !(\r\n\t\t\t\tmove.ignoreImmunity && (move.ignoreImmunity === true || move.ignoreImmunity['Ground'])\r\n\t\t\t) && target.isGrounded() === null) {\r\n\t\t\t\tsource.addVolatile('confusion', target);\r\n\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Unidentified Flying Object\",\r\n\t},\r\n\t/*roughimage: {\r\n\t\tshortDesc: \"Illusion effects. When the illusion is broken, deals 1/8 max HP to the attacker.\",\r\n\t\tonBeforeSwitchIn(pokemon) {\r\n\t\t\tpokemon.illusion = null;\r\n\t\t\t// yes, you can Illusion an active pokemon but only if it's to your right\r\n\t\t\tfor (let i = pokemon.side.pokemon.length - 1; i > pokemon.position; i--) {\r\n\t\t\t\tconst possibleTarget = pokemon.side.pokemon[i];\r\n\t\t\t\tif (!possibleTarget.fainted) {\r\n\t\t\t\t\t// If Ogerpon is in the last slot while the Illusion Pokemon is Terastallized\r\n\t\t\t\t\t// Illusion will not disguise as anything\r\n\t\t\t\t\tif (!pokemon.terastallized || possibleTarget.species.baseSpecies !== 'Hattepon') {\r\n\t\t\t\t\t\tpokemon.illusion = possibleTarget;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (target.illusion) {\r\n\t\t\t\tthis.singleEvent('End', this.dex.abilities.get('Rough Image'), target.abilityState, target, source, move);\r\n\t\t\t\tthis.damage(source.baseMaxhp / 8, source, target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tif (pokemon.illusion) {\r\n\t\t\t\tthis.debug('illusion cleared');\r\n\t\t\t\tpokemon.illusion = null;\r\n\t\t\t\tconst details = pokemon.species.name + (pokemon.level === 100 ? '' : ', L' + pokemon.level) +\r\n\t\t\t\t\t(pokemon.gender && (', ' + pokemon.gender)) + (pokemon.set.shiny ? ', shiny' : '');\r\n\t\t\t\tthis.add('replace', pokemon, details);\r\n\t\t\t\tthis.add('-message', `${pokemon.name}'s illusion wore off!`);\r\n\t\t\t\tif (this.ruleTable.has('illusionlevelmod')) {\r\n\t\t\t\t\tthis.hint(\"Illusion Level Mod is active, so this Pok\\u00e9mon's true level was hidden.\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFaint(pokemon) {\r\n\t\t\tpokemon.illusion = null;\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1},\r\n\t\tname: \"Rough Image\",\r\n\t},*/\r\n\t\r\n\tafterimage: {\r\n\t\tshortDesc: \"Illusion effects. When the illusion is broken, +1 Speed.\",\r\n\t\tonBeforeSwitchIn(pokemon) {\r\n\t\t\tpokemon.illusion = null;\r\n\t\t\t// yes, you can Illusion an active pokemon but only if it's to your right\r\n\t\t\tfor (let i = pokemon.side.pokemon.length - 1; i > pokemon.position; i--) {\r\n\t\t\t\tconst possibleTarget = pokemon.side.pokemon[i];\r\n\t\t\t\tif (!possibleTarget.fainted) {\r\n\t\t\t\t\t// If Ogerpon is in the last slot while the Illusion Pokemon is Terastallized\r\n\t\t\t\t\t// Illusion will not disguise as anything\r\n\t\t\t\t\tif (!pokemon.terastallized || possibleTarget.species.baseSpecies !== 'Hattepon') {\r\n\t\t\t\t\t\tpokemon.illusion = possibleTarget;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (target.illusion) {\r\n\t\t\t\tthis.singleEvent('End', this.dex.abilities.get('Afterimage'), target.abilityState, target, source, move);\r\n\t\t\t\tthis.boost({spe: 1});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonEnd(pokemon) {\r\n\t\t\tif (pokemon.illusion) {\r\n\t\t\t\tthis.debug('illusion cleared');\r\n\t\t\t\tpokemon.illusion = null;\r\n\t\t\t\tconst details = pokemon.species.name + (pokemon.level === 100 ? '' : ', L' + pokemon.level) +\r\n\t\t\t\t\t(pokemon.gender && (', ' + pokemon.gender)) + (pokemon.set.shiny ? ', shiny' : '');\r\n\t\t\t\tthis.add('replace', pokemon, details);\r\n\t\t\t\tthis.add('-message', `${pokemon.name}'s illusion wore off!`);\r\n\t\t\t\tif (this.ruleTable.has('illusionlevelmod')) {\r\n\t\t\t\t\tthis.hint(\"Illusion Level Mod is active, so this Pok\\u00e9mon's true level was hidden.\", true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonFaint(pokemon) {\r\n\t\t\tpokemon.illusion = null;\r\n\t\t},\r\n\t\tflags: {failroleplay: 1, noreceiver: 1, noentrain: 1, notrace: 1, failskillswap: 1},\r\n\t\tname: \"Afterimage\",\r\n\t},\r\n\t/*riotpayload: {\r\n\t\tshortDesc: \"Rocky Payload + Defiant\",\r\n\t\tonAfterEachBoost(boost, target, source, effect) {\r\n\t\t\tif (!source || target.isAlly(source)) return;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tthis.boost({atk: 2}, target, target, null, false, true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Rock') {\r\n\t\t\t\tthis.debug('Riot Payload boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Rock') {\r\n\t\t\t\tthis.debug('Riot Payload boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Riot Payload\",\r\n\t},*/\r\n\tprankrock: {\r\n\t\tshortDesc: \"Rocky Payload + Prankster\",\r\n\t\tonModifyPriority(priority, pokemon, target, move) {\r\n\t\t\tif (move?.category === 'Status') {\r\n\t\t\t\tmove.pranksterBoosted = true;\r\n\t\t\t\treturn priority + 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Rock') {\r\n\t\t\t\tthis.debug('Riot Payload boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Rock') {\r\n\t\t\t\tthis.debug('Riot Payload boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Prank Rock\",\r\n\t},\r\n\ttoxicattitude: {\r\n\t\tshortDesc: \"Intimidate + Poison Point\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tlet activated = false;\r\n\t\t\tfor (const target of pokemon.adjacentFoes()) {\r\n\t\t\t\tif (!activated) {\r\n\t\t\t\t\tthis.add('-ability', pokemon, 'Toxic Attitude', 'boost');\r\n\t\t\t\t\tactivated = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.volatiles['substitute']) {\r\n\t\t\t\t\tthis.add('-immune', target);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.boost({atk: -1}, target, pokemon, null, true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target) && this.randomChance(3, 10)) {\r\n\t\t\t\tsource.trySetStatus('psn', target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Toxic Attitude\",\r\n\t},\r\n\tcarelessbugs: {\r\n\t\tshortDesc: \"Reckless effects; x1.5 instead at 1/3 HP or less\",\r\n\t\tonBasePowerPriority: 23,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.recoil || move.hasCrashDamage) {\r\n\t\t\t\tthis.debug('Reckless boost');\r\n\t\t\t\treturn this.chainModify([attacker.hp <= attacker.maxhp / 3 ? 6144 : 4915, 4096]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Careless Bugs\",\r\n\t},\r\n\tquickwit: {\r\n\t\tshortDesc: \"Speed Boost + Keen Eye\",\r\n\t\tonResidualOrder: 28,\r\n\t\tonResidualSubOrder: 2,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif (pokemon.activeTurns) {\r\n\t\t\t\tthis.boost({spe: 1});\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (source && target === source) return;\r\n\t\t\tif (boost.accuracy && boost.accuracy < 0) {\r\n\t\t\t\tdelete boost.accuracy;\r\n\t\t\t\tif (!(effect as ActiveMove).secondaries) {\r\n\t\t\t\t\tthis.add(\"-fail\", target, \"unboost\", \"accuracy\", \"[from] ability: Quick Wit\", \"[of] \" + target);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.ignoreEvasion = true;\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Quick Wit\",\r\n\t},\r\n\tstonesofruin: {\r\n\t\tshortDesc: \"Pokemon without this ability have x0.75 Attack and deal x0.75 with super-effective hits.\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (this.suppressingAbility(pokemon)) return;\r\n\t\t\tthis.add('-ability', pokemon, 'Stones of Ruin');\r\n\t\t\tthis.add('-message', `${pokemon.name}'s Stones of Ruin weakened the Attack of all surrounding Pok\u00E9mon and the power of their super-effective moves!`);\r\n\t\t},\r\n\t\tonAnyModifyAtk(atk, source, target, move) {\r\n\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\tif (source.hasAbility(['Tablets of Ruin','Stones of Ruin'])) return;\r\n\t\t\tif (!move.ruinedAtk) move.ruinedAtk = abilityHolder;\r\n\t\t\telse if (move.ruinedAtk !== abilityHolder) return;\r\n\t\t\tthis.debug('Tablets of Ruin Atk drop');\r\n\t\t\treturn this.chainModify(0.75);\r\n\t\t},\r\n\t\tonAnyModifyDamage(damage, source, target, move) {\r\n\t\t\tconst abilityHolder = this.effectState.target;\r\n\t\t\tif (source.hasAbility('Stones of Ruin') || target.getMoveHitData(move).typeMod <= 0) return;\r\n\t\t\tif (!move.ruinedAtk) move.ruinedAtk = abilityHolder;\r\n\t\t\telse if (move.ruinedAtk !== abilityHolder) return;\r\n\t\t\tthis.debug('Stones of Ruin neutralize');\r\n\t\t\treturn this.chainModify(0.75);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Stones of Ruin\",\r\n\t},\r\n\tunstoppable: {\r\n\t\tshortDesc: \"Adaptability + Aroma Veil\",\r\n\t\tonModifySTAB(stab, source, target, move) {\r\n\t\t\tif (move.forceSTAB || source.hasType(move.type)) {\r\n\t\t\t\treturn stab === 2 ? 2.25 : 2;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAllyTryAddVolatile(status, target, source, effect) {\r\n\t\t\tif (['attract', 'disable', 'encore', 'healblock', 'taunt', 'torment'].includes(status.id)) {\r\n\t\t\t\tif (effect.effectType === 'Move') {\r\n\t\t\t\t\tconst effectHolder = this.effectState.target;\r\n\t\t\t\t\tthis.add('-block', target, 'ability: Unstoppable', '[of] ' + effectHolder);\r\n\t\t\t\t\tthis.add('-message', `${target.name} is unstoppable!`);\r\n\t\t\t\t}\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Unstoppable\",\r\n\t},\r\n\tsaltedlobster: {\r\n\t\tshortDesc: \"Adaptability + x0.5 damage from STAB; Status immunity\",\r\n\t\tonModifySTAB(stab, source, target, move) {\r\n\t\t\tif (move.forceSTAB || source.hasType(move.type)) {\r\n\t\t\t\treturn stab === 2 ? 2.25 : 2;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSetStatus(status, target, source, effect) {\r\n\t\t\tif ((effect as Move)?.status) {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Salted Lobster');\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tonTryAddVolatile(status, target) {\r\n\t\t\tif (status.id === 'yawn') {\r\n\t\t\t\tthis.add('-immune', target, '[from] ability: Salted Lobster');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifyAtkPriority: 6,\r\n\t\tonSourceModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (attacker.hasType(move.type)) {\r\n\t\t\t\tthis.debug('Purifying Salt weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifySpAPriority: 5,\r\n\t\tonSourceModifySpA(spa, attacker, defender, move) {\r\n\t\t\tif (attacker.hasType(move.type)) {\r\n\t\t\t\tthis.debug('Purifying Salt weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Salted Lobster\",\r\n\t},\r\n\tmiasma: {\r\n\t\tshortDesc: \"Misty Surge + Can poison others even in Misty Terrain\",\r\n\t\tonStart(source) {\r\n\t\t\tthis.field.setTerrain('mistyterrain');\r\n\t\t},\r\n\t\t//Poison bypassing this is implemented under Misty Terrain in moves.ts\r\n\t\tflags: {},\r\n\t\tname: \"Miasma\",\r\n\t},\r\n\tserenesync: {\r\n\t\tshortDesc: \"Secondaries against this Pokemon also proc against the attacker\",\r\n\t\tonModifySecondaries(secondaries) {\r\n\t\t\tfor (const secondary of secondaries) {\r\n\t\t\t\tsecondary.self ||= {};\r\n\t\t\t\tfor (const i in secondary) {\r\n\t\t\t\t\tif (!['self','chance'].includes(i)) secondary.self[i] = secondary[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Serene Sync\",\r\n\t},\r\n\tweatheredwaves: {\r\n\t\tshortDesc: \"Torrent + Sturdy\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Water' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Weathered Waves boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Water' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Weathered Waves boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHit(pokemon, target, move) {\r\n\t\t\tif (move.ohko) {\r\n\t\t\t\tthis.add('-immune', pokemon, '[from] ability: Weathered Waves');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagePriority: -30,\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (target.hp === target.maxhp && damage >= target.hp && effect && effect.effectType === 'Move') {\r\n\t\t\t\tthis.add('-ability', target, 'Weathered Waves');\r\n\t\t\t\treturn target.hp - 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Weathered Waves\",\r\n\t},\r\n\r\n\tsandsword: {\r\n\t\tshortDesc: \"x1.25 power to Slicing moves; x1.5 instead in Sand\",\r\n\t\tonBasePowerPriority: 19,\r\n\t\tonBasePower(basePower, attacker, defender, move) {\r\n\t\t\tif (move.flags['slicing']) {\r\n\t\t\t\tthis.debug('Sharpness boost');\r\n\t\t\t\treturn this.chainModify(this.field.isWeather('sandstorm') ? 1.5 : 1.25);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonImmunity(type, pokemon) {\r\n\t\t\tif (type === 'sandstorm') return false;\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Sand Sword\",\r\n\t},\r\n\tshellfishing: {\r\n\t\tshortDesc: \"Torrent + Pickup\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Water' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Shell Fishing boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Water' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Shell Fishing boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonResidualOrder: 28,\r\n\t\tonResidualSubOrder: 2,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif (pokemon.item) return;\r\n\t\t\tconst pickupTargets = this.getAllActive().filter(target => (\r\n\t\t\t\ttarget.lastItem && target.usedItemThisTurn && pokemon.isAdjacent(target)\r\n\t\t\t));\r\n\t\t\tif (!pickupTargets.length) return;\r\n\t\t\tconst randomTarget = this.sample(pickupTargets);\r\n\t\t\tconst item = randomTarget.lastItem;\r\n\t\t\trandomTarget.lastItem = '';\r\n\t\t\tthis.add('-item', pokemon, this.dex.items.get(item), '[from] ability: Shell Fishing');\r\n\t\t\tpokemon.setItem(item);\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Shell Fishing\",\r\n\t},\r\n\telectricfence: {\r\n\t\tshortDesc: \"Attackers using contact or Electric attacks lose 1/8 max HP.\",\r\n\t\tonDamagingHitOrder: 1,\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (move && (move.type === 'Electric' || this.checkMoveMakesContact(move, source, target, true))) {\r\n\t\t\t\tthis.damage(source.baseMaxhp / 8, source, target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Electric Fence\",\r\n\t},\r\n\tsturdyshock: {\r\n\t\tshortDesc: \"Volt Absorb + Sturdy\",\r\n\t\tonTryHit(pokemon, target, move) {\r\n\t\t\tif (move.ohko) {\r\n\t\t\t\tthis.add('-immune', pokemon, '[from] ability: Sturdy Shock');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagePriority: -30,\r\n\t\tonDamage(damage, target, source, effect) {\r\n\t\t\tif (target.hp === target.maxhp && damage >= target.hp && effect && effect.effectType === 'Move') {\r\n\t\t\t\tthis.add('-ability', target, 'Sturdy Shock');\r\n\t\t\t\treturn target.hp - 1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Sturdy Shock\",\r\n\t},\r\n\tmoltenglue: {\r\n\t\tshortDesc: \"Sticky Hold + Flame Body\",\r\n\t\tonTakeItem(item, pokemon, source) {\r\n\t\t\tif (!this.activeMove) throw new Error(\"Battle.activeMove is null\");\r\n\t\t\tif (!pokemon.hp || pokemon.item === 'stickybarb' || this.activeMove.ignoreAbility) return;\r\n\t\t\tif ((source && source !== pokemon) || this.activeMove.id === 'knockoff') {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Molten Glue');\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonDamagingHit(damage, target, source, move) {\r\n\t\t\tif (this.checkMoveMakesContact(move, source, target) && this.randomChance(3, 10)) {\r\n\t\t\t\tsource.trySetStatus('brn', target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"Molten Glue\",\r\n\t},\r\n\tbullettime: {\r\n\t\tname: \"Bullet Time\",\r\n\t\tshortDesc: \"Own Tempo + Bulletproof\",\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.volatiles['confusion']) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Bullet Time');\r\n\t\t\t\tpokemon.removeVolatile('confusion');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryAddVolatile(status, pokemon) {\r\n\t\t\tif (status.id === 'confusion') return null;\r\n\t\t},\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (move?.volatileStatus === 'confusion') {\r\n\t\t\t\tthis.add('-immune', target, 'confusion', '[from] ability: Bullet Time');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryHit(pokemon, target, move) {\r\n\t\t\tif (move.flags['bullet']) {\r\n\t\t\t\tthis.add('-immune', pokemon, '[from] ability: Bullet Time');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (['Intimidate','Mad Cow','Forest Fury','Shock Factor','Daunting Storm','Toxic Attitude'].includes(effect.name)) {\r\n\t\t\t\tif (boost.atk) {\r\n\t\t\t\t\tdelete boost.atk;\r\n\t\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Bullet Time', '[of] ' + target);\r\n\t\t\t\t}\r\n\t\t\t} else if (effect.name === 'Fishy Threat' && boost.spe) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Speed', '[from] ability: Bullet Time', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t},\r\n\tbadapple: {\r\n\t\tname: \"Bad Apple\",\r\n\t\tshortDesc: \"Own Tempo + Thick Fat\",\r\n\t\tonUpdate(pokemon) {\r\n\t\t\tif (pokemon.volatiles['confusion']) {\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Bad Apple');\r\n\t\t\t\tpokemon.removeVolatile('confusion');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryAddVolatile(status, pokemon) {\r\n\t\t\tif (status.id === 'confusion') return null;\r\n\t\t},\r\n\t\tonHit(target, source, move) {\r\n\t\t\tif (move?.volatileStatus === 'confusion') {\r\n\t\t\t\tthis.add('-immune', target, 'confusion', '[from] ability: Bad Apple');\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifyAtkPriority: 6,\r\n\t\tonSourceModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ice' || move.type === 'Fire') {\r\n\t\t\t\tthis.debug('Thick Fat weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSourceModifySpAPriority: 5,\r\n\t\tonSourceModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Ice' || move.type === 'Fire') {\r\n\t\t\t\tthis.debug('Thick Fat weaken');\r\n\t\t\t\treturn this.chainModify(0.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (['Intimidate','Mad Cow','Forest Fury','Shock Factor','Daunting Storm','Toxic Attitude'].includes(effect.name)) {\r\n\t\t\t\tif (boost.atk) {\r\n\t\t\t\t\tdelete boost.atk;\r\n\t\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Bad Apple', '[of] ' + target);\r\n\t\t\t\t}\r\n\t\t\t} else if (effect.name === 'Fishy Threat' && boost.spe) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Speed', '[from] ability: Bad Apple', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t},\r\n\thealthydiet: {\r\n\t\tname: \"Healthy Diet\",\r\n\t\tshortDesc: \"Heals by 33.3% of Max HP on switch-out or when eating a berry.\",\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tpokemon.heal(pokemon.baseMaxhp / 3);\r\n\t\t},\r\n\t\tonEatItem(item, pokemon) {\r\n\t\t\tthis.heal(pokemon.baseMaxhp / 3);\r\n\t\t},\r\n\t\tflags: {},\r\n\t},\r\n\tsandworm: {\r\n\t\tname: \"Sandworm\",\r\n\t\tshortDesc: \"33% chance to cure status at end of turn, 100% instead in Sandstorm\",\r\n\t\tonResidualOrder: 5,\r\n\t\tonResidualSubOrder: 3,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tif (pokemon.hp && pokemon.status && (this.field.isWeather('sandstorm') || this.randomChance(33, 100))) {\r\n\t\t\t\tthis.debug('shed skin');\r\n\t\t\t\tthis.add('-activate', pokemon, 'ability: Sandworm');\r\n\t\t\t\tpokemon.cureStatus();\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t},\r\n\tanointed: {\r\n\t\tname: \"Anointed\",\r\n\t\tshortDesc: \"Telepathy + Levitate\",\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target !== source && target.isAlly(source) && move.category !== 'Status') {\r\n\t\t\t\tthis.add('-activate', target, 'ability: Anointed');\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t},\r\n\thopestar: {\r\n\t\tname: \"Hope Star\",\r\n\t\tshortDesc: \"Regenerator + Victory Star\",\r\n\t\tonAnyModifyAccuracyPriority: -1,\r\n\t\tonAnyModifyAccuracy(accuracy, target, source) {\r\n\t\t\tif (source.isAlly(this.effectState.target) && typeof accuracy === 'number') {\r\n\t\t\t\treturn this.chainModify([4506, 4096]);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonSwitchOut(pokemon) {\r\n\t\t\tpokemon.heal(pokemon.baseMaxhp / 3);\r\n\t\t},\r\n\t\tflags: {},\r\n\t},\r\n\tfrisktaker: {\r\n\t\tname: \"Frisk Taker\",\r\n\t\tshortDesc: \"Frisk + Mold Breaker\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Frisk Taker');\r\n\t\t\tfor (const target of pokemon.foes()) {\r\n\t\t\t\tif (target.item) {\r\n\t\t\t\t\tthis.add('-item', target, target.getItem().name, '[from] ability: Frisk Taker', '[of] ' + pokemon);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tmove.ignoreAbility = true;\r\n\t\t},\r\n\t\tflags: {},\r\n\t},\r\n\thotpockets: {\r\n\t\tname: \"Hot Pockets\",\r\n\t\tshortDesc: \"Blaze + Pickpocket. Incoming Fire moves activate Pickpocket.\",\r\n\t\tonModifyAtkPriority: 5,\r\n\t\tonModifyAtk(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Blaze boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifySpAPriority: 5,\r\n\t\tonModifySpA(atk, attacker, defender, move) {\r\n\t\t\tif (move.type === 'Fire' && attacker.hp <= attacker.maxhp / 3) {\r\n\t\t\t\tthis.debug('Blaze boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t}\r\n\t\t},\r\n\t\tonAfterMoveSecondary(target, source, move) {\r\n\t\t\tif (source && source !== target && move && (move.flags['contact'] || move.type === 'Fire')) {\r\n\t\t\t\tif (target.item || target.switchFlag || target.forceSwitchFlag || source.switchFlag === true) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tconst yourItem = source.takeItem(target);\r\n\t\t\t\tif (!yourItem) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (!target.setItem(yourItem)) {\r\n\t\t\t\t\tsource.item = yourItem.id;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.add('-enditem', source, yourItem, '[silent]', '[from] ability: Hot Pockets', '[of] ' + source);\r\n\t\t\t\tthis.add('-item', target, yourItem, '[from] ability: Hot Pockets', '[of] ' + source);\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t},\r\n\tmyceliumwaste: {\r\n\t\tname: \"Mycelium Waste\",\r\n\t\tshortDesc: \"Physical and Status moves go last in their priority bracket.\",\r\n\t\tonFractionalPriorityPriority: -1,\r\n\t\tonFractionalPriority(priority, pokemon, target, move) {\r\n\t\t\tif (move.category !== 'Special') {\r\n\t\t\t\treturn -0.1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t},\r\n\tdelayedreaction: {\r\n\t\tname: \"Delayed Reaction\",\r\n\t\tshortDesc: \"Status moves go last, but ignore types and abilities.\",\r\n\t\tonFractionalPriorityPriority: -1,\r\n\t\tonFractionalPriority(priority, pokemon, target, move) {\r\n\t\t\tif (move.category === 'Status') {\r\n\t\t\t\treturn -0.1;\r\n\t\t\t}\r\n\t\t},\r\n\t\tonModifyMove(move) {\r\n\t\t\tif (move.category === 'Status') {\r\n\t\t\t\tmove.ignoreAbility = true;\r\n\t\t\t\tmove.ignoreImmunity = true;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t},\r\n\taquackintime: {\r\n\t\tshortDesc: \"Defiant + Pressure\",\r\n\t\tonStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'A Quack in Time');\r\n\t\t},\r\n\t\tonDeductPP(target, source) {\r\n\t\t\tif (!target.isAlly(source)) return 1;\r\n\t\t},\r\n\t\tonAfterEachBoost(boost, target, source, effect) {\r\n\t\t\tif (!source || target.isAlly(source)) return;\r\n\t\t\tlet i: BoostID;\r\n\t\t\tfor (i in boost) {\r\n\t\t\t\tif (boost[i]! < 0) {\r\n\t\t\t\t\tthis.boost({atk: 2}, target, target, null, false, true);\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {},\r\n\t\tname: \"A Quack in Time\",\r\n\t},\r\n\tmagicmirror: {\r\n\t\tshortDesc: \"Effects of Mirror Armor and Magic Bounce.\",\r\n\t\tonTryHitPriority: 1,\r\n\t\tonTryHit(target, source, move) {\r\n\t\t\tif (target === source || move.hasBounced || !move.flags['reflectable']) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst newMove = this.dex.getActiveMove(move.id);\r\n\t\t\tnewMove.hasBounced = true;\r\n\t\t\tnewMove.pranksterBoosted = false;\r\n\t\t\tthis.actions.useMove(newMove, target, source);\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tonAllyTryHitSide(target, source, move) {\r\n\t\t\tif (target.isAlly(source) || move.hasBounced || !move.flags['reflectable']) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tconst newMove = this.dex.getActiveMove(move.id);\r\n\t\t\tnewMove.hasBounced = true;\r\n\t\t\tnewMove.pranksterBoosted = false;\r\n\t\t\tthis.actions.useMove(newMove, this.effectState.target, source);\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\t// Don't bounce self stat changes, or boosts that have already bounced\r\n\t\t\tif (!source || target === source || !boost || ['Mirror Armor', 'Magic Mirror'].includes(effect.name)) return;\r\n\t\t\tlet b: BoostID;\r\n\t\t\tfor (b in boost) {\r\n\t\t\t\tif (boost[b]! < 0 && target.boosts[b] > -6) {\r\n\t\t\t\t\tconst negativeBoost: SparseBoostsTable = {};\r\n\t\t\t\t\tnegativeBoost[b] = boost[b];\r\n\t\t\t\t\tdelete boost[b];\r\n\t\t\t\t\tif (source.hp) {\r\n\t\t\t\t\t\tthis.add('-ability', target, 'Magic Mirror');\r\n\t\t\t\t\t\tthis.boost(negativeBoost, source, target, null, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tflags: {breakable: 1},\r\n\t\tname: \"Magic Mirror\",\r\n\t},\r\n\t//Vanilla abilities\r\n\t//Extending Inner Focus's Intimidate immunity to derivatives\r\n\tinnerfocus: {\r\n\t\tinherit: true,\r\n\t\tonTryBoost(boost, target, source, effect) {\r\n\t\t\tif (['Intimidate','Mad Cow','Forest Fury','Shock Factor','Daunting Storm','Toxic Attitude'].includes(effect.name)) {\r\n\t\t\t\tif (boost.atk) {\r\n\t\t\t\t\tdelete boost.atk;\r\n\t\t\t\t\tthis.add('-fail', target, 'unboost', 'Attack', '[from] ability: Inner Focus', '[of] ' + target);\r\n\t\t\t\t}\r\n\t\t\t} else if (effect.name === 'Fishy Threat' && boost.spe) {\r\n\t\t\t\tdelete boost.spe;\r\n\t\t\t\tthis.add('-fail', target, 'unboost', 'Speed', '[from] ability: Inner Focus', '[of] ' + target);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tembodyaspectcornerstone: {\r\n\t\tinherit: true,\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.baseSpecies.name === 'Hattepon-Cornerstone-Tera' && !this.effectState.embodied) {\r\n\t\t\t\tthis.effectState.embodied = true;\r\n\t\t\t\tthis.boost({def: 1}, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tembodyaspecthearthflame: {\r\n\t\tinherit: true,\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.baseSpecies.name === 'Hattepon-Hearthflame-Tera' && !this.effectState.embodied) {\r\n\t\t\t\tthis.effectState.embodied = true;\r\n\t\t\t\tthis.boost({atk: 1}, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tembodyaspectteal: {\r\n\t\tinherit: true,\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.baseSpecies.name === 'Hattepon-Teal-Tera' && !this.effectState.embodied) {\r\n\t\t\t\tthis.effectState.embodied = true;\r\n\t\t\t\tthis.boost({spe: 1}, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tembodyaspectwellspring: {\r\n\t\tinherit: true,\r\n\t\tonStart(pokemon) {\r\n\t\t\tif (pokemon.baseSpecies.name === 'Hattepon-Wellspring-Tera' && !this.effectState.embodied) {\r\n\t\t\t\tthis.effectState.embodied = true;\r\n\t\t\t\tthis.boost({spd: 1}, pokemon);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tnaturalcure: {\r\n\t\tonCheckShow(pokemon) {\r\n\t\t\t// This is complicated\r\n\t\t\t// For the most part, in-game, it's obvious whether or not Natural Cure activated,\r\n\t\t\t// since you can see how many of your opponent's pokemon are statused.\r\n\t\t\t// The only ambiguous situation happens in Doubles/Triples, where multiple pokemon\r\n\t\t\t// that could have Natural Cure switch out, but only some of them get cured.\r\n\t\t\tif (pokemon.side.active.length === 1/*) return;\r\n\t\t\tif (*/|| pokemon.showCure === true || pokemon.showCure === false) return;\r\n\r\n\t\t\tconst cureList = [];\r\n\t\t\tlet noCureCount = 0;\r\n\t\t\tfor (const curPoke of pokemon.side.active) {\r\n\t\t\t\t// pokemon not statused\r\n\t\t\t\tif (!curPoke || !curPoke.status) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: not statused or doesn't exist\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (curPoke.showCure) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: Natural Cure already known\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tconst species = curPoke.species;\r\n\t\t\t\t// pokemon can't get Natural Cure\r\n\t\t\t\tif (!Object.values(species.abilities).includes('Natural Cure') && !Object.values(species.abilities).includes('Natural Pressures') && !Object.values(species.abilities).includes('Rejuvenate')) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: no Natural Cure\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// pokemon's ability is known to be Natural Cure\r\n\t\t\t\tif (!species.abilities['1'] && !species.abilities['H']) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: only one ability\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// pokemon isn't switching this turn\r\n\t\t\t\tif (curPoke !== pokemon && !this.queue.willSwitch(curPoke)) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" skipped: not switching\");\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (curPoke.hasAbility(['naturalcure','rejuvenate','naturalpressures'])) {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" confirmed: could be Natural Cure (and is)\");\r\n\t\t\t\t\tcureList.push(curPoke);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// this.add('-message', \"\" + curPoke + \" confirmed: could be Natural Cure (but isn't)\");\r\n\t\t\t\t\tnoCureCount++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (!cureList.length || !noCureCount) {\r\n\t\t\t\t// It's possible to know what pokemon were cured\r\n\t\t\t\tfor (const pkmn of cureList) {\r\n\t\t\t\t\tpkmn.showCure = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// It's not possible to know what pokemon were cured\r\n\r\n\t\t\t\t// Unlike a -hint, this is real information that battlers need, so we use a -message\r\n\t\t\t\tthis.add('-message', \"(\" + cureList.length + \" of \" + pokemon.side.name + \"'s pokemon \" + (cureList.length === 1 ? \"was\" : \"were\") + \" cured by Natural Cure.)\");\r\n\r\n\t\t\t\tfor (const pkmn of cureList) {\r\n\t\t\t\t\tpkmn.showCure = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tinherit: true,\r\n\t},\r\n\tneutralizinggas: {\r\n\t\tinherit: true,\r\n\t\t// Ability suppression implemented in sim/pokemon.ts:Pokemon#ignoringAbility\r\n\t\tonPreStart(pokemon) {\r\n\t\t\tthis.add('-ability', pokemon, 'Neutralizing Gas');\r\n\t\t\tpokemon.abilityState.ending = false;\r\n\t\t\tconst strongWeathers = ['desolateland', 'primordialsea', 'deltastream'];\r\n\t\t\tfor (const target of this.getAllActive()) {\r\n\t\t\t\tif (target.hasItem('Ability Shield')) {\r\n\t\t\t\t\tthis.add('-block', target, 'item: Ability Shield');\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t// Can't suppress a Tatsugiri inside of Dondozo already\r\n\t\t\t\tif (target.volatiles['commanding']) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tif (target.illusion) {\r\n\t\t\t\t\tthis.singleEvent('End', this.dex.abilities.get('Rough Image'), target.abilityState, target, pokemon, 'neutralizinggas');\r\n\t\t\t\t}\r\n\t\t\t\tif (target.volatiles['slowstart']) {\r\n\t\t\t\t\tdelete target.volatiles['slowstart'];\r\n\t\t\t\t\tthis.add('-end', target, 'Slow Start', '[silent]');\r\n\t\t\t\t}\r\n\t\t\t\tconst targetAbilID = target.getAbility().id;\r\n\t\t\t\tif (['eczema','prehistoricpresence'].includes(targetAbilID)) {\r\n\t\t\t\t\ttarget.removeVolatile('ability:unaware');\r\n\t\t\t\t} else if (strongWeathers.includes(targetAbilID)) {\r\n\t\t\t\t\tthis.singleEvent('End', this.dex.abilities.get(target.getAbility().id), target.abilityState, target, pokemon, 'neutralizinggas');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\t//Mainly did this so we could try to see if Quark Drive would work\r\n\tprotosynthesis: {\r\n\t\tinherit: true,\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: ' + pokemon.getAbility().name, '[fromitem]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: ' + pokemon.getAbility().name);\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'protosynthesis' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Protosynthesis atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Protosynthesis def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Protosynthesis spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Protosynthesis spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tfor (const target of pokemon.foes()) {\r\n\t\t\t\t\tif (target.hasAbility('dyschronometria')) {\r\n\t\t\t\t\t\tthis.debug('Dyschronometria negating spe boost');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.debug('Protosynthesis spe boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Protosynthesis');\r\n\t\t\t},\r\n\t\t},\r\n\t\tname: \"Protosynthesis\",\r\n\t},\r\n\tquarkdrive: {\r\n\t\tinherit: true,\r\n\t\tcondition: {\r\n\t\t\tnoCopy: true,\r\n\t\t\tonStart(pokemon, source, effect) {\r\n\t\t\t\tif (effect?.name === 'Booster Energy') {\r\n\t\t\t\t\tthis.effectState.fromBooster = true;\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: ' + pokemon.getAbility().name, '[fromitem]');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-activate', pokemon, 'ability: ' + pokemon.getAbility().name);\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.bestStat = pokemon.getBestStat(false, true);\r\n\t\t\t\tthis.add('-start', pokemon, 'quarkdrive' + this.effectState.bestStat);\r\n\t\t\t},\r\n\t\t\tonModifyAtkPriority: 5,\r\n\t\t\tonModifyAtk(atk, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'atk' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive atk boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifyDefPriority: 6,\r\n\t\t\tonModifyDef(def, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'def' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive def boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpAPriority: 5,\r\n\t\t\tonModifySpA(spa, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spa' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive spa boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpDPriority: 6,\r\n\t\t\tonModifySpD(spd, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spd' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tthis.debug('Quark Drive spd boost');\r\n\t\t\t\treturn this.chainModify([5325, 4096]);\r\n\t\t\t},\r\n\t\t\tonModifySpe(spe, pokemon) {\r\n\t\t\t\tif (this.effectState.bestStat !== 'spe' || pokemon.ignoringAbility()) return;\r\n\t\t\t\tfor (const target of pokemon.foes()) {\r\n\t\t\t\t\tif (target.hasAbility('dyschronometria')) {\r\n\t\t\t\t\t\tthis.debug('Dyschronometria negating spe boost');\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.debug('Quark Drive spe boost');\r\n\t\t\t\treturn this.chainModify(1.5);\r\n\t\t\t},\r\n\t\t\tonEnd(pokemon) {\r\n\t\t\t\tthis.add('-end', pokemon, 'Quark Drive');\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAO,MAAM,YAAyE;AAAA;AAAA,EAErF,YAAY;AAAA,IACX,WAAW;AAAA,IACX,qBAAqB,QAAQA,SAAQC,SAAQ,MAAM;AAClD,UAAIA,QAAO,eAAe,IAAI,EAAE,UAAU,GAAG;AAC5C,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,IAAI;AAAA,MAC7B;AAAA,IACD;AAAA,IACA,cAAc,OAAOA,SAAQD,SAAQ,QAAQ;AAC5C,UAAI,QAAQ,OAAO;AAAU;AAC7B,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,cAAM,CAAC,KAAM;AAAA,MACd;AAAA,IACD;AAAA,IACA,eAAe,QAAQA,SAAQC,SAAQ,MAAM;AAC5C,UAAIA,QAAO,eAAe,IAAI,EAAE,UAAU,GAAG;AAC5C,aAAK,MAAM,kBAAkB;AAC7B,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACJ;AAAA,EACH,YAAY;AAAA,IACX,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,cAAQ,YAAY,YAAY;AAAA,IACjC;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,YAAY;AACrC,WAAK,IAAI,QAAQ,SAAS,cAAc,UAAU;AAAA,IACnD;AAAA,IACA,WAAW;AAAA,MACV,UAAU;AAAA,MACV,QAAQA,SAAQ;AACf,aAAK,IAAI,UAAUA,SAAQ,qBAAqB;AAAA,MACjD;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,MACA,YAAY,KAAK,SAAS;AACzB,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,MACA,MAAMA,SAAQ;AACb,aAAK,IAAI,QAAQA,SAAQ,YAAY;AAAA,MACtC;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACJ;AAAA,EACH,WAAW;AAAA,IACV,WAAW;AAAA,IACX,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAI,KAAK,aAAa,YAAYC,YAAWD,SAAQ;AACpD,aAAK,IAAI,WAAWC,SAAQ,4BAA4B;AACxD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACnB,MAAM;AAAA,EACL;AAAA,EACH,cAAc;AAAA,IACb,WAAW;AAAA,IACX,mBAAmB,QAAQA,SAAQD,SAAQ,QAAQ;AAClD,UAAI,QAAQ,eAAe,QAAQ;AAClC,cAAM,WAAWA,QAAO,YAAY,MAAM,IAAI;AAC9C,aAAK,MAAM,EAAC,CAAC,QAAQ,GAAG,OAAM,GAAGA,OAAM;AAAA,MACxC;AAAA,IACD;AAAA,IACC,MAAM;AAAA,EACL;AAAA,EACH,eAAe;AAAA,IACd,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,YAAY;AAC7B,aAAK,MAAM,sBAAsB;AACjC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,YAAY;AAC7B,aAAK,MAAM,sBAAsB;AACjC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,IACD;AAAA,IACA,8BAA8B;AAAA,IAC9B,qBAAqB,UAAU,SAASC,SAAQ,MAAM;AACrD,UAAI,KAAK,aAAa,UAAU;AAC/B,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,aAAa,MAAM;AAClB,UAAI,KAAK,aAAa,YAAY,KAAK,SAAS,YAAY;AAC3D,aAAK,gBAAgB;AAAA,MACtB;AAAA,IACD;AAAA,IACC,MAAM;AAAA,EACL;AAAA,EACH,YAAY;AAAA,IACX,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,YAAY;AAChB,iBAAWA,WAAU,QAAQ,aAAa,GAAG;AAC5C,YAAI,CAAC,WAAW;AACf,eAAK,IAAI,YAAY,SAAS,eAAe,OAAO;AACpD,sBAAY;AAAA,QACb;AACA,YAAIA,QAAO,UAAU,YAAY,GAAG;AACnC,eAAK,IAAI,WAAWA,OAAM;AAAA,QAC3B,OAAO;AACN,eAAK,MAAM,EAAC,KAAK,GAAE,GAAGA,SAAQ,SAAS,MAAM,IAAI;AAAA,QAClD;AAAA,MACD;AAAA,IACD;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAIA,WAAUC,YAAWD;AAAQ;AACjC,UAAI,MAAM,OAAO,MAAM,MAAM,GAAG;AAC/B,eAAO,MAAM;AACb,YAAI,CAAE,OAAsB,aAAa;AACxC,eAAK,IAAI,SAASC,SAAQ,WAAW,UAAU,+BAA+B,UAAUA,OAAM;AAAA,QAC/F;AAAA,MACD;AAAA,IACD;AAAA,IACA,YAAY,QAAQA,SAAQD,SAAQ,QAAQ;AAC3C,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAWC,SAAQ,6BAA6B;AAAA,MAC1D;AACA,aAAO;AAAA,IACR;AAAA,IACA,iBAAiB,QAAQA,SAAQ;AAChC,UAAI,OAAO,OAAO,QAAQ;AACzB,aAAK,IAAI,WAAWA,SAAQ,6BAA6B;AACzD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACJ;AAAA,EACH,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,iBAAiB;AAAA,IACjB,oBAAoB;AAAA,IACpB,WAAW,SAAS;AACnB,UAAI,QAAQ,MAAM,CAAC,QAAQ,QAAQ,KAAK,IAAI,MAAM,IAAI,QAAQ,QAAQ,EAAE,YAAY,KAAK,MAAM,UAAU,CAAC,YAAY,cAAc,CAAC,KAAK,KAAK,aAAa,GAAG,CAAC,IAAI;AACnK,gBAAQ,QAAQ,QAAQ,QAAQ;AAChC,gBAAQ,WAAW;AACnB,aAAK,IAAI,SAAS,SAAS,QAAQ,QAAQ,GAAG,8BAA8B;AAAA,MAC7E;AAAA,IACD;AAAA,IACA,qBAAqBA,SAAQD,SAAQ,MAAM;AAC1C,UAAI,CAACA,WAAUA,YAAWC,WAAU,CAACA,QAAO,MAAM,CAAC,KAAK;AAAa;AACrE,YAAM,iBAAiBA,QAAO,kBAAkB;AAChD,UAAI,CAAC;AAAgB;AACrB,YAAM,SAAS,KAAK,WAAW,KAAK,cAAc,eAAe;AACjE,YAAM,YAAYA,QAAO,QAAQ;AACjC,UAAIA,QAAO,MAAM,aAAaA,QAAO,KAAK,SAAS,aAAa,CAACA,QAAO,QAAQ,KAAK,IAAI,MAAM,IAAIA,QAAO,QAAQ,EAAE,SAAS;AAC3H,QAAAA,QAAO,QAAQA,QAAO,QAAQ;AAC9B,QAAAA,QAAO,WAAW;AAClB,aAAK,IAAI,SAASA,SAAQA,QAAO,QAAQ,GAAG,8BAA8B;AAAA,MAC5E;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACJ;AAAA,EACH,YAAY;AAAA,IACX,WAAW;AAAA,IACX,eAAe,UAAU;AACxB,aAAO,KAAK,MAAM,WAAW,CAAC;AAAA,IAC/B;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AACzB,UAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,gBAAQ,YAAY,YAAY;AAAA,MACjC,WAAW,CAAC,QAAQ,UAAU,YAAY,GAAG,aAAa;AACzD,gBAAQ,eAAe,YAAY;AAAA,MACpC;AAAA,IACD;AAAA,IACA,SAAS,SAAS;AACjB,UAAI,EAAE,QAAQ,UAAU,YAAY,GAAG,eAAe,QAAQ,UAAU,YAAY,GAAG,mBAAmB,CAAC,KAAK,MAAM,UAAU,iBAAiB,GAAG;AACnJ,gBAAQ,eAAe,YAAY;AAAA,MACpC;AAAA,IACD;AAAA,IACA,gBAAgBD,SAAQC,SAAQ,MAAM;AACrC,UAAI,KAAK,cAAcD,YAAWC;AAAQ;AAC1C,YAAM,OAAO,KAAK,YAAY;AAC9B,UAAI,KAAK,UAAU,YAAY,KAAK,CAAC,KAAK,UAAU,YAAY,EAAE;AAAgB;AAClF,UAAI;AACJ,UAAID,YAAW,MAAM;AACpB,qBAAaC,QAAO,UAAU;AAAA,MAC/B,WAAWA,YAAW,MAAM;AAC3B,qBAAaD,QAAO,UAAU;AAAA,MAC/B;AAAO;AACP,UAAI,KAAK,UAAU,IAAI,YAAY;AAClC,YAAI,KAAK,UAAU,YAAY;AAAG;AAClC,aAAK,YAAY,YAAY;AAC7B,aAAK,UAAU,YAAY,EAAE,iBAAiB;AAAA,MAC/C,WAAW,KAAK,UAAU,YAAY,GAAG;AACxC,YAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,eAAK,UAAU,YAAY,EAAE,iBAAiB;AAAA,QAC/C,OAAO;AACN,eAAK,eAAe,YAAY;AAAA,QACjC;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,YAAY;AACrC,WAAK,IAAI,QAAQ,SAAS,eAAe,UAAU;AAAA,IACpD;AAAA,IACA,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ,SAASA,SAAQ,QAAQ;AAChC,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAa,SAAS,wBAAwB,YAAY;AAAA,QACpE,OAAO;AACN,eAAK,IAAI,aAAa,SAAS,sBAAsB;AAAA,QACtD;AACA,aAAK,YAAY,WAAW,QAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAU,SAAS,eAAe,KAAK,YAAY,QAAQ;AAAA,MACrE;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,mBAAWC,WAAU,QAAQ,KAAK,GAAG;AACpC,cAAIA,QAAO,WAAW,iBAAiB,GAAG;AACzC,iBAAK,MAAM,oCAAoC;AAC/C;AAAA,UACD;AAAA,QACD;AACA,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,MACA,MAAM,SAAS;AACd,aAAK,IAAI,QAAQ,SAAS,aAAa;AAAA,MACxC;AAAA,IACD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,qBAAqB,QAAQD,SAAQC,SAAQ,MAAM;AAClD,UAAIA,QAAO,eAAe,IAAI,EAAE,UAAU,GAAG;AAC5C,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,IAAI;AAAA,MAC7B;AAAA,IACD;AAAA,IACA,sBAAsB;AAAA,IACtB,aAAa,MAAM;AAGlB,WAAK,KAAK,mBAAL,KAAK,iBAAmB,CAAC,QAAO,MAAM;AAC1C,aAAK,eAAe,UAAU,IAAI;AAClC,aAAK,eAAe,QAAQ,IAAI;AAAA,MACjC;AAAA,IACD;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAI,CAAC,cAAa,WAAU,eAAc,gBAAe,kBAAiB,gBAAgB,EAAE,SAAS,OAAO,IAAI,KAAK,MAAM,KAAK;AAC/H,eAAO,MAAM;AACb,aAAK,IAAI,SAASC,SAAQ,WAAW,UAAU,8BAA8B,UAAUA,OAAM;AAAA,MAC9F,WAAW,OAAO,SAAS,kBAAkB,MAAM,KAAK;AACvD,eAAO,MAAM;AACb,aAAK,IAAI,SAASA,SAAQ,WAAW,SAAS,8BAA8B,UAAUA,OAAM;AAAA,MAC7F;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,UAAU,KAAK,gBAAgB;AACvC,aAAK,MAAM,iBAAiB;AAC5B,eAAO,KAAK,YAAY,CAAC,MAAQ,IAAM,CAAC;AAAA,MACzC;AAAA,IACD;AAAA,IACA,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAI,OAAO,OAAO,UAAU;AAC3B,YAAI,CAAC,KAAK;AAAY,gBAAM,IAAI,MAAM,2BAA2B;AACjE,YAAI,KAAK,WAAW,OAAO;AAAY,iBAAO;AAAA,MAC/C;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,aAAaA,SAAQC,SAAQ,MAAM;AAClC,YAAM,YAAY,KAAK,MAAM,UAAU,UAAU;AACjD,UAAI,KAAK,WAAW,GAAG;AACtB,YAAI,aAAaD,QAAO,UAAU,YAAY;AAAG;AACjD,QAAAA,QAAO,YAAY,YAAY;AAC/B,QAAAA,QAAO,UAAU,YAAY,EAAE,eAAe;AAAA,MAC/C,WAAWA,QAAO,UAAU,YAAY,GAAG,cAAc;AACxD,YAAI,WAAW;AACd,UAAAA,QAAO,UAAU,YAAY,EAAE,eAAe;AAAA,QAC/C,OAAO;AACN,UAAAA,QAAO,eAAe,YAAY;AAAA,QACnC;AAAA,MACD;AAAA,IACD;AAAA,IACA,iBAAiB,UAAU,SAASC,SAAQ,MAAM;AACjD,UAAI,MAAM,aAAa,UAAU;AAChC,aAAK,mBAAmB;AACxB,eAAO,WAAW;AAAA,MACnB;AAAA,IACD;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AAEzB,UAAI,KAAK,MAAM,UAAU,UAAU,GAAG;AACrC,gBAAQ,YAAY,YAAY;AAAA,MACjC,WAAW,EAAE,QAAQ,UAAU,YAAY,GAAG,eAAe,QAAQ,UAAU,YAAY,GAAG,eAAe;AAC5G,gBAAQ,eAAe,YAAY;AAAA,MACpC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,YAAY;AACrC,WAAK,IAAI,QAAQ,SAAS,kBAAkB,UAAU;AAAA,IACvD;AAAA,IACA,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ,SAASD,SAAQ,QAAQ;AAChC,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAa,SAAS,wBAAwB,YAAY;AAAA,QACpE,OAAO;AACN,eAAK,IAAI,aAAa,SAAS,sBAAsB;AAAA,QACtD;AACA,aAAK,YAAY,WAAW,QAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAU,SAAS,mBAAmB,KAAK,YAAY,QAAQ;AAAA,MACzE;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,mBAAWC,WAAU,QAAQ,KAAK,GAAG;AACpC,cAAIA,QAAO,WAAW,iBAAiB,GAAG;AACzC,iBAAK,MAAM,oCAAoC;AAC/C;AAAA,UACD;AAAA,QACD;AACA,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,MACA,MAAM,SAAS;AACd,aAAK,IAAI,QAAQ,SAAS,gBAAgB;AAAA,MAC3C;AAAA,IACD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,SAAS;AAC1B,aAAK,MAAM,mBAAmB;AAC9B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,SAAS;AAC1B,aAAK,MAAM,mBAAmB;AAC9B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,WAAW,KAAK,SAAS,SAAS;AACnD,aAAK,MAAM,oBAAoB;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,WAAW,KAAK,SAAS,SAAS;AACnD,aAAK,MAAM,oBAAoB;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,YAAY,QAAQA,SAAQD,SAAQ,QAAQ;AAC3C,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAWC,SAAQ,6BAA6B;AAAA,MAC1D;AACA,aAAO;AAAA,IACR;AAAA,IACA,iBAAiB,QAAQA,SAAQ;AAChC,UAAI,OAAO,OAAO,QAAQ;AACzB,aAAK,IAAI,WAAWA,SAAQ,6BAA6B;AACzD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,gBAAgB;AAAA,IACf,WAAW;AAAA,IACX,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,WAAK,YAAY,iBAAiB,CAAC,EAAE,OAAO,eAAe,UAAU,OAAO,YAAY,OAAO,mBAC/E,OAAO,iBAAiBA,QAAO,WAAW,CAAC,gBAAe,cAAa,iBAAgB,WAAW,CAAC;AAAA,IACpH;AAAA,IACA,aAAa,MAAM;AAClB,YAAM,eAAe;AAAA,QACpB;AAAA,QAAc;AAAA,QAAe;AAAA,QAAa;AAAA,QAAe;AAAA,QAAa;AAAA,QAAe;AAAA,QAAa;AAAA,QAAa;AAAA,MAChH;AACA,aAAQ,CAAC,aAAa,SAAS,KAAK,EAAE,KAAK,KAAK,YAAY;AAAA,IAC7D;AAAA,IACA,qBAAqBC,SAAQD,SAAQ,MAAM;AAC1C,WAAK,YAAY,iBAAiB;AAClC,UAAI,CAACA,WAAUA,YAAWC,WAAU,CAACA,QAAO,MAAM,CAAC,KAAK;AAAa;AACrE,YAAM,iBAAiBA,QAAO,kBAAkB;AAChD,UAAI,CAAC;AAAgB;AACrB,YAAM,SAAS,KAAK,WAAW,KAAK,cAAc,eAAe;AACjE,YAAM,YAAYA,QAAO,QAAM;AAC/B,UAAIA,QAAO,MAAM,aAAaA,QAAO,KAAK,SAAS,WAAW;AAC7D,aAAK,MAAM,EAAC,KAAK,EAAC,GAAGA,SAAQA,OAAM;AAAA,MACpC;AAAA,IACD;AAAA,IACA,YAAY,SAAS;AACpB,cAAQ,KAAK,QAAQ,YAAY,CAAC;AAAA,IACnC;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AACxE,WAAK,MAAM,WAAW,iBAAiB;AAAA,IACxC;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AACzB,UAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,gBAAQ,YAAY,YAAY;AAAA,MACjC,WAAW,CAAC,QAAQ,UAAU,YAAY,GAAG,aAAa;AACzD,gBAAQ,eAAe,YAAY;AAAA,MACpC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,YAAY;AACrC,WAAK,IAAI,QAAQ,SAAS,eAAe,UAAU;AAAA,IACpD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AAEzB,UAAI,KAAK,MAAM,UAAU,UAAU,GAAG;AACrC,gBAAQ,YAAY,gBAAgB;AAAA,MACrC,WAAW,CAAC,QAAQ,UAAU,gBAAgB,GAAG,aAAa;AAC7D,gBAAQ,eAAe,gBAAgB;AAAA,MACxC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,gBAAgB;AACzC,WAAK,IAAI,QAAQ,SAAS,kBAAkB,UAAU;AAAA,IACvD;AAAA,IACA,aAAa,MAAM;AAClB,WAAK,cAAc;AAAA,IACpB;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,WAAW,MAAM,SAAS;AACzB,UAAI,SAAS;AAAW,eAAO;AAAA,IAChC;AAAA,IACA,SAAS,SAASA,SAAQ,MAAM;AAC/B,UAAI,CAAC,WAAU,aAAY,OAAO,EAAE,SAAS,KAAK,EAAE,GAAG;AACtD,aAAK,IAAI,WAAW,SAAS,2BAA2B;AACxD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAI,CAAC,cAAa,WAAU,eAAc,gBAAe,kBAAiB,gBAAgB,EAAE,SAAS,OAAO,IAAI,KAAK,MAAM,KAAK;AAC/H,eAAO,MAAM;AACb,aAAK,IAAI,SAASC,SAAQ,WAAW,UAAU,6BAA6B,UAAUA,OAAM;AAAA,MAC7F,WAAW,OAAO,SAAS,kBAAkB,MAAM,KAAK;AACvD,eAAO,MAAM;AACb,aAAK,IAAI,SAASA,SAAQ,WAAW,SAAS,6BAA6B,UAAUA,OAAM;AAAA,MAC5F;AAAA,IACD;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AAEzB,UAAI,KAAK,MAAM,UAAU,UAAU,GAAG;AACrC,gBAAQ,YAAY,gBAAgB;AAAA,MACrC,WAAW,CAAC,QAAQ,UAAU,gBAAgB,GAAG,aAAa;AAC7D,gBAAQ,eAAe,gBAAgB;AAAA,MACxC;AAAA,IACD;AAAA,IACA,SAAS,SAAS;AACjB,UAAI,QAAQ,UAAU,SAAS,GAAG;AACjC,aAAK,IAAI,aAAa,SAAS,oBAAoB;AACnD,gBAAQ,eAAe,SAAS;AAChC,aAAK,IAAI,QAAQ,SAAS,iBAAiB,2BAA2B;AAAA,MACvE;AACA,UAAI,QAAQ,UAAU,OAAO,GAAG;AAC/B,aAAK,IAAI,aAAa,SAAS,oBAAoB;AACnD,gBAAQ,eAAe,OAAO;AAAA,MAE/B;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,gBAAgB;AACzC,WAAK,IAAI,QAAQ,SAAS,kBAAkB,UAAU;AAAA,IACvD;AAAA,IACA,OAAO,EAAC,WAAW,GAAG,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAChH,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA6EA,aAAa;AAAA,IACZ,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,gBAAQ,YAAY,aAAa;AAAA,MAClC,WAAW,CAAC,QAAQ,UAAU,aAAa,GAAG,aAAa;AAC1D,gBAAQ,eAAe,aAAa;AAAA,MACrC;AAAA,IACD;AAAA,IACA,kBAAkB,WAAW;AAC5B,aAAO,YAAY;AAAA,IACpB;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,aAAa;AACtC,WAAK,IAAI,QAAQ,SAAS,gBAAgB,UAAU;AAAA,IACrD;AAAA,IACA,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ,SAASD,SAAQ,QAAQ;AAChC,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAa,SAAS,yBAAyB,YAAY;AAAA,QACrE,OAAO;AACN,eAAK,IAAI,aAAa,SAAS,uBAAuB;AAAA,QACvD;AACA,aAAK,YAAY,WAAW,QAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAU,SAAS,eAAe,KAAK,YAAY,QAAQ;AAAA,MACrE;AAAA,MACA,kBAAkB,WAAW;AAC5B,eAAO,YAAY;AAAA,MACpB;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,MACA,MAAM,SAAS;AACd,aAAK,IAAI,QAAQ,SAAS,gBAAgB,UAAU;AAAA,MACrD;AAAA,IACD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,IACN,WAAW;AAAA,EACZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA0BA,QAAQ;AAAA,IACP,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,YAAY;AAChB,iBAAWC,WAAU,QAAQ,aAAa,GAAG;AAC5C,YAAI,CAAC,WAAW;AACf,eAAK,IAAI,YAAY,SAAS,WAAW,OAAO;AAChD,sBAAY;AAAA,QACb;AACA,YAAIA,QAAO,UAAU,YAAY,GAAG;AACnC,eAAK,IAAI,WAAWA,OAAM;AAAA,QAC3B,OAAO;AACN,eAAK,MAAM,EAAC,KAAK,GAAE,GAAGA,SAAQ,SAAS,MAAM,IAAI;AAAA,QAClD;AAAA,MACD;AAAA,IACD;AAAA,IACA,gBAAgBA,SAAQ;AACvB,UAAI,CAAC,KAAK,UAAUA,QAAO,IAAI,KAAKA,QAAO,mBAAmBA,QAAO;AAAY;AACjF,iBAAW,QAAQ,KAAK,OAAO;AAC9B,mBAAW,UAAU,KAAK,QAAQ;AACjC,iBAAO,aAAa;AAAA,QACrB;AAAA,MACD;AACA,WAAK,IAAI,aAAaA,SAAQ,kBAAkB;AAChD,iBAAW,WAAWA,QAAO,aAAa,GAAG;AAC5C,YAAI,QAAQ,UAAU,YAAY,GAAG;AACpC,eAAK,IAAI,WAAW,OAAO;AAAA,QAC5B,OAAO;AACN,eAAK,MAAM,EAAC,KAAK,GAAE,GAAG,SAASA,SAAQ,MAAM,IAAI;AAAA,QAClD;AAAA,MACD;AACA,MAAAA,QAAO,aAAa;AAAA,IACrB;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,aAAaD,SAAQC,SAAQ,MAAM;AAClC,UAAI,KAAK,cAAc,KAAK,gBAAgB,KAAK,iBAAiB;AAAU;AAC5E,YAAM,OAAO,KAAK;AAClB,UAAI,QAAQ,SAAS,SAASD,QAAO,SAAS,EAAE,KAAK,MAAM,QAAQA,QAAO,QAAQ,IAAI,GAAG;AACxF,aAAK,IAAI,UAAUA,SAAQ,cAAc,MAAM,8BAA8B;AAAA,MAC9E;AAAA,IACD;AAAA,IACA,WAAW,SAAS;AACnB,aAAO,KAAK,YAAY;AAAA,IACzB;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,QAAQ;AAAA,IACP,WAAW;AAAA,IACX,kBAAkB;AAAA,IAClB,SAASC,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,YAAW,KAAK,SAAS,SAAS,KAAK,SAAS,SAAS;AACvE,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAWC,SAAQ,wBAAwB;AAAA,QACrD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiBA,SAAQD,SAAQ,MAAM;AACtC,UAAIC,YAAW,KAAK,YAAY,UAAUA,QAAO,SAASD,QAAO;AAAM;AACvE,UAAI,KAAK,SAAS,SAAS,KAAK,SAAS,QAAQ;AAChD,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,KAAK,YAAY,MAAM;AAAA,MAC7C;AAAA,IACD;AAAA,IACA,yBAAyBC,SAAQD,SAAQ,eAAe;AACvD,YAAM,UAAU,KAAK,YAAY;AACjC,UAAI,cAAc,OAAO,YAAY;AACpC,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,SAAS,OAAO;AAAA,MACtC;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,UAAU;AAAA,IACT,WAAW;AAAA,IACX,sBAAsB;AAAA,IACtB,aAAa,SAAS;AACrB,UAAI,QAAQ,QAAQ,SAAS,gBAAgB,QAAQ;AAAa;AAClE,cAAQ,YAAY,mBAAmB;AACvC,WAAK,IAAI,UAAU,SAAS,cAAc,QAAQ,SAAS,IAAI,EAAE,KAAK,GAAG,GAAG,UAAU;AAAA,IACvF;AAAA,IACA,SAAS,SAASC,SAAQ,MAAM;AAC/B,UAAI,KAAK,MAAM;AACd,aAAK,IAAI,WAAW,SAAS,2BAA2B;AACxD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,kBAAkB;AAAA,IAClB,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAIC,QAAO,OAAOA,QAAO,SAAS,UAAUA,QAAO,MAAM,UAAU,OAAO,eAAe,QAAQ;AAChG,aAAK,IAAI,YAAYA,SAAQ,WAAW;AACxC,eAAOA,QAAO,KAAK;AAAA,MACpB;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,YAAM,2BAA2B,KAAK,OAAO,WAAW,KAAK,MAAM,QAAQ;AAC3E,WAAK,MAAM,iBAAiB,wBAAwB;AACpD,UAAI,4BAA4B,IAAI;AACnC,aAAK,MAAM,iBAAiB;AAC5B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,sBAAsB;AAAA,IACtB,aAAa,SAAS;AACrB,UAAI,QAAQ,QAAQ,SAAS,gBAAgB,QAAQ;AAAa;AAClE,cAAQ,YAAY,mBAAmB;AACvC,WAAK,IAAI,UAAU,SAAS,cAAc,QAAQ,SAAS,IAAI,EAAE,KAAK,GAAG,GAAG,UAAU;AAAA,IACvF;AAAA,IACA,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAI,OAAO,OAAO,UAAU;AAC3B,YAAI,CAAC,KAAK;AAAY,gBAAM,IAAI,MAAM,2BAA2B;AACjE,YAAI,KAAK,WAAW,OAAO;AAAY,iBAAO;AAAA,MAC/C;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,YAAM,2BAA2B,KAAK,OAAO,WAAW,KAAK,MAAM,QAAQ;AAC3E,WAAK,MAAM,iBAAiB,wBAAwB;AACpD,UAAI,4BAA4B,IAAI;AACnC,aAAK,MAAM,iBAAiB;AAC5B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,SAAS,QAAQC,SAAQD,SAAQ,QAAQ;AACxC,UAAI,OAAO,OAAO,UAAU;AAC3B,YAAI,CAAC,KAAK;AAAY,gBAAM,IAAI,MAAM,2BAA2B;AACjE,YAAI,KAAK,WAAW,OAAO;AAAY,iBAAO;AAAA,MAC/C;AAAA,IACD;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,aAAa;AAAA,IAC5C;AAAA,IACA,aAAa,MAAM;AAClB,WAAK,gBAAgB;AAAA,IACtB;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,QAAQ;AAAA,IACP,WAAW;AAAA,IACX,oBAAoB;AAAA,IACpB,cAAc,QAAQC,SAAQD,SAAQ,MAAM;AAC3C,UAAI,KAAK,sBAAsB,MAAMA,SAAQC,SAAQ,IAAI,GAAG;AAC3D,aAAK,OAAOD,QAAO,YAAY,GAAGA,SAAQC,OAAM;AAAA,MACjD;AAAA,IACD;AAAA;AAAA;AAAA,IAGA,QAAQ,SAAS;AAChB,cAAQ,YAAY,iBAAiB;AAAA,IACtC;AAAA,IACA,mBAAmBD,SAAQC,SAAQ,MAAM;AACxC,UAAIA,QAAO,UAAU,iBAAiB,GAAG;AACxC,YAAI,KAAK;AAAe,UAAAA,QAAO,eAAe,iBAAiB;AAAA,MAChE,WAAW,CAAC,KAAK;AAAe,QAAAA,QAAO,YAAY,iBAAiB;AAAA,IACrE;AAAA,IACA,MAAM,SAAS;AACd,cAAQ,eAAe,iBAAiB;AAAA,IACzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAiBA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,oBAAoB,aAAa;AAChC,WAAK,MAAM,+BAA+B;AAC1C,aAAO,YAAY,OAAO,YAAU,CAAC,EAAE,OAAO,QAAQ,OAAO,UAAU;AAAA,IACxE;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,aAAa;AAAA,IAC5C;AAAA,IACA,wBAAwB;AAAA,IACxB,eAAe,WAAWD,SAAQC,SAAQ,MAAM;AAC/C,UAAIA,YAAWD,WAAU,KAAK,aAAa,YAAY,CAAC,KAAK;AAAa;AAC1E,UAAI,CAAC,KAAK;AAAa,aAAK,cAAc,KAAK,YAAY;AAAA,eAClD,KAAK,gBAAgB,KAAK,YAAY;AAAQ;AACvD,aAAO,KAAK,YAAY,CAAC,KAAK,eAAe,OAAS,MAAQ,IAAM,CAAC;AAAA,IACtE;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,kBAAkB;AAAA,IAClB,SAAS,QAAQC,SAAQD,SAAQ,QAAQ;AACxC,UAAI,QAAQ,eAAe,UAAUC,QAAO,QAAQ,OAAO,eAAe,CAACA,QAAO,aAAa;AAC9F,aAAK,IAAI,aAAaA,SAAQ,wBAAwB;AACtD,aAAK,YAAY,SAAS;AAC1B,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,cAAcA,SAAQD,SAAQ,MAAM;AACnC,UAAI,CAACC,WACIA,QAAO,QAAQ,OAAO,eAAeA,QAAO,eAAe,CAACA,QAAO,YAAY,KAAK,IAAI;AAAG;AACpG,YAAM,SAASA,QAAO,UAAU,YAAY,KAAK,CAAC,KAAK,MAAM,WAAW,KAAK,CAAE,KAAK;AACpF,UAAI;AAAQ;AACZ,aAAO;AAAA,IACR;AAAA,IACA,gBAAgB,SAASA,SAAQ,MAAM,MAAM;AAC5C,UAAI,CAACA,WACIA,QAAO,QAAQ,OAAO,eAAeA,QAAO,eAAe,CAACA,QAAO,YAAY,KAAK,IAAI;AAAG;AACpG,YAAM,SAASA,QAAO,UAAU,YAAY,KAAK,CAAC,KAAK,MAAM,WAAW,KAAK,CAAE,KAAK;AACpF,UAAI;AAAQ;AACZ,aAAO;AAAA,IACR;AAAA,IACA,SAAS,SAAS;AACjB,UAAI,QAAQ,QAAQ,OAAO,eAAe,KAAK,YAAY,QAAQ;AAGlE,gBAAQ,YAAY,qBAAqB,KAAK,QAAQ,IAAI;AAC1D,aAAK,IAAI,UAAU,SAAS,cAAc,QAAQ,SAAS,IAAI,EAAE,KAAK,GAAG,GAAG,UAAU;AACtF,aAAK,OAAO,QAAQ,YAAY,GAAG,SAAS,SAAS,KAAK,IAAI,QAAQ,IAAI,mBAAmB,CAAC;AAAA,MAC/F;AAAA,IACD;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,gBAAQ,YAAY,YAAY;AAAA,MACjC,WAAW,CAAC,QAAQ,UAAU,YAAY,GAAG,aAAa;AACzD,gBAAQ,eAAe,YAAY;AAAA,MACpC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,YAAY;AACrC,WAAK,IAAI,QAAQ,SAAS,eAAe,UAAU;AAAA,IACpD;AAAA,IACA,OAAO;AAAA,MACN,cAAc;AAAA,MAAG,YAAY;AAAA,MAAG,WAAW;AAAA,MAAG,SAAS;AAAA,MAAG,eAAe;AAAA,MAAG,cAAc;AAAA,MAC1F,WAAW;AAAA,MAAG,aAAa;AAAA,IAC5B;AAAA,IACA,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,iBAAiB;AAAA,IAChB,WAAW;AAAA,IACX,wBAAwB;AAAA,IACxB,eAAe,KAAK,UAAU,UAAU,MAAM;AAC5C,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAI,SAAS,OAAO,aAAa,KAAK,SAAS,gBAAgB,KAAK,CAAC,KAAK,YAAY;AAAU;AAChG,UAAI,CAAC,KAAK;AAAmB,aAAK,oBAAoB;AAAA,eAC7C,KAAK,sBAAsB;AAAe;AACnD,iBAAW,WAAW;AAAA,QAAC;AAAA;AAAA,QAAkC;AAAA,QAAe;AAAA,QAAiB;AAAA,QAAa;AAAA,QAC/F;AAAA,QAAc;AAAA,QAAc;AAAA,QAAkB;AAAA,QAAc;AAAA,QAAe;AAAA,QAC3E;AAAA,QAAgB;AAAA,QAAkB;AAAA,QAAiB;AAAA,QAAqB;AAAA,MAAgB,GAAG;AACjG,YAAI,SAAS,WAAW,OAAO,GAAG;AACjC,eAAK,UAAU,UAAU,YAAY,KAAK,UAAU,UAAU,gBAAgB,KAAK,UAAU,UAAU,OAAO,IAAI,aAAa;AAAO;AACtI,eAAK,MAAM,yBAAyB;AACpC,iBAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,QACrC;AAAA,MACD;AAAA,IACF;AAAA,IACA,wBAAwB;AAAA,IACxB,eAAe,KAAK,UAAU,UAAU,MAAM;AAC5C,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAI,SAAS,OAAO,aAAa,KAAK,SAAS,gBAAgB,KAAK,CAAC,KAAK,YAAY;AAAU;AAChG,UAAI,CAAC,KAAK;AAAmB,aAAK,oBAAoB;AAAA,eAC7C,KAAK,sBAAsB;AAAe;AACnD,iBAAW,WAAW;AAAA,QAAC;AAAA;AAAA,QAAkC;AAAA,QAAe;AAAA,QAAiB;AAAA,QAAa;AAAA,QAC/F;AAAA,QAAc;AAAA,QAAc;AAAA,QAAkB;AAAA,QAAc;AAAA,QAAe;AAAA,QAC3E;AAAA,QAAgB;AAAA,QAAkB;AAAA,QAAiB;AAAA,QAAqB;AAAA,MAAgB,GAAG;AACjG,YAAI,SAAS,WAAW,OAAO,GAAG;AACjC,eAAK,UAAU,UAAU,YAAY,KAAK,UAAU,UAAU,gBAAgB,KAAK,UAAU,UAAU,OAAO,IAAI,aAAa;AAAO;AACtI,eAAK,MAAM,yBAAyB;AACpC,iBAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,QACrC;AAAA,MACD;AAAA,IACF;AAAA,IACA,wBAAwB;AAAA,IACxB,eAAe,KAAK,UAAU,UAAU,MAAM;AAC5C,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAI,SAAS,OAAO,aAAa,KAAK,SAAS,gBAAgB,KAAK,CAAC,KAAK,YAAY;AAAU;AAChG,UAAI,CAAC,KAAK;AAAmB,aAAK,oBAAoB;AAAA,eAC7C,KAAK,sBAAsB;AAAe;AACnD,iBAAW,WAAW;AAAA,QAAC;AAAA;AAAA,QAAkC;AAAA,QAAe;AAAA,QAAiB;AAAA,QAAa;AAAA,QAC/F;AAAA,QAAc;AAAA,QAAc;AAAA,QAAkB;AAAA,QAAc;AAAA,QAAe;AAAA,QAC3E;AAAA,QAAgB;AAAA,QAAkB;AAAA,QAAiB;AAAA,QAAqB;AAAA,MAAgB,GAAG;AACjG,YAAI,SAAS,WAAW,OAAO,GAAG;AACjC,eAAK,UAAU,UAAU,YAAY,KAAK,UAAU,UAAU,gBAAgB,KAAK,UAAU,UAAU,OAAO,GAAG,aAAa;AAAO;AACrI,eAAK,MAAM,yBAAyB;AACpC,iBAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,QACrC;AAAA,MACD;AAAA,IACF;AAAA,IACA,wBAAwB;AAAA,IACxB,eAAe,KAAK,UAAU,UAAU,MAAM;AAC5C,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAI,SAAS,OAAO,aAAa,KAAK,SAAS,gBAAgB,KAAK,CAAC,KAAK,YAAY;AAAU;AAChG,UAAI,CAAC,KAAK;AAAmB,aAAK,oBAAoB;AAAA,eAC7C,KAAK,sBAAsB;AAAe;AACnD,iBAAW,WAAW;AAAA,QAAC;AAAA;AAAA,QAAkC;AAAA,QAAe;AAAA,QAAiB;AAAA,QAAa;AAAA,QAC/F;AAAA,QAAc;AAAA,QAAc;AAAA,QAAkB;AAAA,QAAc;AAAA,QAAe;AAAA,QAC3E;AAAA,QAAgB;AAAA,QAAkB;AAAA,QAAiB;AAAA,QAAqB;AAAA,MAAgB,GAAG;AACjG,YAAI,SAAS,WAAW,OAAO,GAAG;AACjC,eAAK,UAAU,UAAU,YAAY,KAAK,UAAU,UAAU,gBAAgB,KAAK,UAAU,UAAU,OAAO,IAAI,aAAa;AAAO;AACtI,eAAK,MAAM,yBAAyB;AACpC,iBAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,QACrC;AAAA,MACD;AAAA,IACF;AAAA;AAAA,IAEA,WAAW,SAAS;AACnB,WAAK,IAAI,YAAY,SAAS,iBAAiB;AAC/C,WAAK,YAAY,WAAW;AAAA,IAC7B;AAAA,IACA,QAAQ,SAAS;AAChB,UAAI,KAAK,YAAY;AAAU;AAC/B,WAAK,IAAI,YAAY,SAAS,iBAAiB;AAC/C,WAAK,YAAY,WAAW;AAAA,IAC7B;AAAA,IACA,QAAQ;AACP,WAAK,YAAY,WAAW;AAAA,IAC7B;AAAA,IACA,OAAO,EAAC,WAAW,GAAG,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAChH,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EAEA,UAAU;AAAA,IACT,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,UAAU,SAAS,UAAU,YAAY,GAAG;AAC7D,aAAK,MAAM,qBAAqB;AAChC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,UAAU,SAAS,UAAU,YAAY,GAAG;AAC7D,aAAK,MAAM,qBAAqB;AAChC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AACzB,UAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,gBAAQ,YAAY,YAAY;AAAA,MACjC,WAAW,CAAC,QAAQ,UAAU,YAAY,GAAG,aAAa;AACzD,gBAAQ,eAAe,YAAY;AAAA,MACpC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,YAAY;AACrC,WAAK,IAAI,QAAQ,SAAS,eAAe,UAAU;AAAA,IACpD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,YAAY,SAAS;AACpB,cAAQ,KAAK,QAAQ,YAAY,CAAC;AAAA,IACnC;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AACzB,UAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,gBAAQ,YAAY,YAAY;AAAA,MACjC,WAAW,CAAC,QAAQ,UAAU,YAAY,GAAG,aAAa;AACzD,gBAAQ,eAAe,YAAY;AAAA,MACpC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,YAAY;AACrC,WAAK,IAAI,QAAQ,SAAS,eAAe,UAAU;AAAA,IACpD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK;AAChB,aAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,IACrC;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK;AAChB,aAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,IACrC;AAAA,IACA,gCAAgC;AAAA,IAChC,uBAAuB,UAAU;AAChC,UAAI,OAAO,aAAa;AAAU;AAClC,WAAK,MAAM,iCAAiC;AAC5C,aAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,IACrC;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,YAAY,SAAS;AAMpB,UAAI,QAAQ,KAAK,OAAO,WAAW,KAC1B,QAAQ,aAAa,QAAQ,QAAQ,aAAa;AAAO;AAElE,YAAM,WAAW,CAAC;AAClB,UAAI,cAAc;AAClB,iBAAW,WAAW,QAAQ,KAAK,QAAQ;AAE1C,YAAI,CAAC,WAAW,CAAC,QAAQ,QAAQ;AAEhC;AAAA,QACD;AACA,YAAI,QAAQ,UAAU;AAErB;AAAA,QACD;AACA,cAAM,UAAU,QAAQ;AAExB,YAAI,CAAC,OAAO,OAAO,QAAQ,SAAS,EAAE,SAAS,cAAc,KAAK,CAAC,OAAO,OAAO,QAAQ,SAAS,EAAE,SAAS,mBAAmB,KAAK,CAAC,OAAO,OAAO,QAAQ,SAAS,EAAE,SAAS,YAAY,GAAG;AAE9L;AAAA,QACD;AAEA,YAAI,CAAC,QAAQ,UAAU,GAAG,KAAK,CAAC,QAAQ,UAAU,GAAG,GAAG;AAEvD;AAAA,QACD;AAEA,YAAI,YAAY,WAAW,CAAC,KAAK,MAAM,WAAW,OAAO,GAAG;AAE3D;AAAA,QACD;AAEA,YAAI,QAAQ,WAAW,CAAC,eAAc,cAAa,kBAAkB,CAAC,GAAG;AAExE,mBAAS,KAAK,OAAO;AAAA,QACtB,OAAO;AAEN;AAAA,QACD;AAAA,MACD;AAEA,UAAI,CAAC,SAAS,UAAU,CAAC,aAAa;AAErC,mBAAW,QAAQ,UAAU;AAC5B,eAAK,WAAW;AAAA,QACjB;AAAA,MACD,OAAO;AAIN,aAAK,IAAI,YAAY,MAAM,SAAS,SAAS,SAAS,QAAQ,KAAK,OAAO,iBAAiB,SAAS,WAAW,IAAI,QAAQ,UAAU,0BAA0B;AAE/J,mBAAW,QAAQ,UAAU;AAC5B,eAAK,WAAW;AAAA,QACjB;AAAA,MACD;AAAA,IACD;AAAA,IACA,YAAY,SAAS;AACpB,UAAI,CAAC,QAAQ,QAAQ;AACpB,gBAAQ,KAAK,QAAQ,YAAY,CAAC;AAClC;AAAA,MACD;AACA,UAAI,QAAQ,aAAa;AAAW,gBAAQ,WAAW;AACvD,UAAI,QAAQ;AAAU,aAAK,IAAI,eAAe,SAAS,QAAQ,QAAQ,4BAA4B;AACnG,cAAQ,UAAU,EAAE;AAGpB,cAAQ,aAAR,QAAQ,WAAa;AAAA,IACtB;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,qBAAqB;AAAA,IACpB,WAAW;AAAA,IACX,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,YAAY;AAClD,YAAI,CAAC,KAAK,KAAKC,QAAO,YAAU,CAAC,GAAG;AACnC,eAAK,IAAI,WAAWA,SAAQ,sCAAsC;AAAA,QACnE;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,YAAY,QAAQA,SAAQD,SAAQ,QAAQ;AAC3C,UAAI,OAAO,OAAO;AAAO;AACzB,UAAK,QAAiB,UAAU,CAAC,KAAK,KAAKC,QAAO,YAAU,CAAC,GAAG;AAC/D,aAAK,IAAI,WAAWA,SAAQ,sCAAsC;AAAA,MACnE;AACA,aAAO;AAAA,IACR;AAAA,IACA,SAAS,SAAS;AACjB,UAAI,QAAQ,WAAW,OAAO;AAC7B,aAAK,IAAI,aAAa,SAAS,+BAA+B;AAC9D,aAAK,KAAK,OAAO,YAAU,CAAC;AAC5B,gBAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,cAAc,QAAQA,SAAQD,SAAQ,MAAM;AAC3C,UAAI,CAACA,QAAO,UAAU,SAAS,KACrB,CAAC,KAAK,gBACN,KAAK,aAAa,GAAG,EAAE,GAAG;AAClC,QAAAA,QAAO,YAAY,WAAW,KAAK,YAAY,MAAM;AAAA,MACtD;AAAA,IAEF;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,UAAU;AAAA,IACT,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,KAAK,mBAAmB,OAAO;AAAG;AACtC,WAAK,IAAI,YAAY,SAAS,UAAU;AACxC,WAAK,IAAI,YAAY,6BAA6B,QAAQ,sDAAsD;AAAA,IACjH;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK;AAChB,aAAO,KAAK,YAAY,GAAG;AAAA,IAC5B;AAAA,IACA,eAAe,KAAKA,SAAQC,SAAQ,MAAM;AACzC,UAAID,QAAO,WAAW,UAAU;AAAG;AACnC,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAI,CAAC,KAAK;AAAW,aAAK,YAAY;AAAA,eAC7B,KAAK,cAAc;AAAe;AAC3C,WAAK,MAAM,mBAAmB;AAC9B,aAAO,KAAK,YAAY,GAAG;AAAA,IAC5B;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,YAAY;AAChB,iBAAWC,WAAU,QAAQ,aAAa,GAAG;AAC5C,YAAI,CAAC,WAAW;AACf,eAAK,IAAI,YAAY,SAAS,gBAAgB,OAAO;AACrD,sBAAY;AAAA,QACb;AACA,YAAIA,QAAO,UAAU,YAAY,GAAG;AACnC,eAAK,IAAI,WAAWA,OAAM;AAAA,QAC3B,OAAO;AACN,eAAK,MAAM,EAAC,KAAK,GAAE,GAAGA,SAAQ,SAAS,MAAM,IAAI;AAAA,QAClD;AAAA,MACD;AAAA,IACD;AAAA,IACA,cAAc,QAAQA,SAAQD,SAAQ,MAAM;AAC3C,UAAI,KAAK,MAAM,SAAS,KAAK,KAAK,aAAa,GAAG,EAAE,GAAG;AACrD,QAAAA,QAAO,aAAa,OAAOC,OAAM;AAAA,MACnC;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAI,OAAO,OAAO,UAAU;AAC3B,YAAI,CAAC,KAAK;AAAY,gBAAM,IAAI,MAAM,2BAA2B;AACjE,YAAI,KAAK,WAAW,OAAO;AAAY,iBAAO;AAAA,MAC/C;AAAA,IACD;AAAA,IACA,aAAa,MAAM;AAClB,UAAI,CAAC,QAAQ,EAAE,KAAK,UAAU,KAAK,mBAAmB,KAAK,WAAW;AAAQ;AAC9E,OAAC,KAAK,gBAAL,KAAK,cAAgB,CAAC,IAAG,KAAK;AAAA,QAC9B,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,SAAS,KAAK,IAAI,UAAU,IAAI,YAAY;AAAA,MAC7C,CAAC;AAAA,IACF;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,gBAAgB;AAAA,IACf,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AACxE,UAAI,CAAC,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC7C,aAAK,IAAI,YAAY,SAAS,iBAAiB;AAC/C,aAAK,IAAI,YAAY,GAAG,QAAQ,0BAA0B;AAAA,MAC3D;AAAA,IACD;AAAA,IACA,aAAa,MAAM;AAClB,WAAK,gBAAgB;AAAA,IACtB;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AACzB,UAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,gBAAQ,YAAY,gBAAgB;AAAA,MACrC,WAAW,CAAC,QAAQ,UAAU,gBAAgB,GAAG,aAAa;AAC7D,gBAAQ,eAAe,gBAAgB;AAAA,MACxC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,gBAAgB;AACzC,WAAK,IAAI,QAAQ,SAAS,eAAe,UAAU;AAAA,IACpD;AAAA,IACA,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ,SAASA,SAAQ,QAAQ;AAChC,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAa,SAAS,4BAA4B,YAAY;AACvE,eAAK,IAAI,YAAY,GAAG,QAAQ,gEAAgE;AAAA,QACjG,OAAO;AACN,eAAK,IAAI,aAAa,SAAS,0BAA0B;AACzD,eAAK,IAAI,YAAY,6BAA6B,QAAQ,qCAAqC;AAAA,QAChG;AACA,aAAK,YAAY,WAAW,QAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAU,SAAS,eAAe,KAAK,YAAY,QAAQ;AAAA,MACrE;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,2BAA2B;AACtC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,2BAA2B;AACtC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,2BAA2B;AACtC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,2BAA2B;AACtC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,mBAAWC,WAAU,QAAQ,KAAK,GAAG;AACpC,cAAIA,QAAO,WAAW,iBAAiB,GAAG;AACzC,iBAAK,MAAM,oCAAoC;AAC/C;AAAA,UACD;AAAA,QACD;AACA,aAAK,MAAM,2BAA2B;AACtC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,MACA,MAAM,SAAS;AACd,aAAK,IAAI,QAAQ,SAAS,aAAa;AAAA,MACxC;AAAA,IACD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,wBAAwB;AAAA,IACxB,eAAe,UAAU;AACxB,aAAO,WAAW;AAAA,IACnB;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AAEzB,UAAI,KAAK,MAAM,UAAU,UAAU,GAAG;AACrC,gBAAQ,YAAY,cAAc;AAAA,MACnC,WAAW,CAAC,QAAQ,UAAU,cAAc,GAAG,aAAa;AAC3D,gBAAQ,eAAe,cAAc;AAAA,MACtC;AAAA,IACD;AAAA,IACA,SAAS,SAAS;AACjB,UAAI,EAAE,QAAQ,UAAU,cAAc,GAAG,eAAe,QAAQ,UAAU,cAAc,GAAG,mBAAmB,CAAC,KAAK,MAAM,UAAU,UAAU,GAAG;AAChJ,gBAAQ,eAAe,cAAc;AAAA,MACtC;AAAA,IACD;AAAA,IACA,gBAAgBD,SAAQC,SAAQ,MAAM;AACrC,UAAI,KAAK,cAAcD,YAAWC;AAAQ;AAC1C,YAAM,OAAO,KAAK,YAAY;AAC9B,UAAI,KAAK,UAAU,cAAc,KAAK,CAAC,KAAK,UAAU,cAAc,EAAE;AAAgB;AACtF,UAAI;AACJ,UAAID,YAAW,MAAM;AACpB,qBAAaC,QAAO,UAAU;AAAA,MAC/B,WAAWA,YAAW,MAAM;AAC3B,qBAAaD,QAAO,UAAU;AAAA,MAC/B;AAAO;AAEP,UAAI,KAAK,UAAU,IAAI,YAAY;AAClC,YAAI,KAAK,UAAU,cAAc;AAAG;AACpC,aAAK,YAAY,cAAc;AAC/B,aAAK,UAAU,cAAc,EAAE,iBAAiB;AAAA,MACjD,WAAW,KAAK,UAAU,cAAc,GAAG;AAC1C,YAAI,KAAK,MAAM,UAAU,UAAU,GAAG;AACrC,eAAK,UAAU,cAAc,EAAE,iBAAiB;AAAA,QACjD,OAAO;AACN,eAAK,eAAe,cAAc;AAAA,QACnC;AAAA,MACD;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,cAAc;AACvC,WAAK,IAAI,QAAQ,SAAS,kBAAkB,UAAU;AAAA,IACvD;AAAA,IACA,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ,SAASA,SAAQ,QAAQ;AAChC,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAa,SAAS,2BAA2B,YAAY;AAAA,QACvE,OAAO;AACN,eAAK,IAAI,aAAa,SAAS,yBAAyB;AAAA,QACzD;AACA,aAAK,YAAY,WAAW,QAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAU,SAAS,mBAAmB,KAAK,YAAY,QAAQ;AAAA,MACzE;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,mBAAWC,WAAU,QAAQ,KAAK,GAAG;AACpC,cAAIA,QAAO,WAAW,iBAAiB,GAAG;AACzC,iBAAK,MAAM,oCAAoC;AAC/C;AAAA,UACD;AAAA,QACD;AACA,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,MACA,MAAM,SAAS;AACd,aAAK,IAAI,QAAQ,SAAS,gBAAgB;AAAA,MAC3C;AAAA,IACD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,SAAS,GAAG;AAC1B,aAAK,MAAM,oBAAoB;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,aAAa,MAAM;AAClB,UAAI,CAAC,QAAQ,CAAC,KAAK,MAAM,SAAS,KAAK,KAAK,WAAW;AAAQ;AAC/D,OAAC,KAAK,gBAAL,KAAK,cAAgB,CAAC,IAAG,KAAK;AAAA,QAC9B,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,SAAS,KAAK,IAAI,UAAU,IAAI,aAAa;AAAA,MAC9C,CAAC;AAAA,IACF;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,kBAAkB;AAAA,IACjB,WAAW;AAAA,IACX,YAAY,SAAS;AAMpB,UAAI,QAAQ,KAAK,OAAO,WAAW,KAC1B,QAAQ,aAAa,QAAQ,QAAQ,aAAa;AAAO;AAElE,YAAM,WAAW,CAAC;AAClB,UAAI,cAAc;AAClB,iBAAW,WAAW,QAAQ,KAAK,QAAQ;AAE1C,YAAI,CAAC,WAAW,CAAC,QAAQ,QAAQ;AAEhC;AAAA,QACD;AACA,YAAI,QAAQ,UAAU;AAErB;AAAA,QACD;AACA,cAAM,UAAU,QAAQ;AAExB,YAAI,CAAC,OAAO,OAAO,QAAQ,SAAS,EAAE,SAAS,cAAc,KAAK,CAAC,OAAO,OAAO,QAAQ,SAAS,EAAE,SAAS,mBAAmB,KAAK,CAAC,OAAO,OAAO,QAAQ,SAAS,EAAE,SAAS,YAAY,GAAG;AAE9L;AAAA,QACD;AAEA,YAAI,CAAC,QAAQ,UAAU,GAAG,KAAK,CAAC,QAAQ,UAAU,GAAG,GAAG;AAEvD;AAAA,QACD;AAEA,YAAI,YAAY,WAAW,CAAC,KAAK,MAAM,WAAW,OAAO,GAAG;AAE3D;AAAA,QACD;AAEA,YAAI,QAAQ,WAAW,CAAC,oBAAmB,eAAc,YAAY,CAAC,GAAG;AAExE,mBAAS,KAAK,OAAO;AAAA,QACtB,OAAO;AAEN;AAAA,QACD;AAAA,MACD;AAEA,UAAI,CAAC,SAAS,UAAU,CAAC,aAAa;AAErC,mBAAW,QAAQ,UAAU;AAC5B,eAAK,WAAW;AAAA,QACjB;AAAA,MACD,OAAO;AAIN,aAAK,IAAI,YAAY,MAAM,SAAS,SAAS,SAAS,QAAQ,KAAK,OAAO,iBAAiB,SAAS,WAAW,IAAI,QAAQ,UAAU,0BAA0B;AAE/J,mBAAW,QAAQ,UAAU;AAC5B,eAAK,WAAW;AAAA,QACjB;AAAA,MACD;AAAA,IACD;AAAA,IACA,YAAY,SAAS;AACpB,UAAI,CAAC,QAAQ;AAAQ;AAIrB,UAAI,QAAQ,aAAa;AAAW,gBAAQ,WAAW;AAEvD,UAAI,QAAQ;AAAU,aAAK,IAAI,eAAe,SAAS,QAAQ,QAAQ,mCAAmC;AAC1G,cAAQ,UAAU,EAAE;AAIpB,cAAQ,aAAR,QAAQ,WAAa;AAAA,IACtB;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,mBAAmB;AAAA,IAClD;AAAA,IACA,WAAWA,SAAQD,SAAQ;AAC1B,UAAIC,QAAO,SAASD,QAAO;AAAM;AACjC,aAAO;AAAA,IACR;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,gBAAgB;AAAA,IACf,WAAW;AAAA,IACX,SAAS,SAAS;AACjB,UAAI,QAAQ,WAAW,OAAO;AAC7B,aAAK,IAAI,aAAa,SAAS,2BAA2B;AAC1D,gBAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,YAAY,QAAQC,SAAQD,SAAQ,QAAQ;AAC3C,UAAI,OAAO,OAAO;AAAO;AACzB,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAWC,SAAQ,kCAAkC;AAAA,MAC/D;AACA,aAAO;AAAA,IACR;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAIA,WAAUC,YAAWD;AAAQ;AACjC,UAAI,UAAU;AACd,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,iBAAO,MAAM,CAAC;AACd,oBAAU;AAAA,QACX;AAAA,MACD;AACA,UAAI,WAAW,CAAE,OAAsB,eAAe,OAAO,OAAO,YAAY;AAC/E,aAAK,IAAI,SAASC,SAAQ,WAAW,oCAAoC,UAAUA,OAAM;AAAA,MAC1F;AAAA,IACD;AAAA,IACA,iBAAiB,QAAQA,SAAQ;AAChC,UAAI,OAAO,OAAO,QAAQ;AACzB,aAAK,IAAI,WAAWA,SAAQ,kCAAkC;AAC9D,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,kBAAkB;AAAA,IACjB,WAAW;AAAA,IACX,oBAAoB;AAAA,IACpB,cAAc,QAAQA,SAAQD,SAAQ,MAAM;AAC3C,MAAAC,QAAO,YAAY,YAAY;AAAA,IAChC;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,UAAUC,QAAO,QAAQ,MAAM,GAAG;AACxE,aAAK,WAAW;AAChB,YAAI,CAACA,QAAO,YAAY,eAAe,GAAG;AACzC,eAAK,IAAI,UAAUA,SAAQ,2BAA2B,UAAUA,OAAM;AACtE,eAAK,IAAI,YAAY,GAAGA,QAAO,uCAAuC;AAAA,QACvE;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiBA,SAAQD,SAAQ,MAAM;AACtC,UAAI,CAACC,QAAO,OAAOD,OAAM,KAAK,KAAK,SAAS,UAAUC,QAAO,QAAQ,MAAM,GAAG;AAC7E,aAAK,WAAW;AAChB,cAAM,eAAe,KAAK,YAAY;AACtC,YAAI,CAAC,aAAa,YAAY,eAAe,GAAG;AAC/C,eAAK,IAAI,UAAUA,SAAQ,2BAA2B,UAAU,YAAY;AAC5E,eAAK,IAAI,YAAY,GAAGA,QAAO,uCAAuC;AAAA,QACvE;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,eAAe,OAAOA,SAAQD,SAAQ,QAAQ;AAC7C,UAAKA,WAAUC,YAAWD,WAAW,CAACC,QAAO,QAAQ,MAAM;AAAG;AAC9D,UAAI,UAAU;AACd,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,iBAAO,MAAM,CAAC;AACd,oBAAU;AAAA,QACX;AAAA,MACD;AACA,UAAI,WAAW,CAAE,OAAsB,aAAa;AACnD,cAAM,eAAe,KAAK,YAAY;AACtC,YAAI,CAAC,aAAa,YAAY,eAAe,GAAG;AAC/C,eAAK,IAAI,UAAUA,SAAQ,2BAA2B,UAAU,YAAY;AAC5E,eAAK,IAAI,YAAY,GAAGA,QAAO,uCAAuC;AAAA,QACvE;AAAA,MACD;AAAA,IACD;AAAA,IACA,gBAAgB,QAAQA,SAAQD,SAAQ,QAAQ;AAC/C,UAAIA,WAAUC,YAAWD,WAAU,UAAU,OAAO,OAAO,UAAUC,QAAO,QAAQ,MAAM,GAAG;AAC5F,aAAK,MAAM,4CAA4C;AACvD,YAAI,OAAO,SAAS,iBAAkB,OAAO,eAAe,UAAU,CAAC,OAAO,aAAc;AAC3F,gBAAM,eAAe,KAAK,YAAY;AACtC,cAAI,CAAC,aAAa,YAAY,eAAe,GAAG;AAC/C,iBAAK,IAAI,UAAUA,SAAQ,2BAA2B,UAAU,YAAY;AAC5E,iBAAK,IAAI,YAAY,GAAGA,QAAO,uCAAuC;AAAA,UACvE;AAAA,QACD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,qBAAqB,QAAQA,SAAQ;AACpC,UAAI,OAAO,OAAO,UAAUA,QAAO,QAAQ,MAAM,GAAG;AACnD,aAAK,MAAM,8BAA8B;AACzC,cAAM,eAAe,KAAK,YAAY;AACtC,YAAI,CAAC,aAAa,YAAY,eAAe;AAAG,eAAK,IAAI,UAAUA,SAAQ,2BAA2B,UAAU,YAAY;AAC5H,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,cAAQ,eAAe,eAAe;AAAA,IACvC;AAAA,IACA,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQA,SAAQ;AACf,aAAK,IAAI,YAAYA,SAAQA,QAAO,WAAW,EAAE,IAAI;AACrD,aAAK,IAAI,UAAUA,SAAQ,cAAc,UAAU;AACnD,aAAK,IAAI,YAAY,gBAAgBA,QAAO,8BAA8B;AAAA,MAC3E;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,YAAI,KAAK,SAAS,UAAU,SAAS,WAAW,CAAC,iBAAgB,iBAAiB,CAAC,GAAG;AACrF,eAAK,MAAM,sBAAsB;AACjC,iBAAO,KAAK,YAAY,GAAG;AAAA,QAC5B;AAAA,MACD;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,YAAI,KAAK,SAAS,UAAU,SAAS,WAAW,CAAC,iBAAgB,iBAAiB,CAAC,GAAG;AACrF,eAAK,MAAM,sBAAsB;AACjC,iBAAO,KAAK,YAAY,GAAG;AAAA,QAC5B;AAAA,MACD;AAAA,MACA,MAAMA,SAAQ;AACb,aAAK,IAAI,QAAQA,SAAQ,cAAc,UAAU;AAAA,MAClD;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,QAAQD,SAAQ;AACf,WAAK,MAAM,WAAW,MAAM;AAAA,IAC7B;AAAA,IACA,aAAa,MAAM;AAClB,UAAI,KAAK,MAAM,SAAS;AAAG,eAAO,KAAK,MAAM,SAAS;AAAA,IACvD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,SAAS;AAAA,IACR,WAAW;AAAA,IACX,iBAAiB,QAAQ,SAAS;AACjC,YAAM,cAAc,KAAK,YAAY;AACrC,UAAI,gBAAgB;AAAS;AAC7B,UAAI,gBAAgB,KAAK,eAAe;AACvC,YAAI,YAAY,KAAK;AAAc;AACnC,eAAO,KAAK,IAAI;AAChB,eAAO,KAAK,IAAI;AAChB,eAAO,SAAS,IAAI;AAAA,MACrB,WACS,YAAY,KAAK,iBAAiB,gBAAgB,KAAK,cAAc;AAC7E,eAAO,KAAK,IAAI;AAChB,eAAO,KAAK,IAAI;AAChB,eAAO,KAAK,IAAI;AAChB,eAAO,UAAU,IAAI;AAAA,MACtB;AAAA,IACD;AAAA,IACA,SAAS,SAAS;AACjB,UAAI,QAAQ,WAAW,OAAO;AAC7B,aAAK,IAAI,aAAa,SAAS,kBAAkB;AACjD,gBAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,YAAY,QAAQC,SAAQD,SAAQ,QAAQ;AAC3C,UAAI,OAAO,OAAO;AAAO;AACzB,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAWC,SAAQ,yBAAyB;AAAA,MACtD;AACA,aAAO;AAAA,IACR;AAAA,IACA,iBAAiB,QAAQA,SAAQ;AAChC,UAAI,OAAO,OAAO,QAAQ;AACzB,aAAK,IAAI,WAAWA,SAAQ,yBAAyB;AACrD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,SAAS;AAAA,IACR,WAAW;AAAA,IACX,kBAAkB,WAAW;AAC5B,aAAO,YAAY;AAAA,IACpB;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAI,CAAC,cAAa,WAAU,eAAc,gBAAe,kBAAiB,gBAAgB,EAAE,SAAS,OAAO,IAAI,KAAK,MAAM,KAAK;AAC/H,eAAO,MAAM;AACb,aAAK,IAAI,SAASC,SAAQ,WAAW,UAAU,4BAA4B,UAAUA,OAAM;AAAA,MAC5F,WAAW,OAAO,SAAS,kBAAkB,MAAM,KAAK;AACvD,eAAO,MAAM;AACb,aAAK,IAAI,SAASA,SAAQ,WAAW,SAAS,4BAA4B,UAAUA,OAAM;AAAA,MAC3F;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,WAAW,MAAM,SAASD,SAAQ;AACjC,UAAI,CAAC,KAAK;AAAY,cAAM,IAAI,MAAM,2BAA2B;AACjE,UAAI,CAAC,QAAQ,MAAM,QAAQ,SAAS;AAAc;AAClD,UAAKA,WAAUA,YAAW,WAAY,KAAK,WAAW,OAAO,YAAY;AACxE,aAAK,IAAI,aAAa,SAAS,sBAAsB;AACrD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,eAAe;AAAA,IACf,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,WAAW,OAAOC,SAAQD,SAAQ,QAAQ;AACzC,UAAIA,WAAUC,YAAWD;AAAQ;AACjC,UAAI,MAAM,WAAW,MAAM,UAAU,GAAG;AACvC,eAAO,MAAM;AACb,YAAI,CAAE,OAAsB,aAAa;AACxC,eAAK,IAAI,SAASC,SAAQ,WAAW,YAAY,iCAAiC,UAAUA,OAAM;AAAA,QACnG;AAAA,MACD;AAAA,IACD;AAAA,IACA,iBAAiB,QAAQ,SAAS;AACjC,UAAI,OAAO,OAAO;AAAU,eAAO;AAAA,IACpC;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,SAAS;AAAA,IACR,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,SAAS;AACvC,WAAK,IAAI,YAAY,GAAG,QAAQ,6BAA6B;AAAA,IAC9D;AAAA,IACA,aAAa,MAAM;AAClB,WAAK,gBAAgB;AAAA,IACtB;AAAA,IACA,YAAY,KAAK,SAAS;AACzB,UAAI,CAAC,QAAQ,MAAM,EAAE,SAAS,QAAQ,iBAAiB,CAAC,GAAG;AAC1D,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,QAAQD,SAAQ;AACf,WAAK,MAAM,WAAW,WAAW;AAAA,IAClC;AAAA,IACA,aAAa,MAAM,SAAS;AAC3B,UAAI,KAAK,aAAa;AACrB,eAAO,KAAK;AAEZ,eAAO,KAAK;AACZ,YAAI,KAAK,OAAO;AAAuB,iBAAO,KAAK;AAEnD,aAAK,gBAAgB;AAAA,MACtB;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,SAASC,SAAQ,MAAM;AAC7C,UAAI,KAAK;AAAe,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,IAC7D;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,UAAU;AAAA,IACT,WAAW;AAAA,IACX,kBAAkB;AAAA,IAClB,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,CAAC,SAAQ,OAAO,EAAE,SAAS,KAAK,IAAI,GAAG;AAC/D,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAWC,SAAQ,0BAA0B;AAAA,QACvD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiBA,SAAQD,SAAQ,MAAM;AACtC,UAAIA,YAAW,KAAK,YAAY,UAAU,CAACC,QAAO,OAAOD,OAAM;AAAG;AAClE,UAAI,KAAK,SAAS,WAAW,KAAK,SAAS,SAAS;AACnD,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,KAAK,YAAY,MAAM;AAAA,MAC7C;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,SAAS;AAAA,IACR,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,WAAW,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/D,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,WAAW,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/D,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,oBAAoB;AAAA,IACpB,WAAW,SAAS;AACnB,UAAI,QAAQ,UAAU,CAAC,aAAa,eAAe,EAAE,SAAS,QAAQ,iBAAiB,CAAC,GAAG;AAC1F,aAAK,MAAM,SAAS;AACpB,aAAK,IAAI,aAAa,SAAS,mBAAmB;AAClD,gBAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,iBAAWC,WAAU,QAAQ,KAAK,IAAI,QAAQ;AAC7C,YAAI,CAACA,WAAUA,QAAO,WAAW,CAACA,QAAO;AAAM;AAC/C,aAAK,IAAI,SAASA,SAAQA,QAAO,QAAQ,EAAE,MAAM,kCAAkC,UAAU,SAAS,YAAY;AAAA,MACnH;AAAA,IACD;AAAA,IACA,cAAc,QAAQA,SAAQD,SAAQ,MAAM;AAC3C,UAAI,KAAK,SAAS,QAAQ;AACzB,aAAK,MAAM,EAAC,KAAK,EAAC,CAAC;AAAA,MACpB;AAAA,IACD;AAAA,IACA,SAAS,SAAS;AACjB,UAAI,QAAQ,WAAW,OAAO;AAC7B,aAAK,IAAI,aAAa,SAAS,yBAAyB;AACxD,gBAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,YAAY,QAAQC,SAAQD,SAAQ,QAAQ;AAC3C,UAAI,OAAO,OAAO;AAAO;AACzB,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAWC,SAAQ,gCAAgC;AAAA,MAC7D;AACA,aAAO;AAAA,IACR;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,aAAaD,SAAQC,SAAQ,MAAM;AAClC,UAAI,KAAK,YAAY,UACZ,KAAK,cAAc,KAAK,gBAAgB,KAAK,iBAAiB;AAAU;AACjF,YAAM,OAAO,KAAK;AAClB,UAAI,QAAQ,SAAS,SAASD,QAAO,SAAS,EAAE,KAAK,MAAM,QAAQA,QAAO,QAAQ,IAAI,GAAG;AACxF,aAAK,YAAY,SAAS;AAC1B,aAAK,IAAI,UAAUA,SAAQ,cAAc,MAAM,6BAA6B;AAAA,MAC7E;AAAA,IACD;AAAA,IACA,aAAa;AACZ,aAAO,KAAK,YAAY;AAAA,IACzB;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,SAAS;AAAA,IACR,MAAM;AAAA,IACN,WAAW;AAAA,IACX,WAAW,SAAS;AACnB,WAAK,YAAY,cAAc;AAAA,IAChC;AAAA,IACA,QAAQ,SAAS;AAChB,UAAI,QAAQ,KAAK,EAAE;AAAA,QAClB,eAAa,aAAa,UAAU,WAAW,OAAO,KAAK,UAAU,YAAY;AAAA,MAClF,KAAK,QAAQ,QAAQ,OAAO,eAAe;AAC1C,aAAK,YAAY,SAAS;AAAA,MAC3B;AAAA,IACD;AAAA,IACA,SAAS,SAAS;AACjB,UAAI,CAAC,QAAQ,aAAa,KAAK,YAAY,UAAU,CAAC,KAAK,YAAY;AAAa;AACpF,YAAM,kBAAkB,QAAQ,KAAK,EAAE,OAAO,eAAa,aAAa,CAAC,UAAU,WAAW,EAAE,MAAM,SAAS,KAC3G,CAAC,UAAU,WAAW,EAAE,MAAM,eAAe,KAAK,UAAU,WAAW,OAAO,CAAC;AACnF,UAAI,CAAC,gBAAgB;AAAQ;AAC7B,YAAM,OAAQ,gBAAgB,SAAS,IAAK,KAAK,OAAO,gBAAgB,MAAM,IAAI;AAClF,YAAMC,UAAS,gBAAgB,IAAI;AACnC,YAAM,cAAc,QAAQ,WAAW;AACvC,YAAM,UAAUA,QAAO,WAAW;AAClC,UAAI,CAAC,KAAK,SAAS,cAAcA,SAAQ,SAAS,KAAK,QAAQ,WAAW,KACtE,CAAC,KAAK,SAAS,cAAc,SAAS,SAAS,KAAK,QAAQ,OAAO;AAAG;AAC1E,WAAK,IAAI,YAAY,SAAS,SAAS;AACvC,WAAK,IAAI,aAAa,SAAS,oBAAoB,SAAS,aAAa,UAAUA,OAAM;AACzF,WAAK,YAAY,OAAO,aAAa,YAAY,cAAc,OAAO;AACtE,WAAK,YAAY,OAAO,SAAS,QAAQ,cAAcA,OAAM;AAC7D,cAAQ,UAAU,QAAQ;AAC1B,cAAQ,eAAe,EAAC,IAAI,KAAK,KAAK,QAAQ,OAAO,GAAG,QAAQ,QAAO;AACvE,MAAAA,QAAO,UAAU,YAAY;AAC7B,MAAAA,QAAO,eAAe,EAAC,IAAI,KAAK,KAAK,YAAY,EAAE,GAAG,QAAQA,QAAM;AACpE,WAAK,YAAY,SAAS,SAAS,QAAQ,cAAc,OAAO;AAChE,WAAK,YAAY,SAAS,aAAaA,QAAO,cAAcA,OAAM;AAAA,IAEnE;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,WAAW,GAAG,SAAS,EAAC;AAAA,IACjD,QAAQ;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,aAAa,MAAM;AAClB,aAAO,KAAK,MAAM,SAAS;AAAA,IAC5B;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,SAAS,KAAK,SAAS,QAAQ;AAChD,aAAK,MAAM,oBAAoB;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,SAAS,KAAK,SAAS,QAAQ;AAChD,aAAK,MAAM,oBAAoB;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,YAAY,KAAK,SAAS;AACzB,UAAI,KAAK,MAAM,UAAU,WAAW,GAAG;AACtC,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,IACD;AAAA,IACA,WAAW,MAAM,SAAS;AACzB,UAAI,SAAS;AAAa,eAAO;AAAA,IAClC;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AAEzC,UAAI,CAACA,WAAUC,YAAWD,WAAU,CAAC,SAAS,OAAO,SAAS;AAAa;AAC3E,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,KAAKC,QAAO,OAAO,CAAC,IAAI,IAAI;AAC3C,gBAAM,gBAAmC,CAAC;AAC1C,wBAAc,CAAC,IAAI,MAAM,CAAC;AAC1B,iBAAO,MAAM,CAAC;AACd,cAAID,QAAO,IAAI;AACd,iBAAK,IAAI,YAAYC,SAAQ,WAAW;AACxC,iBAAK,MAAM,eAAeD,SAAQC,SAAQ,MAAM,IAAI;AAAA,UACrD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EAEA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,WAAWA,SAAQD,SAAQ;AAC1B,UAAI,CAACC,QAAO,OAAOD,OAAM;AAAG,eAAO;AAAA,IACpC;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,eAAe;AAAA,IAC9C;AAAA,IACA,SAASC,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,cAAc,CAAC,KAAK,eAAe;AACzE,YAAI,CAAC,KAAK,KAAKC,QAAO,YAAY,CAAC,GAAG;AACrC,eAAK,IAAI,WAAWA,SAAQ,+BAA+B;AAAA,QAC5D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,UAAU;AAAA,IACT,WAAW;AAAA,IACX,YAAY,KAAK;AAChB,UAAI,KAAK,MAAM,UAAU,eAAe,GAAG;AAC1C,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,QAAQD,SAAQ;AACf,WAAK,MAAM,WAAW,eAAe;AAAA,IACtC;AAAA,IACA,aAAa,MAAM,SAAS;AAC3B,UAAI,KAAK,aAAa;AACrB,eAAO,KAAK;AAEZ,eAAO,KAAK;AACZ,YAAI,KAAK,OAAO;AAAuB,iBAAO,KAAK;AAEnD,aAAK,gBAAgB;AAAA,MACtB;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,SAASC,SAAQ,MAAM;AAC7C,UAAI,KAAK;AAAe,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,IAC7D;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,qBAAqB,QAAQD,SAAQC,SAAQ,MAAM;AAClD,UAAIA,QAAO,eAAe,IAAI,EAAE,UAAU,GAAG;AAC5C,aAAK,MAAM,2BAA2B;AACtC,eAAO,KAAK,YAAY,IAAI;AAAA,MAC7B;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,eAAe;AAC7C,WAAK,IAAI,YAAY,GAAG,QAAQ,uBAAuB;AAAA,IACxD;AAAA,IACA,aAAa,MAAM;AAClB,WAAK,gBAAgB;AAAA,IACtB;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,YAAM,2BAA2B,KAAK,OAAO,WAAW,KAAK,MAAM,QAAQ;AAC3E,WAAK,MAAM,iBAAiB,wBAAwB;AACpD,UAAI,4BAA4B,IAAI;AACnC,aAAK,MAAM,qBAAqB;AAChC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,SAAS,GAAG;AAC1B,aAAK,MAAM,sBAAsB;AACjC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AAEzB,UAAI,KAAK,MAAM,UAAU,UAAU,GAAG;AACrC,gBAAQ,YAAY,gBAAgB;AAAA,MACrC,WAAW,CAAC,QAAQ,UAAU,gBAAgB,GAAG,aAAa;AAC7D,gBAAQ,eAAe,gBAAgB;AAAA,MACxC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,gBAAgB;AACzC,WAAK,IAAI,QAAQ,SAAS,kBAAkB,UAAU;AAAA,IACvD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAClG,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,KAAK,mBAAmB,OAAO;AAAG;AACtC,WAAK,IAAI,YAAY,SAAS,gBAAgB;AAC9C,WAAK,IAAI,YAAY,GAAG,QAAQ,2EAAwE;AAAA,IACzG;AAAA,IACA,eAAe,KAAKA,SAAQD,SAAQ,MAAM;AACzC,UAAIC,QAAO,WAAW,CAAC,kBAAkB,eAAe,CAAC;AAAG;AAC5D,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAI,CAAC,KAAK,WAAW,WAAW,CAAC,kBAAkB,eAAe,CAAC;AAAG,aAAK,YAAY;AAAA,eAC9E,KAAK,cAAc;AAAe;AAC3C,WAAK,MAAM,yBAAyB;AACpC,aAAO,KAAK,YAAY,IAAI;AAAA,IAC7B;AAAA,IACA,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,SAAS;AAC/C,YAAI,CAAC,KAAK,KAAKC,QAAO,YAAY,CAAC,GAAG;AACrC,eAAK,IAAI,WAAWA,SAAQ,gCAAgC;AAAA,QAC7D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAI,OAAO,eAAe,QAAQ;AACjC,YAAI,OAAO,eAAe;AAAW,eAAK,IAAI,aAAaA,SAAQ,cAAc,OAAO,IAAI;AAC5F,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,aAAa,MAAM,SAAS;AAC3B,UAAI,KAAK,aAAa;AACrB,eAAO,KAAK;AAEZ,eAAO,KAAK;AACZ,YAAI,KAAK,OAAO;AAAuB,iBAAO,KAAK;AAEnD,aAAK,gBAAgB;AAAA,MACtB;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,SAASC,SAAQ,MAAM;AAC7C,UAAI,KAAK;AAAe,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,IAC7D;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,mBAAmB;AAAA,IAClB,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,cAAc,QAAQA,SAAQD,SAAQ,MAAM;AAC3C,UAAI,CAACA,QAAO,MAAM,CAACA,QAAO,YAAYC,QAAO,eAAeA,QAAO,mBAAmB;AAAG;AACzF,UAAI,CAAC,0BAA0B,wBAAwB,EAAE,SAASA,QAAO,QAAQ,EAAE,GAAG;AACrF,aAAK,OAAOD,QAAO,YAAY,GAAGA,SAAQC,OAAM;AAChD,YAAIA,QAAO,QAAQ,OAAO,0BAA0B;AACnD,eAAK,MAAM,EAAC,KAAK,GAAE,GAAGD,SAAQC,SAAQ,MAAM,IAAI;AAAA,QACjD,OAAO;AACN,UAAAD,QAAO,aAAa,OAAOC,SAAQ,IAAI;AAAA,QACxC;AACA,QAAAA,QAAO,YAAY,mBAAmB,IAAI;AAC1C,eAAOA,QAAO,UAAU,mBAAmB;AAAA,MAC5C;AAAA,IACD;AAAA;AAAA,IAEA,sBAAsBA,SAAQD,SAAQ,QAAQ;AAC7C,UACC,QAAQ,OAAO,UAAUA,QAAO,WAAW,mBAAmB,KAC9DA,QAAO,QAAQ,SAAS,sBAAsB,CAACA,QAAO,aACrD;AACD,cAAM,QAAQA,QAAO,MAAMA,QAAO,QAAQ,IAAI,2BAA2B;AACzE,QAAAA,QAAO,YAAY,OAAO,MAAM;AAChC,QAAAA,QAAO,YAAY,mBAAmB;AAAA,MACvC;AAAA,IACD;AAAA,IACA,gBAAgB,SAAS;AAExB,YAAM,QAAQ,QAAQ,MAAM,QAAQ,QAAQ,IAAI,2BAA2B;AAE3E,UAAI,KAAK,MAAM,UAAU,UAAU,GAAG;AACrC,gBAAQ,YAAY,mBAAmB;AACvC,gBAAQ,YAAY,OAAO,KAAK,QAAQ,OAAO,OAAO;AAAA,MACvD,WAAW,CAAC,QAAQ,UAAU,mBAAmB,GAAG,aAAa;AAChE,gBAAQ,eAAe,mBAAmB;AAAA,MAC3C;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,mBAAmB;AAC5C,WAAK,IAAI,QAAQ,SAAS,kBAAkB,UAAU;AAAA,IACvD;AAAA,IACA,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ,SAASA,SAAQ,QAAQ;AAChC,cAAM,QAAQ,QAAQ,MAAM,QAAQ,QAAQ,IAAI,2BAA2B;AAC3E,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAa,SAAS,+BAA+B,YAAY;AAC1E,cAAI,QAAQ,QAAQ,OAAO,mBAAmB;AAC7C,iBAAK,IAAI,YAAY,GAAG,QAAQ,qDAAqD;AACrF,oBAAQ,YAAY,OAAO,KAAK,QAAQ,OAAO,OAAO;AAAA,UACvD;AAAA,QACD,OAAO;AACN,eAAK,IAAI,aAAa,SAAS,6BAA6B;AAAA,QAC7D;AACA,aAAK,YAAY,WAAW,QAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAU,SAAS,mBAAmB,KAAK,YAAY,QAAQ;AAAA,MACzE;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,8BAA8B;AACzC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,8BAA8B;AACzC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,8BAA8B;AACzC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,8BAA8B;AACzC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,mBAAWC,WAAU,QAAQ,KAAK,GAAG;AACpC,cAAIA,QAAO,WAAW,iBAAiB,GAAG;AACzC,iBAAK,MAAM,oCAAoC;AAC/C;AAAA,UACD;AAAA,QACD;AACA,aAAK,MAAM,8BAA8B;AACzC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,MACA,MAAM,SAAS;AACd,aAAK,IAAI,QAAQ,SAAS,gBAAgB;AAAA,MAC3C;AAAA,IACD;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,cAAc,GAAG,aAAa,EAAC;AAAA,IACnH,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,iBAAiB;AAAA,IAChB,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,KAAK,mBAAmB,OAAO;AAAG;AACtC,WAAK,IAAI,YAAY,SAAS,mBAAmB;AACjD,WAAK,IAAI,YAAY,GAAG,QAAQ,8EAA2E;AAAA,IAC5G;AAAA,IACA,eAAe,KAAKD,SAAQC,SAAQ,MAAM;AACzC,UAAID,QAAO,WAAW,CAAC,qBAAqB,gBAAgB,CAAC;AAAG;AAChE,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAI,CAAC,KAAK;AAAW,aAAK,YAAY;AAAA,eAC7B,KAAK,cAAc;AAAe;AAC3C,WAAK,MAAM,4BAA4B;AACvC,aAAO,KAAK,YAAY,IAAI;AAAA,IAC7B;AAAA,IACA,kBAAkB;AAAA,IAClB,SAASC,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,SAAS;AAC/C,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAWC,SAAQ,mCAAmC;AAAA,QAChE;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiBA,SAAQD,SAAQ,MAAM;AACtC,UAAIA,YAAW,KAAK,YAAY,UAAU,CAACC,QAAO,OAAOD,OAAM,KAAK,KAAK,SAAS;AAAS;AAC3F,WAAK,MAAM,EAAC,KAAK,EAAC,GAAG,KAAK,YAAY,MAAM;AAAA,IAC7C;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,oBAAoB,QAAQC,SAAQD,SAAQ,MAAM;AAEjD,UAAIC,QAAO,WAAW,YAAY,KAAKA,QAAO,QAAQ,aAAa,KAAK,CAACA,QAAO,MAAM,CAAC,KAAK,sBAAsB,MAAMA,SAAQD,OAAM;AAAG;AACzI,WAAK,OAAOC,QAAO,YAAY,GAAGA,SAAQD,OAAM;AAAA,IACjD;AAAA,IACA,MAAM;AAAA,EACP;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,2BAA2B;AAAA,IAC3B,kBAAkB,WAAW,UAAU,UAAU,MAAM;AACtD,UAAI,KAAK,SAAS,UAAU,KAAK,SAAS,SAAS;AAClD,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB,QAAQA,SAAQC,SAAQ,MAAM;AAClD,UAAIA,QAAO,MAAMA,QAAO,OAAO;AAC9B,aAAK,MAAM,sBAAsB;AACjC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,cAAc,QAAQA,SAAQD,SAAQ,MAAM;AAC3C,UAAI,CAAC,SAAS,MAAM,EAAE,SAAS,KAAK,IAAI,GAAG;AAC1C,aAAK,MAAM,EAAC,KAAK,GAAG,KAAK,EAAC,CAAC;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,UAAU;AAAA,IACT,WAAW;AAAA;AAAA,IAEX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,CAAC,UAAS,QAAQ,EAAE,SAAS,KAAK,IAAI,GAAG;AAC5C,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,CAAC,UAAS,QAAQ,EAAE,SAAS,KAAK,IAAI,GAAG;AAC5C,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,SAAS,QAAQ;AAEpB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,SAAS,SAAS;AACjB,UAAI,QAAQ,UAAU,WAAW,GAAG;AACnC,aAAK,IAAI,aAAa,SAAS,uBAAuB;AACtD,gBAAQ,eAAe,WAAW;AAAA,MACnC;AAAA,IACD;AAAA,IACA,iBAAiB,QAAQ,SAAS;AACjC,UAAI,OAAO,OAAO;AAAa,eAAO;AAAA,IACvC;AAAA,IACA,MAAMC,SAAQD,SAAQ,MAAM;AAC3B,UAAI,MAAM,mBAAmB,aAAa;AACzC,aAAK,IAAI,WAAWC,SAAQ,aAAa,8BAA8B;AAAA,MACxE;AAAA,IACD;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAI,CAAC,cAAa,WAAU,eAAc,gBAAe,kBAAiB,gBAAgB,EAAE,SAAS,OAAO,IAAI,KAAK,MAAM,KAAK;AAC/H,eAAO,MAAM;AACb,aAAK,IAAI,SAASC,SAAQ,WAAW,UAAU,gCAAgC,UAAUA,OAAM;AAAA,MAChG,WAAW,OAAO,SAAS,kBAAkB,MAAM,KAAK;AACvD,eAAO,MAAM;AACb,aAAK,IAAI,SAASA,SAAQ,WAAW,SAAS,gCAAgC,UAAUA,OAAM;AAAA,MAC/F;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,mBAAmB;AAAA,IAClB,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,SAAS,QAAQ;AAEpB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,QAAQ;AAC9C,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAWC,SAAQ,sCAAsC;AAAA,QACnE;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,iBAAiB;AAAA,IAChB,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,SAAS,QAAQ;AAEpB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB,QAAQA,SAAQD,SAAQ,QAAQ;AACpD,UAAI,CAAC,WAAW,WAAW,UAAU,aAAa,SAAS,SAAS,EAAE,SAAS,OAAO,EAAE,GAAG;AAC1F,YAAI,OAAO,eAAe,QAAQ;AACjC,gBAAM,eAAe,KAAK,YAAY;AACtC,eAAK,IAAI,UAAUC,SAAQ,6BAA6B,UAAU,YAAY;AAAA,QAC/E;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,aAAa,MAAM,SAAS;AAC3B,UAAI,KAAK,aAAa;AACrB,eAAO,KAAK;AAEZ,eAAO,KAAK;AACZ,YAAI,KAAK,OAAO;AAAuB,iBAAO,KAAK;AAEnD,aAAK,gBAAgB;AAAA,MACtB;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,SAASA,SAAQ,MAAM;AAC7C,UAAI,KAAK;AAAe,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,IAC7D;AAAA,IACA,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,QAAQ;AAC9C,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAWC,SAAQ,4BAA4B;AAAA,QACzD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA;AAAA,IAEX,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA;AAAA,IAEX,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAIA,WAAUC,YAAWD;AAAQ;AACjC,UAAI,MAAM,YAAY,MAAM,WAAW,GAAG;AACzC,eAAO,MAAM;AACb,YAAI,CAAE,OAAsB,aAAa;AACxC,eAAK,IAAI,SAASC,SAAQ,WAAW,YAAY,+BAA+B,UAAUA,OAAM;AAAA,QACjG;AAAA,MACD;AAAA,IACD;AAAA,IACA,sBAAsB;AAAA,IACtB,aAAa,MAAM;AAClB,WAAK,gBAAgB;AACrB,WAAK,KAAK,mBAAL,KAAK,iBAAmB,CAAC,QAAO,MAAM;AAC1C,aAAK,eAAe,UAAU,IAAI;AAClC,aAAK,eAAe,QAAQ,IAAI;AAAA,MACjC;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,QAAQ,SAAS;AAIhB,iBAAWA,WAAU,QAAQ,aAAa,GAAG;AAC5C,YAAI,CAACA,QAAO,OAAO;AAAK;AAQvB,aAAK,MAAM,EAAC,KAAKA,QAAO,OAAO,IAAG,GAAG,OAAO;AAC5C;AAAA,MAEF;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,iBAAiB,OAAOA,SAAQD,SAAQ,QAAQ;AAC/C,UAAI,CAACA,WAAUC,QAAO,OAAOD,OAAM;AAAG;AACtC,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,eAAK,MAAM,EAAC,KAAK,GAAG,KAAK,EAAC,GAAGC,SAAQA,SAAQ,MAAM,OAAO,IAAI;AAC9D;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,eAAe,QAAQD,SAAQC,SAAQ,MAAM;AAC5C,UAAIA,QAAO,eAAe,IAAI,EAAE,UAAU,GAAG;AAC5C,aAAK,MAAM,mBAAmB;AAC9B,eAAO,KAAK,YAAY,CAAC;AAAA,MAC1B;AAAA,IACD;AAAA,IACA,iBAAiB,OAAOA,SAAQD,SAAQ,QAAQ;AAC/C,UAAI,CAACA,WAAUC,QAAO,OAAOD,OAAM;AAAG;AACtC,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,eAAK,MAAM,EAAC,KAAK,EAAC,GAAGC,SAAQA,SAAQ,MAAM,OAAO,IAAI;AACtD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,UAAUA,SAAQD,SAAQ,QAAQ;AACjC,UAAI,OAAO,OAAO,UAAU,OAAO,OAAO,QAAQ;AACjD,aAAK,KAAKC,QAAO,YAAY,EAAE;AAC/B,mBAAW,WAAWA,QAAO,KAAK,GAAG;AACpC,eAAK,OAAO,QAAQ,YAAY,GAAG,SAASA,OAAM;AAAA,QACnD;AAAA,MACD;AAAA,IACD;AAAA,IACA,WAAW,MAAM,SAAS;AACzB,UAAI,SAAS;AAAQ,eAAO;AAAA,IAC7B;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,YAAY;AAChB,iBAAWA,WAAU,QAAQ,aAAa,GAAG;AAC5C,YAAI,CAAC,WAAW;AACf,eAAK,IAAI,YAAY,SAAS,gBAAgB,OAAO;AACrD,sBAAY;AAAA,QACb;AACA,YAAIA,QAAO,UAAU,YAAY,GAAG;AACnC,eAAK,IAAI,WAAWA,OAAM;AAAA,QAC3B,OAAO;AACN,eAAK,MAAM,EAAC,KAAK,GAAE,GAAGA,SAAQ,SAAS,MAAM,IAAI;AAAA,QAClD;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,gBAAgB;AAAA,IACf,WAAW;AAAA,IACX,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,QAAQ;AACzB,aAAK,MAAM,4BAA4B;AACvC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,QAAQ;AACzB,aAAK,MAAM,4BAA4B;AACvC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAI,UAAU,OAAO,OAAO,OAAO;AAClC,eAAO,SAAS;AAAA,MACjB;AAAA,IACD;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AACzB,UAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,gBAAQ,YAAY,YAAY;AAAA,MACjC,WAAW,CAAC,QAAQ,UAAU,YAAY,GAAG,aAAa;AACzD,gBAAQ,eAAe,YAAY;AAAA,MACpC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,YAAY;AACrC,WAAK,IAAI,QAAQ,SAAS,eAAe,UAAU;AAAA,IACpD;AAAA,IACA,OAAO,EAAC,WAAW,GAAG,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAChH,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA8CA,SAAS;AAAA,IACR,WAAW;AAAA,IACX,aAAaC,SAAQD,SAAQ,MAAM;AAClC,YAAM,sBAAsB,CAAC,cAAc,gBAAgB,YAAY;AACvE,UAAI,KAAK,WAAW,aAAc,KAAK,WAAW,SAAS,CAAC,oBAAoB,SAAS,KAAK,EAAE,GAAI;AACnG;AAAA,MACD;AACA,YAAM,kBAAkB,KAAK,YAAY;AACzC,WAAKA,QAAO,OAAO,eAAe,KAAK,KAAK,WAAW,WAAW,KAAK,WAAW,OAAO,KAAK,SAAS,SAAS;AAC/G,aAAK,aAAa,SAAS;AAC3B,aAAK,IAAI,QAAQ,iBAAiB,qBAAqB,MAAM,UAAUC,OAAM;AAC7E,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,WAAW,KAAK;AACxB,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,WAAW,KAAK;AACxB,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,kBAAkB;AAAA,IAClB,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,CAAC,QAAO,OAAO,EAAE,SAAS,KAAK,IAAI,GAAG;AAC9D,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAWC,SAAQ,8BAA8B;AAAA,QAC3D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,iBAAiBA,SAAQD,SAAQ,MAAM;AACtC,UAAIA,YAAW,KAAK,YAAY,UAAU,CAACC,QAAO,OAAOD,OAAM;AAAG;AAClE,UAAI,CAAC,QAAO,OAAO,EAAE,SAAS,KAAK,IAAI,GAAG;AACzC,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,KAAK,YAAY,MAAM;AAAA,MAC7C;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,UAAU,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC9D,aAAK,MAAM,oBAAoB;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,UAAU,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC9D,aAAK,MAAM,oBAAoB;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,iBAAiB,OAAOC,SAAQD,SAAQ,QAAQ;AAC/C,UAAI,CAACA,WAAUC,QAAO,OAAOD,OAAM;AAAG;AACtC,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,eAAK,MAAM,EAAC,KAAK,EAAC,GAAGC,SAAQA,SAAQ,MAAM,OAAO,IAAI;AACtD,eAAK,MAAM,WAAW,gBAAgB;AACtC;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,eAAe;AAAA,IAC9C;AAAA,IACA,WAAWA,SAAQD,SAAQ;AAC1B,UAAIC,QAAO,OAAOD,OAAM;AAAG;AAC3B,aAAO;AAAA,IACR;AAAA,IACA,sBAAsB;AAAA,IACtB,aAAa,MAAM,UAAU,UAAU;AACtC,UAAI,SAAS,QAAQ,gBAAgB,sBAAsB,SAAS;AAAa;AACjF,UAAI;AACJ,UAAI,KAAK,OAAO,eAAe;AAC9B,sBAAc;AAAA,MACf,WAAW,KAAK,aAAa,UAAU;AACtC,sBAAc;AAAA,MACf,OAAO;AACN;AAAA,MACD;AAEA,UAAI,SAAS,QAAQ,SAAS;AAAa,iBAAS,YAAY,WAAW;AAAA,IAC5E;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,cAAc,EAAC;AAAA,IACnG,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA;AAAA,EAEA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,QAAQ,KAAK,eAAe,UAAU,GAAG;AAC5C,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,SAAS,OAAO;AAAA,MACtC;AAAA,IACD;AAAA,IACA,SAASC,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,MAAM,MAAM,GAAG;AAC5C,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,GAAGC,SAAQA,OAAM,GAAG;AAC1C,eAAK,IAAI,WAAWA,SAAQ,4BAA4B;AAAA,QACzD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,yBAAyBA,SAAQD,SAAQ,eAAe;AACvD,YAAM,UAAU,KAAK,YAAY;AACjC,UAAI,cAAc,OAAO,YAAY;AACpC,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,SAAS,OAAO;AAAA,MACtC;AAAA,IACD;AAAA,IACA,YAAY,SAAS;AACpB,cAAQ,KAAK,QAAQ,YAAY,CAAC;AAAA,IACnC;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,mBAAmB,QAAQC,SAAQD,SAAQ,QAAQ;AA/5FrD;AAg6FG,UAAI,UAAU,OAAO,eAAe,UAAUA,QAAO,QAAQ,OAAO,cAAc;AACjF,aAAK,MAAM,EAAC,EAAC,UAAK,aAAY,aAAjB,GAAiB,WAAaA,QAAO,YAAY,MAAM,IAAI,EAAC,GAAG,OAAM,GAAGA,OAAM;AAC3F,QAAAA,QAAO,YAAY,sBAAsB,KAAK,QAAQ,IAAI;AAAA,MAC3D;AAAA,IACD;AAAA,IACA,gBAAgB,SAASA,SAAQ,cAAc;AAE9C,UAAK,cAA0B,mBAAmB,CAAC,QAAQ;AAAI;AAC/D,UAAI,KAAK,MAAM,UAAU,CAAC,QAAQ,MAAM,CAAC,KAAK,QAAQ,QAAQ,OAAO,oBAAoB;AACxF,aAAK,IAAI,aAAa,SAAS,qBAAqB;AACpD,gBAAQ,YAAY,cAAc,KAAK,QAAQ,IAAI;AAAA,MACpD;AAAA,IACD;AAAA,IACA,OAAO;AAAA,MACN,cAAc;AAAA,MAAG,YAAY;AAAA,MAAG,WAAW;AAAA,MAAG,SAAS;AAAA,MAAG,eAAe;AAAA,MAAG,cAAc;AAAA,MAC1F,aAAa;AAAA,IACd;AAAA,IACA,MAAM;AAAA,IACN,QAAQ;AAAA,IACR,KAAK;AAAA,EACN;AAAA,EACA,iBAAiB;AAAA,IAChB,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,CAAC,QAAQ;AAAI;AACjB,UAAI,WAAW,QAAQ;AACvB,UAAI,WAAW,GAAG;AACjB,aAAK,YAAY,SAAS,WAAW,IAAI,IAAI;AAC7C,aAAK,IAAI,UAAU,SAAS,SAAS,KAAK,YAAY,UAAU,UAAU;AAAA,MAC3E,OAAO;AACN,aAAK,YAAY,SAAS;AAAA,MAC3B;AAAA,IACD;AAAA,IACA,cAAc,QAAQC,SAAQD,SAAQ,MAAM;AAC3C,UAAI,CAACC,QAAO,MAAM,KAAK,YAAY,UAAU;AAAG;AAChD,UAAI,CAAC,KAAK,SAAS,CAAC,KAAK,MAAM,YAAY,KAAK,KAAK,OAAO,YAAY;AACvE,YAAI,KAAK,YAAY,QAAQ;AAC5B,eAAK,IAAI,QAAQA,SAAQ,SAAS,KAAK,YAAY,UAAU,UAAU;AAAA,QACxE;AACA,aAAK,YAAY;AACjB,aAAK,IAAI,aAAaA,SAAQ,4BAA6B;AAC3D,aAAK,IAAI,UAAUA,SAAQ,SAAS,KAAK,YAAY,UAAU,UAAU;AAAA,MAC1E;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,YAAY,QAAQ;AAC5B,cAAM,SAAS,CAAC,MAAM,MAAM,MAAM,MAAM,MAAM,IAAI;AAClD,aAAK,MAAM,2BAA2B,OAAO,KAAK,YAAY,MAAM,QAAQ;AAC5E,eAAO,KAAK,YAAY,CAAC,OAAO,KAAK,YAAY,MAAM,GAAG,IAAI,CAAC;AAAA,MAChE;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgDA,SAAS;AAAA,IACR,WAAW;AAAA,IACX,iBAAiB,OAAOA,SAAQD,SAAQ,QAAQ;AAC/C,UAAI,CAACA,WAAUC,QAAO,OAAOD,OAAM;AAAG;AACtC,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,cAAI,QAAmB,CAAC;AACxB,cAAI;AACJ,eAAK,YAAYC,QAAO,QAAQ;AAC/B,gBAAI,CAAC,CAAC,YAAW,SAAS,EAAE,SAAS,QAAQ,KAAKA,QAAO,OAAO,QAAQ,IAAI,GAAG;AAC9E,oBAAM,KAAK,QAAQ;AAAA,YACpB;AAAA,UACD;AAEA,cAAI,MAAM;AAAQ,iBAAK,MAAM,EAAC,CAAC,KAAK,OAAO,KAAK,CAAC,GAAG,EAAC,GAAGA,SAAQA,SAAQ,MAAM,OAAO,IAAI;AACzF;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAIA,WAAUC,YAAWD;AAAQ;AACjC,UAAI,UAAU;AACd,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,iBAAO,MAAM,CAAC;AACd,oBAAU;AAAA,QACX;AAAA,MACD;AACA,UAAI,WAAW,CAAE,OAAsB,eAAe,OAAO,OAAO,YAAY;AAC/E,aAAK,IAAI,SAASC,SAAQ,WAAW,+BAA+B,UAAUA,OAAM;AAAA,MACrF;AAAA,IACD;AAAA,IACA,eAAe;AAAA,IACf,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAoCA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,SAAS,SAASA,SAAQ,MAAM;AAC/B,UAAIA,YAAW,UAAU,KAAK,SAAS,SAAS;AAC/C,YAAI,CAAC,KAAK,MAAM,EAAC,KAAK,EAAC,CAAC,GAAG;AAC1B,eAAK,IAAI,WAAWA,SAAQ,6BAA6B;AAAA,QAC1D;AACA,eAAO;AAAA,MACR;AACA,UAAI,KAAK,MAAM;AACd,aAAK,IAAI,WAAW,SAAS,6BAA6B;AAC1D,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,kBAAkB;AAAA,IAClB,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAIC,QAAO,OAAOA,QAAO,SAAS,UAAUA,QAAO,MAAM,UAAU,OAAO,eAAe,QAAQ;AAChG,aAAK,IAAI,YAAYA,SAAQ,aAAa;AAC1C,eAAOA,QAAO,KAAK;AAAA,MACpB;AAAA,IACD;AAAA,IACA,oBAAoBA,SAAQD,SAAQE,UAAS,MAAM;AAClD,UAAI,KAAK,SAAS,WAAW,KAAK,MAAM,aAAa;AAAG;AACxD,YAAM,iBAAiB,CAAC,gBAAgB,aAAa,EAAE,SAAS,KAAK,MAAM,IAAI,WAAW,KAAK;AAC/F,UAAI,KAAK,YAAY,KAAK,YAAY,QAAQF,SAAQ,cAAc,GAAG;AACtE,YAAI,KAAK;AAAa,eAAK,cAAc;AACzC,YAAI,KAAK,YAAY,WAAWC,SAAQ;AACvC,eAAK,IAAI,aAAa,KAAK,YAAY,QAAQ,sBAAsB;AAAA,QACtE;AACA,eAAO,KAAK,YAAY;AAAA,MACzB;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,gBAAgB;AAAA,IACf,WAAW;AAAA,IACX,iBAAiB,SAAS;AACzB,WAAK,QAAQ,eAAe,KAAK,QAAQ,QAAQ,OAAO,MAAM,QAAQ,WAAW,KAAK,YAAY,MAAM,GAAG;AAC1G,gBAAQ,QAAQ,IAAI;AAAA,MACrB;AAAA,IACD;AAAA,IACA,sBAAsB,SAASD,SAAQ;AACtC,UAAI,EAAEA,sBAAW,KAAK,YAAY,YAAW,CAAC,QAAQ,WAAWA,OAAM;AAAG;AAC1E,UAAI,CAAC,QAAQ,aAAa,QAAQ,eAAe,KAAM,QAAQ,QAAQ,OAAO,GAAG;AAChF,gBAAQ,eAAe;AAAA,MACxB;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAuCA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,eAAe,MAAM,SAAS;AAC7B,UAAI,YAAY,KAAK,YAAY;AAAQ,gBAAQ,YAAY,UAAU;AAAA,IACxE;AAAA,IACA,WAAW,MAAM,SAAS;AACzB,cAAQ,YAAY,UAAU;AAAA,IAC/B;AAAA,IACA,MAAM,SAAS;AACd,cAAQ,eAAe,UAAU;AAAA,IAClC;AAAA,IACA,mBAAmB,QAAQC,SAAQD,SAAQ,QAAQ;AAClD,UAAI,UAAU,OAAO,eAAe,QAAQ;AAC3C,aAAK,MAAM,EAAC,KAAK,OAAM,GAAGA,OAAM;AAAA,MACjC;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,YAAY;AAChB,iBAAWC,WAAU,QAAQ,aAAa,GAAG;AAC5C,YAAI,CAAC,WAAW;AACf,eAAK,IAAI,YAAY,SAAS,kBAAkB,OAAO;AACvD,sBAAY;AAAA,QACb;AACA,YAAIA,QAAO,UAAU,YAAY,GAAG;AACnC,eAAK,IAAI,WAAWA,OAAM;AAAA,QAC3B,OAAO;AACN,eAAK,MAAM,EAAC,KAAK,GAAE,GAAGA,SAAQ,SAAS,MAAM,IAAI;AAAA,QAClD;AAAA,MACD;AAAA,IACD;AAAA,IACA,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,SAAS;AAC/C,YAAI,CAAC,KAAK,KAAKC,QAAO,YAAY,CAAC,GAAG;AACrC,eAAK,IAAI,WAAWA,SAAQ,gCAAgC;AAAA,QAC7D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA;AAAA,IAEX,sBAAsB;AAAA,IACtB,aAAa,MAAM,SAAS;AAC3B,YAAM,eAAe;AAAA,QACpB;AAAA,QAAY;AAAA,QAAe;AAAA,QAAe;AAAA,QAAmB;AAAA,QAAe;AAAA,QAAgB;AAAA,MAC7F;AACA,UAAI,KAAK,SAAS,YAAY,EAAE,aAAa,SAAS,KAAK,EAAE,KAAM,KAAK,OAAO,KAAK,aAAa,YAAc,KAAK,SAAS,gBAAgB,QAAQ,gBAAiB;AACrK,aAAK,OAAO;AACZ,aAAK,qBAAqB,KAAK;AAAA,MAChC;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,SAASA,SAAQ,MAAM;AAC7C,UAAI,KAAK,uBAAuB,KAAK,UAAU,KAAK,SAAS;AAAU,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,IAC5G;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA;AAAA,IAEX,iBAAiB,SAAS;AACzB,UAAI,QAAQ,QAAQ,UAAU,KAAK,QAAQ,WAAW,KAAK,YAAY,MAAM,GAAG;AAC/E,gBAAQ,QAAQ,IAAI;AAAA,MACrB;AAAA,IACD;AAAA,IACA,sBAAsB,SAASD,SAAQ;AACtC,UAAI,EAAEA,sBAAW,KAAK,YAAY,YAAW,CAAC,QAAQ,WAAWA,OAAM;AAAG;AAC1E,UAAI,CAAC,QAAQ,aAAa,QAAQ,QAAQ,UAAU,GAAG;AACtD,gBAAQ,eAAe;AAAA,MACxB;AAAA,IACD;AAAA,IACA,sBAAsB;AAAA,IACtB,aAAa,MAAM,SAAS;AAC3B,YAAM,eAAe;AAAA,QACpB;AAAA,QAAY;AAAA,QAAe;AAAA,QAAe;AAAA,QAAmB;AAAA,QAAe;AAAA,QAAgB;AAAA,MAC7F;AACA,UAAI,KAAK,SAAS,YAAY,EAAE,aAAa,SAAS,KAAK,EAAE,KAAM,KAAK,OAAO,KAAK,aAAa,YAAc,KAAK,SAAS,gBAAgB,QAAQ,gBAAiB;AACrK,aAAK,OAAO;AACZ,aAAK,qBAAqB,KAAK;AAAA,MAChC;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,WAAW,SAASC,SAAQ,MAAM;AAC7C,UAAI,KAAK,uBAAuB,KAAK;AAAQ,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,IAClF;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,YAAM,2BAA2B,KAAK,OAAO,WAAW,KAAK,MAAM,QAAQ;AAC3E,WAAK,MAAM,iBAAiB,wBAAwB;AACpD,UAAI,4BAA4B,IAAI;AACnC,aAAK,MAAM,kBAAkB;AAE7B,aAAK,qBAAqB,KAAK;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,oBAAoB,QAAQA,SAAQD,SAAQ,MAAM;AACjD,UAAIA,WAAU,KAAK,uBAAuB,KAAK;AAC9C,aAAK,KAAKA,QAAO,YAAY,IAAIA,SAAQA,OAAM;AAAA,IACjD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,qBAAqB,QAAQA,SAAQC,SAAQ,MAAM;AAClD,UAAI,KAAK,eAAeA,QAAO,eAAe,IAAI,EAAE,UAAU,GAAG;AAChE,aAAK,MAAM,2BAA2B;AACtC,eAAO,KAAK,YAAY,IAAI;AAAA,MAC7B;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,iBAAiB;AAAA,IAChB,WAAW;AAAA,IACX,qBAAqB,QAAQD,SAAQC,SAAQ,MAAM;AAClD,UAAIA,QAAO,eAAe,IAAI,EAAE,UAAU,GAAG;AAC5C,aAAK,MAAM,mBAAmB;AAC9B,eAAO,KAAK,YAAY,IAAI;AAAA,MAC7B;AAAA,IACD;AAAA,IACA,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,QAAQ;AAC9C,aAAK,WAAW;AAChB,YAAI,CAACC,QAAO,YAAY,eAAe,GAAG;AACzC,eAAK,IAAI,WAAWA,SAAQ,kCAAkC;AAAA,QAC/D;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,cAAQ,eAAe,eAAe;AAAA,IACvC;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,UAAU;AAAA,IACT,WAAW;AAAA,IACX,sBAAsB;AAAA,IACtB,aAAa,MAAM;AAClB,WAAK,KAAK,mBAAL,KAAK,iBAAmB,CAAC,QAAO,MAAM;AAC1C,aAAK,eAAe,UAAU,IAAI;AAClC,aAAK,eAAe,QAAQ,IAAI;AAAA,MACjC;AAAA,IACD;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAI,CAAC,cAAa,WAAU,eAAc,gBAAe,kBAAiB,gBAAgB,EAAE,SAAS,OAAO,IAAI,GAAG;AAClH,YAAI,MAAM,KAAK;AACd,iBAAO,MAAM;AACb,eAAK,IAAI,SAASC,SAAQ,WAAW,UAAU,4BAA4B,UAAUA,OAAM;AAAA,QAC5F;AAAA,MACD,WAAW,OAAO,SAAS,kBAAkB,MAAM,KAAK;AACvD,eAAO,MAAM;AACb,aAAK,IAAI,SAASA,SAAQ,WAAW,SAAS,4BAA4B,UAAUA,OAAM;AAAA,MAC3F;AAAA,IACD;AAAA,IACA,QAAQ,SAAS;AAChB,WAAK,YAAY,iBAAiB,KAAK,QAAQ,KAAK,aAAa,OAAO;AAAA,IACzE;AAAA,IACA,gBAAgB,SAAS;AACxB,UAAI,QAAQ;AAAa;AACzB,UAAI,KAAK,MAAM,UAAU,iBAAiB,GAAG;AAC5C,gBAAQ,YAAY,YAAY;AAAA,MACjC,WAAW,CAAC,QAAQ,UAAU,YAAY,GAAG,aAAa;AACzD,gBAAQ,eAAe,YAAY;AAAA,MACpC;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,aAAO,QAAQ,UAAU,YAAY;AACrC,WAAK,IAAI,QAAQ,SAAS,eAAe,UAAU;AAAA,IACpD;AAAA,IACA,OAAO,EAAC,WAAW,GAAG,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,GAAG,aAAa,EAAC;AAAA,IAChH,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA8BA,qBAAqB;AAAA,IACpB,WAAW;AAAA,IACX,WAAWA,SAAQD,SAAQ;AAC1B,UAAI,CAACC,QAAO,OAAOD,OAAM;AAAG,eAAO;AAAA,IACpC;AAAA;AAAA,IAEA,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,sBAAsB;AACpD,cAAQ,YAAY,iBAAiB;AAAA,IACtC;AAAA,IACA,mBAAmBA,SAAQC,SAAQ,MAAM;AACxC,UAAIA,QAAO,UAAU,iBAAiB,GAAG;AACxC,YAAI,KAAK;AAAe,UAAAA,QAAO,eAAe,iBAAiB;AAAA,MAChE,WAAW,CAAC,KAAK;AAAe,QAAAA,QAAO,YAAY,iBAAiB;AAAA,IACrE;AAAA,IACA,MAAM,SAAS;AACd,cAAQ,eAAe,iBAAiB;AAAA,IACzC;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAI,OAAO,OAAO,UAAU;AAC3B,YAAI,CAAC,KAAK;AAAY,gBAAM,IAAI,MAAM,2BAA2B;AACjE,YAAI,KAAK,WAAW,OAAO;AAAY,iBAAO;AAAA,MAC/C;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,SAAS,MAAM,SAAS,QAAQ,MAAM,KAAK,SAAS,UAAU,KAAK,SAAS;AAC/E,aAAK,MAAM,iBAAiB;AAC5B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,SAAS,MAAM,SAAS,QAAQ,MAAM,KAAK,SAAS,UAAU,KAAK,SAAS;AAC/E,aAAK,MAAM,iBAAiB;AAC5B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAqBA,qBAAqB;AAAA,IACpB,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,KAAK,mBAAmB,OAAO;AAAG;AACtC,WAAK,IAAI,YAAY,SAAS,uBAAuB;AACrD,WAAK,IAAI,YAAY,GAAG,QAAQ,0EAAuE;AAAA,IACxG;AAAA,IACA,eAAe,KAAKC,SAAQD,SAAQ,MAAM;AACzC,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAIC,QAAO,WAAW,CAAC,iBAAgB,uBAAuB,CAAC;AAAG;AAClE,UAAI,CAAC,KAAK,WAAW,WAAW,CAAC,iBAAgB,uBAAuB,CAAC;AAAG,aAAK,YAAY;AAC7F,UAAI,KAAK,cAAc;AAAe;AACtC,WAAK,MAAM,wBAAwB;AACnC,aAAO,KAAK,YAAY,IAAI;AAAA,IAC7B;AAAA,IACA,YAAY,SAAS;AACpB,cAAQ,KAAK,QAAQ,YAAY,CAAC;AAAA,IACnC;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,WAAW;AAAA,IACV,WAAW;AAAA;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,YAAY,WAAW,QAAQ,YAAY,MAAM,IAAI;AAAA,IAC3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAMA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AA3+G5C;AA4+GG,UAAIA,WAAUC,YAAWD;AAAQ;AACjC,YAAM,YAAY,UAAK,aAAY,aAAjB,GAAiB,WAAaC,QAAO,YAAY,MAAM,IAAI;AAC7E,UAAI,MAAM,QAAQ,KAAK,MAAM,QAAQ,IAAK,GAAG;AAC5C,eAAO,MAAM,QAAQ;AACrB,YAAI,CAAE,OAAsB,aAAa;AACxC,eAAK,IAAI,SAASA,SAAQ,WAAW,UAAU,8BAA8B,UAAUA,OAAM;AAAA,QAC9F;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,IACN,QAAQ;AAAA,EACT;AAAA,EACA,OAAO;AAAA,IACN,WAAW;AAAA,IACX,iBAAiB,OAAOA,SAAQD,SAAQ,QAAQ;AAC/C,UAAI,CAACA,WAAUC,QAAO,OAAOD,OAAM;AAAG;AACtC,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,eAAK,MAAM,EAAC,KAAK,EAAC,GAAGC,SAAQA,SAAQ,MAAM,OAAO,IAAI;AACtD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,WAAW,MAAM,SAAS;AACzB,UAAI;AAAA,QAAC;AAAA;AAAA,QAAuB;AAAA,MAAQ,EAAE,SAAS,IAAI;AAAG,eAAO;AAAA,IAC9D;AAAA,IACA,kBAAkB;AAAA,IAClB,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAI,KAAK,MAAM,QAAQ,KAAKC,YAAWD,WAAU,KAAK,IAAI,YAAY,UAAUC,OAAM,GAAG;AACxF,aAAK,IAAI,WAAWA,SAAQ,uBAAuB;AACnD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,0BAA0B;AAAA;AAAA,IAEzB,WAAW;AAAA,IACX,SAASA,SAAQD,SAAQ,MAAM;AAE9B,UAAIC,YAAWD,WAAU,KAAK,SAAS,YAAY,CAACA,QAAO,UAAU,WAAW,KAAK,EACpF,KAAK,mBAAmB,KAAK,mBAAmB,QAAQ,KAAK,eAAe,QAAQ,OAChFC,QAAO,WAAW,MAAM,MAAM;AAClC,QAAAD,QAAO,YAAY,aAAaC,OAAM;AACtC,aAAK,IAAI,WAAWA,OAAM;AAC1B,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA4CA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,iBAAiB,SAAS;AACzB,cAAQ,WAAW;AAEnB,eAAS,IAAI,QAAQ,KAAK,QAAQ,SAAS,GAAG,IAAI,QAAQ,UAAU,KAAK;AACxE,cAAM,iBAAiB,QAAQ,KAAK,QAAQ,CAAC;AAC7C,YAAI,CAAC,eAAe,SAAS;AAG5B,cAAI,CAAC,QAAQ,iBAAiB,eAAe,QAAQ,gBAAgB,YAAY;AAChF,oBAAQ,WAAW;AAAA,UACpB;AACA;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,cAAc,QAAQA,SAAQD,SAAQ,MAAM;AAC3C,UAAIC,QAAO,UAAU;AACpB,aAAK,YAAY,OAAO,KAAK,IAAI,UAAU,IAAI,YAAY,GAAGA,QAAO,cAAcA,SAAQD,SAAQ,IAAI;AACvG,aAAK,MAAM,EAAC,KAAK,EAAC,CAAC;AAAA,MACpB;AAAA,IACD;AAAA,IACA,MAAM,SAAS;AACd,UAAI,QAAQ,UAAU;AACrB,aAAK,MAAM,kBAAkB;AAC7B,gBAAQ,WAAW;AACnB,cAAM,UAAU,QAAQ,QAAQ,QAAQ,QAAQ,UAAU,MAAM,KAAK,QAAQ,QAAQ,UACnF,QAAQ,UAAW,OAAO,QAAQ,WAAY,QAAQ,IAAI,QAAQ,YAAY;AAChF,aAAK,IAAI,WAAW,SAAS,OAAO;AACpC,aAAK,IAAI,YAAY,GAAG,QAAQ,2BAA2B;AAC3D,YAAI,KAAK,UAAU,IAAI,kBAAkB,GAAG;AAC3C,eAAK,KAAK,6EAA+E,IAAI;AAAA,QAC9F;AAAA,MACD;AAAA,IACD;AAAA,IACA,QAAQ,SAAS;AAChB,cAAQ,WAAW;AAAA,IACpB;AAAA,IACA,OAAO,EAAC,cAAc,GAAG,YAAY,GAAG,WAAW,GAAG,SAAS,GAAG,eAAe,EAAC;AAAA,IAClF,MAAM;AAAA,EACP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA8BA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,iBAAiB,UAAU,SAASC,SAAQ,MAAM;AACjD,UAAI,MAAM,aAAa,UAAU;AAChC,aAAK,mBAAmB;AACxB,eAAO,WAAW;AAAA,MACnB;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,QAAQ;AACzB,aAAK,MAAM,oBAAoB;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,QAAQ;AACzB,aAAK,MAAM,oBAAoB;AAC/B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,YAAY;AAChB,iBAAWA,WAAU,QAAQ,aAAa,GAAG;AAC5C,YAAI,CAAC,WAAW;AACf,eAAK,IAAI,YAAY,SAAS,kBAAkB,OAAO;AACvD,sBAAY;AAAA,QACb;AACA,YAAIA,QAAO,UAAU,YAAY,GAAG;AACnC,eAAK,IAAI,WAAWA,OAAM;AAAA,QAC3B,OAAO;AACN,eAAK,MAAM,EAAC,KAAK,GAAE,GAAGA,SAAQ,SAAS,MAAM,IAAI;AAAA,QAClD;AAAA,MACD;AAAA,IACD;AAAA,IACA,cAAc,QAAQA,SAAQD,SAAQ,MAAM;AAC3C,UAAI,KAAK,sBAAsB,MAAMA,SAAQC,OAAM,KAAK,KAAK,aAAa,GAAG,EAAE,GAAG;AACjF,QAAAD,QAAO,aAAa,OAAOC,OAAM;AAAA,MAClC;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,UAAU,KAAK,gBAAgB;AACvC,aAAK,MAAM,gBAAgB;AAC3B,eAAO,KAAK,YAAY,CAAC,SAAS,MAAM,SAAS,QAAQ,IAAI,OAAO,MAAM,IAAI,CAAC;AAAA,MAChF;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,UAAU;AAAA,IACT,WAAW;AAAA,IACX,iBAAiB;AAAA,IACjB,oBAAoB;AAAA,IACpB,WAAW,SAAS;AACnB,UAAI,QAAQ,aAAa;AACxB,aAAK,MAAM,EAAC,KAAK,EAAC,CAAC;AAAA,MACpB;AAAA,IACD;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAIA,WAAUC,YAAWD;AAAQ;AACjC,UAAI,MAAM,YAAY,MAAM,WAAW,GAAG;AACzC,eAAO,MAAM;AACb,YAAI,CAAE,OAAsB,aAAa;AACxC,eAAK,IAAI,SAASC,SAAQ,WAAW,YAAY,6BAA6B,UAAUA,OAAM;AAAA,QAC/F;AAAA,MACD;AAAA,IACD;AAAA,IACA,aAAa,MAAM;AAClB,WAAK,gBAAgB;AAAA,IACtB;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,UAAI,KAAK,mBAAmB,OAAO;AAAG;AACtC,WAAK,IAAI,YAAY,SAAS,gBAAgB;AAC9C,WAAK,IAAI,YAAY,GAAG,QAAQ,uHAAoH;AAAA,IACrJ;AAAA,IACA,eAAe,KAAKD,SAAQC,SAAQ,MAAM;AACzC,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAID,QAAO,WAAW,CAAC,mBAAkB,gBAAgB,CAAC;AAAG;AAC7D,UAAI,CAAC,KAAK;AAAW,aAAK,YAAY;AAAA,eAC7B,KAAK,cAAc;AAAe;AAC3C,WAAK,MAAM,0BAA0B;AACrC,aAAO,KAAK,YAAY,IAAI;AAAA,IAC7B;AAAA,IACA,kBAAkB,QAAQA,SAAQC,SAAQ,MAAM;AAC/C,YAAM,gBAAgB,KAAK,YAAY;AACvC,UAAID,QAAO,WAAW,gBAAgB,KAAKC,QAAO,eAAe,IAAI,EAAE,WAAW;AAAG;AACrF,UAAI,CAAC,KAAK;AAAW,aAAK,YAAY;AAAA,eAC7B,KAAK,cAAc;AAAe;AAC3C,WAAK,MAAM,2BAA2B;AACtC,aAAO,KAAK,YAAY,IAAI;AAAA,IAC7B;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,aAAa,MAAMD,SAAQC,SAAQ,MAAM;AACxC,UAAI,KAAK,aAAaD,QAAO,QAAQ,KAAK,IAAI,GAAG;AAChD,eAAO,SAAS,IAAI,OAAO;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB,QAAQC,SAAQD,SAAQ,QAAQ;AACpD,UAAI,CAAC,WAAW,WAAW,UAAU,aAAa,SAAS,SAAS,EAAE,SAAS,OAAO,EAAE,GAAG;AAC1F,YAAI,OAAO,eAAe,QAAQ;AACjC,gBAAM,eAAe,KAAK,YAAY;AACtC,eAAK,IAAI,UAAUC,SAAQ,wBAAwB,UAAU,YAAY;AACzE,eAAK,IAAI,YAAY,GAAGA,QAAO,sBAAsB;AAAA,QACtD;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,aAAa,MAAMD,SAAQC,SAAQ,MAAM;AACxC,UAAI,KAAK,aAAaD,QAAO,QAAQ,KAAK,IAAI,GAAG;AAChD,eAAO,SAAS,IAAI,OAAO;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,YAAY,QAAQC,SAAQD,SAAQ,QAAQ;AAC3C,UAAK,QAAiB,QAAQ;AAC7B,aAAK,IAAI,WAAWC,SAAQ,gCAAgC;AAAA,MAC7D;AACA,aAAO;AAAA,IACR;AAAA,IACA,iBAAiB,QAAQA,SAAQ;AAChC,UAAI,OAAO,OAAO,QAAQ;AACzB,aAAK,IAAI,WAAWA,SAAQ,gCAAgC;AAC5D,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,SAAS,QAAQ,KAAK,IAAI,GAAG;AAChC,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,SAAS,QAAQ,KAAK,IAAI,GAAG;AAChC,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,QAAQ;AAAA,IACP,WAAW;AAAA,IACX,QAAQD,SAAQ;AACf,WAAK,MAAM,WAAW,cAAc;AAAA,IACrC;AAAA;AAAA,IAEA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,oBAAoB,aAAa;AAChC,iBAAW,aAAa,aAAa;AACpC,kBAAU,SAAV,UAAU,OAAS,CAAC;AACpB,mBAAW,KAAK,WAAW;AAC1B,cAAI,CAAC,CAAC,QAAO,QAAQ,EAAE,SAAS,CAAC;AAAG,sBAAU,KAAK,CAAC,IAAI,UAAU,CAAC;AAAA,QACpE;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,gBAAgB;AAAA,IACf,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,WAAW,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/D,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,WAAW,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/D,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,SAAS,SAASC,SAAQ,MAAM;AAC/B,UAAI,KAAK,MAAM;AACd,aAAK,IAAI,WAAW,SAAS,iCAAiC;AAC9D,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,kBAAkB;AAAA,IAClB,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAIC,QAAO,OAAOA,QAAO,SAAS,UAAUA,QAAO,MAAM,UAAU,OAAO,eAAe,QAAQ;AAChG,aAAK,IAAI,YAAYA,SAAQ,iBAAiB;AAC9C,eAAOA,QAAO,KAAK;AAAA,MACpB;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EAEA,WAAW;AAAA,IACV,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,WAAW,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,MAAM,SAAS,GAAG;AAC1B,aAAK,MAAM,iBAAiB;AAC5B,eAAO,KAAK,YAAY,KAAK,MAAM,UAAU,WAAW,IAAI,MAAM,IAAI;AAAA,MACvE;AAAA,IACD;AAAA,IACA,WAAW,MAAM,SAAS;AACzB,UAAI,SAAS;AAAa,eAAO;AAAA,IAClC;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,WAAW,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/D,aAAK,MAAM,qBAAqB;AAChC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,WAAW,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC/D,aAAK,MAAM,qBAAqB;AAChC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,iBAAiB;AAAA,IACjB,oBAAoB;AAAA,IACpB,WAAW,SAAS;AACnB,UAAI,QAAQ;AAAM;AAClB,YAAM,gBAAgB,KAAK,aAAa,EAAE,OAAO,CAAAA,YAChDA,QAAO,YAAYA,QAAO,oBAAoB,QAAQ,WAAWA,OAAM,CACvE;AACD,UAAI,CAAC,cAAc;AAAQ;AAC3B,YAAM,eAAe,KAAK,OAAO,aAAa;AAC9C,YAAM,OAAO,aAAa;AAC1B,mBAAa,WAAW;AACxB,WAAK,IAAI,SAAS,SAAS,KAAK,IAAI,MAAM,IAAI,IAAI,GAAG,+BAA+B;AACpF,cAAQ,QAAQ,IAAI;AAAA,IACrB;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,eAAe;AAAA,IACd,WAAW;AAAA,IACX,oBAAoB;AAAA,IACpB,cAAc,QAAQA,SAAQD,SAAQ,MAAM;AAC3C,UAAI,SAAS,KAAK,SAAS,cAAc,KAAK,sBAAsB,MAAMA,SAAQC,SAAQ,IAAI,IAAI;AACjG,aAAK,OAAOD,QAAO,YAAY,GAAGA,SAAQC,OAAM;AAAA,MACjD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,SAAS,SAASA,SAAQ,MAAM;AAC/B,UAAI,KAAK,MAAM;AACd,aAAK,IAAI,WAAW,SAAS,8BAA8B;AAC3D,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,kBAAkB;AAAA,IAClB,SAAS,QAAQA,SAAQD,SAAQ,QAAQ;AACxC,UAAIC,QAAO,OAAOA,QAAO,SAAS,UAAUA,QAAO,MAAM,UAAU,OAAO,eAAe,QAAQ;AAChG,aAAK,IAAI,YAAYA,SAAQ,cAAc;AAC3C,eAAOA,QAAO,KAAK;AAAA,MACpB;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA,EACA,YAAY;AAAA,IACX,WAAW;AAAA,IACX,WAAW,MAAM,SAASD,SAAQ;AACjC,UAAI,CAAC,KAAK;AAAY,cAAM,IAAI,MAAM,2BAA2B;AACjE,UAAI,CAAC,QAAQ,MAAM,QAAQ,SAAS,gBAAgB,KAAK,WAAW;AAAe;AACnF,UAAKA,WAAUA,YAAW,WAAY,KAAK,WAAW,OAAO,YAAY;AACxE,aAAK,IAAI,aAAa,SAAS,sBAAsB;AACrD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,cAAc,QAAQC,SAAQD,SAAQ,MAAM;AAC3C,UAAI,KAAK,sBAAsB,MAAMA,SAAQC,OAAM,KAAK,KAAK,aAAa,GAAG,EAAE,GAAG;AACjF,QAAAD,QAAO,aAAa,OAAOC,OAAM;AAAA,MAClC;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,YAAY;AAAA,IACX,MAAM;AAAA,IACN,WAAW;AAAA,IACX,SAAS,SAAS;AACjB,UAAI,QAAQ,UAAU,WAAW,GAAG;AACnC,aAAK,IAAI,aAAa,SAAS,sBAAsB;AACrD,gBAAQ,eAAe,WAAW;AAAA,MACnC;AAAA,IACD;AAAA,IACA,iBAAiB,QAAQ,SAAS;AACjC,UAAI,OAAO,OAAO;AAAa,eAAO;AAAA,IACvC;AAAA,IACA,MAAMA,SAAQD,SAAQ,MAAM;AAC3B,UAAI,MAAM,mBAAmB,aAAa;AACzC,aAAK,IAAI,WAAWC,SAAQ,aAAa,6BAA6B;AAAA,MACvE;AAAA,IACD;AAAA,IACA,SAAS,SAASA,SAAQ,MAAM;AAC/B,UAAI,KAAK,MAAM,QAAQ,GAAG;AACzB,aAAK,IAAI,WAAW,SAAS,6BAA6B;AAC1D,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAI,CAAC,cAAa,WAAU,eAAc,gBAAe,kBAAiB,gBAAgB,EAAE,SAAS,OAAO,IAAI,GAAG;AAClH,YAAI,MAAM,KAAK;AACd,iBAAO,MAAM;AACb,eAAK,IAAI,SAASC,SAAQ,WAAW,UAAU,+BAA+B,UAAUA,OAAM;AAAA,QAC/F;AAAA,MACD,WAAW,OAAO,SAAS,kBAAkB,MAAM,KAAK;AACvD,eAAO,MAAM;AACb,aAAK,IAAI,SAASA,SAAQ,WAAW,SAAS,+BAA+B,UAAUA,OAAM;AAAA,MAC9F;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,EACrB;AAAA,EACA,UAAU;AAAA,IACT,MAAM;AAAA,IACN,WAAW;AAAA,IACX,SAAS,SAAS;AACjB,UAAI,QAAQ,UAAU,WAAW,GAAG;AACnC,aAAK,IAAI,aAAa,SAAS,oBAAoB;AACnD,gBAAQ,eAAe,WAAW;AAAA,MACnC;AAAA,IACD;AAAA,IACA,iBAAiB,QAAQ,SAAS;AACjC,UAAI,OAAO,OAAO;AAAa,eAAO;AAAA,IACvC;AAAA,IACA,MAAMA,SAAQD,SAAQ,MAAM;AAC3B,UAAI,MAAM,mBAAmB,aAAa;AACzC,aAAK,IAAI,WAAWC,SAAQ,aAAa,2BAA2B;AAAA,MACrE;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,SAAS,KAAK,SAAS,QAAQ;AAChD,aAAK,MAAM,kBAAkB;AAC7B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,2BAA2B;AAAA,IAC3B,kBAAkB,KAAK,UAAU,UAAU,MAAM;AAChD,UAAI,KAAK,SAAS,SAAS,KAAK,SAAS,QAAQ;AAChD,aAAK,MAAM,kBAAkB;AAC7B,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAI,CAAC,cAAa,WAAU,eAAc,gBAAe,kBAAiB,gBAAgB,EAAE,SAAS,OAAO,IAAI,GAAG;AAClH,YAAI,MAAM,KAAK;AACd,iBAAO,MAAM;AACb,eAAK,IAAI,SAASC,SAAQ,WAAW,UAAU,6BAA6B,UAAUA,OAAM;AAAA,QAC7F;AAAA,MACD,WAAW,OAAO,SAAS,kBAAkB,MAAM,KAAK;AACvD,eAAO,MAAM;AACb,aAAK,IAAI,SAASA,SAAQ,WAAW,SAAS,6BAA6B,UAAUA,OAAM;AAAA,MAC5F;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,EACrB;AAAA,EACA,aAAa;AAAA,IACZ,MAAM;AAAA,IACN,WAAW;AAAA,IACX,YAAY,SAAS;AACpB,cAAQ,KAAK,QAAQ,YAAY,CAAC;AAAA,IACnC;AAAA,IACA,UAAU,MAAM,SAAS;AACxB,WAAK,KAAK,QAAQ,YAAY,CAAC;AAAA,IAChC;AAAA,IACA,OAAO,CAAC;AAAA,EACT;AAAA,EACA,UAAU;AAAA,IACT,MAAM;AAAA,IACN,WAAW;AAAA,IACX,iBAAiB;AAAA,IACjB,oBAAoB;AAAA,IACpB,WAAW,SAAS;AACnB,UAAI,QAAQ,MAAM,QAAQ,WAAW,KAAK,MAAM,UAAU,WAAW,KAAK,KAAK,aAAa,IAAI,GAAG,IAAI;AACtG,aAAK,MAAM,WAAW;AACtB,aAAK,IAAI,aAAa,SAAS,mBAAmB;AAClD,gBAAQ,WAAW;AAAA,MACpB;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,EACT;AAAA,EACA,UAAU;AAAA,IACT,MAAM;AAAA,IACN,WAAW;AAAA,IACX,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAUC,QAAO,OAAOD,OAAM,KAAK,KAAK,aAAa,UAAU;AAC7E,aAAK,IAAI,aAAaC,SAAQ,mBAAmB;AACjD,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,EACrB;AAAA,EACA,UAAU;AAAA,IACT,MAAM;AAAA,IACN,WAAW;AAAA,IACX,6BAA6B;AAAA,IAC7B,oBAAoB,UAAUA,SAAQD,SAAQ;AAC7C,UAAIA,QAAO,OAAO,KAAK,YAAY,MAAM,KAAK,OAAO,aAAa,UAAU;AAC3E,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,IACD;AAAA,IACA,YAAY,SAAS;AACpB,cAAQ,KAAK,QAAQ,YAAY,CAAC;AAAA,IACnC;AAAA,IACA,OAAO,CAAC;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,MAAM;AAAA,IACN,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,aAAa;AAC3C,iBAAWC,WAAU,QAAQ,KAAK,GAAG;AACpC,YAAIA,QAAO,MAAM;AAChB,eAAK,IAAI,SAASA,SAAQA,QAAO,QAAQ,EAAE,MAAM,+BAA+B,UAAU,OAAO;AAAA,QAClG;AAAA,MACD;AAAA,IACD;AAAA,IACA,aAAa,MAAM;AAClB,WAAK,gBAAgB;AAAA,IACtB;AAAA,IACA,OAAO,CAAC;AAAA,EACT;AAAA,EACA,YAAY;AAAA,IACX,MAAM;AAAA,IACN,WAAW;AAAA,IACX,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,UAAU,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC9D,aAAK,MAAM,aAAa;AACxB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqB;AAAA,IACrB,YAAY,KAAK,UAAU,UAAU,MAAM;AAC1C,UAAI,KAAK,SAAS,UAAU,SAAS,MAAM,SAAS,QAAQ,GAAG;AAC9D,aAAK,MAAM,aAAa;AACxB,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,IACD;AAAA,IACA,qBAAqBA,SAAQD,SAAQ,MAAM;AAC1C,UAAIA,WAAUA,YAAWC,WAAU,SAAS,KAAK,MAAM,SAAS,KAAK,KAAK,SAAS,SAAS;AAC3F,YAAIA,QAAO,QAAQA,QAAO,cAAcA,QAAO,mBAAmBD,QAAO,eAAe,MAAM;AAC7F;AAAA,QACD;AACA,cAAM,WAAWA,QAAO,SAASC,OAAM;AACvC,YAAI,CAAC,UAAU;AACd;AAAA,QACD;AACA,YAAI,CAACA,QAAO,QAAQ,QAAQ,GAAG;AAC9B,UAAAD,QAAO,OAAO,SAAS;AACvB;AAAA,QACD;AACA,aAAK,IAAI,YAAYA,SAAQ,UAAU,YAAY,+BAA+B,UAAUA,OAAM;AAClG,aAAK,IAAI,SAASC,SAAQ,UAAU,+BAA+B,UAAUD,OAAM;AAAA,MACpF;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,EACT;AAAA,EACA,eAAe;AAAA,IACd,MAAM;AAAA,IACN,WAAW;AAAA,IACX,8BAA8B;AAAA,IAC9B,qBAAqB,UAAU,SAASC,SAAQ,MAAM;AACrD,UAAI,KAAK,aAAa,WAAW;AAChC,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,EACT;AAAA,EACA,iBAAiB;AAAA,IAChB,MAAM;AAAA,IACN,WAAW;AAAA,IACX,8BAA8B;AAAA,IAC9B,qBAAqB,UAAU,SAASA,SAAQ,MAAM;AACrD,UAAI,KAAK,aAAa,UAAU;AAC/B,eAAO;AAAA,MACR;AAAA,IACD;AAAA,IACA,aAAa,MAAM;AAClB,UAAI,KAAK,aAAa,UAAU;AAC/B,aAAK,gBAAgB;AACrB,aAAK,iBAAiB;AAAA,MACvB;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,EACT;AAAA,EACA,cAAc;AAAA,IACb,WAAW;AAAA,IACX,QAAQ,SAAS;AAChB,WAAK,IAAI,YAAY,SAAS,iBAAiB;AAAA,IAChD;AAAA,IACA,WAAWA,SAAQD,SAAQ;AAC1B,UAAI,CAACC,QAAO,OAAOD,OAAM;AAAG,eAAO;AAAA,IACpC;AAAA,IACA,iBAAiB,OAAOC,SAAQD,SAAQ,QAAQ;AAC/C,UAAI,CAACA,WAAUC,QAAO,OAAOD,OAAM;AAAG;AACtC,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,GAAG;AAClB,eAAK,MAAM,EAAC,KAAK,EAAC,GAAGC,SAAQA,SAAQ,MAAM,OAAO,IAAI;AACtD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,CAAC;AAAA,IACR,MAAM;AAAA,EACP;AAAA,EACA,aAAa;AAAA,IACZ,WAAW;AAAA,IACX,kBAAkB;AAAA,IAClB,SAASA,SAAQD,SAAQ,MAAM;AAC9B,UAAIC,YAAWD,WAAU,KAAK,cAAc,CAAC,KAAK,MAAM,aAAa,GAAG;AACvE;AAAA,MACD;AACA,YAAM,UAAU,KAAK,IAAI,cAAc,KAAK,EAAE;AAC9C,cAAQ,aAAa;AACrB,cAAQ,mBAAmB;AAC3B,WAAK,QAAQ,QAAQ,SAASC,SAAQD,OAAM;AAC5C,aAAO;AAAA,IACR;AAAA,IACA,iBAAiBC,SAAQD,SAAQ,MAAM;AACtC,UAAIC,QAAO,OAAOD,OAAM,KAAK,KAAK,cAAc,CAAC,KAAK,MAAM,aAAa,GAAG;AAC3E;AAAA,MACD;AACA,YAAM,UAAU,KAAK,IAAI,cAAc,KAAK,EAAE;AAC9C,cAAQ,aAAa;AACrB,cAAQ,mBAAmB;AAC3B,WAAK,QAAQ,QAAQ,SAAS,KAAK,YAAY,QAAQA,OAAM;AAC7D,aAAO;AAAA,IACR;AAAA,IACA,WAAW,OAAOC,SAAQD,SAAQ,QAAQ;AAEzC,UAAI,CAACA,WAAUC,YAAWD,WAAU,CAAC,SAAS,CAAC,gBAAgB,cAAc,EAAE,SAAS,OAAO,IAAI;AAAG;AACtG,UAAI;AACJ,WAAK,KAAK,OAAO;AAChB,YAAI,MAAM,CAAC,IAAK,KAAKC,QAAO,OAAO,CAAC,IAAI,IAAI;AAC3C,gBAAM,gBAAmC,CAAC;AAC1C,wBAAc,CAAC,IAAI,MAAM,CAAC;AAC1B,iBAAO,MAAM,CAAC;AACd,cAAID,QAAO,IAAI;AACd,iBAAK,IAAI,YAAYC,SAAQ,cAAc;AAC3C,iBAAK,MAAM,eAAeD,SAAQC,SAAQ,MAAM,IAAI;AAAA,UACrD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,IACA,OAAO,EAAC,WAAW,EAAC;AAAA,IACpB,MAAM;AAAA,EACP;AAAA;AAAA;AAAA,EAGA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,WAAW,OAAOA,SAAQD,SAAQ,QAAQ;AACzC,UAAI,CAAC,cAAa,WAAU,eAAc,gBAAe,kBAAiB,gBAAgB,EAAE,SAAS,OAAO,IAAI,GAAG;AAClH,YAAI,MAAM,KAAK;AACd,iBAAO,MAAM;AACb,eAAK,IAAI,SAASC,SAAQ,WAAW,UAAU,+BAA+B,UAAUA,OAAM;AAAA,QAC/F;AAAA,MACD,WAAW,OAAO,SAAS,kBAAkB,MAAM,KAAK;AACvD,eAAO,MAAM;AACb,aAAK,IAAI,SAASA,SAAQ,WAAW,SAAS,+BAA+B,UAAUA,OAAM;AAAA,MAC9F;AAAA,IACD;AAAA,EACD;AAAA,EACA,yBAAyB;AAAA,IACxB,SAAS;AAAA,IACT,QAAQ,SAAS;AAChB,UAAI,QAAQ,YAAY,SAAS,+BAA+B,CAAC,KAAK,YAAY,UAAU;AAC3F,aAAK,YAAY,WAAW;AAC5B,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,OAAO;AAAA,MAC7B;AAAA,IACD;AAAA,EACD;AAAA,EACA,yBAAyB;AAAA,IACxB,SAAS;AAAA,IACT,QAAQ,SAAS;AAChB,UAAI,QAAQ,YAAY,SAAS,+BAA+B,CAAC,KAAK,YAAY,UAAU;AAC3F,aAAK,YAAY,WAAW;AAC5B,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,OAAO;AAAA,MAC7B;AAAA,IACD;AAAA,EACD;AAAA,EACA,kBAAkB;AAAA,IACjB,SAAS;AAAA,IACT,QAAQ,SAAS;AAChB,UAAI,QAAQ,YAAY,SAAS,wBAAwB,CAAC,KAAK,YAAY,UAAU;AACpF,aAAK,YAAY,WAAW;AAC5B,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,OAAO;AAAA,MAC7B;AAAA,IACD;AAAA,EACD;AAAA,EACA,wBAAwB;AAAA,IACvB,SAAS;AAAA,IACT,QAAQ,SAAS;AAChB,UAAI,QAAQ,YAAY,SAAS,8BAA8B,CAAC,KAAK,YAAY,UAAU;AAC1F,aAAK,YAAY,WAAW;AAC5B,aAAK,MAAM,EAAC,KAAK,EAAC,GAAG,OAAO;AAAA,MAC7B;AAAA,IACD;AAAA,EACD;AAAA,EACA,aAAa;AAAA,IACZ,YAAY,SAAS;AAMpB,UAAI,QAAQ,KAAK,OAAO,WAAW,KAC1B,QAAQ,aAAa,QAAQ,QAAQ,aAAa;AAAO;AAElE,YAAM,WAAW,CAAC;AAClB,UAAI,cAAc;AAClB,iBAAW,WAAW,QAAQ,KAAK,QAAQ;AAE1C,YAAI,CAAC,WAAW,CAAC,QAAQ,QAAQ;AAEhC;AAAA,QACD;AACA,YAAI,QAAQ,UAAU;AAErB;AAAA,QACD;AACA,cAAM,UAAU,QAAQ;AAExB,YAAI,CAAC,OAAO,OAAO,QAAQ,SAAS,EAAE,SAAS,cAAc,KAAK,CAAC,OAAO,OAAO,QAAQ,SAAS,EAAE,SAAS,mBAAmB,KAAK,CAAC,OAAO,OAAO,QAAQ,SAAS,EAAE,SAAS,YAAY,GAAG;AAE9L;AAAA,QACD;AAEA,YAAI,CAAC,QAAQ,UAAU,GAAG,KAAK,CAAC,QAAQ,UAAU,GAAG,GAAG;AAEvD;AAAA,QACD;AAEA,YAAI,YAAY,WAAW,CAAC,KAAK,MAAM,WAAW,OAAO,GAAG;AAE3D;AAAA,QACD;AAEA,YAAI,QAAQ,WAAW,CAAC,eAAc,cAAa,kBAAkB,CAAC,GAAG;AAExE,mBAAS,KAAK,OAAO;AAAA,QACtB,OAAO;AAEN;AAAA,QACD;AAAA,MACD;AAEA,UAAI,CAAC,SAAS,UAAU,CAAC,aAAa;AAErC,mBAAW,QAAQ,UAAU;AAC5B,eAAK,WAAW;AAAA,QACjB;AAAA,MACD,OAAO;AAIN,aAAK,IAAI,YAAY,MAAM,SAAS,SAAS,SAAS,QAAQ,KAAK,OAAO,iBAAiB,SAAS,WAAW,IAAI,QAAQ,UAAU,0BAA0B;AAE/J,mBAAW,QAAQ,UAAU;AAC5B,eAAK,WAAW;AAAA,QACjB;AAAA,MACD;AAAA,IACD;AAAA,IACA,SAAS;AAAA,EACV;AAAA,EACA,iBAAiB;AAAA,IAChB,SAAS;AAAA;AAAA,IAET,WAAW,SAAS;AACnB,WAAK,IAAI,YAAY,SAAS,kBAAkB;AAChD,cAAQ,aAAa,SAAS;AAC9B,YAAM,iBAAiB,CAAC,gBAAgB,iBAAiB,aAAa;AACtE,iBAAWA,WAAU,KAAK,aAAa,GAAG;AACzC,YAAIA,QAAO,QAAQ,gBAAgB,GAAG;AACrC,eAAK,IAAI,UAAUA,SAAQ,sBAAsB;AACjD;AAAA,QACD;AAEA,YAAIA,QAAO,UAAU,YAAY,GAAG;AACnC;AAAA,QACD;AACA,YAAIA,QAAO,UAAU;AACpB,eAAK,YAAY,OAAO,KAAK,IAAI,UAAU,IAAI,aAAa,GAAGA,QAAO,cAAcA,SAAQ,SAAS,iBAAiB;AAAA,QACvH;AACA,YAAIA,QAAO,UAAU,WAAW,GAAG;AAClC,iBAAOA,QAAO,UAAU,WAAW;AACnC,eAAK,IAAI,QAAQA,SAAQ,cAAc,UAAU;AAAA,QAClD;AACA,cAAM,eAAeA,QAAO,WAAW,EAAE;AACzC,YAAI,CAAC,UAAS,qBAAqB,EAAE,SAAS,YAAY,GAAG;AAC5D,UAAAA,QAAO,eAAe,iBAAiB;AAAA,QACxC,WAAW,eAAe,SAAS,YAAY,GAAG;AACjD,eAAK,YAAY,OAAO,KAAK,IAAI,UAAU,IAAIA,QAAO,WAAW,EAAE,EAAE,GAAGA,QAAO,cAAcA,SAAQ,SAAS,iBAAiB;AAAA,QAChI;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA;AAAA,EAEA,gBAAgB;AAAA,IACf,SAAS;AAAA,IACT,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ,SAASD,SAAQ,QAAQ;AAChC,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAa,SAAS,cAAc,QAAQ,WAAW,EAAE,MAAM,YAAY;AAAA,QACrF,OAAO;AACN,eAAK,IAAI,aAAa,SAAS,cAAc,QAAQ,WAAW,EAAE,IAAI;AAAA,QACvE;AACA,aAAK,YAAY,WAAW,QAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAU,SAAS,mBAAmB,KAAK,YAAY,QAAQ;AAAA,MACzE;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,mBAAWC,WAAU,QAAQ,KAAK,GAAG;AACpC,cAAIA,QAAO,WAAW,iBAAiB,GAAG;AACzC,iBAAK,MAAM,oCAAoC;AAC/C;AAAA,UACD;AAAA,QACD;AACA,aAAK,MAAM,0BAA0B;AACrC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,MACA,MAAM,SAAS;AACd,aAAK,IAAI,QAAQ,SAAS,gBAAgB;AAAA,MAC3C;AAAA,IACD;AAAA,IACA,MAAM;AAAA,EACP;AAAA,EACA,YAAY;AAAA,IACX,SAAS;AAAA,IACT,WAAW;AAAA,MACV,QAAQ;AAAA,MACR,QAAQ,SAASD,SAAQ,QAAQ;AAChC,YAAI,QAAQ,SAAS,kBAAkB;AACtC,eAAK,YAAY,cAAc;AAC/B,eAAK,IAAI,aAAa,SAAS,cAAc,QAAQ,WAAW,EAAE,MAAM,YAAY;AAAA,QACrF,OAAO;AACN,eAAK,IAAI,aAAa,SAAS,cAAc,QAAQ,WAAW,EAAE,IAAI;AAAA,QACvE;AACA,aAAK,YAAY,WAAW,QAAQ,YAAY,OAAO,IAAI;AAC3D,aAAK,IAAI,UAAU,SAAS,eAAe,KAAK,YAAY,QAAQ;AAAA,MACrE;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,qBAAqB;AAAA,MACrB,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,CAAC,MAAM,IAAI,CAAC;AAAA,MACrC;AAAA,MACA,YAAY,KAAK,SAAS;AACzB,YAAI,KAAK,YAAY,aAAa,SAAS,QAAQ,gBAAgB;AAAG;AACtE,mBAAWC,WAAU,QAAQ,KAAK,GAAG;AACpC,cAAIA,QAAO,WAAW,iBAAiB,GAAG;AACzC,iBAAK,MAAM,oCAAoC;AAC/C;AAAA,UACD;AAAA,QACD;AACA,aAAK,MAAM,uBAAuB;AAClC,eAAO,KAAK,YAAY,GAAG;AAAA,MAC5B;AAAA,MACA,MAAM,SAAS;AACd,aAAK,IAAI,QAAQ,SAAS,aAAa;AAAA,MACxC;AAAA,IACD;AAAA,EACD;AACD;",
  "names": ["source", "target", "source2"]
}
