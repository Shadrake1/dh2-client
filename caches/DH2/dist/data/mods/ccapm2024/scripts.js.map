{
  "version": 3,
  "sources": ["../../../../data/mods/ccapm2024/scripts.ts"],
  "sourcesContent": ["export const Scripts: {[k: string]: ModdedBattleScriptsData} = {\r\n\tgen: 9,\r\n\tteambuilderConfig: {\r\n\t\t// for micrometas to only show custom tiers\r\n\t\texcludeStandardTiers: true,\r\n\t\t// only to specify the order of custom tiers\r\n\t\tcustomTiers: ['CCAPM2024'],\r\n\t},\t\r\n\t\r\n\tinit() {\r\n\t\t\r\n\t},\r\n\tbattle: {\r\n\t},\r\n\tactions: {\r\n\t\tsecondaries(targets: SpreadMoveTargets, source: Pokemon, move: ActiveMove, moveData: ActiveMove, isSelf?: boolean) {\r\n\t\t\tif (!moveData.secondaries) return;\r\n\t\t\tfor (const target of targets) {\r\n\t\t\t\tif (target === false) continue;\r\n\t\t\t\tconst secondaries: Dex.SecondaryEffect[] =\r\n\t\t\t\t\tthis.battle.runEvent('ModifySecondaries', target, source, moveData, moveData.secondaries.slice());\r\n\t\t\t\tfor (const secondary of secondaries) {\r\n\t\t\t\t\tconst secondaryRoll = this.battle.random(100);\r\n\t\t\t\t\t// User stat boosts or target stat drops can possibly overflow if it goes beyond 256 in Gen 8 or prior\r\n\t\t\t\t\tconst secondaryOverflow = (secondary.boosts || secondary.self) && this.battle.gen <= 8;\r\n\t\t\t\t\tif (typeof secondary.chance === 'undefined' ||\r\n\t\t\t\t\t\tsecondaryRoll < (secondaryOverflow ? secondary.chance % 256 : secondary.chance)) {\r\n\t\t\t\t\t\tlet flag = true;\r\n\t\t\t\t\t\tlet canSetStatus = function (status, target, pokemon) {\r\n\t\t\t\t\t\t\tif (!target || target === false || target.status) return false;\r\n\t\t\t\t\t\t\tlet cantStatus = {\r\n\t\t\t\t\t\t\t\tbrn: ['Fire', 'comatose', 'waterveil', 'waterbubble'],\r\n\t\t\t\t\t\t\t\tfrz: ['Ice', 'comatose', 'magmaarmor'],\r\n\t\t\t\t\t\t\t\tpar: ['Electric', 'comatose', 'limber'],\r\n\t\t\t\t\t\t\t\tpsn: ['comatose', 'immunity'],\r\n\t\t\t\t\t\t\t\tslp: ['comatose', 'insomnia', 'vitalspirit'],\r\n\t\t\t\t\t\t\t\ttox: ['comatose', 'immunity'],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tif (target.hasType(['Poison', 'Steel']) && (status === 'psn' || status === 'tox')) {\r\n\t\t\t\t\t\t\t\tif (pokemon.hasAbility('corrosion')) {\r\n\t\t\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (target.hasType(cantStatus[status][0])) return false;\r\n\t\t\t\t\t\t\tif (move.ignoreAbility) return true;\r\n\t\t\t\t\t\t\tif (target.hasAbility('leafguard') && this.isWeather(['sunnyday', 'desolateland'])) return false;\r\n\t\t\t\t\t\t\tif (target.hasAbility('shieldsdown') && target.template.speciesid === 'miniormeteor') return false;\r\n\t\t\t\t\t\t\tif (target.hasAbility(cantStatus[status])) return false;\r\n\t\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (moveData.secondary.status) flag = canSetStatus(moveData.secondary.status, target, source);\r\n\t\t\t\t\t\tif (moveData.secondary.volatileStatus) flag = !(moveData.secondary.volatileStatus in target.volatiles);\r\n\t\t\t\t\t\tif (moveData.secondary.volatileStatus === 'flinch') flag = flag && target.activeTurns && !target.moveThisTurn;\r\n\t\t\t\t\t\tthis.moveHit(target, source, move, secondary, true, isSelf);\r\n\t\t\t\t\t\tif (moveData.secondary.self && moveData.secondary.self.boosts) {\r\n\t\t\t\t\t\t\tObject.keys(moveData.secondary.self.boosts).forEach(boost => {\r\n\t\t\t\t\t\t\t\tif (source.boosts[boost] === 6) flag = false;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tflag = flag && !(target.hp === undefined || target.hp <= 0);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (moveData.target !== 'self' && moveData.secondary.boosts) {\r\n\t\t\t\t\t\t\tlet cantLower = {\r\n\t\t\t\t\t\t\t\t'atk': ['clearbody', 'fullmetalbody', 'hypercutter', 'whitesmoke'],\r\n\t\t\t\t\t\t\t\t'def': ['bigpecks', 'clearbody', 'fullmetalbody', 'whitesmoke'],\r\n\t\t\t\t\t\t\t\t'spa': ['clearbody', 'fullmetalbody', 'whitesmoke'],\r\n\t\t\t\t\t\t\t\t'spd': ['clearbody', 'fullmetalbody', 'whitesmoke'],\r\n\t\t\t\t\t\t\t\t'spe': ['clearbody', 'fullmetalbody', 'whitesmoke'],\r\n\t\t\t\t\t\t\t\t'accuracy': ['clearbody', 'fullmetalbody', 'keeneye', 'whitesmoke'],\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tfor (let k in moveData.secondary.boosts) {\r\n\t\t\t\t\t\t\t\tif (target.boosts[k] === -6) {\r\n\t\t\t\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (moveData.secondary.boosts[k] < 0 && target.hasAbility(cantLower[k]) && !move.ignoreAbility) {\r\n\t\t\t\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (source.hasAbility('sheerforce')) flag = false;\r\n\t\t\t\t\t\tif (target && target.hasAbility('shielddust') && !move.ignoreAbility && !move.secondary.self.boosts) {\r\n\t\t\t\t\t\t\tflag = false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (flag && target.hasAbility('countermeasures')) {\r\n\t\t\t\t\t\t\tthis.battle.add('-activate', target, 'ability: Countermeasures');\r\n\t\t\t\t\t\t\tthis.battle.damage(source.baseMaxhp * (100 - secondary.chance) / 100, source, target);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tside: {\r\n\t\taddFishingTokens(amount: number) {\r\n\t\t\tif(amount === 0) return;\r\n\t\t\tif(this.fishingTokens === undefined) this.fishingTokens = 0;\r\n\t\t\tif(this.battle.field.isTerrain('fishingterrain')) amount *= 2;\r\n\t\t\tthis.fishingTokens += amount;\r\n\t\t\tconst word = (amount === 1) ? 'token was' : 'tokens were';\r\n\t\t\tthis.battle.add('-message', `${amount} fishing ${word} added to ${this.name}'s side!`);\r\n\t\t\tthis.battle.hint(`They now have ${this.fishingTokens} tokens.`);\r\n\t\t},\r\n\t\tremoveFishingTokens(amount: number) {\r\n\t\t\tif(amount === 0) return;\r\n\t\t\tif(this.fishingTokens === undefined) this.fishingTokens = 0;\r\n\t\t\tif (amount > this.fishingTokens) {\r\n\t\t\t\t//this.add('-message', `There weren't enough fishing tokens on the field!`);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.fishingTokens -= amount;\r\n\t\t\tconst word = (amount === 1) ? 'token was' : 'tokens were';\r\n\t\t\tthis.battle.add('-message', `${amount} fishing ${word} removed from ${this.name}'s side!`);\r\n\t\t\tthis.battle.hint(`They now have ${this.fishingTokens} tokens.`);\r\n\t\t\treturn true;\r\n\t\t},\r\n\t},\r\n\tpokemon: {\r\n\t\t\r\n\t},\r\n};\r\n"],
  "mappings": "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",
  "names": ["target"]
}
