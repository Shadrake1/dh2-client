{
  "version": 3,
  "sources": ["../../../../data/mods/jollymod/conditions.ts"],
  "sourcesContent": ["import {FS} from '../../../lib';\r\nimport {toID} from '../../../sim/dex-data';\r\nimport {Pokemon} from \"../../../sim/pokemon\";\r\n\r\n// Similar to User.usergroups. Cannot import here due to users.ts requiring Chat\r\n// This also acts as a cache, meaning ranks will only update when a hotpatch/restart occurs\r\nconst usergroups: {[userid: string]: string} = {};\r\nconst usergroupData = FS('config/usergroups.csv').readIfExistsSync().split('\\n');\r\nfor (const row of usergroupData) {\r\n\tif (!toID(row)) continue;\r\n\r\n\tconst cells = row.split(',');\r\n\tif (cells.length > 3) throw new Error(`Invalid entry when parsing usergroups.csv`);\r\n\tusergroups[toID(cells[0])] = cells[1].trim() || ' ';\r\n}\r\n\r\nexport function getName(name: string): string {\r\n\tconst userid = toID(name);\r\n\tif (!userid) throw new Error('No/Invalid name passed to getSymbol');\r\n\r\n\tconst group = usergroups[userid] || ' ';\r\n\treturn group + name;\r\n}\r\n\r\nexport const Conditions: {[id: string]: ModdedConditionData} = {\r\n\tsnow: {\r\n\t\tname: 'Snow',\r\n\t\teffectType: 'Weather',\r\n\t\tduration: 0,\r\n\t\tonFieldStart(field, source, effect) {\r\n\t\t\tthis.add('-weather', 'Snow');\r\n\t\t\tthis.effectState.cooldown = 5;\r\n\t\t},\r\n\t\tonFieldResidualOrder: 1,\r\n\t\tonFieldResidual() {\r\n\t\t\tthis.add('-weather', 'Snow', '[upkeep]');\r\n\t\t\tif (this.field.isWeather('snow')) this.eachEvent('Weather');\r\n\t\t\t\r\n\t\t\tlet probability = 4;\r\n\t\t\tif (this.field.pseudoWeather.milkandcookies) probability = 2;\r\n\t\t\tif (this.effectState.cooldown === 0 && this.randomChance(1, probability)) {\r\n\t\t\t\tthis.add('-message', 'Santa came to visit!');\r\n\t\t\t\tconst side1 = this.sides[0];\r\n\t\t\t\tconst side2 = this.sides[1];\r\n\t\t\t\t\r\n\t\t\t\tif (side1.karma > side2.karma) {\r\n\t\t\t\t\tside1.reward();\r\n\t\t\t\t\tside2.punish();\r\n\t\t\t\t} else if (side2.karma > side1.karma){\r\n\t\t\t\t\tside2.reward();\r\n\t\t\t\t\tside1.punish();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.add('-message', 'Both sides have the same karma, so Santa left.');\r\n\t\t\t\t}\r\n\t\t\t\tthis.effectState.cooldown = 5;\r\n\t\t\t} else if (this.effectState.cooldown !== 0) this.effectState.cooldown --;\r\n\t\t},\r\n\t},\r\n\tfsb: {\r\n\t\tname: 'fsb',\r\n\t\tstart: \"  [Pokemon] was chilled!\",\r\n\t\talreadyStarted: \"  [POKEMON] is already chilled!\",\r\n\t\tend: \"  [POKEMON] warmed up!\",\r\n\t\tendFromItem: \"  [POKEMON]'s [ITEM] warmed it up!\",\r\n\t\tendFromMove: \"  [POKEMON]'s [MOVE] warmed it up!\",\r\n\t\tcant: \"[POKEMON] is chilled!\",\r\n\t\teffectType: 'Status',\r\n\t\tonStart(target, source, sourceEffect) {\r\n\t\t\tthis.add('-start', target, 'Frostbite', '[silent]');\r\n\t\t\tthis.add('-message', `${target.name} was frostbitten!`);\r\n\t\t},\r\n\t\tonResidualOrder: 9,\r\n\t\tonResidual(pokemon) {\r\n\t\t\tthis.damage(pokemon.baseMaxhp / 16);\r\n\t\t},\r\n\t\tonModifySpA(spa, pokemon) {\r\n\t\t\treturn this.chainModify(0.5);\r\n\t\t},\r\n\t},\r\n}\r\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAAiB;AACjB,sBAAmB;AAKnB,MAAM,aAAyC,CAAC;AAChD,MAAM,oBAAgB,eAAG,uBAAuB,EAAE,iBAAiB,EAAE,MAAM,IAAI;AAC/E,WAAW,OAAO,eAAe;AAChC,MAAI,KAAC,sBAAK,GAAG;AAAG;AAEhB,QAAM,QAAQ,IAAI,MAAM,GAAG;AAC3B,MAAI,MAAM,SAAS;AAAG,UAAM,IAAI,MAAM,2CAA2C;AACjF,iBAAW,sBAAK,MAAM,CAAC,CAAC,CAAC,IAAI,MAAM,CAAC,EAAE,KAAK,KAAK;AACjD;AAEO,SAAS,QAAQ,MAAsB;AAC7C,QAAM,aAAS,sBAAK,IAAI;AACxB,MAAI,CAAC;AAAQ,UAAM,IAAI,MAAM,qCAAqC;AAElE,QAAM,QAAQ,WAAW,MAAM,KAAK;AACpC,SAAO,QAAQ;AAChB;AAEO,MAAM,aAAkD;AAAA,EAC9D,MAAM;AAAA,IACL,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,UAAU;AAAA,IACV,aAAa,OAAO,QAAQ,QAAQ;AACnC,WAAK,IAAI,YAAY,MAAM;AAC3B,WAAK,YAAY,WAAW;AAAA,IAC7B;AAAA,IACA,sBAAsB;AAAA,IACtB,kBAAkB;AACjB,WAAK,IAAI,YAAY,QAAQ,UAAU;AACvC,UAAI,KAAK,MAAM,UAAU,MAAM;AAAG,aAAK,UAAU,SAAS;AAE1D,UAAI,cAAc;AAClB,UAAI,KAAK,MAAM,cAAc;AAAgB,sBAAc;AAC3D,UAAI,KAAK,YAAY,aAAa,KAAK,KAAK,aAAa,GAAG,WAAW,GAAG;AACzE,aAAK,IAAI,YAAY,sBAAsB;AAC3C,cAAM,QAAQ,KAAK,MAAM,CAAC;AAC1B,cAAM,QAAQ,KAAK,MAAM,CAAC;AAE1B,YAAI,MAAM,QAAQ,MAAM,OAAO;AAC9B,gBAAM,OAAO;AACb,gBAAM,OAAO;AAAA,QACd,WAAW,MAAM,QAAQ,MAAM,OAAM;AACpC,gBAAM,OAAO;AACb,gBAAM,OAAO;AAAA,QACd,OAAO;AACN,eAAK,IAAI,YAAY,gDAAgD;AAAA,QACtE;AACA,aAAK,YAAY,WAAW;AAAA,MAC7B,WAAW,KAAK,YAAY,aAAa;AAAG,aAAK,YAAY;AAAA,IAC9D;AAAA,EACD;AAAA,EACA,KAAK;AAAA,IACJ,MAAM;AAAA,IACN,OAAO;AAAA,IACP,gBAAgB;AAAA,IAChB,KAAK;AAAA,IACL,aAAa;AAAA,IACb,aAAa;AAAA,IACb,MAAM;AAAA,IACN,YAAY;AAAA,IACZ,QAAQ,QAAQ,QAAQ,cAAc;AACrC,WAAK,IAAI,UAAU,QAAQ,aAAa,UAAU;AAClD,WAAK,IAAI,YAAY,GAAG,OAAO,uBAAuB;AAAA,IACvD;AAAA,IACA,iBAAiB;AAAA,IACjB,WAAW,SAAS;AACnB,WAAK,OAAO,QAAQ,YAAY,EAAE;AAAA,IACnC;AAAA,IACA,YAAY,KAAK,SAAS;AACzB,aAAO,KAAK,YAAY,GAAG;AAAA,IAC5B;AAAA,EACD;AACD;",
  "names": []
}
